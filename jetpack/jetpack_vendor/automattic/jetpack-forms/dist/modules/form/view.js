import*as e from"@wordpress/interactivity";var t={990:(e,t,r)=>{r.d(t,{j:()=>o});const o=(e,t,r,o=null)=>{if(""===t&&r)return"is_required";if(!r&&""===t)return"yes";if("checkbox-multiple"===e)return 0!==t.length?"yes":"is_required";if("date"===e)return((e,t)=>{let r,o,i;if(!e)return!1;switch(t){case"mm/dd/yy":[o,i,r]=e.split("/").map(Number);break;case"dd/mm/yy":[i,o,r]=e.split("/").map(Number);break;case"yy-mm-dd":[r,o,i]=e.split("-").map(Number);break;default:return!1}if(isNaN(r)||isNaN(o)||isNaN(i))return!1;const s=new Date(r,o-1,i);return s.getFullYear()===r&&s.getMonth()===o-1&&s.getDate()===i})(t,o)?"yes":"invalid_date";if("number"===e)return function(e,t){if(!/^-?\d+(\.\d+)?$/.test(e))return"invalid_number";const r=parseFloat(e);return t&&void 0!==t.min&&r<parseFloat(t.min)?"invalid_min_number":t&&void 0!==t.max&&r>parseFloat(t.max)?"invalid_max_number":"yes"}(t,o);if("file"===e)return t.some((e=>e.error))?"invalid_file_has_errors":t.some((e=>!e.isUploaded))?"invalid_file_uploading":"yes";let i=null;switch(e){case"url":i=/(?:(?:[Hh][Tt][Tt][Pp][Ss]?|[Ff][Tt][Pp]):\/\/)?(?:\S+(?::\S*)?@|\d{1,3}(?:\.\d{1,3}){3}|(?:[a-zA-Z\d\u00a1-\uffff](?:[a-zA-Z\d\u00a1-\uffff-]*[a-zA-Z\d\u00a1-\uffff])?)(?:\.[a-zA-Z\d\u00a1-\uffff](?:[a-zA-Z\d\u00a1-\uffff-]*[a-zA-Z\d\u00a1-\uffff])?)*(?:\.[a-zA-Z\u00a1-\uffff]{2,6}))(?::\d+)?(?:[^\s]*)?/;break;case"email":i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;break;case"telephone":i=/^\+?[0-9\s\-()]+$/;break;case"number":i=/^[0-9]+$/}return i&&!i.test(t)?"invalid_"+e:"yes"}},841:(e,t,r)=>{r.d(t,{Kz:()=>i,No:()=>s,rM:()=>n});const o=e=>document.getElementById("jp-form-"+e),i=e=>{const t=o(e);if(!t)return;const r=t.querySelector(".is-current-step").querySelectorAll("input, select, textarea, .jetpack-form-file-field__dropzone-inner, [tabindex]:not([disabled])");r[0]?.focus()},s=e=>{const t=o(e);t&&t.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},n=async e=>{const t=o(e);if(!t)return{success:!1,error:"Form not found"};try{const e=new FormData(t),r=t.getAttribute("action"),o=await fetch(r,{method:"POST",body:e,headers:{Accept:"application/json"}});if(!o.ok)return{success:!1,error:o.status};return await o.json()}catch(e){return{success:!1,error:e.message}}}},833:(t,r,o)=>{t.exports=(e=>{var t={};return o.d(t,e),t})({getConfig:()=>e.getConfig,getContext:()=>e.getContext,store:()=>e.store,withSyncEvent:()=>e.withSyncEvent})}},r={};function o(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i=o(833),s=o(990),n=o(841);const a=i.withSyncEvent||(e=>(...t)=>e(...t)),l="jetpack/form",u=(0,i.getConfig)(l),d=(e,t,r=!1)=>{const o=(0,i.getContext)();let n=o.fields[e];if(!n){const{fieldType:t,fieldLabel:r,fieldValue:i,fieldIsRequired:s,fieldExtra:a}=o;f(e,t,r,i,s,a),n=o.fields[e]}if(n){const{type:e,isRequired:o,extra:i}=n;n.value=t,n.error=(0,s.j)(e,t,o,i),n.showFieldError=r}},f=(e,t,r="",o="",n=!1,a=null)=>{const l=(0,i.getContext)();l.fields[e]||(l.fields[e]={id:e,type:t,label:r,value:o,isRequired:n,extra:a,error:(0,s.j)(t,o,n,a),step:l?.step?l.step:1})},c=e=>{if("number"===e.type){if("invalid_min_number"===e.error)return u.error_types.invalid_min_number.replace("%d",e.extra.min);if("invalid_max_number"===e.error)return u.error_types.invalid_max_number.replace("%d",e.extra.max)}return u.error_types&&u.error_types[e.error]},{state:m}=(0,i.store)(l,{state:{get fieldHasErrors(){const e=(0,i.getContext)(),t=e.fieldId,r=e.fields[t]||{};return!(!e.showErrors&&r.error&&"is_required"===r.error)&&((e.showErrors||r.showFieldError)&&r.error&&"yes"!==r.error)},get isFormEmpty(){const e=(0,i.getContext)();return!(e?.maxSteps&&e.maxSteps>0)&&!Object.values(e.fields).some((e=>""!==e.value))},get isFieldEmpty(){const e=(0,i.getContext)(),t=e.fieldId,r=e.fields[t]||{};return!!(""===r.value||Array.isArray(r.value)&&0===r.value.length)},get hasFieldValue(){return!m.isFieldEmpty},get isSubmitting(){return(0,i.getContext)().isSubmitting},get isAriaDisabled(){return m.isSubmitting},get errorMessage(){const e=(0,i.getContext)(),t=e.fieldId,r=e.fields[t]||{};return(e.showErrors||r.showFieldError)&&r.error?c(r):""},get isFormValid(){if(m.isFormEmpty)return!1;const e=(0,i.getContext)();return e.isMultiStep?!Object.values(e.fields).some((t=>"yes"!==t.error&&t.step===e.currentStep)):!Object.values(e.fields).some((e=>"yes"!==e.error))},get showFromErrors(){const e=(0,i.getContext)();return!m.isFormValid&&e.showErrors},get getFormErrorMessage(){if(m.isFormEmpty){if((0,i.getContext)().isMultiStep)return u.error_types.invalid_form_empty}return u.error_types.invalid_form},get getErrorList(){const e=[];if(m.isFormEmpty)return e;const t=(0,i.getContext)();return t.showErrors&&Object.values(t.fields).forEach((r=>{t.isMultiStep&&r.step!==t.currentStep||r.error&&"yes"!==r.error&&e.push({anchor:"#"+r.id,label:r.label+" : "+c(r),id:r.id})})),e},get getFieldValue(){const e=(0,i.getContext)(),t=e.fieldId;return e.fields[t].value},get submissionError(){return(0,i.getContext)().submissionError||""}},actions:{updateFieldValue:(e,t)=>{d(e,t)},handleNumberKeyPress:a((e=>{/^[0-9.]*$/.test(e.key)||e.preventDefault(),"."===e.key&&e.target.value.includes(".")&&e.preventDefault()})),onFieldChange:e=>{let t=e.target.value;const r=(0,i.getContext)(),o=r.fieldId;"checkbox"===r.fieldType&&(t=e.target.checked?"1":""),d(o,t)},onMultipleFieldChange:e=>{const t=(0,i.getContext)(),r=t.fieldId,o=t.fields[r],s=e.target.value;let n=[...o.value||[]];e.target.checked?n.push(s):n=n.filter((e=>e!==s)),d(r,n)},onFieldBlur:e=>{const t=(0,i.getContext)();d(t.fieldId,e.target.value,!0)},onFormSubmit:a((function*(e){const t=(0,i.getContext)();if(!m.isFormValid)return t.showErrors=!0,e.preventDefault(),void e.stopPropagation();if(t.isMultiStep&&t.currentStep<t.maxSteps){t.currentStep+=1,t.showErrors=!1,e.preventDefault(),e.stopPropagation();const r=t.formHash;setTimeout((()=>{(0,n.Kz)(r)}),100)}else t.isSubmitting=!0,t.isAjaxSubmissionEnabled&&(e.preventDefault(),e.stopPropagation(),yield(0,n.rM)(t.formHash),t.isSubmitting=!1)})),onKeyDownTextarea:a((e=>{if("Enter"!==e.key||!e.shiftKey)return;e.preventDefault(),e.stopPropagation();const t=(0,i.getContext)();(0,n.No)(t.formHash)})),scrollIntoView:a((e=>{const t=(0,i.getContext)(),r=document.querySelector(t.item.anchor);if(r)return r.focus({preventScroll:!0}),r.scrollIntoView({behavior:"smooth"}),void e.preventDefault();const o=t.item.anchor.substring(1),s=document.querySelector('[name="'+o+'"]');if(s)return s.focus({preventScroll:!0}),s.scrollIntoView({behavior:"smooth"}),void e.preventDefault();const n=document.getElementById(o+"-label");n&&(n.querySelector("input").focus({preventScroll:!0}),n.scrollIntoView({behavior:"smooth"}),e.preventDefault())}))},callbacks:{initializeField(){const e=(0,i.getContext)(),{fieldId:t,fieldType:r,fieldLabel:o,fieldValue:s,fieldIsRequired:n,fieldExtra:a}=e;f(t,r,o,s,n,a)}}});