"use strict";var wp;(wp||={}).sync=(()=>{var cl=Object.create;var qr=Object.defineProperty;var ll=Object.getOwnPropertyDescriptor;var ul=Object.getOwnPropertyNames;var dl=Object.getPrototypeOf,hl=Object.prototype.hasOwnProperty;var tr=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var nr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ao=(t,e)=>{for(var n in e)qr(t,n,{get:e[n],enumerable:!0})},co=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ul(e))!hl.call(t,i)&&i!==n&&qr(t,i,{get:()=>e[i],enumerable:!(r=ll(e,i))||r.enumerable});return t};var vn=(t,e,n)=>(n=t!=null?cl(dl(t)):{},co(e||!t||!t.__esModule?qr(n,"default",{value:t,enumerable:!0}):n,t)),fl=t=>co(qr({},"__esModule",{value:!0}),t);var sc=nr((ki,ic)=>{(function(t,e){typeof ki=="object"&&typeof ic<"u"?e(ki):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.Diff={}))})(ki,function(t){"use strict";function e(){}e.prototype={diff:function(b,k){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},V=D.callback;typeof D=="function"&&(V=D,D={}),this.options=D;var N=this;function H(se){return V?(setTimeout(function(){V(void 0,se)},0),!0):se}b=this.castInput(b),k=this.castInput(k),b=this.removeEmpty(this.tokenize(b)),k=this.removeEmpty(this.tokenize(k));var Y=k.length,W=b.length,G=1,Q=Y+W,ie=[{newPos:-1,components:[]}],re=this.extractCommon(ie[0],k,b,0);if(ie[0].newPos+1>=Y&&re+1>=W)return H([{value:this.join(k),count:k.length}]);function me(){for(var se=-1*G;se<=G;se+=2){var Ne=void 0,je=ie[se-1],Me=ie[se+1],He=(Me?Me.newPos:0)-se;je&&(ie[se-1]=void 0);var Ce=je&&je.newPos+1<Y,_t=Me&&0<=He&&He<W;if(!Ce&&!_t){ie[se]=void 0;continue}if(!Ce||_t&&je.newPos<Me.newPos?(Ne=r(Me),N.pushComponent(Ne.components,void 0,!0)):(Ne=je,Ne.newPos++,N.pushComponent(Ne.components,!0,void 0)),He=N.extractCommon(Ne,k,b,se),Ne.newPos+1>=Y&&He+1>=W)return H(n(N,Ne.components,k,b,N.useLongestToken));ie[se]=Ne}G++}if(V)(function se(){setTimeout(function(){if(G>Q)return V();me()||se()},0)})();else for(;G<=Q;){var Se=me();if(Se)return Se}},pushComponent:function(b,k,D){var V=b[b.length-1];V&&V.added===k&&V.removed===D?b[b.length-1]={count:V.count+1,added:k,removed:D}:b.push({count:1,added:k,removed:D})},extractCommon:function(b,k,D,V){for(var N=k.length,H=D.length,Y=b.newPos,W=Y-V,G=0;Y+1<N&&W+1<H&&this.equals(k[Y+1],D[W+1]);)Y++,W++,G++;return G&&b.components.push({count:G}),b.newPos=Y,W},equals:function(b,k){return this.options.comparator?this.options.comparator(b,k):b===k||this.options.ignoreCase&&b.toLowerCase()===k.toLowerCase()},removeEmpty:function(b){for(var k=[],D=0;D<b.length;D++)b[D]&&k.push(b[D]);return k},castInput:function(b){return b},tokenize:function(b){return b.split("")},join:function(b){return b.join("")}};function n(m,b,k,D,V){for(var N=0,H=b.length,Y=0,W=0;N<H;N++){var G=b[N];if(G.removed){if(G.value=m.join(D.slice(W,W+G.count)),W+=G.count,N&&b[N-1].added){var ie=b[N-1];b[N-1]=b[N],b[N]=ie}}else{if(!G.added&&V){var Q=k.slice(Y,Y+G.count);Q=Q.map(function(me,Se){var se=D[W+Se];return se.length>me.length?se:me}),G.value=m.join(Q)}else G.value=m.join(k.slice(Y,Y+G.count));Y+=G.count,G.added||(W+=G.count)}}var re=b[H-1];return H>1&&typeof re.value=="string"&&(re.added||re.removed)&&m.equals("",re.value)&&(b[H-2].value+=re.value,b.pop()),b}function r(m){return{newPos:m.newPos,components:m.components.slice(0)}}var i=new e;function s(m,b,k){return i.diff(m,b,k)}function a(m,b){if(typeof m=="function")b.callback=m;else if(m)for(var k in m)m.hasOwnProperty(k)&&(b[k]=m[k]);return b}var u=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,f=/\S/,l=new e;l.equals=function(m,b){return this.options.ignoreCase&&(m=m.toLowerCase(),b=b.toLowerCase()),m===b||this.options.ignoreWhitespace&&!f.test(m)&&!f.test(b)},l.tokenize=function(m){for(var b=m.split(/(\s+|[()[\]{}'"]|\b)/),k=0;k<b.length-1;k++)!b[k+1]&&b[k+2]&&u.test(b[k])&&u.test(b[k+2])&&(b[k]+=b[k+2],b.splice(k+1,2),k--);return b};function d(m,b,k){return k=a(k,{ignoreWhitespace:!0}),l.diff(m,b,k)}function h(m,b,k){return l.diff(m,b,k)}var p=new e;p.tokenize=function(m){var b=[],k=m.split(/(\n|\r\n)/);k[k.length-1]||k.pop();for(var D=0;D<k.length;D++){var V=k[D];D%2&&!this.options.newlineIsToken?b[b.length-1]+=V:(this.options.ignoreWhitespace&&(V=V.trim()),b.push(V))}return b};function w(m,b,k){return p.diff(m,b,k)}function _(m,b,k){var D=a(k,{ignoreWhitespace:!0});return p.diff(m,b,D)}var C=new e;C.tokenize=function(m){return m.split(/(\S.+?[.!?])(?=\s+|$)/)};function U(m,b,k){return C.diff(m,b,k)}var y=new e;y.tokenize=function(m){return m.split(/([{}:;,]|\s+)/)};function v(m,b,k){return y.diff(m,b,k)}function E(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(b){return typeof b}:E=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},E(m)}function A(m){return x(m)||I(m)||F()}function x(m){if(Array.isArray(m)){for(var b=0,k=new Array(m.length);b<m.length;b++)k[b]=m[b];return k}}function I(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}function F(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var T=Object.prototype.toString,R=new e;R.useLongestToken=!0,R.tokenize=p.tokenize,R.castInput=function(m){var b=this.options,k=b.undefinedReplacement,D=b.stringifyReplacer,V=D===void 0?function(N,H){return typeof H>"u"?k:H}:D;return typeof m=="string"?m:JSON.stringify(q(m,null,null,V),V,"  ")},R.equals=function(m,b){return e.prototype.equals.call(R,m.replace(/,([\r\n])/g,"$1"),b.replace(/,([\r\n])/g,"$1"))};function P(m,b,k){return R.diff(m,b,k)}function q(m,b,k,D,V){b=b||[],k=k||[],D&&(m=D(V,m));var N;for(N=0;N<b.length;N+=1)if(b[N]===m)return k[N];var H;if(T.call(m)==="[object Array]"){for(b.push(m),H=new Array(m.length),k.push(H),N=0;N<m.length;N+=1)H[N]=q(m[N],b,k,D,V);return b.pop(),k.pop(),H}if(m&&m.toJSON&&(m=m.toJSON()),E(m)==="object"&&m!==null){b.push(m),H={},k.push(H);var Y=[],W;for(W in m)m.hasOwnProperty(W)&&Y.push(W);for(Y.sort(),N=0;N<Y.length;N+=1)W=Y[N],H[W]=q(m[W],b,k,D,W);b.pop(),k.pop()}else H=m;return H}var $=new e;$.tokenize=function(m){return m.slice()},$.join=$.removeEmpty=function(m){return m};function X(m,b,k){return $.diff(m,b,k)}function te(m){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=m.split(/\r\n|[\n\v\f\r\x85]/),D=m.match(/\r\n|[\n\v\f\r\x85]/g)||[],V=[],N=0;function H(){var G={};for(V.push(G);N<k.length;){var Q=k[N];if(/^(\-\-\-|\+\+\+|@@)\s/.test(Q))break;var ie=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(Q);ie&&(G.index=ie[1]),N++}for(Y(G),Y(G),G.hunks=[];N<k.length;){var re=k[N];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(re))break;if(/^@@/.test(re))G.hunks.push(W());else{if(re&&b.strict)throw new Error("Unknown line "+(N+1)+" "+JSON.stringify(re));N++}}}function Y(G){var Q=/^(---|\+\+\+)\s+(.*)$/.exec(k[N]);if(Q){var ie=Q[1]==="---"?"old":"new",re=Q[2].split("	",2),me=re[0].replace(/\\\\/g,"\\");/^".*"$/.test(me)&&(me=me.substr(1,me.length-2)),G[ie+"FileName"]=me,G[ie+"Header"]=(re[1]||"").trim(),N++}}function W(){for(var G=N,Q=k[N++],ie=Q.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),re={oldStart:+ie[1],oldLines:+ie[2]||1,newStart:+ie[3],newLines:+ie[4]||1,lines:[],linedelimiters:[]},me=0,Se=0;N<k.length&&!(k[N].indexOf("--- ")===0&&N+2<k.length&&k[N+1].indexOf("+++ ")===0&&k[N+2].indexOf("@@")===0);N++){var se=k[N].length==0&&N!=k.length-1?" ":k[N][0];if(se==="+"||se==="-"||se===" "||se==="\\")re.lines.push(k[N]),re.linedelimiters.push(D[N]||`
`),se==="+"?me++:se==="-"?Se++:se===" "&&(me++,Se++);else break}if(!me&&re.newLines===1&&(re.newLines=0),!Se&&re.oldLines===1&&(re.oldLines=0),b.strict){if(me!==re.newLines)throw new Error("Added line count did not match for hunk at line "+(G+1));if(Se!==re.oldLines)throw new Error("Removed line count did not match for hunk at line "+(G+1))}return re}for(;N<k.length;)H();return V}function fe(m,b,k){var D=!0,V=!1,N=!1,H=1;return function Y(){if(D&&!N){if(V?H++:D=!1,m+H<=k)return H;N=!0}if(!V)return N||(D=!0),b<=m-H?-H++:(V=!0,Y())}}function Te(m,b){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof b=="string"&&(b=te(b)),Array.isArray(b)){if(b.length>1)throw new Error("applyPatch only works with a single input.");b=b[0]}var D=m.split(/\r\n|[\n\v\f\r\x85]/),V=m.match(/\r\n|[\n\v\f\r\x85]/g)||[],N=b.hunks,H=k.compareLine||function(zi,er,Hr,Jt){return er===Jt},Y=0,W=k.fuzzFactor||0,G=0,Q=0,ie,re;function me(zi,er){for(var Hr=0;Hr<zi.lines.length;Hr++){var Jt=zi.lines[Hr],Ki=Jt.length>0?Jt[0]:" ",al=Jt.length>0?Jt.substr(1):Jt;if(Ki===" "||Ki==="-"){if(!H(er+1,D[er],Ki,al)&&(Y++,Y>W))return!1;er++}}return!0}for(var Se=0;Se<N.length;Se++){for(var se=N[Se],Ne=D.length-se.oldLines,je=0,Me=Q+se.oldStart-1,He=fe(Me,G,Ne);je!==void 0;je=He())if(me(se,Me+je)){se.offset=Q+=je;break}if(je===void 0)return!1;G=se.offset+se.oldStart+se.oldLines}for(var Ce=0,_t=0;_t<N.length;_t++){var $e=N[_t],it=$e.oldStart+$e.offset+Ce-1;Ce+=$e.newLines-$e.oldLines,it<0&&(it=0);for(var vt=0;vt<$e.lines.length;vt++){var Et=$e.lines[vt],Nt=Et.length>0?Et[0]:" ",jr=Et.length>0?Et.substr(1):Et,Wi=$e.linedelimiters[vt];if(Nt===" ")it++;else if(Nt==="-")D.splice(it,1),V.splice(it,1);else if(Nt==="+")D.splice(it,0,jr),V.splice(it,0,Wi),it++;else if(Nt==="\\"){var Qn=$e.lines[vt-1]?$e.lines[vt-1][0]:null;Qn==="+"?ie=!0:Qn==="-"&&(re=!0)}}}if(ie)for(;!D[D.length-1];)D.pop(),V.pop();else re&&(D.push(""),V.push(`
`));for(var $t=0;$t<D.length-1;$t++)D[$t]=D[$t]+V[$t];return D.join("")}function Z(m,b){typeof m=="string"&&(m=te(m));var k=0;function D(){var V=m[k++];if(!V)return b.complete();b.loadFile(V,function(N,H){if(N)return b.complete(N);var Y=Te(H,V,b);b.patched(V,Y,function(W){if(W)return b.complete(W);D()})})}D()}function Ot(m,b,k,D,V,N,H){H||(H={}),typeof H.context>"u"&&(H.context=4);var Y=w(k,D,H);Y.push({value:"",lines:[]});function W(je){return je.map(function(Me){return" "+Me})}for(var G=[],Q=0,ie=0,re=[],me=1,Se=1,se=function(Me){var He=Y[Me],Ce=He.lines||He.value.replace(/\n$/,"").split(`
`);if(He.lines=Ce,He.added||He.removed){var _t;if(!Q){var $e=Y[Me-1];Q=me,ie=Se,$e&&(re=H.context>0?W($e.lines.slice(-H.context)):[],Q-=re.length,ie-=re.length)}(_t=re).push.apply(_t,A(Ce.map(function($t){return(He.added?"+":"-")+$t}))),He.added?Se+=Ce.length:me+=Ce.length}else{if(Q)if(Ce.length<=H.context*2&&Me<Y.length-2){var it;(it=re).push.apply(it,A(W(Ce)))}else{var vt,Et=Math.min(Ce.length,H.context);(vt=re).push.apply(vt,A(W(Ce.slice(0,Et))));var Nt={oldStart:Q,oldLines:me-Q+Et,newStart:ie,newLines:Se-ie+Et,lines:re};if(Me>=Y.length-2&&Ce.length<=H.context){var jr=/\n$/.test(k),Wi=/\n$/.test(D),Qn=Ce.length==0&&re.length>Nt.oldLines;!jr&&Qn&&re.splice(Nt.oldLines,0,"\\ No newline at end of file"),(!jr&&!Qn||!Wi)&&re.push("\\ No newline at end of file")}G.push(Nt),Q=0,ie=0,re=[]}me+=Ce.length,Se+=Ce.length}},Ne=0;Ne<Y.length;Ne++)se(Ne);return{oldFileName:m,newFileName:b,oldHeader:V,newHeader:N,hunks:G}}function tt(m,b,k,D,V,N,H){var Y=Ot(m,b,k,D,V,N,H),W=[];m==b&&W.push("Index: "+m),W.push("==================================================================="),W.push("--- "+Y.oldFileName+(typeof Y.oldHeader>"u"?"":"	"+Y.oldHeader)),W.push("+++ "+Y.newFileName+(typeof Y.newHeader>"u"?"":"	"+Y.newHeader));for(var G=0;G<Y.hunks.length;G++){var Q=Y.hunks[G];W.push("@@ -"+Q.oldStart+","+Q.oldLines+" +"+Q.newStart+","+Q.newLines+" @@"),W.push.apply(W,Q.lines)}return W.join(`
`)+`
`}function nt(m,b,k,D,V,N){return tt(m,m,b,k,D,V,N)}function ue(m,b){return m.length!==b.length?!1:ae(m,b)}function ae(m,b){if(b.length>m.length)return!1;for(var k=0;k<b.length;k++)if(b[k]!==m[k])return!1;return!0}function ut(m){var b=g(m.lines),k=b.oldLines,D=b.newLines;k!==void 0?m.oldLines=k:delete m.oldLines,D!==void 0?m.newLines=D:delete m.newLines}function ze(m,b,k){m=rt(m,k),b=rt(b,k);var D={};(m.index||b.index)&&(D.index=m.index||b.index),(m.newFileName||b.newFileName)&&(dt(m)?dt(b)?(D.oldFileName=ht(D,m.oldFileName,b.oldFileName),D.newFileName=ht(D,m.newFileName,b.newFileName),D.oldHeader=ht(D,m.oldHeader,b.oldHeader),D.newHeader=ht(D,m.newHeader,b.newHeader)):(D.oldFileName=m.oldFileName,D.newFileName=m.newFileName,D.oldHeader=m.oldHeader,D.newHeader=m.newHeader):(D.oldFileName=b.oldFileName||m.oldFileName,D.newFileName=b.newFileName||m.newFileName,D.oldHeader=b.oldHeader||m.oldHeader,D.newHeader=b.newHeader||m.newHeader)),D.hunks=[];for(var V=0,N=0,H=0,Y=0;V<m.hunks.length||N<b.hunks.length;){var W=m.hunks[V]||{oldStart:1/0},G=b.hunks[N]||{oldStart:1/0};if(Ge(W,G))D.hunks.push(Lt(W,H)),V++,Y+=W.newLines-W.oldLines;else if(Ge(G,W))D.hunks.push(Lt(G,Y)),N++,H+=G.newLines-G.oldLines;else{var Q={oldStart:Math.min(W.oldStart,G.oldStart),oldLines:0,newStart:Math.min(W.newStart+H,G.oldStart+Y),newLines:0,lines:[]};Gt(Q,W.oldStart,W.lines,G.oldStart,G.lines),N++,V++,D.hunks.push(Q)}}return D}function rt(m,b){if(typeof m=="string"){if(/^@@/m.test(m)||/^Index:/m.test(m))return te(m)[0];if(!b)throw new Error("Must provide a base reference or pass in a patch");return Ot(void 0,void 0,b,m)}return m}function dt(m){return m.newFileName&&m.newFileName!==m.oldFileName}function ht(m,b,k){return b===k?b:(m.conflict=!0,{mine:b,theirs:k})}function Ge(m,b){return m.oldStart<b.oldStart&&m.oldStart+m.oldLines<b.oldStart}function Lt(m,b){return{oldStart:m.oldStart,oldLines:m.oldLines,newStart:m.newStart+b,newLines:m.newLines,lines:m.lines}}function Gt(m,b,k,D,V){var N={offset:b,lines:k,index:0},H={offset:D,lines:V,index:0};for(B(m,N,H),B(m,H,N);N.index<N.lines.length&&H.index<H.lines.length;){var Y=N.lines[N.index],W=H.lines[H.index];if((Y[0]==="-"||Y[0]==="+")&&(W[0]==="-"||W[0]==="+"))Ae(m,N,H);else if(Y[0]==="+"&&W[0]===" "){var G;(G=m.lines).push.apply(G,A(K(N)))}else if(W[0]==="+"&&Y[0]===" "){var Q;(Q=m.lines).push.apply(Q,A(K(H)))}else Y[0]==="-"&&W[0]===" "?Pe(m,N,H):W[0]==="-"&&Y[0]===" "?Pe(m,H,N,!0):Y===W?(m.lines.push(Y),N.index++,H.index++):O(m,K(N),K(H))}j(m,N),j(m,H),ut(m)}function Ae(m,b,k){var D=K(b),V=K(k);if(o(D)&&o(V)){if(ae(D,V)&&c(k,D,D.length-V.length)){var N;(N=m.lines).push.apply(N,A(D));return}else if(ae(V,D)&&c(b,V,V.length-D.length)){var H;(H=m.lines).push.apply(H,A(V));return}}else if(ue(D,V)){var Y;(Y=m.lines).push.apply(Y,A(D));return}O(m,D,V)}function Pe(m,b,k,D){var V=K(b),N=ne(k,V);if(N.merged){var H;(H=m.lines).push.apply(H,A(N.merged))}else O(m,D?N:V,D?V:N)}function O(m,b,k){m.conflict=!0,m.lines.push({conflict:!0,mine:b,theirs:k})}function B(m,b,k){for(;b.offset<k.offset&&b.index<b.lines.length;){var D=b.lines[b.index++];m.lines.push(D),b.offset++}}function j(m,b){for(;b.index<b.lines.length;){var k=b.lines[b.index++];m.lines.push(k)}}function K(m){for(var b=[],k=m.lines[m.index][0];m.index<m.lines.length;){var D=m.lines[m.index];if(k==="-"&&D[0]==="+"&&(k="+"),k===D[0])b.push(D),m.index++;else break}return b}function ne(m,b){for(var k=[],D=[],V=0,N=!1,H=!1;V<b.length&&m.index<m.lines.length;){var Y=m.lines[m.index],W=b[V];if(W[0]==="+")break;if(N=N||Y[0]!==" ",D.push(W),V++,Y[0]==="+")for(H=!0;Y[0]==="+";)k.push(Y),Y=m.lines[++m.index];W.substr(1)===Y.substr(1)?(k.push(Y),m.index++):H=!0}if((b[V]||"")[0]==="+"&&N&&(H=!0),H)return k;for(;V<b.length;)D.push(b[V++]);return{merged:D,changes:k}}function o(m){return m.reduce(function(b,k){return b&&k[0]==="-"},!0)}function c(m,b,k){for(var D=0;D<k;D++){var V=b[b.length-k+D].substr(1);if(m.lines[m.index+D]!==" "+V)return!1}return m.index+=k,!0}function g(m){var b=0,k=0;return m.forEach(function(D){if(typeof D!="string"){var V=g(D.mine),N=g(D.theirs);b!==void 0&&(V.oldLines===N.oldLines?b+=V.oldLines:b=void 0),k!==void 0&&(V.newLines===N.newLines?k+=V.newLines:k=void 0)}else k!==void 0&&(D[0]==="+"||D[0]===" ")&&k++,b!==void 0&&(D[0]==="-"||D[0]===" ")&&b++}),{oldLines:b,newLines:k}}function S(m){for(var b=[],k,D,V=0;V<m.length;V++)k=m[V],k.added?D=1:k.removed?D=-1:D=0,b.push([D,k.value]);return b}function L(m){for(var b=[],k=0;k<m.length;k++){var D=m[k];D.added?b.push("<ins>"):D.removed&&b.push("<del>"),b.push(M(D.value)),D.added?b.push("</ins>"):D.removed&&b.push("</del>")}return b.join("")}function M(m){var b=m;return b=b.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/"/g,"&quot;"),b}t.Diff=e,t.diffChars=s,t.diffWords=d,t.diffWordsWithSpace=h,t.diffLines=w,t.diffTrimmedLines=_,t.diffSentences=U,t.diffCss=v,t.diffJson=P,t.diffArrays=X,t.structuredPatch=Ot,t.createTwoFilesPatch=tt,t.createPatch=nt,t.applyPatch=Te,t.applyPatches=Z,t.parsePatch=te,t.merge=ze,t.convertChangesToDMP=S,t.convertChangesToXML=L,t.canonicalize=q,Object.defineProperty(t,"__esModule",{value:!0})})});var Bs=nr((Oh,oc)=>{"use strict";oc.exports=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}});var yc=nr((Gh,mc)=>{mc.exports=window.wp.hooks});var Bc=nr((Mc,$s)=>{(function(t){if(typeof Mc=="object"&&typeof $s<"u")$s.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;e=typeof window>"u"?typeof global>"u"?typeof self>"u"?this:self:global:window,e.SimplePeer=t()}})(function(){var t=Math.floor,e=Math.abs,n=Math.pow;return(function(){function r(i,s,a){function u(d,h){if(!s[d]){if(!i[d]){var p=typeof tr=="function"&&tr;if(!h&&p)return p(d,!0);if(f)return f(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var _=s[d]={exports:{}};i[d][0].call(_.exports,function(C){var U=i[d][1][C];return u(U||C)},_,_.exports,r,i,s,a)}return s[d].exports}for(var f=typeof tr=="function"&&tr,l=0;l<a.length;l++)u(a[l]);return u}return r})()({1:[function(r,i,s){"use strict";function a(v){var E=v.length;if(0<E%4)throw new Error("Invalid string. Length must be a multiple of 4");var A=v.indexOf("=");A===-1&&(A=E);var x=A===E?0:4-A%4;return[A,x]}function u(v,E,A){return 3*(E+A)/4-A}function f(v){var E,A,x=a(v),I=x[0],F=x[1],T=new _(u(v,I,F)),R=0,P=0<F?I-4:I;for(A=0;A<P;A+=4)E=w[v.charCodeAt(A)]<<18|w[v.charCodeAt(A+1)]<<12|w[v.charCodeAt(A+2)]<<6|w[v.charCodeAt(A+3)],T[R++]=255&E>>16,T[R++]=255&E>>8,T[R++]=255&E;return F===2&&(E=w[v.charCodeAt(A)]<<2|w[v.charCodeAt(A+1)]>>4,T[R++]=255&E),F===1&&(E=w[v.charCodeAt(A)]<<10|w[v.charCodeAt(A+1)]<<4|w[v.charCodeAt(A+2)]>>2,T[R++]=255&E>>8,T[R++]=255&E),T}function l(v){return p[63&v>>18]+p[63&v>>12]+p[63&v>>6]+p[63&v]}function d(v,E,A){for(var x,I=[],F=E;F<A;F+=3)x=(16711680&v[F]<<16)+(65280&v[F+1]<<8)+(255&v[F+2]),I.push(l(x));return I.join("")}function h(v){for(var E,A=v.length,x=A%3,I=[],F=16383,T=0,R=A-x;T<R;T+=F)I.push(d(v,T,T+F>R?R:T+F));return x===1?(E=v[A-1],I.push(p[E>>2]+p[63&E<<4]+"==")):x===2&&(E=(v[A-2]<<8)+v[A-1],I.push(p[E>>10]+p[63&E>>4]+p[63&E<<2]+"=")),I.join("")}s.byteLength=function(v){var E=a(v),A=E[0],x=E[1];return 3*(A+x)/4-x},s.toByteArray=f,s.fromByteArray=h;for(var p=[],w=[],_=typeof Uint8Array>"u"?Array:Uint8Array,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0,y=C.length;U<y;++U)p[U]=C[U],w[C.charCodeAt(U)]=U;w[45]=62,w[95]=63},{}],2:[function(){},{}],3:[function(r,i,s){(function(){(function(){"use strict";var a=String.fromCharCode,u=Math.min;function f(o){if(2147483647<o)throw new RangeError('The value "'+o+'" is invalid for option "size"');var c=new Uint8Array(o);return c.__proto__=l.prototype,c}function l(o,c,g){if(typeof o=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(o)}return d(o,c,g)}function d(o,c,g){if(typeof o=="string")return _(o,c);if(ArrayBuffer.isView(o))return C(o);if(o==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(O(o,ArrayBuffer)||o&&O(o.buffer,ArrayBuffer))return U(o,c,g);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=o.valueOf&&o.valueOf();if(S!=null&&S!==o)return l.from(S,c,g);var L=y(o);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return l.from(o[Symbol.toPrimitive]("string"),c,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}function h(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(0>o)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function p(o,c,g){return h(o),0>=o||c===void 0?f(o):typeof g=="string"?f(o).fill(c,g):f(o).fill(c)}function w(o){return h(o),f(0>o?0:0|v(o))}function _(o,c){if((typeof c!="string"||c==="")&&(c="utf8"),!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var g=0|E(o,c),S=f(g),L=S.write(o,c);return L!==g&&(S=S.slice(0,L)),S}function C(o){for(var c=0>o.length?0:0|v(o.length),g=f(c),S=0;S<c;S+=1)g[S]=255&o[S];return g}function U(o,c,g){if(0>c||o.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<c+(g||0))throw new RangeError('"length" is outside of buffer bounds');var S;return S=c===void 0&&g===void 0?new Uint8Array(o):g===void 0?new Uint8Array(o,c):new Uint8Array(o,c,g),S.__proto__=l.prototype,S}function y(o){if(l.isBuffer(o)){var c=0|v(o.length),g=f(c);return g.length===0||o.copy(g,0,0,c),g}return o.length===void 0?o.type==="Buffer"&&Array.isArray(o.data)?C(o.data):void 0:typeof o.length!="number"||B(o.length)?f(0):C(o)}function v(o){if(o>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|o}function E(o,c){if(l.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||O(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);var g=o.length,S=2<arguments.length&&arguments[2]===!0;if(!S&&g===0)return 0;for(var L=!1;;)switch(c){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Ge(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*g;case"hex":return g>>>1;case"base64":return Ae(o).length;default:if(L)return S?-1:Ge(o).length;c=(""+c).toLowerCase(),L=!0}}function A(o,c,g){var S=!1;if((c===void 0||0>c)&&(c=0),c>this.length||((g===void 0||g>this.length)&&(g=this.length),0>=g)||(g>>>=0,c>>>=0,g<=c))return"";for(o||(o="utf8");;)switch(o){case"hex":return tt(this,c,g);case"utf8":case"utf-8":return fe(this,c,g);case"ascii":return Z(this,c,g);case"latin1":case"binary":return Ot(this,c,g);case"base64":return te(this,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nt(this,c,g);default:if(S)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),S=!0}}function x(o,c,g){var S=o[c];o[c]=o[g],o[g]=S}function I(o,c,g,S,L){if(o.length===0)return-1;if(typeof g=="string"?(S=g,g=0):2147483647<g?g=2147483647:-2147483648>g&&(g=-2147483648),g=+g,B(g)&&(g=L?0:o.length-1),0>g&&(g=o.length+g),g>=o.length){if(L)return-1;g=o.length-1}else if(0>g)if(L)g=0;else return-1;if(typeof c=="string"&&(c=l.from(c,S)),l.isBuffer(c))return c.length===0?-1:F(o,c,g,S,L);if(typeof c=="number")return c&=255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(o,c,g):Uint8Array.prototype.lastIndexOf.call(o,c,g):F(o,[c],g,S,L);throw new TypeError("val must be string, number or Buffer")}function F(o,c,g,S,L){function M(Y,W){return m===1?Y[W]:Y.readUInt16BE(W*m)}var m=1,b=o.length,k=c.length;if(S!==void 0&&(S=(S+"").toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(2>o.length||2>c.length)return-1;m=2,b/=2,k/=2,g/=2}var D;if(L){var V=-1;for(D=g;D<b;D++)if(M(o,D)!==M(c,V===-1?0:D-V))V!==-1&&(D-=D-V),V=-1;else if(V===-1&&(V=D),D-V+1===k)return V*m}else for(g+k>b&&(g=b-k),D=g;0<=D;D--){for(var N=!0,H=0;H<k;H++)if(M(o,D+H)!==M(c,H)){N=!1;break}if(N)return D}return-1}function T(o,c,g,S){g=+g||0;var L=o.length-g;S?(S=+S,S>L&&(S=L)):S=L;var M=c.length;S>M/2&&(S=M/2);for(var m,b=0;b<S;++b){if(m=parseInt(c.substr(2*b,2),16),B(m))return b;o[g+b]=m}return b}function R(o,c,g,S){return Pe(Ge(c,o.length-g),o,g,S)}function P(o,c,g,S){return Pe(Lt(c),o,g,S)}function q(o,c,g,S){return P(o,c,g,S)}function $(o,c,g,S){return Pe(Ae(c),o,g,S)}function X(o,c,g,S){return Pe(Gt(c,o.length-g),o,g,S)}function te(o,c,g){return c===0&&g===o.length?j.fromByteArray(o):j.fromByteArray(o.slice(c,g))}function fe(o,c,g){g=u(o.length,g);for(var S=[],L=c;L<g;){var M=o[L],m=null,b=239<M?4:223<M?3:191<M?2:1;if(L+b<=g){var k,D,V,N;b===1?128>M&&(m=M):b===2?(k=o[L+1],(192&k)==128&&(N=(31&M)<<6|63&k,127<N&&(m=N))):b===3?(k=o[L+1],D=o[L+2],(192&k)==128&&(192&D)==128&&(N=(15&M)<<12|(63&k)<<6|63&D,2047<N&&(55296>N||57343<N)&&(m=N))):b===4&&(k=o[L+1],D=o[L+2],V=o[L+3],(192&k)==128&&(192&D)==128&&(192&V)==128&&(N=(15&M)<<18|(63&k)<<12|(63&D)<<6|63&V,65535<N&&1114112>N&&(m=N)))}m===null?(m=65533,b=1):65535<m&&(m-=65536,S.push(55296|1023&m>>>10),m=56320|1023&m),S.push(m),L+=b}return Te(S)}function Te(o){var c=o.length;if(c<=4096)return a.apply(String,o);for(var g="",S=0;S<c;)g+=a.apply(String,o.slice(S,S+=4096));return g}function Z(o,c,g){var S="";g=u(o.length,g);for(var L=c;L<g;++L)S+=a(127&o[L]);return S}function Ot(o,c,g){var S="";g=u(o.length,g);for(var L=c;L<g;++L)S+=a(o[L]);return S}function tt(o,c,g){var S=o.length;(!c||0>c)&&(c=0),(!g||0>g||g>S)&&(g=S);for(var L="",M=c;M<g;++M)L+=ht(o[M]);return L}function nt(o,c,g){for(var S=o.slice(c,g),L="",M=0;M<S.length;M+=2)L+=a(S[M]+256*S[M+1]);return L}function ue(o,c,g){if(o%1!=0||0>o)throw new RangeError("offset is not uint");if(o+c>g)throw new RangeError("Trying to access beyond buffer length")}function ae(o,c,g,S,L,M){if(!l.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>L||c<M)throw new RangeError('"value" argument is out of bounds');if(g+S>o.length)throw new RangeError("Index out of range")}function ut(o,c,g,S){if(g+S>o.length)throw new RangeError("Index out of range");if(0>g)throw new RangeError("Index out of range")}function ze(o,c,g,S,L){return c=+c,g>>>=0,L||ut(o,c,g,4,34028234663852886e22,-34028234663852886e22),K.write(o,c,g,S,23,4),g+4}function rt(o,c,g,S,L){return c=+c,g>>>=0,L||ut(o,c,g,8,17976931348623157e292,-17976931348623157e292),K.write(o,c,g,S,52,8),g+8}function dt(o){if(o=o.split("=")[0],o=o.trim().replace(ne,""),2>o.length)return"";for(;o.length%4!=0;)o+="=";return o}function ht(o){return 16>o?"0"+o.toString(16):o.toString(16)}function Ge(o,c){c=c||1/0;for(var g,S=o.length,L=null,M=[],m=0;m<S;++m){if(g=o.charCodeAt(m),55295<g&&57344>g){if(!L){if(56319<g){-1<(c-=3)&&M.push(239,191,189);continue}else if(m+1===S){-1<(c-=3)&&M.push(239,191,189);continue}L=g;continue}if(56320>g){-1<(c-=3)&&M.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&-1<(c-=3)&&M.push(239,191,189);if(L=null,128>g){if(0>(c-=1))break;M.push(g)}else if(2048>g){if(0>(c-=2))break;M.push(192|g>>6,128|63&g)}else if(65536>g){if(0>(c-=3))break;M.push(224|g>>12,128|63&g>>6,128|63&g)}else if(1114112>g){if(0>(c-=4))break;M.push(240|g>>18,128|63&g>>12,128|63&g>>6,128|63&g)}else throw new Error("Invalid code point")}return M}function Lt(o){for(var c=[],g=0;g<o.length;++g)c.push(255&o.charCodeAt(g));return c}function Gt(o,c){for(var g,S,L,M=[],m=0;m<o.length&&!(0>(c-=2));++m)g=o.charCodeAt(m),S=g>>8,L=g%256,M.push(L),M.push(S);return M}function Ae(o){return j.toByteArray(dt(o))}function Pe(o,c,g,S){for(var L=0;L<S&&!(L+g>=c.length||L>=o.length);++L)c[L+g]=o[L];return L}function O(o,c){return o instanceof c||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===c.name}function B(o){return o!==o}var j=r("base64-js"),K=r("ieee754");s.Buffer=l,s.SlowBuffer=function(o){return+o!=o&&(o=0),l.alloc(+o)},s.INSPECT_MAX_BYTES=50,s.kMaxLength=2147483647,l.TYPED_ARRAY_SUPPORT=(function(){try{var o=new Uint8Array(1);return o.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},o.foo()===42}catch{return!1}})(),l.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){return l.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){return l.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(o,c,g){return d(o,c,g)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(o,c,g){return p(o,c,g)},l.allocUnsafe=function(o){return w(o)},l.allocUnsafeSlow=function(o){return w(o)},l.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==l.prototype},l.compare=function(o,c){if(O(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),O(c,Uint8Array)&&(c=l.from(c,c.offset,c.byteLength)),!l.isBuffer(o)||!l.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===c)return 0;for(var g=o.length,S=c.length,L=0,M=u(g,S);L<M;++L)if(o[L]!==c[L]){g=o[L],S=c[L];break}return g<S?-1:S<g?1:0},l.isEncoding=function(o){switch((o+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(o,c){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return l.alloc(0);var g;if(c===void 0)for(c=0,g=0;g<o.length;++g)c+=o[g].length;var S=l.allocUnsafe(c),L=0;for(g=0;g<o.length;++g){var M=o[g];if(O(M,Uint8Array)&&(M=l.from(M)),!l.isBuffer(M))throw new TypeError('"list" argument must be an Array of Buffers');M.copy(S,L),L+=M.length}return S},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var o=this.length;if(o%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<o;c+=2)x(this,c,c+1);return this},l.prototype.swap32=function(){var o=this.length;if(o%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<o;c+=4)x(this,c,c+3),x(this,c+1,c+2);return this},l.prototype.swap64=function(){var o=this.length;if(o%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<o;c+=8)x(this,c,c+7),x(this,c+1,c+6),x(this,c+2,c+5),x(this,c+3,c+4);return this},l.prototype.toString=function(){var o=this.length;return o===0?"":arguments.length===0?fe(this,0,o):A.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(o){if(!l.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o||l.compare(this,o)===0},l.prototype.inspect=function(){var o="",c=s.INSPECT_MAX_BYTES;return o=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(o+=" ... "),"<Buffer "+o+">"},l.prototype.compare=function(o,c,g,S,L){if(O(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),!l.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(c===void 0&&(c=0),g===void 0&&(g=o?o.length:0),S===void 0&&(S=0),L===void 0&&(L=this.length),0>c||g>o.length||0>S||L>this.length)throw new RangeError("out of range index");if(S>=L&&c>=g)return 0;if(S>=L)return-1;if(c>=g)return 1;if(c>>>=0,g>>>=0,S>>>=0,L>>>=0,this===o)return 0;for(var M=L-S,m=g-c,b=u(M,m),k=this.slice(S,L),D=o.slice(c,g),V=0;V<b;++V)if(k[V]!==D[V]){M=k[V],m=D[V];break}return M<m?-1:m<M?1:0},l.prototype.includes=function(o,c,g){return this.indexOf(o,c,g)!==-1},l.prototype.indexOf=function(o,c,g){return I(this,o,c,g,!0)},l.prototype.lastIndexOf=function(o,c,g){return I(this,o,c,g,!1)},l.prototype.write=function(o,c,g,S){if(c===void 0)S="utf8",g=this.length,c=0;else if(g===void 0&&typeof c=="string")S=c,g=this.length,c=0;else if(isFinite(c))c>>>=0,isFinite(g)?(g>>>=0,S===void 0&&(S="utf8")):(S=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var L=this.length-c;if((g===void 0||g>L)&&(g=L),0<o.length&&(0>g||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var M=!1;;)switch(S){case"hex":return T(this,o,c,g);case"utf8":case"utf-8":return R(this,o,c,g);case"ascii":return P(this,o,c,g);case"latin1":case"binary":return q(this,o,c,g);case"base64":return $(this,o,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,o,c,g);default:if(M)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),M=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(o,c){var g=this.length;o=~~o,c=c===void 0?g:~~c,0>o?(o+=g,0>o&&(o=0)):o>g&&(o=g),0>c?(c+=g,0>c&&(c=0)):c>g&&(c=g),c<o&&(c=o);var S=this.subarray(o,c);return S.__proto__=l.prototype,S},l.prototype.readUIntLE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var S=this[o],L=1,M=0;++M<c&&(L*=256);)S+=this[o+M]*L;return S},l.prototype.readUIntBE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var S=this[o+--c],L=1;0<c&&(L*=256);)S+=this[o+--c]*L;return S},l.prototype.readUInt8=function(o,c){return o>>>=0,c||ue(o,1,this.length),this[o]},l.prototype.readUInt16LE=function(o,c){return o>>>=0,c||ue(o,2,this.length),this[o]|this[o+1]<<8},l.prototype.readUInt16BE=function(o,c){return o>>>=0,c||ue(o,2,this.length),this[o]<<8|this[o+1]},l.prototype.readUInt32LE=function(o,c){return o>>>=0,c||ue(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+16777216*this[o+3]},l.prototype.readUInt32BE=function(o,c){return o>>>=0,c||ue(o,4,this.length),16777216*this[o]+(this[o+1]<<16|this[o+2]<<8|this[o+3])},l.prototype.readIntLE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var S=this[o],L=1,M=0;++M<c&&(L*=256);)S+=this[o+M]*L;return L*=128,S>=L&&(S-=n(2,8*c)),S},l.prototype.readIntBE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var S=c,L=1,M=this[o+--S];0<S&&(L*=256);)M+=this[o+--S]*L;return L*=128,M>=L&&(M-=n(2,8*c)),M},l.prototype.readInt8=function(o,c){return o>>>=0,c||ue(o,1,this.length),128&this[o]?-1*(255-this[o]+1):this[o]},l.prototype.readInt16LE=function(o,c){o>>>=0,c||ue(o,2,this.length);var g=this[o]|this[o+1]<<8;return 32768&g?4294901760|g:g},l.prototype.readInt16BE=function(o,c){o>>>=0,c||ue(o,2,this.length);var g=this[o+1]|this[o]<<8;return 32768&g?4294901760|g:g},l.prototype.readInt32LE=function(o,c){return o>>>=0,c||ue(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},l.prototype.readInt32BE=function(o,c){return o>>>=0,c||ue(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},l.prototype.readFloatLE=function(o,c){return o>>>=0,c||ue(o,4,this.length),K.read(this,o,!0,23,4)},l.prototype.readFloatBE=function(o,c){return o>>>=0,c||ue(o,4,this.length),K.read(this,o,!1,23,4)},l.prototype.readDoubleLE=function(o,c){return o>>>=0,c||ue(o,8,this.length),K.read(this,o,!0,52,8)},l.prototype.readDoubleBE=function(o,c){return o>>>=0,c||ue(o,8,this.length),K.read(this,o,!1,52,8)},l.prototype.writeUIntLE=function(o,c,g,S){if(o=+o,c>>>=0,g>>>=0,!S){var L=n(2,8*g)-1;ae(this,o,c,g,L,0)}var M=1,m=0;for(this[c]=255&o;++m<g&&(M*=256);)this[c+m]=255&o/M;return c+g},l.prototype.writeUIntBE=function(o,c,g,S){if(o=+o,c>>>=0,g>>>=0,!S){var L=n(2,8*g)-1;ae(this,o,c,g,L,0)}var M=g-1,m=1;for(this[c+M]=255&o;0<=--M&&(m*=256);)this[c+M]=255&o/m;return c+g},l.prototype.writeUInt8=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,1,255,0),this[c]=255&o,c+1},l.prototype.writeUInt16LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,65535,0),this[c]=255&o,this[c+1]=o>>>8,c+2},l.prototype.writeUInt16BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,65535,0),this[c]=o>>>8,this[c+1]=255&o,c+2},l.prototype.writeUInt32LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,4294967295,0),this[c+3]=o>>>24,this[c+2]=o>>>16,this[c+1]=o>>>8,this[c]=255&o,c+4},l.prototype.writeUInt32BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,4294967295,0),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=255&o,c+4},l.prototype.writeIntLE=function(o,c,g,S){if(o=+o,c>>>=0,!S){var L=n(2,8*g-1);ae(this,o,c,g,L-1,-L)}var M=0,m=1,b=0;for(this[c]=255&o;++M<g&&(m*=256);)0>o&&b===0&&this[c+M-1]!==0&&(b=1),this[c+M]=255&(o/m>>0)-b;return c+g},l.prototype.writeIntBE=function(o,c,g,S){if(o=+o,c>>>=0,!S){var L=n(2,8*g-1);ae(this,o,c,g,L-1,-L)}var M=g-1,m=1,b=0;for(this[c+M]=255&o;0<=--M&&(m*=256);)0>o&&b===0&&this[c+M+1]!==0&&(b=1),this[c+M]=255&(o/m>>0)-b;return c+g},l.prototype.writeInt8=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,1,127,-128),0>o&&(o=255+o+1),this[c]=255&o,c+1},l.prototype.writeInt16LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,32767,-32768),this[c]=255&o,this[c+1]=o>>>8,c+2},l.prototype.writeInt16BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,32767,-32768),this[c]=o>>>8,this[c+1]=255&o,c+2},l.prototype.writeInt32LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,2147483647,-2147483648),this[c]=255&o,this[c+1]=o>>>8,this[c+2]=o>>>16,this[c+3]=o>>>24,c+4},l.prototype.writeInt32BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,2147483647,-2147483648),0>o&&(o=4294967295+o+1),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=255&o,c+4},l.prototype.writeFloatLE=function(o,c,g){return ze(this,o,c,!0,g)},l.prototype.writeFloatBE=function(o,c,g){return ze(this,o,c,!1,g)},l.prototype.writeDoubleLE=function(o,c,g){return rt(this,o,c,!0,g)},l.prototype.writeDoubleBE=function(o,c,g){return rt(this,o,c,!1,g)},l.prototype.copy=function(o,c,g,S){if(!l.isBuffer(o))throw new TypeError("argument should be a Buffer");if(g||(g=0),S||S===0||(S=this.length),c>=o.length&&(c=o.length),c||(c=0),0<S&&S<g&&(S=g),S===g||o.length===0||this.length===0)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>g||g>=this.length)throw new RangeError("Index out of range");if(0>S)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),o.length-c<S-g&&(S=o.length-c+g);var L=S-g;if(this===o&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(c,g,S);else if(this===o&&g<c&&c<S)for(var M=L-1;0<=M;--M)o[M+c]=this[M+g];else Uint8Array.prototype.set.call(o,this.subarray(g,S),c);return L},l.prototype.fill=function(o,c,g,S){if(typeof o=="string"){if(typeof c=="string"?(S=c,c=0,g=this.length):typeof g=="string"&&(S=g,g=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!l.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(o.length===1){var L=o.charCodeAt(0);(S==="utf8"&&128>L||S==="latin1")&&(o=L)}}else typeof o=="number"&&(o&=255);if(0>c||this.length<c||this.length<g)throw new RangeError("Out of range index");if(g<=c)return this;c>>>=0,g=g===void 0?this.length:g>>>0,o||(o=0);var M;if(typeof o=="number")for(M=c;M<g;++M)this[M]=o;else{var m=l.isBuffer(o)?o:l.from(o,S),b=m.length;if(b===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(M=0;M<g-c;++M)this[M+c]=m[M%b]}return this};var ne=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(r,i,s){(function(a){(function(){function u(){let l;try{l=s.storage.getItem("debug")}catch{}return!l&&typeof a<"u"&&"env"in a&&(l=a.env.DEBUG),l}s.formatArgs=function(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;let d="color: "+this.color;l.splice(1,0,d,"color: inherit");let h=0,p=0;l[0].replace(/%[a-zA-Z%]/g,w=>{w==="%%"||(h++,w==="%c"&&(p=h))}),l.splice(p,0,d)},s.save=function(l){try{l?s.storage.setItem("debug",l):s.storage.removeItem("debug")}catch{}},s.load=u,s.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},s.storage=(function(){try{return localStorage}catch{}})(),s.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(s);let{formatters:f}=i.exports;f.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}).call(this)}).call(this,r("_process"))},{"./common":5,_process:12}],5:[function(r,i){i.exports=function(s){function a(l){function d(...w){if(!d.enabled)return;let _=d,C=+new Date,U=C-(h||C);_.diff=U,_.prev=h,_.curr=C,h=C,w[0]=a.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let y=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(E,A)=>{if(E==="%%")return"%";y++;let x=a.formatters[A];if(typeof x=="function"){let I=w[y];E=x.call(_,I),w.splice(y,1),y--}return E}),a.formatArgs.call(_,w),(_.log||a.log).apply(_,w)}let h,p=null;return d.namespace=l,d.useColors=a.useColors(),d.color=a.selectColor(l),d.extend=u,d.destroy=a.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>p===null?a.enabled(l):p,set:w=>{p=w}}),typeof a.init=="function"&&a.init(d),d}function u(l,d){let h=a(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function f(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}return a.debug=a,a.default=a,a.coerce=function(l){return l instanceof Error?l.stack||l.message:l},a.disable=function(){let l=[...a.names.map(f),...a.skips.map(f).map(d=>"-"+d)].join(",");return a.enable(""),l},a.enable=function(l){a.save(l),a.names=[],a.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?a.skips.push(new RegExp("^"+l.substr(1)+"$")):a.names.push(new RegExp("^"+l+"$")))},a.enabled=function(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=a.skips.length;d<h;d++)if(a.skips[d].test(l))return!1;for(d=0,h=a.names.length;d<h;d++)if(a.names[d].test(l))return!0;return!1},a.humanize=r("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(s).forEach(l=>{a[l]=s[l]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return a.colors[e(d)%a.colors.length]},a.enable(a.load()),a}},{ms:11}],6:[function(r,i){"use strict";function s(a,u){for(let f in u)Object.defineProperty(a,f,{value:u[f],enumerable:!0,configurable:!0});return a}i.exports=function(a,u,f){if(!a||typeof a=="string")throw new TypeError("Please pass an Error to err-code");f||(f={}),typeof u=="object"&&(f=u,u=""),u&&(f.code=u);try{return s(a,f)}catch{f.message=a.message,f.stack=a.stack;let d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(a)),s(new d,f)}}},{}],7:[function(r,i){"use strict";function s(T){console&&console.warn&&console.warn(T)}function a(){a.init.call(this)}function u(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function f(T){return T._maxListeners===void 0?a.defaultMaxListeners:T._maxListeners}function l(T,R,P,q){var $,X,te;if(u(P),X=T._events,X===void 0?(X=T._events=Object.create(null),T._eventsCount=0):(X.newListener!==void 0&&(T.emit("newListener",R,P.listener?P.listener:P),X=T._events),te=X[R]),te===void 0)te=X[R]=P,++T._eventsCount;else if(typeof te=="function"?te=X[R]=q?[P,te]:[te,P]:q?te.unshift(P):te.push(P),$=f(T),0<$&&te.length>$&&!te.warned){te.warned=!0;var fe=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+(R+" listeners added. Use emitter.setMaxListeners() to increase limit"));fe.name="MaxListenersExceededWarning",fe.emitter=T,fe.type=R,fe.count=te.length,s(fe)}return T}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,R,P){var q={fired:!1,wrapFn:void 0,target:T,type:R,listener:P},$=d.bind(q);return $.listener=P,q.wrapFn=$,$}function p(T,R,P){var q=T._events;if(q===void 0)return[];var $=q[R];return $===void 0?[]:typeof $=="function"?P?[$.listener||$]:[$]:P?U($):_($,$.length)}function w(T){var R=this._events;if(R!==void 0){var P=R[T];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}function _(T,R){for(var P=Array(R),q=0;q<R;++q)P[q]=T[q];return P}function C(T,R){for(;R+1<T.length;R++)T[R]=T[R+1];T.pop()}function U(T){for(var R=Array(T.length),P=0;P<R.length;++P)R[P]=T[P].listener||T[P];return R}function y(T,R,P){typeof T.on=="function"&&v(T,"error",R,P)}function v(T,R,P,q){if(typeof T.on=="function")q.once?T.once(R,P):T.on(R,P);else if(typeof T.addEventListener=="function")T.addEventListener(R,function $(X){q.once&&T.removeEventListener(R,$),P(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}var E,A=typeof Reflect=="object"?Reflect:null,x=A&&typeof A.apply=="function"?A.apply:function(T,R,P){return Function.prototype.apply.call(T,R,P)};E=A&&typeof A.ownKeys=="function"?A.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var I=Number.isNaN||function(T){return T!==T};i.exports=a,i.exports.once=function(T,R){return new Promise(function(P,q){function $(te){T.removeListener(R,X),q(te)}function X(){typeof T.removeListener=="function"&&T.removeListener("error",$),P([].slice.call(arguments))}v(T,R,X,{once:!0}),R!=="error"&&y(T,$,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var F=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(T){if(typeof T!="number"||0>T||I(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");F=T}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(T){if(typeof T!="number"||0>T||I(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(T){for(var R=[],P=1;P<arguments.length;P++)R.push(arguments[P]);var q=T==="error",$=this._events;if($!==void 0)q=q&&$.error===void 0;else if(!q)return!1;if(q){var X;if(0<R.length&&(X=R[0]),X instanceof Error)throw X;var te=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw te.context=X,te}var fe=$[T];if(fe===void 0)return!1;if(typeof fe=="function")x(fe,this,R);else for(var Te=fe.length,Z=_(fe,Te),P=0;P<Te;++P)x(Z[P],this,R);return!0},a.prototype.addListener=function(T,R){return l(this,T,R,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(T,R){return l(this,T,R,!0)},a.prototype.once=function(T,R){return u(R),this.on(T,h(this,T,R)),this},a.prototype.prependOnceListener=function(T,R){return u(R),this.prependListener(T,h(this,T,R)),this},a.prototype.removeListener=function(T,R){var P,q,$,X,te;if(u(R),q=this._events,q===void 0)return this;if(P=q[T],P===void 0)return this;if(P===R||P.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete q[T],q.removeListener&&this.emit("removeListener",T,P.listener||R));else if(typeof P!="function"){for($=-1,X=P.length-1;0<=X;X--)if(P[X]===R||P[X].listener===R){te=P[X].listener,$=X;break}if(0>$)return this;$===0?P.shift():C(P,$),P.length===1&&(q[T]=P[0]),q.removeListener!==void 0&&this.emit("removeListener",T,te||R)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(T){var R,P,q;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[T]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete P[T]),this;if(arguments.length===0){var $,X=Object.keys(P);for(q=0;q<X.length;++q)$=X[q],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=P[T],typeof R=="function")this.removeListener(T,R);else if(R!==void 0)for(q=R.length-1;0<=q;q--)this.removeListener(T,R[q]);return this},a.prototype.listeners=function(T){return p(this,T,!0)},a.prototype.rawListeners=function(T){return p(this,T,!1)},a.listenerCount=function(T,R){return typeof T.listenerCount=="function"?T.listenerCount(R):w.call(T,R)},a.prototype.listenerCount=w,a.prototype.eventNames=function(){return 0<this._eventsCount?E(this._events):[]}},{}],8:[function(r,i){i.exports=function(){if(typeof globalThis>"u")return null;var s={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return s.RTCPeerConnection?s:null}},{}],9:[function(r,i,s){s.read=function(a,u,f,l,d){var h,p,w=8*d-l-1,_=(1<<w)-1,C=_>>1,U=-7,y=f?d-1:0,v=f?-1:1,E=a[u+y];for(y+=v,h=E&(1<<-U)-1,E>>=-U,U+=w;0<U;h=256*h+a[u+y],y+=v,U-=8);for(p=h&(1<<-U)-1,h>>=-U,U+=l;0<U;p=256*p+a[u+y],y+=v,U-=8);if(h===0)h=1-C;else{if(h===_)return p?NaN:(E?-1:1)*(1/0);p+=n(2,l),h-=C}return(E?-1:1)*p*n(2,h-l)},s.write=function(a,u,f,l,d,h){var p,w,_,C=Math.LN2,U=Math.log,y=8*h-d-1,v=(1<<y)-1,E=v>>1,A=d===23?n(2,-24)-n(2,-77):0,x=l?0:h-1,I=l?1:-1,F=0>u||u===0&&0>1/u?1:0;for(u=e(u),isNaN(u)||u===1/0?(w=isNaN(u)?1:0,p=v):(p=t(U(u)/C),1>u*(_=n(2,-p))&&(p--,_*=2),u+=1<=p+E?A/_:A*n(2,1-E),2<=u*_&&(p++,_/=2),p+E>=v?(w=0,p=v):1<=p+E?(w=(u*_-1)*n(2,d),p+=E):(w=u*n(2,E-1)*n(2,d),p=0));8<=d;a[f+x]=255&w,x+=I,w/=256,d-=8);for(p=p<<d|w,y+=d;0<y;a[f+x]=255&p,x+=I,p/=256,y-=8);a[f+x-I]|=128*F}},{}],10:[function(r,i){i.exports=typeof Object.create=="function"?function(s,a){a&&(s.super_=a,s.prototype=Object.create(a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:function(s,a){if(a){s.super_=a;var u=function(){};u.prototype=a.prototype,s.prototype=new u,s.prototype.constructor=s}}},{}],11:[function(r,i){var s=Math.round;function a(h){if(h+="",!(100<h.length)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(p){var w=parseFloat(p[1]),_=(p[2]||"ms").toLowerCase();return _==="years"||_==="year"||_==="yrs"||_==="yr"||_==="y"?315576e5*w:_==="weeks"||_==="week"||_==="w"?6048e5*w:_==="days"||_==="day"||_==="d"?864e5*w:_==="hours"||_==="hour"||_==="hrs"||_==="hr"||_==="h"?36e5*w:_==="minutes"||_==="minute"||_==="mins"||_==="min"||_==="m"?6e4*w:_==="seconds"||_==="second"||_==="secs"||_==="sec"||_==="s"?1e3*w:_==="milliseconds"||_==="millisecond"||_==="msecs"||_==="msec"||_==="ms"?w:void 0}}}function u(h){var p=e(h);return 864e5<=p?s(h/864e5)+"d":36e5<=p?s(h/36e5)+"h":6e4<=p?s(h/6e4)+"m":1e3<=p?s(h/1e3)+"s":h+"ms"}function f(h){var p=e(h);return 864e5<=p?l(h,p,864e5,"day"):36e5<=p?l(h,p,36e5,"hour"):6e4<=p?l(h,p,6e4,"minute"):1e3<=p?l(h,p,1e3,"second"):h+" ms"}function l(h,p,w,_){return s(h/w)+" "+_+(p>=1.5*w?"s":"")}var d=24*(60*6e4);i.exports=function(h,p){p=p||{};var w=typeof h;if(w=="string"&&0<h.length)return a(h);if(w==="number"&&isFinite(h))return p.long?f(h):u(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},{}],12:[function(r,i){function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(A){if(w===setTimeout)return setTimeout(A,0);if((w===s||!w)&&setTimeout)return w=setTimeout,setTimeout(A,0);try{return w(A,0)}catch{try{return w.call(null,A,0)}catch{return w.call(this,A,0)}}}function f(A){if(_===clearTimeout)return clearTimeout(A);if((_===a||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(A);try{return _(A)}catch{try{return _.call(null,A)}catch{return _.call(this,A)}}}function l(){v&&U&&(v=!1,U.length?y=U.concat(y):E=-1,y.length&&d())}function d(){if(!v){var A=u(l);v=!0;for(var x=y.length;x;){for(U=y,y=[];++E<x;)U&&U[E].run();E=-1,x=y.length}U=null,v=!1,f(A)}}function h(A,x){this.fun=A,this.array=x}function p(){}var w,_,C=i.exports={};(function(){try{w=typeof setTimeout=="function"?setTimeout:s}catch{w=s}try{_=typeof clearTimeout=="function"?clearTimeout:a}catch{_=a}})();var U,y=[],v=!1,E=-1;C.nextTick=function(A){var x=Array(arguments.length-1);if(1<arguments.length)for(var I=1;I<arguments.length;I++)x[I-1]=arguments[I];y.push(new h(A,x)),y.length!==1||v||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},C.title="browser",C.browser=!0,C.env={},C.argv=[],C.version="",C.versions={},C.on=p,C.addListener=p,C.once=p,C.off=p,C.removeListener=p,C.removeAllListeners=p,C.emit=p,C.prependListener=p,C.prependOnceListener=p,C.listeners=function(){return[]},C.binding=function(){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(){throw new Error("process.chdir is not supported")},C.umask=function(){return 0}},{}],13:[function(r,i){(function(s){(function(){let a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?s:window):u=>(a||(a=Promise.resolve())).then(u).catch(f=>setTimeout(()=>{throw f},0))}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],14:[function(r,i){(function(s,a){(function(){"use strict";var u=r("safe-buffer").Buffer,f=a.crypto||a.msCrypto;i.exports=f&&f.getRandomValues?function(l,d){if(l>4294967295)throw new RangeError("requested too many random bytes");var h=u.allocUnsafe(l);if(0<l)if(65536<l)for(var p=0;p<l;p+=65536)f.getRandomValues(h.slice(p,p+65536));else f.getRandomValues(h);return typeof d=="function"?s.nextTick(function(){d(null,h)}):h}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{_process:12,"safe-buffer":30}],15:[function(r,i){"use strict";function s(p,w){p.prototype=Object.create(w.prototype),p.prototype.constructor=p,p.__proto__=w}function a(p,w,_){function C(y,v,E){return typeof w=="string"?w:w(y,v,E)}_||(_=Error);var U=(function(y){function v(E,A,x){return y.call(this,C(E,A,x))||this}return s(v,y),v})(_);U.prototype.name=_.name,U.prototype.code=p,h[p]=U}function u(p,w){if(Array.isArray(p)){var _=p.length;return p=p.map(function(C){return C+""}),2<_?"one of ".concat(w," ").concat(p.slice(0,_-1).join(", "),", or ")+p[_-1]:_===2?"one of ".concat(w," ").concat(p[0]," or ").concat(p[1]):"of ".concat(w," ").concat(p[0])}return"of ".concat(w," ").concat(p+"")}function f(p,w,_){return p.substr(!_||0>_?0:+_,w.length)===w}function l(p,w,_){return(_===void 0||_>p.length)&&(_=p.length),p.substring(_-w.length,_)===w}function d(p,w,_){return typeof _!="number"&&(_=0),!(_+w.length>p.length)&&p.indexOf(w,_)!==-1}var h={};a("ERR_INVALID_OPT_VALUE",function(p,w){return'The value "'+w+'" is invalid for option "'+p+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(p,w,_){var C;typeof w=="string"&&f(w,"not ")?(C="must not be",w=w.replace(/^not /,"")):C="must be";var U;if(l(p," argument"))U="The ".concat(p," ").concat(C," ").concat(u(w,"type"));else{var y=d(p,".")?"property":"argument";U='The "'.concat(p,'" ').concat(y," ").concat(C," ").concat(u(w,"type"))}return U+=". Received type ".concat(typeof _),U},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=h},{}],16:[function(r,i){(function(s){(function(){"use strict";function a(C){return this instanceof a?(d.call(this,C),h.call(this,C),this.allowHalfOpen=!0,void(C&&(C.readable===!1&&(this.readable=!1),C.writable===!1&&(this.writable=!1),C.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u))))):new a(C)}function u(){this._writableState.ended||s.nextTick(f,this)}function f(C){C.end()}var l=Object.keys||function(C){var U=[];for(var y in C)U.push(y);return U};i.exports=a;var d=r("./_stream_readable"),h=r("./_stream_writable");r("inherits")(a,d);for(var p,w=l(h.prototype),_=0;_<w.length;_++)p=w[_],a.prototype[p]||(a.prototype[p]=h.prototype[p]);Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(C){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=C,this._writableState.destroyed=C)}})}).call(this)}).call(this,r("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(r,i){"use strict";function s(u){return this instanceof s?void a.call(this,u):new s(u)}i.exports=s;var a=r("./_stream_transform");r("inherits")(s,a),s.prototype._transform=function(u,f,l){l(null,u)}},{"./_stream_transform":19,inherits:10}],18:[function(r,i){(function(s,a){(function(){"use strict";function u(o){return ue.from(o)}function f(o){return ue.isBuffer(o)||o instanceof ae}function l(o,c,g){return typeof o.prependListener=="function"?o.prependListener(c,g):void(o._events&&o._events[c]?Array.isArray(o._events[c])?o._events[c].unshift(g):o._events[c]=[g,o._events[c]]:o.on(c,g))}function d(o,c,g){Te=Te||r("./_stream_duplex"),o=o||{},typeof g!="boolean"&&(g=c instanceof Te),this.objectMode=!!o.objectMode,g&&(this.objectMode=this.objectMode||!!o.readableObjectMode),this.highWaterMark=Gt(this,o,"readableHighWaterMark",g),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=o.emitClose!==!1,this.autoDestroy=!!o.autoDestroy,this.destroyed=!1,this.defaultEncoding=o.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,o.encoding&&(!ze&&(ze=r("string_decoder/").StringDecoder),this.decoder=new ze(o.encoding),this.encoding=o.encoding)}function h(o){if(Te=Te||r("./_stream_duplex"),!(this instanceof h))return new h(o);var c=this instanceof Te;this._readableState=new d(o,this,c),this.readable=!0,o&&(typeof o.read=="function"&&(this._read=o.read),typeof o.destroy=="function"&&(this._destroy=o.destroy)),nt.call(this)}function p(o,c,g,S,L){Z("readableAddChunk",c);var M=o._readableState;if(c===null)M.reading=!1,y(o,M);else{var m;if(L||(m=_(M,c)),m)K(o,m);else if(!(M.objectMode||c&&0<c.length))S||(M.reading=!1,A(o,M));else if(typeof c=="string"||M.objectMode||Object.getPrototypeOf(c)===ue.prototype||(c=u(c)),S)M.endEmitted?K(o,new j):w(o,M,c,!0);else if(M.ended)K(o,new O);else{if(M.destroyed)return!1;M.reading=!1,M.decoder&&!g?(c=M.decoder.write(c),M.objectMode||c.length!==0?w(o,M,c,!1):A(o,M)):w(o,M,c,!1)}}return!M.ended&&(M.length<M.highWaterMark||M.length===0)}function w(o,c,g,S){c.flowing&&c.length===0&&!c.sync?(c.awaitDrain=0,o.emit("data",g)):(c.length+=c.objectMode?1:g.length,S?c.buffer.unshift(g):c.buffer.push(g),c.needReadable&&v(o)),A(o,c)}function _(o,c){var g;return f(c)||typeof c=="string"||c===void 0||o.objectMode||(g=new Pe("chunk",["string","Buffer","Uint8Array"],c)),g}function C(o){return 1073741824<=o?o=1073741824:(o--,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o++),o}function U(o,c){return 0>=o||c.length===0&&c.ended?0:c.objectMode?1:o===o?(o>c.highWaterMark&&(c.highWaterMark=C(o)),o<=c.length?o:c.ended?c.length:(c.needReadable=!0,0)):c.flowing&&c.length?c.buffer.head.data.length:c.length}function y(o,c){if(Z("onEofChunk"),!c.ended){if(c.decoder){var g=c.decoder.end();g&&g.length&&(c.buffer.push(g),c.length+=c.objectMode?1:g.length)}c.ended=!0,c.sync?v(o):(c.needReadable=!1,!c.emittedReadable&&(c.emittedReadable=!0,E(o)))}}function v(o){var c=o._readableState;Z("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(Z("emitReadable",c.flowing),c.emittedReadable=!0,s.nextTick(E,o))}function E(o){var c=o._readableState;Z("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&(c.length||c.ended)&&(o.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,q(o)}function A(o,c){c.readingMore||(c.readingMore=!0,s.nextTick(x,o,c))}function x(o,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&c.length===0);){var g=c.length;if(Z("maybeReadMore read 0"),o.read(0),g===c.length)break}c.readingMore=!1}function I(o){return function(){var c=o._readableState;Z("pipeOnDrain",c.awaitDrain),c.awaitDrain&&c.awaitDrain--,c.awaitDrain===0&&tt(o,"data")&&(c.flowing=!0,q(o))}}function F(o){var c=o._readableState;c.readableListening=0<o.listenerCount("readable"),c.resumeScheduled&&!c.paused?c.flowing=!0:0<o.listenerCount("data")&&o.resume()}function T(o){Z("readable nexttick read 0"),o.read(0)}function R(o,c){c.resumeScheduled||(c.resumeScheduled=!0,s.nextTick(P,o,c))}function P(o,c){Z("resume",c.reading),c.reading||o.read(0),c.resumeScheduled=!1,o.emit("resume"),q(o),c.flowing&&!c.reading&&o.read(0)}function q(o){var c=o._readableState;for(Z("flow",c.flowing);c.flowing&&o.read()!==null;);}function $(o,c){if(c.length===0)return null;var g;return c.objectMode?g=c.buffer.shift():!o||o>=c.length?(g=c.decoder?c.buffer.join(""):c.buffer.length===1?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):g=c.buffer.consume(o,c.decoder),g}function X(o){var c=o._readableState;Z("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,s.nextTick(te,c,o))}function te(o,c){if(Z("endReadableNT",o.endEmitted,o.length),!o.endEmitted&&o.length===0&&(o.endEmitted=!0,c.readable=!1,c.emit("end"),o.autoDestroy)){var g=c._writableState;(!g||g.autoDestroy&&g.finished)&&c.destroy()}}function fe(o,c){for(var g=0,S=o.length;g<S;g++)if(o[g]===c)return g;return-1}i.exports=h;var Te;h.ReadableState=d;var Z,Ot=r("events").EventEmitter,tt=function(o,c){return o.listeners(c).length},nt=r("./internal/streams/stream"),ue=r("buffer").Buffer,ae=a.Uint8Array||function(){},ut=r("util");Z=ut&&ut.debuglog?ut.debuglog("stream"):function(){};var ze,rt,dt,ht=r("./internal/streams/buffer_list"),Ge=r("./internal/streams/destroy"),Lt=r("./internal/streams/state"),Gt=Lt.getHighWaterMark,Ae=r("../errors").codes,Pe=Ae.ERR_INVALID_ARG_TYPE,O=Ae.ERR_STREAM_PUSH_AFTER_EOF,B=Ae.ERR_METHOD_NOT_IMPLEMENTED,j=Ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("inherits")(h,nt);var K=Ge.errorOrDestroy,ne=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(o){this._readableState&&(this._readableState.destroyed=o)}}),h.prototype.destroy=Ge.destroy,h.prototype._undestroy=Ge.undestroy,h.prototype._destroy=function(o,c){c(o)},h.prototype.push=function(o,c){var g,S=this._readableState;return S.objectMode?g=!0:typeof o=="string"&&(c=c||S.defaultEncoding,c!==S.encoding&&(o=ue.from(o,c),c=""),g=!0),p(this,o,c,!1,g)},h.prototype.unshift=function(o){return p(this,o,null,!0,!1)},h.prototype.isPaused=function(){return this._readableState.flowing===!1},h.prototype.setEncoding=function(o){ze||(ze=r("string_decoder/").StringDecoder);var c=new ze(o);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var g=this._readableState.buffer.head,S="";g!==null;)S+=c.write(g.data),g=g.next;return this._readableState.buffer.clear(),S!==""&&this._readableState.buffer.push(S),this._readableState.length=S.length,this},h.prototype.read=function(o){Z("read",o),o=parseInt(o,10);var c=this._readableState,g=o;if(o!==0&&(c.emittedReadable=!1),o===0&&c.needReadable&&((c.highWaterMark===0?0<c.length:c.length>=c.highWaterMark)||c.ended))return Z("read: emitReadable",c.length,c.ended),c.length===0&&c.ended?X(this):v(this),null;if(o=U(o,c),o===0&&c.ended)return c.length===0&&X(this),null;var S=c.needReadable;Z("need readable",S),(c.length===0||c.length-o<c.highWaterMark)&&(S=!0,Z("length less than watermark",S)),c.ended||c.reading?(S=!1,Z("reading or ended",S)):S&&(Z("do read"),c.reading=!0,c.sync=!0,c.length===0&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,!c.reading&&(o=U(g,c)));var L;return L=0<o?$(o,c):null,L===null?(c.needReadable=c.length<=c.highWaterMark,o=0):(c.length-=o,c.awaitDrain=0),c.length===0&&(!c.ended&&(c.needReadable=!0),g!==o&&c.ended&&X(this)),L!==null&&this.emit("data",L),L},h.prototype._read=function(){K(this,new B("_read()"))},h.prototype.pipe=function(o,c){function g(Q,ie){Z("onunpipe"),Q===V&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,L())}function S(){Z("onend"),o.end()}function L(){Z("cleanup"),o.removeListener("close",b),o.removeListener("finish",k),o.removeListener("drain",W),o.removeListener("error",m),o.removeListener("unpipe",g),V.removeListener("end",S),V.removeListener("end",D),V.removeListener("data",M),G=!0,N.awaitDrain&&(!o._writableState||o._writableState.needDrain)&&W()}function M(Q){Z("ondata");var ie=o.write(Q);Z("dest.write",ie),ie===!1&&((N.pipesCount===1&&N.pipes===o||1<N.pipesCount&&fe(N.pipes,o)!==-1)&&!G&&(Z("false write response, pause",N.awaitDrain),N.awaitDrain++),V.pause())}function m(Q){Z("onerror",Q),D(),o.removeListener("error",m),tt(o,"error")===0&&K(o,Q)}function b(){o.removeListener("finish",k),D()}function k(){Z("onfinish"),o.removeListener("close",b),D()}function D(){Z("unpipe"),V.unpipe(o)}var V=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=o;break;case 1:N.pipes=[N.pipes,o];break;default:N.pipes.push(o)}N.pipesCount+=1,Z("pipe count=%d opts=%j",N.pipesCount,c);var H=(!c||c.end!==!1)&&o!==s.stdout&&o!==s.stderr,Y=H?S:D;N.endEmitted?s.nextTick(Y):V.once("end",Y),o.on("unpipe",g);var W=I(V);o.on("drain",W);var G=!1;return V.on("data",M),l(o,"error",m),o.once("close",b),o.once("finish",k),o.emit("pipe",V),N.flowing||(Z("pipe resume"),V.resume()),o},h.prototype.unpipe=function(o){var c=this._readableState,g={hasUnpiped:!1};if(c.pipesCount===0)return this;if(c.pipesCount===1)return o&&o!==c.pipes?this:(o||(o=c.pipes),c.pipes=null,c.pipesCount=0,c.flowing=!1,o&&o.emit("unpipe",this,g),this);if(!o){var S=c.pipes,L=c.pipesCount;c.pipes=null,c.pipesCount=0,c.flowing=!1;for(var M=0;M<L;M++)S[M].emit("unpipe",this,{hasUnpiped:!1});return this}var m=fe(c.pipes,o);return m===-1?this:(c.pipes.splice(m,1),c.pipesCount-=1,c.pipesCount===1&&(c.pipes=c.pipes[0]),o.emit("unpipe",this,g),this)},h.prototype.on=function(o,c){var g=nt.prototype.on.call(this,o,c),S=this._readableState;return o==="data"?(S.readableListening=0<this.listenerCount("readable"),S.flowing!==!1&&this.resume()):o=="readable"&&!S.endEmitted&&!S.readableListening&&(S.readableListening=S.needReadable=!0,S.flowing=!1,S.emittedReadable=!1,Z("on readable",S.length,S.reading),S.length?v(this):!S.reading&&s.nextTick(T,this)),g},h.prototype.addListener=h.prototype.on,h.prototype.removeListener=function(o,c){var g=nt.prototype.removeListener.call(this,o,c);return o==="readable"&&s.nextTick(F,this),g},h.prototype.removeAllListeners=function(o){var c=nt.prototype.removeAllListeners.apply(this,arguments);return(o==="readable"||o===void 0)&&s.nextTick(F,this),c},h.prototype.resume=function(){var o=this._readableState;return o.flowing||(Z("resume"),o.flowing=!o.readableListening,R(this,o)),o.paused=!1,this},h.prototype.pause=function(){return Z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},h.prototype.wrap=function(o){var c=this,g=this._readableState,S=!1;for(var L in o.on("end",function(){if(Z("wrapped end"),g.decoder&&!g.ended){var m=g.decoder.end();m&&m.length&&c.push(m)}c.push(null)}),o.on("data",function(m){if(Z("wrapped data"),g.decoder&&(m=g.decoder.write(m)),!(g.objectMode&&m==null)&&(g.objectMode||m&&m.length)){var b=c.push(m);b||(S=!0,o.pause())}}),o)this[L]===void 0&&typeof o[L]=="function"&&(this[L]=(function(m){return function(){return o[m].apply(o,arguments)}})(L));for(var M=0;M<ne.length;M++)o.on(ne[M],this.emit.bind(this,ne[M]));return this._read=function(m){Z("wrapped _read",m),S&&(S=!1,o.resume())},this},typeof Symbol=="function"&&(h.prototype[Symbol.asyncIterator]=function(){return rt===void 0&&(rt=r("./internal/streams/async_iterator")),rt(this)}),Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(o){this._readableState&&(this._readableState.flowing=o)}}),h._fromList=$,Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(h.from=function(o,c){return dt===void 0&&(dt=r("./internal/streams/from")),dt(h,o,c)})}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(r,i){"use strict";function s(C,U){var y=this._transformState;y.transforming=!1;var v=y.writecb;if(v===null)return this.emit("error",new h);y.writechunk=null,y.writecb=null,U!=null&&this.push(U),v(C);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function a(C){return this instanceof a?(_.call(this,C),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,C&&(typeof C.transform=="function"&&(this._transform=C.transform),typeof C.flush=="function"&&(this._flush=C.flush)),void this.on("prefinish",u)):new a(C)}function u(){var C=this;typeof this._flush!="function"||this._readableState.destroyed?f(this,null,null):this._flush(function(U,y){f(C,U,y)})}function f(C,U,y){if(U)return C.emit("error",U);if(y!=null&&C.push(y),C._writableState.length)throw new w;if(C._transformState.transforming)throw new p;return C.push(null)}i.exports=a;var l=r("../errors").codes,d=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,w=l.ERR_TRANSFORM_WITH_LENGTH_0,_=r("./_stream_duplex");r("inherits")(a,_),a.prototype.push=function(C,U){return this._transformState.needTransform=!1,_.prototype.push.call(this,C,U)},a.prototype._transform=function(C,U,y){y(new d("_transform()"))},a.prototype._write=function(C,U,y){var v=this._transformState;if(v.writecb=y,v.writechunk=C,v.writeencoding=U,!v.transforming){var E=this._readableState;(v.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},a.prototype._read=function(){var C=this._transformState;C.writechunk===null||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},a.prototype._destroy=function(C,U){_.prototype._destroy.call(this,C,function(y){U(y)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(r,i){(function(s,a){(function(){"use strict";function u(O){var B=this;this.next=null,this.entry=null,this.finish=function(){X(B,O)}}function f(O){return Z.from(O)}function l(O){return Z.isBuffer(O)||O instanceof Ot}function d(){}function h(O,B,j){te=te||r("./_stream_duplex"),O=O||{},typeof j!="boolean"&&(j=B instanceof te),this.objectMode=!!O.objectMode,j&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=ue(this,O,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var K=O.decodeStrings===!1;this.decodeStrings=!K,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){A(B,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function p(O){te=te||r("./_stream_duplex");var B=this instanceof te;return B||Pe.call(p,this)?(this._writableState=new h(O,this,B),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),void Te.call(this)):new p(O)}function w(O,B){var j=new Lt;Ae(O,j),s.nextTick(B,j)}function _(O,B,j,K){var ne;return j===null?ne=new Ge:typeof j!="string"&&!B.objectMode&&(ne=new ut("chunk",["string","Buffer"],j)),!ne||(Ae(O,ne),s.nextTick(K,ne),!1)}function C(O,B,j){return O.objectMode||O.decodeStrings===!1||typeof B!="string"||(B=Z.from(B,j)),B}function U(O,B,j,K,ne,o){if(!j){var c=C(B,K,ne);K!==c&&(j=!0,ne="buffer",K=c)}var g=B.objectMode?1:K.length;B.length+=g;var S=B.length<B.highWaterMark;if(S||(B.needDrain=!0),B.writing||B.corked){var L=B.lastBufferedRequest;B.lastBufferedRequest={chunk:K,encoding:ne,isBuf:j,callback:o,next:null},L?L.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else y(O,B,!1,g,K,ne,o);return S}function y(O,B,j,K,ne,o,c){B.writelen=K,B.writecb=c,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new ht("write")):j?O._writev(ne,B.onwrite):O._write(ne,o,B.onwrite),B.sync=!1}function v(O,B,j,K,ne){--B.pendingcb,j?(s.nextTick(ne,K),s.nextTick(q,O,B),O._writableState.errorEmitted=!0,Ae(O,K)):(ne(K),O._writableState.errorEmitted=!0,Ae(O,K),q(O,B))}function E(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function A(O,B){var j=O._writableState,K=j.sync,ne=j.writecb;if(typeof ne!="function")throw new rt;if(E(j),B)v(O,j,K,B,ne);else{var o=T(j)||O.destroyed;o||j.corked||j.bufferProcessing||!j.bufferedRequest||F(O,j),K?s.nextTick(x,O,j,o,ne):x(O,j,o,ne)}}function x(O,B,j,K){j||I(O,B),B.pendingcb--,K(),q(O,B)}function I(O,B){B.length===0&&B.needDrain&&(B.needDrain=!1,O.emit("drain"))}function F(O,B){B.bufferProcessing=!0;var j=B.bufferedRequest;if(O._writev&&j&&j.next){var K=B.bufferedRequestCount,ne=Array(K),o=B.corkedRequestsFree;o.entry=j;for(var c=0,g=!0;j;)ne[c]=j,j.isBuf||(g=!1),j=j.next,c+=1;ne.allBuffers=g,y(O,B,!0,B.length,ne,"",o.finish),B.pendingcb++,B.lastBufferedRequest=null,o.next?(B.corkedRequestsFree=o.next,o.next=null):B.corkedRequestsFree=new u(B),B.bufferedRequestCount=0}else{for(;j;){var S=j.chunk,L=j.encoding,M=j.callback,m=B.objectMode?1:S.length;if(y(O,B,!1,m,S,L,M),j=j.next,B.bufferedRequestCount--,B.writing)break}j===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=j,B.bufferProcessing=!1}function T(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function R(O,B){O._final(function(j){B.pendingcb--,j&&Ae(O,j),B.prefinished=!0,O.emit("prefinish"),q(O,B)})}function P(O,B){B.prefinished||B.finalCalled||(typeof O._final!="function"||B.destroyed?(B.prefinished=!0,O.emit("prefinish")):(B.pendingcb++,B.finalCalled=!0,s.nextTick(R,O,B)))}function q(O,B){var j=T(B);if(j&&(P(O,B),B.pendingcb===0&&(B.finished=!0,O.emit("finish"),B.autoDestroy))){var K=O._readableState;(!K||K.autoDestroy&&K.endEmitted)&&O.destroy()}return j}function $(O,B,j){B.ending=!0,q(O,B),j&&(B.finished?s.nextTick(j):O.once("finish",j)),B.ended=!0,O.writable=!1}function X(O,B,j){var K=O.entry;for(O.entry=null;K;){var ne=K.callback;B.pendingcb--,ne(j),K=K.next}B.corkedRequestsFree.next=O}i.exports=p;var te;p.WritableState=h;var fe={deprecate:r("util-deprecate")},Te=r("./internal/streams/stream"),Z=r("buffer").Buffer,Ot=a.Uint8Array||function(){},tt=r("./internal/streams/destroy"),nt=r("./internal/streams/state"),ue=nt.getHighWaterMark,ae=r("../errors").codes,ut=ae.ERR_INVALID_ARG_TYPE,ze=ae.ERR_METHOD_NOT_IMPLEMENTED,rt=ae.ERR_MULTIPLE_CALLBACK,dt=ae.ERR_STREAM_CANNOT_PIPE,ht=ae.ERR_STREAM_DESTROYED,Ge=ae.ERR_STREAM_NULL_VALUES,Lt=ae.ERR_STREAM_WRITE_AFTER_END,Gt=ae.ERR_UNKNOWN_ENCODING,Ae=tt.errorOrDestroy;r("inherits")(p,Te),h.prototype.getBuffer=function(){for(var O=this.bufferedRequest,B=[];O;)B.push(O),O=O.next;return B},(function(){try{Object.defineProperty(h.prototype,"buffer",{get:fe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Pe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Pe=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(O){return!!Pe.call(this,O)||this===p&&O&&O._writableState instanceof h}})):Pe=function(O){return O instanceof this},p.prototype.pipe=function(){Ae(this,new dt)},p.prototype.write=function(O,B,j){var K=this._writableState,ne=!1,o=!K.objectMode&&l(O);return o&&!Z.isBuffer(O)&&(O=f(O)),typeof B=="function"&&(j=B,B=null),o?B="buffer":!B&&(B=K.defaultEncoding),typeof j!="function"&&(j=d),K.ending?w(this,j):(o||_(this,K,O,j))&&(K.pendingcb++,ne=U(this,K,o,O,B,j)),ne},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&F(this,O))},p.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())))throw new Gt(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(O,B,j){j(new ze("_write()"))},p.prototype._writev=null,p.prototype.end=function(O,B,j){var K=this._writableState;return typeof O=="function"?(j=O,O=null,B=null):typeof B=="function"&&(j=B,B=null),O!=null&&this.write(O,B),K.corked&&(K.corked=1,this.uncork()),K.ending||$(this,K,j),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),p.prototype.destroy=tt.destroy,p.prototype._undestroy=tt.undestroy,p.prototype._destroy=function(O,B){B(O)}}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(r,i){(function(s){(function(){"use strict";function a(I,F,T){return F in I?Object.defineProperty(I,F,{value:T,enumerable:!0,configurable:!0,writable:!0}):I[F]=T,I}function u(I,F){return{value:I,done:F}}function f(I){var F=I[w];if(F!==null){var T=I[E].read();T!==null&&(I[y]=null,I[w]=null,I[_]=null,F(u(T,!1)))}}function l(I){s.nextTick(f,I)}function d(I,F){return function(T,R){I.then(function(){return F[U]?void T(u(void 0,!0)):void F[v](T,R)},R)}}var h,p=r("./end-of-stream"),w=Symbol("lastResolve"),_=Symbol("lastReject"),C=Symbol("error"),U=Symbol("ended"),y=Symbol("lastPromise"),v=Symbol("handlePromise"),E=Symbol("stream"),A=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((h={get stream(){return this[E]},next:function(){var I=this,F=this[C];if(F!==null)return Promise.reject(F);if(this[U])return Promise.resolve(u(void 0,!0));if(this[E].destroyed)return new Promise(function(q,$){s.nextTick(function(){I[C]?$(I[C]):q(u(void 0,!0))})});var T,R=this[y];if(R)T=new Promise(d(R,this));else{var P=this[E].read();if(P!==null)return Promise.resolve(u(P,!1));T=new Promise(this[v])}return this[y]=T,T}},a(h,Symbol.asyncIterator,function(){return this}),a(h,"return",function(){var I=this;return new Promise(function(F,T){I[E].destroy(null,function(R){return R?void T(R):void F(u(void 0,!0))})})}),h),A);i.exports=function(I){var F,T=Object.create(x,(F={},a(F,E,{value:I,writable:!0}),a(F,w,{value:null,writable:!0}),a(F,_,{value:null,writable:!0}),a(F,C,{value:null,writable:!0}),a(F,U,{value:I._readableState.endEmitted,writable:!0}),a(F,v,{value:function(R,P){var q=T[E].read();q?(T[y]=null,T[w]=null,T[_]=null,R(u(q,!1))):(T[w]=R,T[_]=P)},writable:!0}),F));return T[y]=null,p(I,function(R){if(R&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=T[_];return P!==null&&(T[y]=null,T[w]=null,T[_]=null,P(R)),void(T[C]=R)}var q=T[w];q!==null&&(T[y]=null,T[w]=null,T[_]=null,q(u(void 0,!0))),T[U]=!0}),I.on("readable",l.bind(null,T)),T}}).call(this)}).call(this,r("_process"))},{"./end-of-stream":24,_process:12}],22:[function(r,i){"use strict";function s(y,v){var E=Object.keys(y);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(y);v&&(A=A.filter(function(x){return Object.getOwnPropertyDescriptor(y,x).enumerable})),E.push.apply(E,A)}return E}function a(y){for(var v,E=1;E<arguments.length;E++)v=arguments[E]==null?{}:arguments[E],E%2?s(Object(v),!0).forEach(function(A){u(y,A,v[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):s(Object(v)).forEach(function(A){Object.defineProperty(y,A,Object.getOwnPropertyDescriptor(v,A))});return y}function u(y,v,E){return v in y?Object.defineProperty(y,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[v]=E,y}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function l(y,v){for(var E,A=0;A<v.length;A++)E=v[A],E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}function d(y,v,E){return v&&l(y.prototype,v),E&&l(y,E),y}function h(y,v,E){w.prototype.copy.call(y,v,E)}var p=r("buffer"),w=p.Buffer,_=r("util"),C=_.inspect,U=C&&C.custom||"inspect";i.exports=(function(){function y(){f(this,y),this.head=null,this.tail=null,this.length=0}return d(y,[{key:"push",value:function(v){var E={data:v,next:null};0<this.length?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(v){var E={data:v,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var E=this.head,A=""+E.data;E=E.next;)A+=v+E.data;return A}},{key:"concat",value:function(v){if(this.length===0)return w.alloc(0);for(var E=w.allocUnsafe(v>>>0),A=this.head,x=0;A;)h(A.data,E,x),x+=A.data.length,A=A.next;return E}},{key:"consume",value:function(v,E){var A;return v<this.head.data.length?(A=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?A=this.shift():A=E?this._getString(v):this._getBuffer(v),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var E=this.head,A=1,x=E.data;for(v-=x.length;E=E.next;){var I=E.data,F=v>I.length?I.length:v;if(x+=F===I.length?I:I.slice(0,v),v-=F,v===0){F===I.length?(++A,this.head=E.next?E.next:this.tail=null):(this.head=E,E.data=I.slice(F));break}++A}return this.length-=A,x}},{key:"_getBuffer",value:function(v){var E=w.allocUnsafe(v),A=this.head,x=1;for(A.data.copy(E),v-=A.data.length;A=A.next;){var I=A.data,F=v>I.length?I.length:v;if(I.copy(E,E.length-v,0,F),v-=F,v===0){F===I.length?(++x,this.head=A.next?A.next:this.tail=null):(this.head=A,A.data=I.slice(F));break}++x}return this.length-=x,E}},{key:U,value:function(v,E){return C(this,a({},E,{depth:0,customInspect:!1}))}}]),y})()},{buffer:3,util:2}],23:[function(r,i){(function(s){(function(){"use strict";function a(l,d){f(l,d),u(l)}function u(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function f(l,d){l.emit("error",d)}i.exports={destroy:function(l,d){var h=this,p=this._readableState&&this._readableState.destroyed,w=this._writableState&&this._writableState.destroyed;return p||w?(d?d(l):l&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,s.nextTick(f,this,l)):s.nextTick(f,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(_){!d&&_?h._writableState?h._writableState.errorEmitted?s.nextTick(u,h):(h._writableState.errorEmitted=!0,s.nextTick(a,h,_)):s.nextTick(a,h,_):d?(s.nextTick(u,h),d(_)):s.nextTick(u,h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(l,d){var h=l._readableState,p=l._writableState;h&&h.autoDestroy||p&&p.autoDestroy?l.destroy(d):l.emit("error",d)}}}).call(this)}).call(this,r("_process"))},{_process:12}],24:[function(r,i){"use strict";function s(d){var h=!1;return function(){if(!h){h=!0;for(var p=arguments.length,w=Array(p),_=0;_<p;_++)w[_]=arguments[_];d.apply(this,w)}}}function a(){}function u(d){return d.setHeader&&typeof d.abort=="function"}function f(d,h,p){if(typeof h=="function")return f(d,null,h);h||(h={}),p=s(p||a);var w=h.readable||h.readable!==!1&&d.readable,_=h.writable||h.writable!==!1&&d.writable,C=function(){d.writable||y()},U=d._writableState&&d._writableState.finished,y=function(){_=!1,U=!0,w||p.call(d)},v=d._readableState&&d._readableState.endEmitted,E=function(){w=!1,v=!0,_||p.call(d)},A=function(F){p.call(d,F)},x=function(){var F;return w&&!v?(d._readableState&&d._readableState.ended||(F=new l),p.call(d,F)):_&&!U?(d._writableState&&d._writableState.ended||(F=new l),p.call(d,F)):void 0},I=function(){d.req.on("finish",y)};return u(d)?(d.on("complete",y),d.on("abort",x),d.req?I():d.on("request",I)):_&&!d._writableState&&(d.on("end",C),d.on("close",C)),d.on("end",E),d.on("finish",y),h.error!==!1&&d.on("error",A),d.on("close",x),function(){d.removeListener("complete",y),d.removeListener("abort",x),d.removeListener("request",I),d.req&&d.req.removeListener("finish",y),d.removeListener("end",C),d.removeListener("close",C),d.removeListener("finish",y),d.removeListener("end",E),d.removeListener("error",A),d.removeListener("close",x)}}var l=r("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;i.exports=f},{"../../../errors":15}],25:[function(r,i){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(r,i){"use strict";function s(U){var y=!1;return function(){y||(y=!0,U.apply(void 0,arguments))}}function a(U){if(U)throw U}function u(U){return U.setHeader&&typeof U.abort=="function"}function f(U,y,v,E){E=s(E);var A=!1;U.on("close",function(){A=!0}),p===void 0&&(p=r("./end-of-stream")),p(U,{readable:y,writable:v},function(I){return I?E(I):(A=!0,void E())});var x=!1;return function(I){if(!A)return x?void 0:(x=!0,u(U)?U.abort():typeof U.destroy=="function"?U.destroy():void E(I||new C("pipe")))}}function l(U){U()}function d(U,y){return U.pipe(y)}function h(U){return U.length&&typeof U[U.length-1]=="function"?U.pop():a}var p,w=r("../../../errors").codes,_=w.ERR_MISSING_ARGS,C=w.ERR_STREAM_DESTROYED;i.exports=function(){for(var U=arguments.length,y=Array(U),v=0;v<U;v++)y[v]=arguments[v];var E=h(y);if(Array.isArray(y[0])&&(y=y[0]),2>y.length)throw new _("streams");var A,x=y.map(function(I,F){var T=F<y.length-1;return f(I,T,0<F,function(R){A||(A=R),R&&x.forEach(l),T||(x.forEach(l),E(A))})});return y.reduce(d)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(r,i){"use strict";function s(u,f,l){return u.highWaterMark==null?f?u[l]:null:u.highWaterMark}var a=r("../../../errors").codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function(u,f,l,d){var h=s(f,d,l);if(h!=null){if(!(isFinite(h)&&t(h)===h)||0>h){var p=d?l:"highWaterMark";throw new a(p,h)}return t(h)}return u.objectMode?16:16384}}},{"../../../errors":15}],28:[function(r,i){i.exports=r("events").EventEmitter},{events:7}],29:[function(r,i,s){s=i.exports=r("./lib/_stream_readable.js"),s.Stream=s,s.Readable=s,s.Writable=r("./lib/_stream_writable.js"),s.Duplex=r("./lib/_stream_duplex.js"),s.Transform=r("./lib/_stream_transform.js"),s.PassThrough=r("./lib/_stream_passthrough.js"),s.finished=r("./lib/internal/streams/end-of-stream.js"),s.pipeline=r("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(r,i,s){function a(d,h){for(var p in d)h[p]=d[p]}function u(d,h,p){return l(d,h,p)}var f=r("buffer"),l=f.Buffer;l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?i.exports=f:(a(f,s),s.Buffer=u),u.prototype=Object.create(l.prototype),a(l,u),u.from=function(d,h,p){if(typeof d=="number")throw new TypeError("Argument must not be a number");return l(d,h,p)},u.alloc=function(d,h,p){if(typeof d!="number")throw new TypeError("Argument must be a number");var w=l(d);return h===void 0?w.fill(0):typeof p=="string"?w.fill(h,p):w.fill(h),w},u.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return l(d)},u.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(d)}},{buffer:3}],31:[function(r,i,s){"use strict";function a(x){if(!x)return"utf8";for(var I;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(I)return;x=(""+x).toLowerCase(),I=!0}}function u(x){var I=a(x);if(typeof I!="string"&&(E.isEncoding===A||!A(x)))throw new Error("Unknown encoding: "+x);return I||x}function f(x){this.encoding=u(x);var I;switch(this.encoding){case"utf16le":this.text=w,this.end=_,I=4;break;case"utf8":this.fillLast=p,I=4;break;case"base64":this.text=C,this.end=U,I=3;break;default:return this.write=y,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(I)}function l(x){return 127>=x?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function d(x,I,F){var T=I.length-1;if(T<F)return 0;var R=l(I[T]);return 0<=R?(0<R&&(x.lastNeed=R-1),R):--T<F||R===-2?0:(R=l(I[T]),0<=R?(0<R&&(x.lastNeed=R-2),R):--T<F||R===-2?0:(R=l(I[T]),0<=R?(0<R&&(R===2?R=0:x.lastNeed=R-3),R):0))}function h(x,I){if((192&I[0])!=128)return x.lastNeed=0,"\uFFFD";if(1<x.lastNeed&&1<I.length){if((192&I[1])!=128)return x.lastNeed=1,"\uFFFD";if(2<x.lastNeed&&2<I.length&&(192&I[2])!=128)return x.lastNeed=2,"\uFFFD"}}function p(x){var I=this.lastTotal-this.lastNeed,F=h(this,x,I);return F===void 0?this.lastNeed<=x.length?(x.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,I,0,x.length),void(this.lastNeed-=x.length)):F}function w(x,I){if((x.length-I)%2==0){var F=x.toString("utf16le",I);if(F){var T=F.charCodeAt(F.length-1);if(55296<=T&&56319>=T)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],F.slice(0,-1)}return F}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",I,x.length-1)}function _(x){var I=x&&x.length?this.write(x):"";if(this.lastNeed){var F=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,F)}return I}function C(x,I){var F=(x.length-I)%3;return F==0?x.toString("base64",I):(this.lastNeed=3-F,this.lastTotal=3,F==1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",I,x.length-F))}function U(x){var I=x&&x.length?this.write(x):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function y(x){return x.toString(this.encoding)}function v(x){return x&&x.length?this.write(x):""}var E=r("safe-buffer").Buffer,A=E.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};s.StringDecoder=f,f.prototype.write=function(x){if(x.length===0)return"";var I,F;if(this.lastNeed){if(I=this.fillLast(x),I===void 0)return"";F=this.lastNeed,this.lastNeed=0}else F=0;return F<x.length?I?I+this.text(x,F):this.text(x,F):I||""},f.prototype.end=function(x){var I=x&&x.length?this.write(x):"";return this.lastNeed?I+"\uFFFD":I},f.prototype.text=function(x,I){var F=d(this,x,I);if(!this.lastNeed)return x.toString("utf8",I);this.lastTotal=F;var T=x.length-(F-this.lastNeed);return x.copy(this.lastChar,0,T),x.toString("utf8",I,T)},f.prototype.fillLast=function(x){return this.lastNeed<=x.length?(x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),void(this.lastNeed-=x.length))}},{"safe-buffer":30}],32:[function(r,i){(function(s){(function(){function a(u){try{if(!s.localStorage)return!1}catch{return!1}var f=s.localStorage[u];return f!=null&&(f+"").toLowerCase()==="true"}i.exports=function(u,f){function l(){if(!d){if(a("throwDeprecation"))throw new Error(f);a("traceDeprecation")?console.trace(f):console.warn(f),d=!0}return u.apply(this,arguments)}if(a("noDeprecation"))return u;var d=!1;return l}}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],"/":[function(r,i){function s(U){return U.replace(/a=ice-options:trickle\s\n/g,"")}function a(U){console.warn(U)}let u=r("debug")("simple-peer"),f=r("get-browser-rtc"),l=r("randombytes"),d=r("readable-stream"),h=r("queue-microtask"),p=r("err-code"),{Buffer:w}=r("buffer"),_=65536;class C extends d.Duplex{constructor(y){if(y=Object.assign({allowHalfOpen:!1},y),super(y),this._id=l(4).toString("hex").slice(0,7),this._debug("new peer %o",y),this.channelName=y.initiator?y.channelName||l(20).toString("hex"):null,this.initiator=y.initiator||!1,this.channelConfig=y.channelConfig||C.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},C.config,y.config),this.offerOptions=y.offerOptions||{},this.answerOptions=y.answerOptions||{},this.sdpTransform=y.sdpTransform||(v=>v),this.streams=y.streams||(y.stream?[y.stream]:[]),this.trickle=y.trickle===void 0||y.trickle,this.allowHalfTrickle=y.allowHalfTrickle!==void 0&&y.allowHalfTrickle,this.iceCompleteTimeout=y.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=y.wrtc&&typeof y.wrtc=="object"?y.wrtc:f(),!this._wrtc)throw p(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(v){return void this.destroy(p(v,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=v=>{this._onIceCandidate(v)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(v=>{this.destroy(p(v,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=v=>{this._setupData(v)},this.streams&&this.streams.forEach(v=>{this.addStream(v)}),this._pc.ontrack=v=>{this._onTrack(v)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof y=="string")try{y=JSON.parse(y)}catch{y={}}this._debug("signal()"),y.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),y.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(y.transceiverRequest.kind,y.transceiverRequest.init)),y.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(y.candidate):this._pendingCandidates.push(y.candidate)),y.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(y)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(v=>{this._addIceCandidate(v)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(v=>{this.destroy(p(v,"ERR_SET_REMOTE_DESCRIPTION"))}),y.sdp||y.candidate||y.renegotiate||y.transceiverRequest||this.destroy(p(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(y){let v=new this._wrtc.RTCIceCandidate(y);this._pc.addIceCandidate(v).catch(E=>{!v.address||v.address.endsWith(".local")?a("Ignoring unsupported ICE candidate."):this.destroy(p(E,"ERR_ADD_ICE_CANDIDATE"))})}send(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(y)}}addTransceiver(y,v){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(y,v),this._needsNegotiation()}catch(E){this.destroy(p(E,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:y,init:v}})}}addStream(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),y.getTracks().forEach(v=>{this.addTrack(v,y)})}}addTrack(y,v){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let E=this._senderMap.get(y)||new Map,A=E.get(v);if(!A)A=this._pc.addTrack(y,v),E.set(v,A),this._senderMap.set(y,E),this._needsNegotiation();else throw A.removed?p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):p(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(y,v,E){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let A=this._senderMap.get(y),x=A?A.get(E):null;if(!x)throw p(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");v&&this._senderMap.set(v,A),x.replaceTrack==null?this.destroy(p(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):x.replaceTrack(v)}removeTrack(y,v){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let E=this._senderMap.get(y),A=E?E.get(v):null;if(!A)throw p(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{A.removed=!0,this._pc.removeTrack(A)}catch(x){x.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(A):this.destroy(p(x,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),y.getTracks().forEach(v=>{this.removeTrack(v,y)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,h(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(y){this._destroy(y,()=>{})}_destroy(y,v){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",y&&(y.message||y)),h(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",y&&(y.message||y)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,y&&this.emit("error",y),this.emit("close"),v()}))}_setupData(y){if(!y.channel)return this.destroy(p(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=y.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=_),this.channelName=this._channel.label,this._channel.onmessage=E=>{this._onChannelMessage(E)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=E=>{let A=E.error instanceof Error?E.error:new Error(`Datachannel error: ${E.message} ${E.filename}:${E.lineno}:${E.colno}`);this.destroy(p(A,"ERR_DATA_CHANNEL"))};let v=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(v&&this._onChannelClose(),v=!0):v=!1},5e3)}_read(){}_write(y,v,E){if(this.destroyed)return E(p(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(y)}catch(A){return this.destroy(p(A,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>_?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=E):E(null)}else this._debug("write before connect"),this._chunk=y,this._cb=E}_onFinish(){if(!this.destroyed){let y=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?y():this.once("connect",y)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=s(y.sdp)),y.sdp=this.sdpTransform(y.sdp);let v=()=>{if(!this.destroyed){let E=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:E.type,sdp:E.sdp})}};this._pc.setLocalDescription(y).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?v():this.once("_iceComplete",v))}).catch(E=>{this.destroy(p(E,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(p(y,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(y=>{y.mid||!y.sender.track||y.requested||(y.requested=!0,this.addTransceiver(y.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=s(y.sdp)),y.sdp=this.sdpTransform(y.sdp);let v=()=>{if(!this.destroyed){let E=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:E.type,sdp:E.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(y).then(()=>{this.destroyed||(this.trickle||this._iceComplete?v():this.once("_iceComplete",v))}).catch(E=>{this.destroy(p(E,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(p(y,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(p(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let y=this._pc.iceConnectionState,v=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",y,v),this.emit("iceStateChange",y,v),(y==="connected"||y==="completed")&&(this._pcReady=!0,this._maybeReady()),y==="failed"&&this.destroy(p(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),y==="closed"&&this.destroy(p(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(y){let v=E=>(Object.prototype.toString.call(E.values)==="[object Array]"&&E.values.forEach(A=>{Object.assign(E,A)}),E);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(E=>{let A=[];E.forEach(x=>{A.push(v(x))}),y(null,A)},E=>y(E)):0<this._pc.getStats.length?this._pc.getStats(E=>{if(this.destroyed)return;let A=[];E.result().forEach(x=>{let I={};x.names().forEach(F=>{I[F]=x.stat(F)}),I.id=x.id,I.type=x.type,I.timestamp=x.timestamp,A.push(v(I))}),y(null,A)},E=>y(E)):y(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let y=()=>{this.destroyed||this.getStats((v,E)=>{if(this.destroyed)return;v&&(E=[]);let A={},x={},I={},F=!1;E.forEach(R=>{(R.type==="remotecandidate"||R.type==="remote-candidate")&&(A[R.id]=R),(R.type==="localcandidate"||R.type==="local-candidate")&&(x[R.id]=R),(R.type==="candidatepair"||R.type==="candidate-pair")&&(I[R.id]=R)});let T=R=>{F=!0;let P=x[R.localCandidateId];P&&(P.ip||P.address)?(this.localAddress=P.ip||P.address,this.localPort=+P.port):P&&P.ipAddress?(this.localAddress=P.ipAddress,this.localPort=+P.portNumber):typeof R.googLocalAddress=="string"&&(P=R.googLocalAddress.split(":"),this.localAddress=P[0],this.localPort=+P[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let q=A[R.remoteCandidateId];q&&(q.ip||q.address)?(this.remoteAddress=q.ip||q.address,this.remotePort=+q.port):q&&q.ipAddress?(this.remoteAddress=q.ipAddress,this.remotePort=+q.portNumber):typeof R.googRemoteAddress=="string"&&(q=R.googRemoteAddress.split(":"),this.remoteAddress=q[0],this.remotePort=+q[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(E.forEach(R=>{R.type==="transport"&&R.selectedCandidatePairId&&T(I[R.selectedCandidatePairId]),(R.type==="googCandidatePair"&&R.googActiveConnection==="true"||(R.type==="candidatepair"||R.type==="candidate-pair")&&R.selected)&&T(R)}),!F&&(!Object.keys(I).length||Object.keys(x).length))return void setTimeout(y,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(P){return this.destroy(p(P,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let R=this._cb;this._cb=null,R(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};y()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>_)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(y=>{this._pc.removeTrack(y),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(y){this.destroyed||(y.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:y.candidate.candidate,sdpMLineIndex:y.candidate.sdpMLineIndex,sdpMid:y.candidate.sdpMid}}):!y.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),y.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(y){if(this.destroyed)return;let v=y.data;v instanceof ArrayBuffer&&(v=w.from(v)),this.push(v)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let y=this._cb;this._cb=null,y(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(y){this.destroyed||y.streams.forEach(v=>{this._debug("on track"),this.emit("track",y.track,v),this._remoteTracks.push({track:y.track,stream:v}),this._remoteStreams.some(E=>E.id===v.id)||(this._remoteStreams.push(v),h(()=>{this._debug("on stream"),this.emit("stream",v)}))})}_debug(){let y=[].slice.call(arguments);y[0]="["+this._id+"] "+y[0],u.apply(null,y)}}C.WEBRTC_SUPPORT=!!f(),C.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},C.channelConfig={},i.exports=C},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})});var Qc=nr((af,Zc)=>{Zc.exports=window.wp.url});var th={};ao(th,{CRDT_DOC_META_PERSISTENCE_KEY:()=>Ai,CRDT_RECORD_MAP_KEY:()=>Ri,CRDT_RECORD_METADATA_MAP_KEY:()=>wn,CRDT_RECORD_METADATA_SAVED_AT_KEY:()=>It,CRDT_RECORD_METADATA_SAVED_BY_KEY:()=>Di,Delta:()=>lc,LOCAL_EDITOR_ORIGIN:()=>Ui,LOCAL_SYNC_MANAGER_ORIGIN:()=>Nr,WORDPRESS_META_KEY_FOR_CRDT_DOC_PERSISTENCE:()=>Mr,Y:()=>zt,createSyncManager:()=>ol});var zt={};ao(zt,{AbsolutePosition:()=>di,AbstractConnector:()=>fs,AbstractStruct:()=>Hn,AbstractType:()=>_e,Array:()=>hn,ContentAny:()=>Yt,ContentBinary:()=>gn,ContentDeleted:()=>qn,ContentEmbed:()=>Ut,ContentFormat:()=>be,ContentJSON:()=>Ir,ContentString:()=>ct,ContentType:()=>Qe,Doc:()=>Dt,GC:()=>Ie,ID:()=>At,Item:()=>le,Map:()=>fn,PermanentUserData:()=>gs,RelativePosition:()=>Fn,Snapshot:()=>xr,Text:()=>Pn,Transaction:()=>fi,UndoManager:()=>un,UpdateEncoderV1:()=>wt,XmlElement:()=>jn,XmlFragment:()=>pn,XmlHook:()=>Ur,XmlText:()=>_i,YArrayEvent:()=>mi,YEvent:()=>dn,YMapEvent:()=>yi,YTextEvent:()=>wi,YXmlEvent:()=>bi,applyUpdate:()=>Or,applyUpdateV2:()=>Wt,cleanupYTextFormatting:()=>Za,compareIDs:()=>an,compareRelativePositions:()=>xu,convertUpdateFormatV1ToV2:()=>zu,convertUpdateFormatV2ToV1:()=>Ma,createAbsolutePositionFromRelativePosition:()=>Cu,createDeleteSet:()=>Ei,createDeleteSetFromStructStore:()=>Ss,createDocFromSnapshot:()=>Uu,createID:()=>ee,createRelativePositionFromJSON:()=>yu,createRelativePositionFromTypeIndex:()=>bu,createSnapshot:()=>Ds,decodeRelativePosition:()=>Su,decodeSnapshot:()=>Au,decodeSnapshotV2:()=>Sa,decodeStateVector:()=>ks,decodeUpdate:()=>Fu,decodeUpdateV2:()=>Da,diffUpdate:()=>qu,diffUpdateV2:()=>Us,emptySnapshot:()=>Ru,encodeRelativePosition:()=>vu,encodeSnapshot:()=>Tu,encodeSnapshotV2:()=>Ea,encodeStateAsUpdate:()=>zn,encodeStateAsUpdateV2:()=>Wn,encodeStateVector:()=>As,encodeStateVectorFromUpdate:()=>Pu,encodeStateVectorFromUpdateV2:()=>Ia,equalDeleteSets:()=>wa,equalSnapshots:()=>ku,findIndexSS:()=>Ze,findRootTypeKey:()=>Rs,getItem:()=>_r,getState:()=>ye,getTypeChildren:()=>Ju,isDeleted:()=>mn,isParentOf:()=>Cr,iterateDeletedStructs:()=>cn,logType:()=>gu,logUpdate:()=>Vu,logUpdateV2:()=>Ra,mergeUpdates:()=>Ua,mergeUpdatesV2:()=>Tr,obfuscateUpdate:()=>Yu,obfuscateUpdateV2:()=>Wu,parseUpdateMeta:()=>ju,parseUpdateMetaV2:()=>Oa,readUpdate:()=>du,readUpdateV2:()=>xs,relativePositionToJSON:()=>mu,snapshot:()=>Du,snapshotContainsUpdate:()=>Ou,transact:()=>oe,tryGc:()=>Mu,typeListToArraySnapshot:()=>Xu,typeMapGetSnapshot:()=>ed});var ve=()=>new Map,Yr=t=>{let e=ve();return t.forEach((n,r)=>{e.set(r,n)}),e},de=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},lo=(t,e)=>{let n=[];for(let[r,i]of t)n.push(e(i,r));return n},uo=(t,e)=>{for(let[n,r]of t)if(e(r,n))return!0;return!1};var st=()=>new Set;var zr=t=>t[t.length-1];var ho=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},ft=Array.from;var fo=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1};var po=(t,e)=>{let n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n};var Xt=Array.isArray;var xe=class{constructor(){this._observers=ve()}on(e,n){de(this._observers,e,st).add(n)}once(e,n){let r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){let r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return ft((this._observers.get(e)||ve()).values()).forEach(r=>r(...n))}destroy(){this._observers=ve()}};var Re=Math.floor;var En=Math.abs;var go=Math.log10;var Sn=(t,e)=>t<e?t:e,Ct=(t,e)=>t>e?t:e,ih=Number.isNaN;var Kr=t=>t!==0?t<0:1/t<0;var Gi=String.fromCharCode,sh=String.fromCodePoint,oh=Gi(65535),pl=t=>t.toLowerCase(),gl=/^\s*/g,ml=t=>t.replace(gl,""),yl=/([A-Z])/g,$i=(t,e)=>ml(t.replace(yl,n=>`${e}${pl(n)}`));var wl=t=>{let e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},xn=typeof TextEncoder<"u"?new TextEncoder:null,bl=t=>xn.encode(t),ir=xn?bl:wl;var Cn=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Cn&&Cn.decode(new Uint8Array).length===1&&(Cn=null);var mo=(t,e)=>po(e,()=>t).join("");var Ji=t=>t===void 0?null:t;var Xi=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},yo=new Xi,Zi=!0;try{typeof localStorage<"u"&&(yo=localStorage,Zi=!1)}catch{}var Gr=yo,wo=t=>Zi||addEventListener("storage",t),bo=t=>Zi||removeEventListener("storage",t);var vo=Object.assign,vl=Object.keys,Eo=(t,e)=>{for(let n in t)e(t[n],n)};var sr=t=>vl(t).length;var So=t=>{for(let e in t)return!1;return!0},El=(t,e)=>{for(let n in t)if(!e(t[n],n))return!1;return!0},Qi=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),es=(t,e)=>t===e||sr(t)===sr(e)&&El(t,(n,r)=>(n!==void 0||Qi(e,r))&&e[r]===n);var or=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&or(t,e,n+1)}},xo=()=>{};var ts=t=>t,Sl=(t,e)=>t===e;var Tn=(t,e)=>{if(t==null||e==null)return Sl(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(let n of t.keys())if(!e.has(n)||!Tn(t.get(n),e.get(n)))return!1;break}case Object:if(sr(t)!==sr(e))return!1;for(let n in t)if(!Qi(t,n)||!Tn(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Tn(t[n],e[n]))return!1;break;default:return!1}return!0},ko=(t,e)=>e.includes(t);var An=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),Jr=typeof window<"u"&&typeof document<"u"&&!An,ah=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,pt,Cl=[],xl=()=>{if(pt===void 0)if(An){pt=ve();let t=process.argv,e=null;for(let n=0;n<t.length;n++){let r=t[n];r[0]==="-"?(e!==null&&pt.set(e,""),e=r):e!==null?(pt.set(e,r),e=null):Cl.push(r)}e!==null&&pt.set(e,"")}else typeof location=="object"?(pt=ve(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,n]=t.split("=");pt.set(`--${$i(e,"-")}`,n),pt.set(`-${$i(e,"-")}`,n)}})):pt=ve();return pt},ns=t=>xl().has(t);var ar=t=>An?Ji(process.env[t.toUpperCase()]):Ji(Gr.getItem(t));var kl=t=>ns("--"+t)||ar(t)!==null,ch=kl("production"),To=An&&ko(process.env.FORCE_COLOR,["true","1","2"]),Ao=!ns("no-colors")&&(!An||process.stdout.isTTY||To)&&(!An||ns("color")||To||ar("COLORTERM")!==null||(ar("TERM")||"").includes("color"));var is=Number.MAX_SAFE_INTEGER,lh=Number.MIN_SAFE_INTEGER,uh=1<<31;var Ro=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Re(t)===t),dh=Number.isNaN,hh=Number.parseInt;var De=t=>new Error(t),ot=()=>{throw De("Method unimplemented")},Be=()=>{throw De("Unexpected case")};var Io=De("Unexpected end of array"),Oo=De("Integer out of Range"),Rn=class{constructor(e){this.arr=e,this.pos=0}},pe=t=>new Rn(t),ss=t=>t.pos!==t.arr.length;var Tl=(t,e)=>{let n=hr(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},we=t=>Tl(t,J(t));var xt=t=>t.arr[t.pos++];var J=t=>{let e=0,n=1,r=t.arr.length;for(;t.pos<r;){let i=t.arr[t.pos++];if(e=e+(i&127)*n,n*=128,i<128)return e;if(e>is)throw Oo}throw Io},ur=t=>{let e=t.arr[t.pos++],n=e&63,r=64,i=(e&64)>0?-1:1;if((e&128)===0)return i*n;let s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&127)*r,r*=128,e<128)return i*n;if(n>is)throw Oo}throw Io};var Al=t=>{let e=J(t);if(e===0)return"";{let n=String.fromCodePoint(xt(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(xt(t));else for(;e>0;){let r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Rl=t=>Cn.decode(we(t)),qe=Cn?Rl:Al;var os=(t,e)=>{let n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Dl=t=>os(t,4).getFloat32(0,!1),Ul=t=>os(t,8).getFloat64(0,!1),Il=t=>os(t,8).getBigInt64(0,!1);var Ol=[t=>{},t=>null,ur,Dl,Ul,Il,t=>!1,t=>!0,qe,t=>{let e=J(t),n={};for(let r=0;r<e;r++){let i=qe(t);n[i]=Mt(t)}return n},t=>{let e=J(t),n=[];for(let r=0;r<e;r++)n.push(Mt(t));return n},we],Mt=t=>Ol[127-xt(t)](t),lr=class extends Rn{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),ss(this)?this.count=J(this)+1:this.count=-1),this.count--,this.s}};var Qt=class extends Rn{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=ur(this);let e=Kr(this.s);this.count=1,e&&(this.s=-this.s,this.count=J(this)+2)}return this.count--,this.s}};var Dn=class extends Rn{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=ur(this),n=e&1;this.diff=Re(e/2),this.count=1,n&&(this.count=J(this)+2)}return this.s+=this.diff,this.count--,this.s}},Xr=class{constructor(e){this.decoder=new Qt(e),this.str=qe(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}};var Lo=t=>new Uint8Array(t),hr=(t,e,n)=>new Uint8Array(t,e,n),No=t=>new Uint8Array(t),Ll=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=Gi(t[n]);return btoa(e)},Nl=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Ml=t=>{let e=atob(t),n=Lo(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Bl=t=>{let e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},In=Jr?Ll:Nl,Vt=Jr?Ml:Bl;var Mo=t=>{let e=Lo(t.byteLength);return e.set(t),e};var tn=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},ge=()=>new tn;var Vl=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e};var ce=t=>{let e=new Uint8Array(Vl(t)),n=0;for(let r=0;r<t.bufs.length;r++){let i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(hr(t.cbuf.buffer,0,t.cpos),n),e},Fl=(t,e)=>{let n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(hr(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Ct(n,e)*2),t.cpos=0)},ke=(t,e)=>{let n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e};var kt=ke;var z=(t,e)=>{for(;e>127;)ke(t,128|127&e),e=Re(e/128);ke(t,127&e)},pr=(t,e)=>{let n=Kr(e);for(n&&(e=-e),ke(t,(e>63?128:0)|(n?64:0)|63&e),e=Re(e/64);e>0;)ke(t,(e>127?128:0)|127&e),e=Re(e/128)},as=new Uint8Array(3e4),Pl=as.length/3,jl=(t,e)=>{if(e.length<Pl){let n=xn.encodeInto(e,as).written||0;z(t,n);for(let r=0;r<n;r++)ke(t,as[r])}else he(t,ir(e))},Hl=(t,e)=>{let n=unescape(encodeURIComponent(e)),r=n.length;z(t,r);for(let i=0;i<r;i++)ke(t,n.codePointAt(i))},Ve=xn&&xn.encodeInto?jl:Hl;var Po=(t,e)=>Ln(t,ce(e)),Ln=(t,e)=>{let n=t.cbuf.length,r=t.cpos,i=Sn(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Ct(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},he=(t,e)=>{z(t,e.byteLength),Ln(t,e)},cs=(t,e)=>{Fl(t,e);let n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},ql=(t,e)=>cs(t,4).setFloat32(0,e,!1),Yl=(t,e)=>cs(t,8).setFloat64(0,e,!1),Wl=(t,e)=>cs(t,8).setBigInt64(0,e,!1);var Bo=new DataView(new ArrayBuffer(4)),zl=t=>(Bo.setFloat32(0,t),Bo.getFloat32(0)===t),Ft=(t,e)=>{switch(typeof e){case"string":ke(t,119),Ve(t,e);break;case"number":Ro(e)&&En(e)<=2147483647?(ke(t,125),pr(t,e)):zl(e)?(ke(t,124),ql(t,e)):(ke(t,123),Yl(t,e));break;case"bigint":ke(t,122),Wl(t,e);break;case"object":if(e===null)ke(t,126);else if(Xt(e)){ke(t,117),z(t,e.length);for(let n=0;n<e.length;n++)Ft(t,e[n])}else if(e instanceof Uint8Array)ke(t,116),he(t,e);else{ke(t,118);let n=Object.keys(e);z(t,n.length);for(let r=0;r<n.length;r++){let i=n[r];Ve(t,i),Ft(t,e[i])}}break;case"boolean":ke(t,e?120:121);break;default:ke(t,127)}},fr=class extends tn{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&z(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};var Vo=t=>{t.count>0&&(pr(t.encoder,t.count===1?t.s:-t.s),t.count>1&&z(t.encoder,t.count-2))},nn=class{constructor(){this.encoder=new tn,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Vo(this),this.count=1,this.s=e)}toUint8Array(){return Vo(this),ce(this.encoder)}};var Fo=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);pr(t.encoder,e),t.count>1&&z(t.encoder,t.count-2)}},On=class{constructor(){this.encoder=new tn,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Fo(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Fo(this),ce(this.encoder)}},Zr=class{constructor(){this.sarr=[],this.s="",this.lensE=new nn}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new tn;return this.sarr.push(this.s),this.s="",Ve(e,this.sarr.join("")),Ln(e,this.lensE.toUint8Array()),ce(e)}};var gh=crypto.subtle,jo=crypto.getRandomValues.bind(crypto);var Ho=Math.random,ls=()=>jo(new Uint32Array(1))[0];var Kl="10000000-1000-4000-8000"+-1e11,Qr=()=>Kl.replace(/[018]/g,t=>(t^ls()&15>>t/4).toString(16));var Ye=Date.now;var Tt=t=>new Promise(t);var Gl=Promise.all.bind(Promise),Yo=t=>Promise.reject(t),mr=t=>Promise.resolve(t);var us=class{constructor(e,n){this.left=e,this.right=n}},gt=(t,e)=>new us(t,e);var rn=typeof document<"u"?document:{};var wh=typeof DOMParser<"u"?new DOMParser:null;var Wo=t=>lo(t,(e,n)=>`${n}:${e};`).join("");var bh=rn.ELEMENT_NODE,_h=rn.TEXT_NODE,vh=rn.CDATA_SECTION_NODE,Eh=rn.COMMENT_NODE,Sh=rn.DOCUMENT_NODE,Ch=rn.DOCUMENT_TYPE_NODE,xh=rn.DOCUMENT_FRAGMENT_NODE;var mt=Symbol;var Ue=mt(),at=mt(),ti=mt(),Nn=mt(),ni=mt(),wr=mt(),ri=mt(),Mn=mt(),sn=mt(),Go=t=>{let e=[],n=[],r=0;for(;r<t.length;r++){let i=t[r];i.constructor===String||i.constructor===Number?e.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},zo=[ni,ri,Mn,ti],ds=0,Ko=Ye(),$o=(t,e)=>{let n=zo[ds],r=ar("log"),i=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(e));return ds=(ds+1)%zo.length,e+=": ",i?(...s)=>{let a=Ye(),u=a-Ko;Ko=a,t(n,e,sn,...s.map(f=>typeof f=="string"||typeof f=="symbol"?f:JSON.stringify(f)),n," +"+u+"ms")}:xo};var Ql={[Ue]:gt("font-weight","bold"),[at]:gt("font-weight","normal"),[ti]:gt("color","blue"),[ni]:gt("color","green"),[Nn]:gt("color","grey"),[wr]:gt("color","red"),[ri]:gt("color","purple"),[Mn]:gt("color","orange"),[sn]:gt("color","black")},eu=t=>{let e=[],n=[],r=ve(),i=[],s=0;for(;s<t.length;s++){let a=t[s],u=Ql[a];if(u!==void 0)r.set(u.left,u.right);else if(a.constructor===String||a.constructor===Number){let f=Wo(r);s>0||f.length>0?(e.push("%c"+a),n.push(f)):e.push(a)}else break}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){let a=t[s];a instanceof Symbol||i.push(a)}return i},tu=Ao?eu:Go,br=(...t)=>{console.log(...tu(t)),nu.forEach(e=>e.print(t))};var nu=st();var Jo=t=>$o(br,t);var Zo=t=>({[Symbol.iterator](){return this},next:t}),Qo=(t,e)=>Zo(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),ii=(t,e)=>Zo(()=>{let{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});var fs=class extends xe{constructor(e,n){super(),this.doc=e,this.awareness=n}},Er=class{constructor(e,n){this.clock=e,this.len=n}},Ht=class{constructor(){this.clients=new Map}},cn=(t,e,n)=>e.clients.forEach((r,i)=>{let s=t.doc.store.clients.get(i);for(let a=0;a<r.length;a++){let u=r[a];xa(t,s,u.clock,u.len,n)}}),ou=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){let i=Re((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},mn=(t,e)=>{let n=t.clients.get(e.client);return n!==void 0&&ou(n,e.clock)!==null},Es=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){let i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=Ct(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},Bn=t=>{let e=new Ht;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){let s=r.slice();for(let a=n+1;a<t.length;a++)ho(s,t[a].clients.get(i)||[]);e.clients.set(i,s)}});return Es(e),e},Sr=(t,e,n,r)=>{de(t.clients,e,()=>[]).push(new Er(n,r))},Ei=()=>new Ht,Ss=t=>{let e=Ei();return t.clients.forEach((n,r)=>{let i=[];for(let s=0;s<n.length;s++){let a=n[s];if(a.deleted){let u=a.id.clock,f=a.length;if(s+1<n.length)for(let l=n[s+1];s+1<n.length&&l.deleted;l=n[++s+1])f+=l.length;i.push(new Er(u,f))}}i.length>0&&e.clients.set(r,i)}),e},yt=(t,e)=>{z(t.restEncoder,e.clients.size),ft(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),z(t.restEncoder,n);let i=r.length;z(t.restEncoder,i);for(let s=0;s<i;s++){let a=r[s];t.writeDsClock(a.clock),t.writeDsLen(a.len)}})},Rt=t=>{let e=new Ht,n=J(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();let i=J(t.restDecoder),s=J(t.restDecoder);if(s>0){let a=de(e.clients,i,()=>[]);for(let u=0;u<s;u++)a.push(new Er(t.readDsClock(),t.readDsLen()))}}return e},na=(t,e,n)=>{let r=new Ht,i=J(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();let a=J(t.restDecoder),u=J(t.restDecoder),f=n.clients.get(a)||[],l=ye(n,a);for(let d=0;d<u;d++){let h=t.readDsClock(),p=h+t.readDsLen();if(h<l){l<p&&Sr(r,a,l,p-l);let w=Ze(f,h),_=f[w];for(!_.deleted&&_.id.clock<h&&(f.splice(w+1,0,vi(e,_,h-_.id.clock)),w++);w<f.length&&(_=f[w++],_.id.clock<p);)_.deleted||(p<_.id.clock+_.length&&f.splice(w,0,vi(e,_,p-_.id.clock)),_.delete(e))}else Sr(r,a,h,p-h)}}if(r.clients.size>0){let s=new Xe;return z(s.restEncoder,0),yt(s,r),s.toUint8Array()}return null},wa=(t,e)=>{if(t.clients.size!==e.clients.size)return!1;for(let[n,r]of t.clients.entries()){let i=e.clients.get(n);if(i===void 0||r.length!==i.length)return!1;for(let s=0;s<r.length;s++){let a=r[s],u=i[s];if(a.clock!==u.clock||a.len!==u.len)return!1}}return!0},ba=ls,Dt=class t extends xe{constructor({guid:e=Qr(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:u=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=ba(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new hi,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Tt(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})});let f=()=>Tt(l=>{let d=h=>{(h===void 0||h===!0)&&(this.off("sync",d),l())};this.on("sync",d)});this.on("sync",l=>{l===!1&&this.isSynced&&(this.whenSynced=f()),this.isSynced=l===void 0||l===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=f()}load(){let e=this._item;e!==null&&!this.shouldLoad&&oe(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ft(this.subdocs).map(e=>e.guid))}transact(e,n=null){return oe(this,e,n)}get(e,n=_e){let r=de(this.share,e,()=>{let s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==_e&&i!==n)if(i===_e){let s=new n;s._map=r._map,r._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=r._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,hn)}getText(e=""){return this.get(e,Pn)}getMap(e=""){return this.get(e,fn)}getXmlFragment(e=""){return this.get(e,pn)}toJSON(){let e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){ft(this.subdocs).forEach(n=>n.destroy());let e=this._item;if(e!==null){this._item=null;let n=e.content;n.doc=new t({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,oe(e.parent.doc,r=>{let i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,n){super.on(e,n)}off(e,n){super.off(e,n)}},ln=class{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return J(this.restDecoder)}readDsLen(){return J(this.restDecoder)}},Ke=class extends ln{readLeftID(){return ee(J(this.restDecoder),J(this.restDecoder))}readRightID(){return ee(J(this.restDecoder),J(this.restDecoder))}readClient(){return J(this.restDecoder)}readInfo(){return xt(this.restDecoder)}readString(){return qe(this.restDecoder)}readParentInfo(){return J(this.restDecoder)===1}readTypeRef(){return J(this.restDecoder)}readLen(){return J(this.restDecoder)}readAny(){return Mt(this.restDecoder)}readBuf(){return Mo(we(this.restDecoder))}readJSON(){return JSON.parse(qe(this.restDecoder))}readKey(){return qe(this.restDecoder)}},ui=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=J(this.restDecoder),this.dsCurrVal}readDsLen(){let e=J(this.restDecoder)+1;return this.dsCurrVal+=e,e}},We=class extends ui{constructor(e){super(e),this.keys=[],J(e),this.keyClockDecoder=new Dn(we(e)),this.clientDecoder=new Qt(we(e)),this.leftClockDecoder=new Dn(we(e)),this.rightClockDecoder=new Dn(we(e)),this.infoDecoder=new lr(we(e),xt),this.stringDecoder=new Xr(we(e)),this.parentInfoDecoder=new lr(we(e),xt),this.typeRefDecoder=new Qt(we(e)),this.lenDecoder=new Qt(we(e))}readLeftID(){return new At(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new At(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Mt(this.restDecoder)}readBuf(){return we(this.restDecoder)}readJSON(){return Mt(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let n=this.stringDecoder.read();return this.keys.push(n),n}}},qt=class{constructor(){this.restEncoder=ge()}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){z(this.restEncoder,e)}writeDsLen(e){z(this.restEncoder,e)}},wt=class extends qt{writeLeftID(e){z(this.restEncoder,e.client),z(this.restEncoder,e.clock)}writeRightID(e){z(this.restEncoder,e.client),z(this.restEncoder,e.clock)}writeClient(e){z(this.restEncoder,e)}writeInfo(e){kt(this.restEncoder,e)}writeString(e){Ve(this.restEncoder,e)}writeParentInfo(e){z(this.restEncoder,e?1:0)}writeTypeRef(e){z(this.restEncoder,e)}writeLen(e){z(this.restEncoder,e)}writeAny(e){Ft(this.restEncoder,e)}writeBuf(e){he(this.restEncoder,e)}writeJSON(e){Ve(this.restEncoder,JSON.stringify(e))}writeKey(e){Ve(this.restEncoder,e)}},Vn=class{constructor(){this.restEncoder=ge(),this.dsCurrVal=0}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let n=e-this.dsCurrVal;this.dsCurrVal=e,z(this.restEncoder,n)}writeDsLen(e){e===0&&Be(),z(this.restEncoder,e-1),this.dsCurrVal+=e}},Xe=class extends Vn{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new On,this.clientEncoder=new nn,this.leftClockEncoder=new On,this.rightClockEncoder=new On,this.infoEncoder=new fr(kt),this.stringEncoder=new Zr,this.parentInfoEncoder=new fr(kt),this.typeRefEncoder=new nn,this.lenEncoder=new nn}toUint8Array(){let e=ge();return z(e,0),he(e,this.keyClockEncoder.toUint8Array()),he(e,this.clientEncoder.toUint8Array()),he(e,this.leftClockEncoder.toUint8Array()),he(e,this.rightClockEncoder.toUint8Array()),he(e,ce(this.infoEncoder)),he(e,this.stringEncoder.toUint8Array()),he(e,ce(this.parentInfoEncoder)),he(e,this.typeRefEncoder.toUint8Array()),he(e,this.lenEncoder.toUint8Array()),Ln(e,ce(this.restEncoder)),ce(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ft(this.restEncoder,e)}writeBuf(e){he(this.restEncoder,e)}writeJSON(e){Ft(this.restEncoder,e)}writeKey(e){let n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}},au=(t,e,n,r)=>{r=Ct(r,e[0].id.clock);let i=Ze(e,r);z(t.restEncoder,e.length-i),t.writeClient(n),z(t.restEncoder,r);let s=e[i];s.write(t,r-s.id.clock);for(let a=i+1;a<e.length;a++)e[a].write(t,0)},Cs=(t,e,n)=>{let r=new Map;n.forEach((i,s)=>{ye(e,s)>i&&r.set(s,i)}),Lr(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),z(t.restEncoder,r.size),ft(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{au(t,e.clients.get(i),i,s)})},cu=(t,e)=>{let n=ve(),r=J(t.restDecoder);for(let i=0;i<r;i++){let s=J(t.restDecoder),a=new Array(s),u=t.readClient(),f=J(t.restDecoder);n.set(u,{i:0,refs:a});for(let l=0;l<s;l++){let d=t.readInfo();switch(31&d){case 0:{let h=t.readLen();a[l]=new Ie(ee(u,f),h),f+=h;break}case 10:{let h=J(t.restDecoder);a[l]=new Oe(ee(u,f),h),f+=h;break}default:{let h=(d&192)===0,p=new le(ee(u,f),null,(d&128)===128?t.readLeftID():null,null,(d&64)===64?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(d&32)===32?t.readString():null,tc(t,d));a[l]=p,f+=p.length}}}}return n},lu=(t,e,n)=>{let r=[],i=ft(n.keys()).sort((w,_)=>w-_);if(i.length===0)return null;let s=()=>{if(i.length===0)return null;let w=n.get(i[i.length-1]);for(;w.refs.length===w.i;)if(i.pop(),i.length>0)w=n.get(i[i.length-1]);else return null;return w},a=s();if(a===null&&r.length===0)return null;let u=new hi,f=new Map,l=(w,_)=>{let C=f.get(w);(C==null||C>_)&&f.set(w,_)},d=a.refs[a.i++],h=new Map,p=()=>{for(let w of r){let _=w.id.client,C=n.get(_);C?(C.i--,u.clients.set(_,C.refs.slice(C.i)),n.delete(_),C.i=0,C.refs=[]):u.clients.set(_,[w]),i=i.filter(U=>U!==_)}r.length=0};for(;;){if(d.constructor!==Oe){let _=de(h,d.id.client,()=>ye(e,d.id.client))-d.id.clock;if(_<0)r.push(d),l(d.id.client,d.id.clock-1),p();else{let C=d.getMissing(t,e);if(C!==null){r.push(d);let U=n.get(C)||{refs:[],i:0};if(U.refs.length===U.i)l(C,ye(e,C)),p();else{d=U.refs[U.i++];continue}}else(_===0||_<d.length)&&(d.integrate(t,_),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(a!==null&&a.i<a.refs.length)d=a.refs[a.i++];else{if(a=s(),a===null)break;d=a.refs[a.i++]}}if(u.clients.size>0){let w=new Xe;return Cs(w,u,new Map),z(w.restEncoder,0),{missing:f,update:w.toUint8Array()}}return null},uu=(t,e)=>Cs(t,e.doc.store,e.beforeState),xs=(t,e,n,r=new We(t))=>oe(e,i=>{i.local=!1;let s=!1,a=i.doc,u=a.store,f=cu(r,a),l=lu(i,u,f),d=u.pendingStructs;if(d){for(let[p,w]of d.missing)if(w<ye(u,p)){s=!0;break}if(l){for(let[p,w]of l.missing){let _=d.missing.get(p);(_==null||_>w)&&d.missing.set(p,w)}d.update=Tr([d.update,l.update])}}else u.pendingStructs=l;let h=na(r,i,u);if(u.pendingDs){let p=new We(pe(u.pendingDs));J(p.restDecoder);let w=na(p,i,u);h&&w?u.pendingDs=Tr([h,w]):u.pendingDs=h||w}else u.pendingDs=h;if(s){let p=u.pendingStructs.update;u.pendingStructs=null,Wt(i.doc,p)}},n,!1),du=(t,e,n)=>xs(t,e,n,new Ke(t)),Wt=(t,e,n,r=We)=>{let i=pe(e);xs(i,t,n,new r(i))},Or=(t,e,n)=>Wt(t,e,n,Ke),hu=(t,e,n=new Map)=>{Cs(t,e.store,n),yt(t,Ss(e.store))},Wn=(t,e=new Uint8Array([0]),n=new Xe)=>{let r=ks(e);hu(n,t,r);let i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Us(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===wt)return Ua(i.map((s,a)=>a===0?s:Ma(s)));if(n.constructor===Xe)return Tr(i)}return i[0]},zn=(t,e)=>Wn(t,e,new wt),_a=t=>{let e=new Map,n=J(t.restDecoder);for(let r=0;r<n;r++){let i=J(t.restDecoder),s=J(t.restDecoder);e.set(i,s)}return e},ks=t=>_a(new ln(pe(t))),Ts=(t,e)=>(z(t.restEncoder,e.size),ft(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{z(t.restEncoder,n),z(t.restEncoder,r)}),t),fu=(t,e)=>Ts(t,Lr(e.store)),pu=(t,e=new Vn)=>(t instanceof Map?Ts(e,t):fu(e,t),e.toUint8Array()),As=t=>pu(t,new qt),ps=class{constructor(){this.l=[]}},ra=()=>new ps,ia=(t,e)=>t.l.push(e),sa=(t,e)=>{let n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},va=(t,e,n)=>or(t.l,[e,n]),At=class{constructor(e,n){this.client=e,this.clock=n}},an=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,ee=(t,e)=>new At(t,e),oa=(t,e)=>{z(t,e.client),z(t,e.clock)},aa=t=>ee(J(t),J(t)),Rs=t=>{for(let[e,n]of t.doc.share.entries())if(n===t)return e;throw Be()},Cr=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1},gu=t=>{let e=[],n=t._start;for(;n;)e.push(n),n=n.right;console.log("Children: ",e),console.log("Children content: ",e.filter(r=>!r.deleted).map(r=>r.content))},gs=class{constructor(e,n=e.getMap("users")){let r=new Map;this.yusers=n,this.doc=e,this.clients=new Map,this.dss=r;let i=(s,a)=>{let u=s.get("ds"),f=s.get("ids"),l=d=>this.clients.set(d,a);u.observe(d=>{d.changes.added.forEach(h=>{h.content.getContent().forEach(p=>{p instanceof Uint8Array&&this.dss.set(a,Bn([this.dss.get(a)||Ei(),Rt(new ln(pe(p)))]))})})}),this.dss.set(a,Bn(u.map(d=>Rt(new ln(pe(d)))))),f.observe(d=>d.changes.added.forEach(h=>h.content.getContent().forEach(l))),f.forEach(l)};n.observe(s=>{s.keysChanged.forEach(a=>i(n.get(a),a))}),n.forEach(i)}setUserMapping(e,n,r,{filter:i=()=>!0}={}){let s=this.yusers,a=s.get(r);a||(a=new fn,a.set("ids",new hn),a.set("ds",new hn),s.set(r,a)),a.get("ids").push([n]),s.observe(u=>{setTimeout(()=>{let f=s.get(r);if(f!==a){a=f,this.clients.forEach((h,p)=>{r===h&&a.get("ids").push([p])});let l=new qt,d=this.dss.get(r);d&&(yt(l,d),a.get("ds").push([l.toUint8Array()]))}},0)}),e.on("afterTransaction",u=>{setTimeout(()=>{let f=a.get("ds"),l=u.deleteSet;if(u.local&&l.clients.size>0&&i(u,l)){let d=new qt;yt(d,l),f.push([d.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[n,r]of this.dss.entries())if(mn(r,e))return n;return null}},Fn=class{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}},mu=t=>{let e={};return t.type&&(e.type=t.type),t.tname&&(e.tname=t.tname),t.item&&(e.item=t.item),t.assoc!=null&&(e.assoc=t.assoc),e},yu=t=>new Fn(t.type==null?null:ee(t.type.client,t.type.clock),t.tname||null,t.item==null?null:ee(t.item.client,t.item.clock),t.assoc==null?0:t.assoc),di=class{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}},wu=(t,e,n=0)=>new di(t,e,n),si=(t,e,n)=>{let r=null,i=null;return t._item===null?i=Rs(t):r=ee(t._item.id.client,t._item.id.clock),new Fn(r,i,e,n)},bu=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return si(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return si(t,ee(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return si(t,r.lastId,n);r=r.right}return si(t,null,n)},_u=(t,e)=>{let{type:n,tname:r,item:i,assoc:s}=e;if(i!==null)z(t,0),oa(t,i);else if(r!==null)kt(t,1),Ve(t,r);else if(n!==null)kt(t,2),oa(t,n);else throw Be();return pr(t,s),t},vu=t=>{let e=ge();return _u(e,t),ce(e)},Eu=t=>{let e=null,n=null,r=null;switch(J(t)){case 0:r=aa(t);break;case 1:n=qe(t);break;case 2:e=aa(t)}let i=ss(t)?ur(t):0;return new Fn(e,n,r,i)},Su=t=>Eu(pe(t)),Cu=(t,e)=>{let n=e.store,r=t.item,i=t.type,s=t.tname,a=t.assoc,u=null,f=0;if(r!==null){if(ye(n,r.client)<=r.clock)return null;let l=_s(n,r),d=l.item;if(!(d instanceof le))return null;if(u=d.parent,u._item===null||!u._item.deleted){f=d.deleted||!d.countable?0:l.diff+(a>=0?0:1);let h=d.left;for(;h!==null;)!h.deleted&&h.countable&&(f+=h.length),h=h.left}}else{if(s!==null)u=e.get(s);else if(i!==null){if(ye(n,i.client)<=i.clock)return null;let{item:l}=_s(n,i);if(l instanceof le&&l.content instanceof Qe)u=l.content.type;else return null}else throw Be();a>=0?f=u._length:f=0}return wu(u,f,t.assoc)},xu=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&an(t.item,e.item)&&an(t.type,e.type)&&t.assoc===e.assoc,xr=class{constructor(e,n){this.ds=e,this.sv=n}},ku=(t,e)=>{let n=t.ds.clients,r=e.ds.clients,i=t.sv,s=e.sv;if(i.size!==s.size||n.size!==r.size)return!1;for(let[a,u]of i.entries())if(s.get(a)!==u)return!1;for(let[a,u]of n.entries()){let f=r.get(a)||[];if(u.length!==f.length)return!1;for(let l=0;l<u.length;l++){let d=u[l],h=f[l];if(d.clock!==h.clock||d.len!==h.len)return!1}}return!0},Ea=(t,e=new Vn)=>(yt(e,t.ds),Ts(e,t.sv),e.toUint8Array()),Tu=t=>Ea(t,new qt),Sa=(t,e=new ui(pe(t)))=>new xr(Rt(e),_a(e)),Au=t=>Sa(t,new ln(pe(t))),Ds=(t,e)=>new xr(t,e),Ru=Ds(Ei(),new Map),Du=t=>Ds(Ss(t.store),Lr(t.store)),on=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!mn(e.ds,t.id),ms=(t,e)=>{let n=de(t.meta,ms,st),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<ye(r,s)&&Fe(t,ee(s,i))}),cn(t,e.ds,i=>{}),n.add(e))},Uu=(t,e,n=new Dt)=>{if(t.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");let{sv:r,ds:i}=e,s=new Xe;return t.transact(a=>{let u=0;r.forEach(f=>{f>0&&u++}),z(s.restEncoder,u);for(let[f,l]of r){if(l===0)continue;l<ye(t.store,f)&&Fe(a,ee(f,l));let d=t.store.clients.get(f)||[],h=Ze(d,l-1);z(s.restEncoder,h+1),s.writeClient(f),z(s.restEncoder,0);for(let p=0;p<=h;p++)d[p].write(s,0)}yt(s,i)}),Wt(n,s.toUint8Array(),"snapshot"),n},Iu=(t,e,n=We)=>{let r=new n(pe(e)),i=new bt(r,!1);for(let a=i.curr;a!==null;a=i.next())if((t.sv.get(a.id.client)||0)<a.id.clock+a.length)return!1;let s=Bn([t.ds,Rt(r)]);return wa(t.ds,s)},Ou=(t,e)=>Iu(t,e,Ke),hi=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Lr=t=>{let e=new Map;return t.clients.forEach((n,r)=>{let i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},ye=(t,e)=>{let n=t.clients.get(e);if(n===void 0)return 0;let r=n[n.length-1];return r.id.clock+r.length},Ca=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{let r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Be()}n.push(e)},Ze=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=Re(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=Re((n+r)/2)}throw Be()},Lu=(t,e)=>{let n=t.clients.get(e.client);return n[Ze(n,e.clock)]},_r=Lu,ys=(t,e,n)=>{let r=Ze(e,n),i=e[r];return i.id.clock<n&&i instanceof le?(e.splice(r+1,0,vi(t,i,n-i.id.clock)),r+1):r},Fe=(t,e)=>{let n=t.doc.store.clients.get(e.client);return n[ys(t,n,e.clock)]},ca=(t,e,n)=>{let r=e.clients.get(n.client),i=Ze(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Ie&&r.splice(i+1,0,vi(t,s,n.clock-s.id.clock+1)),s},Nu=(t,e,n)=>{let r=t.clients.get(e.id.client);r[Ze(r,e.id.clock)]=n},xa=(t,e,n,r,i)=>{if(r===0)return;let s=n+r,a=ys(t,e,n),u;do u=e[a++],s<u.id.clock+u.length&&ys(t,e,s),i(u);while(a<e.length&&e[a].id.clock<s)},fi=class{constructor(e,n,r){this.doc=e,this.deleteSet=new Ht,this.beforeState=Lr(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},la=(t,e)=>e.deleteSet.clients.size===0&&!uo(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Es(e.deleteSet),uu(t,e),yt(t,e.deleteSet),!0),ua=(t,e,n)=>{let r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&de(t.changed,e,st).add(n)},ci=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof le&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}let s=e-i;return s&&t.splice(e+1-s,s),s},ka=(t,e,n)=>{for(let[r,i]of t.clients.entries()){let s=e.clients.get(r);for(let a=i.length-1;a>=0;a--){let u=i[a],f=u.clock+u.len;for(let l=Ze(s,u.clock),d=s[l];l<s.length&&d.id.clock<f;d=s[++l]){let h=s[l];if(u.clock+u.len<=h.id.clock)break;h instanceof le&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},Ta=(t,e)=>{t.clients.forEach((n,r)=>{let i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){let a=n[s],u=Sn(i.length-1,1+Ze(i,a.clock+a.len-1));for(let f=u,l=i[f];f>0&&l.id.clock>=a.clock;l=i[f])f-=1+ci(i,f)}})},Mu=(t,e,n)=>{ka(t,e,n),Ta(t,e)},Aa=(t,e)=>{if(e<t.length){let n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{Es(s),n.afterState=Lr(n.doc.store),r.emit("beforeObserverCalls",[n,r]);let u=[];n.changed.forEach((f,l)=>u.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(n,f)})),u.push(()=>{n.changedParentTypes.forEach((f,l)=>{l._dEH.l.length>0&&(l._item===null||!l._item.deleted)&&(f=f.filter(d=>d.target._item===null||!d.target._item.deleted),f.forEach(d=>{d.currentTarget=l,d._path=null}),f.sort((d,h)=>d.path.length-h.path.length),va(l._dEH,f,n))})}),u.push(()=>r.emit("afterTransaction",[n,r])),or(u,[]),n._needFormattingCleanup&&id(n)}finally{r.gc&&ka(s,i,r.gcFilter),Ta(s,i),n.afterState.forEach((d,h)=>{let p=n.beforeState.get(h)||0;if(p!==d){let w=i.clients.get(h),_=Ct(Ze(w,p),1);for(let C=w.length-1;C>=_;)C-=1+ci(w,C)}});for(let d=a.length-1;d>=0;d--){let{client:h,clock:p}=a[d].id,w=i.clients.get(h),_=Ze(w,p);_+1<w.length&&ci(w,_+1)>1||_>0&&ci(w,_)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(br(Mn,Ue,"[yjs] ",at,wr,"Changed the client-id because another client seems to be using it."),r.clientID=ba()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){let d=new wt;la(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){let d=new Xe;la(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}let{subdocsAdded:u,subdocsLoaded:f,subdocsRemoved:l}=n;(u.size>0||l.size>0||f.size>0)&&(u.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),l.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:f,added:u,removed:l},r,n]),l.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Aa(t,e+1)}}},oe=(t,e,n=null,r=!0)=>{let i=t._transactionCleanups,s=!1,a=null;t._transaction===null&&(s=!0,t._transaction=new fi(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{a=e(t._transaction)}finally{if(s){let u=t._transaction===i[0];t._transaction=null,u&&Aa(i,0)}}return a},ws=class{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}},da=(t,e,n)=>{cn(t,n.deletions,r=>{r instanceof le&&e.scope.some(i=>Cr(i,r))&&Ms(r,!1)})},ha=(t,e,n)=>{let r=null,i=null,s=t.doc,a=t.scope;if(oe(s,u=>{for(;e.length>0&&r===null;){let f=s.store,l=e.pop(),d=new Set,h=[],p=!1;cn(u,l.insertions,w=>{if(w instanceof le){if(w.redone!==null){let{item:_,diff:C}=_s(f,w.id);C>0&&(_=Fe(u,ee(_.id.client,_.id.clock+C))),w=_}!w.deleted&&a.some(_=>Cr(_,w))&&h.push(w)}}),cn(u,l.deletions,w=>{w instanceof le&&a.some(_=>Cr(_,w))&&!mn(l.insertions,w.id)&&d.add(w)}),d.forEach(w=>{p=ec(u,w,d,l.insertions,t.ignoreRemoteMapChanges,t)!==null||p});for(let w=h.length-1;w>=0;w--){let _=h[w];t.deleteFilter(_)&&(_.delete(u),p=!0)}r=p?l:null}u.changed.forEach((f,l)=>{f.has(null)&&l._searchMarker&&(l._searchMarker.length=0)}),i=u},t),r!=null){let u=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:u},t])}return r},un=class extends xe{constructor(e,{captureTimeout:n=500,captureTransaction:r=f=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:a=!1,doc:u=Xt(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=u,this.lastChange=0,this.ignoreRemoteMapChanges=a,this.captureTimeout=n,this.afterTransactionHandler=f=>{if(!this.captureTransaction(f)||!this.scope.some(U=>f.changedParentTypes.has(U))||!this.trackedOrigins.has(f.origin)&&(!f.origin||!this.trackedOrigins.has(f.origin.constructor)))return;let l=this.undoing,d=this.redoing,h=l?this.redoStack:this.undoStack;l?this.stopCapturing():d||this.clear(!1,!0);let p=new Ht;f.afterState.forEach((U,y)=>{let v=f.beforeState.get(y)||0,E=U-v;E>0&&Sr(p,y,v,E)});let w=Ye(),_=!1;if(this.lastChange>0&&w-this.lastChange<this.captureTimeout&&h.length>0&&!l&&!d){let U=h[h.length-1];U.deletions=Bn([U.deletions,f.deleteSet]),U.insertions=Bn([U.insertions,p])}else h.push(new ws(f.deleteSet,p)),_=!0;!l&&!d&&(this.lastChange=w),cn(f,f.deleteSet,U=>{U instanceof le&&this.scope.some(y=>Cr(y,U))&&Ms(U,!0)});let C=[{stackItem:h[h.length-1],origin:f.origin,type:l?"redo":"undo",changedParentTypes:f.changedParentTypes},this];_?this.emit("stack-item-added",C):this.emit("stack-item-updated",C)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=Xt(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&this.scope.push(n)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>da(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>da(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=ha(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=ha(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}};function*Bu(t){let e=J(t.restDecoder);for(let n=0;n<e;n++){let r=J(t.restDecoder),i=t.readClient(),s=J(t.restDecoder);for(let a=0;a<r;a++){let u=t.readInfo();if(u===10){let f=J(t.restDecoder);yield new Oe(ee(i,s),f),s+=f}else if((31&u)!==0){let f=(u&192)===0,l=new le(ee(i,s),null,(u&128)===128?t.readLeftID():null,null,(u&64)===64?t.readRightID():null,f?t.readParentInfo()?t.readString():t.readLeftID():null,f&&(u&32)===32?t.readString():null,tc(t,u));yield l,s+=l.length}else{let f=t.readLen();yield new Ie(ee(i,s),f),s+=f}}}}var bt=class{constructor(e,n){this.gen=Bu(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Oe);return this.curr}},Vu=t=>Ra(t,Ke),Ra=(t,e=We)=>{let n=[],r=new e(pe(t)),i=new bt(r,!1);for(let a=i.curr;a!==null;a=i.next())n.push(a);br("Structs: ",n);let s=Rt(r);br("DeleteSet: ",s)},Fu=t=>Da(t,Ke),Da=(t,e=We)=>{let n=[],r=new e(pe(t)),i=new bt(r,!1);for(let s=i.curr;s!==null;s=i.next())n.push(s);return{structs:n,ds:Rt(r)}},kr=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},Ua=t=>Tr(t,Ke,wt),Ia=(t,e=Vn,n=We)=>{let r=new e,i=new bt(new n(pe(t)),!1),s=i.curr;if(s!==null){let a=0,u=s.id.client,f=s.id.clock!==0,l=f?0:s.id.clock+s.length;for(;s!==null;s=i.next())u!==s.id.client&&(l!==0&&(a++,z(r.restEncoder,u),z(r.restEncoder,l)),u=s.id.client,l=0,f=s.id.clock!==0),s.constructor===Oe&&(f=!0),f||(l=s.id.clock+s.length);l!==0&&(a++,z(r.restEncoder,u),z(r.restEncoder,l));let d=ge();return z(d,a),Po(d,r.restEncoder),r.restEncoder=d,r.toUint8Array()}else return z(r.restEncoder,0),r.toUint8Array()},Pu=t=>Ia(t,qt,Ke),Oa=(t,e=We)=>{let n=new Map,r=new Map,i=new bt(new e(pe(t)),!1),s=i.curr;if(s!==null){let a=s.id.client,u=s.id.clock;for(n.set(a,u);s!==null;s=i.next())a!==s.id.client&&(r.set(a,u),n.set(s.id.client,s.id.clock),a=s.id.client),u=s.id.clock+s.length;r.set(a,u)}return{from:n,to:r}},ju=t=>Oa(t,Ke),Hu=(t,e)=>{if(t.constructor===Ie){let{client:n,clock:r}=t.id;return new Ie(ee(n,r+e),t.length-e)}else if(t.constructor===Oe){let{client:n,clock:r}=t.id;return new Oe(ee(n,r+e),t.length-e)}else{let n=t,{client:r,clock:i}=n.id;return new le(ee(r,i+e),null,ee(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Tr=(t,e=We,n=Xe)=>{if(t.length===1)return t[0];let r=t.map(d=>new e(pe(d))),i=r.map(d=>new bt(d,!0)),s=null,a=new n,u=new kr(a);for(;i=i.filter(p=>p.curr!==null),i.sort((p,w)=>{if(p.curr.id.client===w.curr.id.client){let _=p.curr.id.clock-w.curr.id.clock;return _===0?p.curr.constructor===w.curr.constructor?0:p.curr.constructor===Oe?1:-1:_}else return w.curr.id.client-p.curr.id.client}),i.length!==0;){let d=i[0],h=d.curr.id.client;if(s!==null){let p=d.curr,w=!1;for(;p!==null&&p.id.clock+p.length<=s.struct.id.clock+s.struct.length&&p.id.client>=s.struct.id.client;)p=d.next(),w=!0;if(p===null||p.id.client!==h||w&&p.id.clock>s.struct.id.clock+s.struct.length)continue;if(h!==s.struct.id.client)Pt(u,s.struct,s.offset),s={struct:p,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<p.id.clock)if(s.struct.constructor===Oe)s.struct.length=p.id.clock+p.length-s.struct.id.clock;else{Pt(u,s.struct,s.offset);let _=p.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Oe(ee(h,s.struct.id.clock+s.struct.length),_),offset:0}}else{let _=s.struct.id.clock+s.struct.length-p.id.clock;_>0&&(s.struct.constructor===Oe?s.struct.length-=_:p=Hu(p,_)),s.struct.mergeWith(p)||(Pt(u,s.struct,s.offset),s={struct:p,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let p=d.curr;p!==null&&p.id.client===h&&p.id.clock===s.struct.id.clock+s.struct.length&&p.constructor!==Oe;p=d.next())Pt(u,s.struct,s.offset),s={struct:p,offset:0}}s!==null&&(Pt(u,s.struct,s.offset),s=null),Is(u);let f=r.map(d=>Rt(d)),l=Bn(f);return yt(a,l),a.toUint8Array()},Us=(t,e,n=We,r=Xe)=>{let i=ks(e),s=new r,a=new kr(s),u=new n(pe(t)),f=new bt(u,!1);for(;f.curr;){let d=f.curr,h=d.id.client,p=i.get(h)||0;if(f.curr.constructor===Oe){f.next();continue}if(d.id.clock+d.length>p)for(Pt(a,d,Ct(p-d.id.clock,0)),f.next();f.curr&&f.curr.id.client===h;)Pt(a,f.curr,0),f.next();else for(;f.curr&&f.curr.id.client===h&&f.curr.id.clock+f.curr.length<=p;)f.next()}Is(a);let l=Rt(u);return yt(s,l),s.toUint8Array()},qu=(t,e)=>Us(t,e,Ke,wt),La=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:ce(t.encoder.restEncoder)}),t.encoder.restEncoder=ge(),t.written=0)},Pt=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&La(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),z(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Is=t=>{La(t);let e=t.encoder.restEncoder;z(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){let r=t.clientStructs[n];z(e,r.written),Ln(e,r.restEncoder)}},Si=(t,e,n,r)=>{let i=new n(pe(t)),s=new bt(i,!1),a=new r,u=new kr(a);for(let l=s.curr;l!==null;l=s.next())Pt(u,e(l),0);Is(u);let f=Rt(i);return yt(a,f),a.toUint8Array()},Na=({formatting:t=!0,subdocs:e=!0,yxml:n=!0}={})=>{let r=0,i=ve(),s=ve(),a=ve(),u=ve();return u.set(null,null),f=>{switch(f.constructor){case Ie:case Oe:return f;case le:{let l=f,d=l.content;switch(d.constructor){case qn:break;case Qe:{if(n){let h=d.type;h instanceof jn&&(h.nodeName=de(s,h.nodeName,()=>"node-"+r)),h instanceof Ur&&(h.hookName=de(s,h.hookName,()=>"hook-"+r))}break}case Yt:{let h=d;h.arr=h.arr.map(()=>r);break}case gn:{let h=d;h.content=new Uint8Array([r]);break}case Yn:{let h=d;e&&(h.opts={},h.doc.guid=r+"");break}case Ut:{let h=d;h.embed={};break}case be:{let h=d;t&&(h.key=de(a,h.key,()=>r+""),h.value=de(u,h.value,()=>({i:r})));break}case Ir:{let h=d;h.arr=h.arr.map(()=>r);break}case ct:{let h=d;h.str=mo(r%10+"",h.str.length);break}default:Be()}return l.parentSub&&(l.parentSub=de(i,l.parentSub,()=>r+"")),r++,f}default:Be()}}},Yu=(t,e)=>Si(t,Na(e),Ke,wt),Wu=(t,e)=>Si(t,Na(e),We,Xe),zu=t=>Si(t,ts,Ke,Xe),Ma=t=>Si(t,ts,We,wt),fa="You must not compute changes after the event-handler fired.",dn=class{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Ku(this.currentTarget,this.target))}deletes(e){return mn(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw De(fa);let e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){let s=n._map.get(i),a,u;if(this.adds(s)){let f=s.left;for(;f!==null&&this.adds(f);)f=f.left;if(this.deletes(s))if(f!==null&&this.deletes(f))a="delete",u=zr(f.content.getContent());else return;else f!==null&&this.deletes(f)?(a="update",u=zr(f.content.getContent())):(a="add",u=void 0)}else if(this.deletes(s))a="delete",u=zr(s.content.getContent());else return;e.set(i,{action:a,oldValue:u})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw De(fa);let n=this.target,r=st(),i=st(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let u=null,f=()=>{u&&s.push(u)};for(let l=n._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((u===null||u.delete===void 0)&&(f(),u={delete:0}),u.delete+=l.length,i.add(l)):this.adds(l)?((u===null||u.insert===void 0)&&(f(),u={insert:[]}),u.insert=u.insert.concat(l.content.getContent()),r.add(l)):((u===null||u.retain===void 0)&&(f(),u={retain:0}),u.retain+=l.length);u!==null&&u.retain===void 0&&f()}this._changes=e}return e}},Ku=(t,e)=>{let n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)i.deleted||r++,i=i.right;n.unshift(r)}e=e._item.parent}return n},Ba=80,Os=0,bs=class{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Os++}},Gu=t=>{t.timestamp=Os++},Va=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Os++},$u=(t,e,n)=>{if(t.length>=Ba){let r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return Va(r,e,n),r}else{let r=new bs(e,n);return t.push(r),r}},Ci=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;let n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,a)=>En(e-s.index)<En(e-a.index)?s:a),r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,Gu(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&En(n.index-i)<r.parent.length/Ba?(Va(n,r,i),n):$u(t._searchMarker,r,i)},Ar=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){let i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Ct(e,i.index+n))}},Ju=t=>{let e=t._start,n=[];for(;e;)n.push(e),e=e.right;return n},xi=(t,e,n)=>{let r=t,i=e.changedParentTypes;for(;de(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;va(r._eH,n,e)},_e=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ra(),this._dEH=ra(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw ot()}clone(){throw ot()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ia(this._eH,e)}observeDeep(e){ia(this._dEH,e)}unobserve(e){sa(this._eH,e)}unobserveDeep(e){sa(this._dEH,e)}toJSON(){}},Fa=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e,i=[],s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){let a=s.content.getContent();if(a.length<=e)e-=a.length;else{for(let u=e;u<a.length&&r>0;u++)i.push(a[u]),r--;e=0}}s=s.right}return i},Pa=t=>{let e=[],n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){let r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},Xu=(t,e)=>{let n=[],r=t._start;for(;r!==null;){if(r.countable&&on(r,e)){let i=r.content.getContent();for(let s=0;s<i.length;s++)n.push(i[s])}r=r.right}return n},Rr=(t,e)=>{let n=0,r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},ja=(t,e)=>{let n=[];return Rr(t,(r,i)=>{n.push(e(r,i,t))}),n},Zu=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}let i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Ha=(t,e)=>{let n=Ci(t,e),r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},pi=(t,e,n,r)=>{let i=n,s=t.doc,a=s.clientID,u=s.store,f=n===null?e._start:n.right,l=[],d=()=>{l.length>0&&(i=new le(ee(a,ye(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new Yt(l)),i.integrate(t,0),l=[])};r.forEach(h=>{if(h===null)l.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(h);break;default:switch(d(),h.constructor){case Uint8Array:case ArrayBuffer:i=new le(ee(a,ye(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new gn(new Uint8Array(h))),i.integrate(t,0);break;case Dt:i=new le(ee(a,ye(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new Yn(h)),i.integrate(t,0);break;default:if(h instanceof _e)i=new le(ee(a,ye(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new Qe(h)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},qa=De("Length exceeded!"),Ya=(t,e,n,r)=>{if(n>e._length)throw qa;if(n===0)return e._searchMarker&&Ar(e._searchMarker,n,r.length),pi(t,e,null,r);let i=n,s=Ci(e,n),a=e._start;for(s!==null&&(a=s.p,n-=s.index,n===0&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Fe(t,ee(a.id.client,a.id.clock+n));break}n-=a.length}return e._searchMarker&&Ar(e._searchMarker,i,r.length),pi(t,e,a,r)},Qu=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return pi(t,e,i,n)},Wa=(t,e,n,r)=>{if(r===0)return;let i=n,s=r,a=Ci(e,n),u=e._start;for(a!==null&&(u=a.p,n-=a.index);u!==null&&n>0;u=u.right)!u.deleted&&u.countable&&(n<u.length&&Fe(t,ee(u.id.client,u.id.clock+n)),n-=u.length);for(;r>0&&u!==null;)u.deleted||(r<u.length&&Fe(t,ee(u.id.client,u.id.clock+r)),u.delete(t),r-=u.length),u=u.right;if(r>0)throw qa;e._searchMarker&&Ar(e._searchMarker,i,-s+r)},gi=(t,e,n)=>{let r=e._map.get(n);r!==void 0&&r.delete(t)},Ls=(t,e,n,r)=>{let i=e._map.get(n)||null,s=t.doc,a=s.clientID,u;if(r==null)u=new Yt([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:u=new Yt([r]);break;case Uint8Array:u=new gn(r);break;case Dt:u=new Yn(r);break;default:if(r instanceof _e)u=new Qe(r);else throw new Error("Unexpected content type")}new le(ee(a,ye(s.store,a)),i,i&&i.lastId,null,null,e,n,u).integrate(t,0)},Ns=(t,e)=>{let n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},za=t=>{let e={};return t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Ka=(t,e)=>{let n=t._map.get(e);return n!==void 0&&!n.deleted},ed=(t,e,n)=>{let r=t._map.get(e)||null;for(;r!==null&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return r!==null&&on(r,n)?r.content.getContent()[r.length-1]:void 0},oi=t=>Qo(t.entries(),e=>!e[1].deleted),mi=class extends dn{constructor(e,n){super(e,n),this._transaction=n}},hn=class t extends _e{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let n=new t;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof _e?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),xi(this,e,new mi(this,e))}insert(e,n){this.doc!==null?oe(this.doc,r=>{Ya(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?oe(this.doc,n=>{Qu(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?oe(this.doc,r=>{Wa(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Ha(this,e)}toArray(){return Pa(this)}slice(e=0,n=this.length){return Fa(this,e,n)}toJSON(){return this.map(e=>e instanceof _e?e.toJSON():e)}map(e){return ja(this,e)}forEach(e){Rr(this,e)}[Symbol.iterator](){return Zu(this)}_write(e){e.writeTypeRef(_d)}},td=t=>new hn,yi=class extends dn{constructor(e,n,r){super(e,n),this.keysChanged=r}},fn=class t extends _e{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return this.forEach((n,r)=>{e.set(r,n instanceof _e?n.clone():n)}),e}_callObserver(e,n){xi(this,e,new yi(this,e,n))}toJSON(){let e={};return this._map.forEach((n,r)=>{if(!n.deleted){let i=n.content.getContent()[n.length-1];e[r]=i instanceof _e?i.toJSON():i}}),e}get size(){return[...oi(this._map)].length}keys(){return ii(oi(this._map),e=>e[0])}values(){return ii(oi(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ii(oi(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?oe(this.doc,n=>{gi(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?oe(this.doc,r=>{Ls(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Ns(this,e)}has(e){return Ka(this,e)}clear(){this.doc!==null?oe(this.doc,e=>{this.forEach(function(n,r,i){gi(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(vd)}},nd=t=>new fn,jt=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&es(t,e),Dr=class{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Be(),this.right.content.constructor){case be:this.right.deleted||Kn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}},pa=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case be:e.right.deleted||Kn(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Fe(t,ee(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},ai=(t,e,n)=>{let r=new Map,i=Ci(e,n);if(i){let s=new Dr(i.p.left,i.p,i.index,r);return pa(t,s,n-i.index)}else{let s=new Dr(null,e._start,0,r);return pa(t,s,n)}},Ga=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===be&&jt(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let i=t.doc,s=i.clientID;r.forEach((a,u)=>{let f=n.left,l=n.right,d=new le(ee(s,ye(i.store,s)),f,f&&f.lastId,l,l&&l.id,e,null,new be(u,a));d.integrate(t,0),n.right=d,n.forward()})},Kn=(t,e)=>{let{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},$a=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===be&&jt(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Ja=(t,e,n,r)=>{let i=t.doc,s=i.clientID,a=new Map;for(let u in r){let f=r[u],l=n.currentAttributes.get(u)||null;if(!jt(l,f)){a.set(u,l);let{left:d,right:h}=n;n.right=new le(ee(s,ye(i.store,s)),d,d&&d.lastId,h,h&&h.id,e,null,new be(u,f)),n.right.integrate(t,0),n.forward()}}return a},hs=(t,e,n,r,i)=>{n.currentAttributes.forEach((p,w)=>{i[w]===void 0&&(i[w]=null)});let s=t.doc,a=s.clientID;$a(n,i);let u=Ja(t,e,n,i),f=r.constructor===String?new ct(r):r instanceof _e?new Qe(r):new Ut(r),{left:l,right:d,index:h}=n;e._searchMarker&&Ar(e._searchMarker,n.index,f.getLength()),d=new le(ee(a,ye(s.store,a)),l,l&&l.lastId,d,d&&d.id,e,null,f),d.integrate(t,0),n.right=d,n.index=h,n.forward(),Ga(t,e,n,u)},ga=(t,e,n,r,i)=>{let s=t.doc,a=s.clientID;$a(n,i);let u=Ja(t,e,n,i);e:for(;n.right!==null&&(r>0||u.size>0&&(n.right.deleted||n.right.content.constructor===be));){if(!n.right.deleted)switch(n.right.content.constructor){case be:{let{key:f,value:l}=n.right.content,d=i[f];if(d!==void 0){if(jt(d,l))u.delete(f);else{if(r===0)break e;u.set(f,l)}n.right.delete(t)}else n.currentAttributes.set(f,l);break}default:r<n.right.length&&Fe(t,ee(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let f="";for(;r>0;r--)f+=`
`;n.right=new le(ee(a,ye(s.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new ct(f)),n.right.integrate(t,0),n.forward()}Ga(t,e,n,u)},Xa=(t,e,n,r,i)=>{let s=e,a=ve();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===be){let l=s.content;a.set(l.key,l)}s=s.right}let u=0,f=!1;for(;e!==s;){if(n===e&&(f=!0),!e.deleted){let l=e.content;switch(l.constructor){case be:{let{key:d,value:h}=l,p=r.get(d)||null;(a.get(d)!==l||p===h)&&(e.delete(t),u++,!f&&(i.get(d)||null)===h&&p!==h&&(p===null?i.delete(d):i.set(d,p))),!f&&!e.deleted&&Kn(i,l);break}}}e=e.right}return u},rd=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===be){let r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Za=t=>{let e=0;return oe(t.doc,n=>{let r=t._start,i=t._start,s=ve(),a=Yr(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case be:Kn(a,i.content);break;default:e+=Xa(n,r,i,s,a),s=Yr(a),r=i;break}i=i.right}}),e},id=t=>{let e=new Set,n=t.doc;for(let[r,i]of t.afterState.entries()){let s=t.beforeState.get(r)||0;i!==s&&xa(t,n.store.clients.get(r),s,i,a=>{!a.deleted&&a.content.constructor===be&&a.constructor!==Ie&&e.add(a.parent)})}oe(n,r=>{cn(t,t.deleteSet,i=>{if(i instanceof Ie||!i.parent._hasFormatting||e.has(i.parent))return;let s=i.parent;i.content.constructor===be?e.add(s):rd(r,i)});for(let i of e)Za(i)})},ma=(t,e,n)=>{let r=n,i=Yr(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Qe:case Ut:case ct:n<e.right.length&&Fe(t,ee(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&Xa(t,s,e.right,i,e.currentAttributes);let a=(e.left||e.right).parent;return a._searchMarker&&Ar(a._searchMarker,e.index,-r+n),e},wi=class extends dn{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,n=[];oe(e,r=>{let i=new Map,s=new Map,a=this.target._start,u=null,f={},l="",d=0,h=0,p=()=>{if(u!==null){let w=null;switch(u){case"delete":h>0&&(w={delete:h}),h=0;break;case"insert":(typeof l=="object"||l.length>0)&&(w={insert:l},i.size>0&&(w.attributes={},i.forEach((_,C)=>{_!==null&&(w.attributes[C]=_)}))),l="";break;case"retain":d>0&&(w={retain:d},So(f)||(w.attributes=vo({},f))),d=0;break}w&&n.push(w),u=null}};for(;a!==null;){switch(a.content.constructor){case Qe:case Ut:this.adds(a)?this.deletes(a)||(p(),u="insert",l=a.content.getContent()[0],p()):this.deletes(a)?(u!=="delete"&&(p(),u="delete"),h+=1):a.deleted||(u!=="retain"&&(p(),u="retain"),d+=1);break;case ct:this.adds(a)?this.deletes(a)||(u!=="insert"&&(p(),u="insert"),l+=a.content.str):this.deletes(a)?(u!=="delete"&&(p(),u="delete"),h+=a.length):a.deleted||(u!=="retain"&&(p(),u="retain"),d+=a.length);break;case be:{let{key:w,value:_}=a.content;if(this.adds(a)){if(!this.deletes(a)){let C=i.get(w)||null;jt(C,_)?_!==null&&a.delete(r):(u==="retain"&&p(),jt(_,s.get(w)||null)?delete f[w]:f[w]=_)}}else if(this.deletes(a)){s.set(w,_);let C=i.get(w)||null;jt(C,_)||(u==="retain"&&p(),f[w]=C)}else if(!a.deleted){s.set(w,_);let C=f[w];C!==void 0&&(jt(C,_)?C!==null&&a.delete(r):(u==="retain"&&p(),_===null?delete f[w]:f[w]=_))}a.deleted||(u==="insert"&&p(),Kn(i,a.content));break}}a=a.right}for(p();n.length>0;){let w=n[n.length-1];if(w.retain!==void 0&&w.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}},Pn=class t extends _e{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);let r=new wi(this,e,n);xi(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ct&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?oe(this.doc,r=>{let i=new Dr(null,this._start,0,new Map);for(let s=0;s<e.length;s++){let a=e[s];if(a.insert!==void 0){let u=!n&&typeof a.insert=="string"&&s===e.length-1&&i.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof u!="string"||u.length>0)&&hs(r,this,i,u,a.attributes||{})}else a.retain!==void 0?ga(r,this,i,a.retain,a.attributes||{}):a.delete!==void 0&&ma(r,i,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){let i=[],s=new Map,a=this.doc,u="",f=this._start;function l(){if(u.length>0){let h={},p=!1;s.forEach((_,C)=>{p=!0,h[C]=_});let w={insert:u};p&&(w.attributes=h),i.push(w),u=""}}let d=()=>{for(;f!==null;){if(on(f,e)||n!==void 0&&on(f,n))switch(f.content.constructor){case ct:{let h=s.get("ychange");e!==void 0&&!on(f,e)?(h===void 0||h.user!==f.id.client||h.type!=="removed")&&(l(),s.set("ychange",r?r("removed",f.id):{type:"removed"})):n!==void 0&&!on(f,n)?(h===void 0||h.user!==f.id.client||h.type!=="added")&&(l(),s.set("ychange",r?r("added",f.id):{type:"added"})):h!==void 0&&(l(),s.delete("ychange")),u+=f.content.str;break}case Qe:case Ut:{l();let h={insert:f.content.getContent()[0]};if(s.size>0){let p={};h.attributes=p,s.forEach((w,_)=>{p[_]=w})}i.push(h);break}case be:on(f,e)&&(l(),Kn(s,f.content));break}f=f.right}l()};return e||n?oe(a,h=>{e&&ms(h,e),n&&ms(h,n),d()},"cleanup"):d(),i}insert(e,n,r){if(n.length<=0)return;let i=this.doc;i!==null?oe(i,s=>{let a=ai(s,this,e);r||(r={},a.currentAttributes.forEach((u,f)=>{r[f]=u})),hs(s,this,a,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r={}){let i=this.doc;i!==null?oe(i,s=>{let a=ai(s,this,e);hs(s,this,a,n,r)}):this._pending.push(()=>this.insertEmbed(e,n,r))}delete(e,n){if(n===0)return;let r=this.doc;r!==null?oe(r,i=>{ma(i,ai(i,this,e),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;let i=this.doc;i!==null?oe(i,s=>{let a=ai(s,this,e);a.right!==null&&ga(s,this,a,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?oe(this.doc,n=>{gi(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?oe(this.doc,r=>{Ls(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Ns(this,e)}getAttributes(){return za(this)}_write(e){e.writeTypeRef(Ed)}},sd=t=>new Pn,vr=class{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===jn||n.constructor===pn)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},pn=class t extends _e{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof _e?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new vr(this,e)}querySelector(e){e=e.toUpperCase();let r=new vr(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),ft(new vr(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){xi(this,e,new bi(this,n,e))}toString(){return ja(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){let i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Rr(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?oe(this.doc,r=>{Ya(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)oe(this.doc,r=>{let i=e&&e instanceof _e?e._item:e;pi(r,this,i,n)});else{let r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw De("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?oe(this.doc,r=>{Wa(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Pa(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ha(this,e)}slice(e=0,n=this.length){return Fa(this,e,n)}forEach(e){Rr(this,e)}_write(e){e.writeTypeRef(Cd)}},od=t=>new pn,jn=class t extends pn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new t(this.nodeName)}clone(){let e=new t(this.nodeName),n=this.getAttributes();return Eo(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof _e?r.clone():r)),e}toString(){let e=this.getAttributes(),n=[],r=[];for(let u in e)r.push(u);r.sort();let i=r.length;for(let u=0;u<i;u++){let f=r[u];n.push(f+'="'+e[f]+'"')}let s=this.nodeName.toLocaleLowerCase(),a=n.length>0?" "+n.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?oe(this.doc,n=>{gi(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?oe(this.doc,r=>{Ls(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Ns(this,e)}hasAttribute(e){return Ka(this,e)}getAttributes(){return za(this)}toDOM(e=document,n={},r){let i=e.createElement(this.nodeName),s=this.getAttributes();for(let a in s){let u=s[a];typeof u=="string"&&i.setAttribute(a,u)}return Rr(this,a=>{i.appendChild(a.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Sd),e.writeKey(this.nodeName)}},ad=t=>new jn(t.readKey()),bi=class extends dn{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},Ur=class t extends fn{constructor(e){super(),this.hookName=e}_copy(){return new t(this.hookName)}clone(){let e=new t(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){let i=n[this.hookName],s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(xd),e.writeKey(this.hookName)}},cd=t=>new Ur(t.readKey()),_i=class t extends Pn{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){let i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{let n=[];for(let i in e.attributes){let s=[];for(let a in e.attributes[i])s.push({key:a,value:e.attributes[i][a]});s.sort((a,u)=>a.key<u.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){let s=n[i];r+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){let u=s.attrs[a];r+=` ${u.key}="${u.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(kd)}},ld=t=>new _i,Hn=class{constructor(e,n){this.id=e,this.length=n}get deleted(){throw ot()}mergeWith(e){return!1}write(e,n,r){throw ot()}integrate(e,n){throw ot()}},ud=0,Ie=class extends Hn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),Ca(e.doc.store,this)}write(e,n){e.writeInfo(ud),e.writeLen(this.length-n)}getMissing(e,n){return null}},gn=class t{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t(this.content)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}},dd=t=>new gn(t.readBuf()),qn=class t{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.len)}splice(e){let n=new t(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Sr(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}},hd=t=>new qn(t.readLen()),Qa=(t,e)=>new Dt({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),Yn=class t{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new t(Qa(this.doc.guid,this.opts))}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},fd=t=>new Yn(Qa(t.readString(),t.readAny())),Ut=class t{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new t(this.embed)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}},pd=t=>new Ut(t.readJSON()),be=class t{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.key,this.value)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){let r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},gd=t=>new be(t.readKey(),t.readJSON()),Ir=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}},md=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++){let i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Ir(n)},Yt=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let s=this.arr[i];e.writeAny(s)}}getRef(){return 8}},yd=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Yt(n)},ct=class t{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t(this.str)}splice(e){let n=new t(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}},wd=t=>new ct(t.readString()),bd=[td,nd,sd,ad,od,cd,ld],_d=0,vd=1,Ed=2,Sd=3,Cd=4,xd=5,kd=6,Qe=class t{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new t(this.type._copy())}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}},Td=t=>new Qe(bd[t.readTypeRef()](t)),_s=(t,e)=>{let n=e,r=0,i;do r>0&&(n=ee(n.client,n.clock+r)),i=_r(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof le);return{item:i,diff:r}},Ms=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},vi=(t,e,n)=>{let{client:r,clock:i}=e.id,s=new le(ee(r,i+n),e,ee(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=ee(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},ya=(t,e)=>fo(t,n=>mn(n.deletions,e)),ec=(t,e,n,r,i,s)=>{let a=t.doc,u=a.store,f=a.clientID,l=e.redone;if(l!==null)return Fe(t,l);let d=e.parent._item,h=null,p;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||ec(t,d,n,r,i,s)===null))return null;for(;d.redone!==null;)d=Fe(t,d.redone)}let w=d===null?e.parent:d.content.type;if(e.parentSub===null){for(h=e.left,p=e;h!==null;){let y=h;for(;y!==null&&y.parent._item!==d;)y=y.redone===null?null:Fe(t,y.redone);if(y!==null&&y.parent._item===d){h=y;break}h=h.left}for(;p!==null;){let y=p;for(;y!==null&&y.parent._item!==d;)y=y.redone===null?null:Fe(t,y.redone);if(y!==null&&y.parent._item===d){p=y;break}p=p.right}}else if(p=null,e.right&&!i){for(h=e;h!==null&&h.right!==null&&(h.right.redone||mn(r,h.right.id)||ya(s.undoStack,h.right.id)||ya(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Fe(t,h.redone);if(h&&h.right!==null)return null}else h=w._map.get(e.parentSub)||null;let _=ye(u,f),C=ee(f,_),U=new le(C,h,h&&h.lastId,p,p&&p.id,w,e.parentSub,e.content.copy());return e.redone=C,Ms(U,!0),U.integrate(t,0),U},le=class t extends Hn{constructor(e,n,r,i,s,a,u,f){super(e,f.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=a,this.parentSub=u,this.redone=null,this.content=f,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ye(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ye(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===At&&this.id.client!==this.parent.client&&this.parent.clock>=ye(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ca(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Fe(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Ie||this.right&&this.right.constructor===Ie)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===t&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===At){let r=_r(n,this.parent);r.constructor===Ie?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=ca(e,e.doc.store,ee(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let s=new Set,a=new Set;for(;i!==null&&i!==this.right;){if(a.add(i),s.add(i),an(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(an(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&a.has(_r(e.doc.store,i.origin)))s.has(_r(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ca(e.doc.store,this),this.content.integrate(e,this),ua(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ie(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:ee(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&an(e.origin,this.lastId)&&this.right===e&&an(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Sr(e.deleteSet,this.id.client,this.id.clock,this.length),ua(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Be();this.content.gc(e),n?Nu(e,this,new Ie(this.id,this.length)):this.content=new qn(this.length)}write(e,n){let r=n>0?ee(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(s===null?0:32);if(e.writeInfo(a),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){let u=this.parent;if(u._item!==void 0){let f=u._item;if(f===null){let l=Rs(u);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(f.id)}else u.constructor===String?(e.writeParentInfo(!0),e.writeString(u)):u.constructor===At?(e.writeParentInfo(!1),e.writeLeftID(u)):Be();s!==null&&e.writeString(s)}this.content.write(e,n)}},tc=(t,e)=>Ad[e&31](t),Ad=[()=>{Be()},hd,md,dd,wd,pd,gd,Td,yd,fd,()=>{Be()}],Rd=10,Oe=class extends Hn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Be()}write(e,n){e.writeInfo(Rd),z(e.restEncoder,this.length-n)}getMissing(e,n){return null}},nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},rc="__ $YJS$ __";nc[rc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");nc[rc]=!0;var Ps=vn(sc()),Ti=vn(Bs());var ac=vn(Bs());function Dd(t){return JSON.parse(JSON.stringify(t))}var Vs;(t=>{function e(s={},a={},u=!1){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let f=Dd(a);u||(f=Object.keys(f).reduce((l,d)=>((f[d]!==null||f[d]!==void 0)&&(l[d]=f[d]),l),{}));for(let l in s)s[l]!==void 0&&a[l]===void 0&&(f[l]=s[l]);return Object.keys(f).length>0?f:void 0}t.compose=e;function n(s={},a={}){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let u=Object.keys(s).concat(Object.keys(a)).reduce((f,l)=>((0,ac.default)(s[l],a[l])||(f[l]=a[l]===void 0?null:a[l]),f),{});return Object.keys(u).length>0?u:void 0}t.diff=n;function r(s={},a={}){s=s||{};let u=Object.keys(a).reduce((f,l)=>(a[l]!==s[l]&&s[l]!==void 0&&(f[l]=a[l]),f),{});return Object.keys(s).reduce((f,l)=>(s[l]!==a[l]&&a[l]===void 0&&(f[l]=null),f),u)}t.invert=r;function i(s,a,u=!1){if(typeof s!="object")return a;if(typeof a!="object")return;if(!u)return a;let f=Object.keys(a).reduce((l,d)=>(s[d]===void 0&&(l[d]=a[d]),l),{});return Object.keys(f).length>0?f:void 0}t.transform=i})(Vs||(Vs={}));var yn=Vs;var Fs;(t=>{function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Fs||(Fs={}));var et=Fs;var Le=class{ops;index;offset;constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let n=this.ops[this.index];if(n){let r=this.offset,i=et.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};let s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?et.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index)}else return[];let e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}};function Ud(t){return JSON.parse(JSON.stringify(t))}var Id="\0",cc=(t,e)=>{if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]},js=class t{static Op=et;static OpIterator=Le;static AttributeMap=yn;static handlers={};static registerEmbed(e,n){this.handlers[e]=n}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let n=this.handlers[e];if(!n)throw new Error(`no handlers for embed type "${e}"`);return n}ops;constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}insert(e,n){let r={};return typeof e=="string"&&e.length===0?this:(r.insert=e,n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,n){if(typeof e=="number"&&e<=0)return this;let r={retain:e};return n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r)}push(e){let n=this.ops.length,r=this.ops[n-1];if(e=Ud(e),typeof r=="object"){if(typeof e.delete=="number"&&typeof r.delete=="number")return this.ops[n-1]={delete:r.delete+e.delete},this;if(typeof r.delete=="number"&&e.insert!==null&&e.insert!==void 0&&(n-=1,r=this.ops[n-1],typeof r!="object"))return this.ops.unshift(e),this;if((0,Ti.default)(e.attributes,r.attributes)){if(typeof e.insert=="string"&&typeof r.insert=="string")return this.ops[n-1]={insert:r.insert+e.insert},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof r.retain=="number")return this.ops[n-1]={retain:r.retain+e.retain},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this}}return n===this.ops.length?this.ops.push(e):this.ops.splice(n,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let n=[],r=[];return this.forEach(i=>{(e(i)?n:r).push(i)}),[n,r]}reduce(e,n){return this.ops.reduce(e,n)}changeLength(){return this.reduce((e,n)=>n.insert?e+et.length(n):n.delete?e-n.delete:e,0)}length(){return this.reduce((e,n)=>e+et.length(n),0)}slice(e=0,n=1/0){let r=[],i=new Le(this.ops),s=0;for(;s<n&&i.hasNext();){let a;s<e?a=i.next(e-s):(a=i.next(n-s),r.push(a)),s+=et.length(a)}return new t(r)}compose(e){let n=new Le(this.ops),r=new Le(e.ops),i=[],s=r.peek();if(s!=null&&typeof s.retain=="number"&&(s.attributes===null||s.attributes===void 0)){let u=s.retain;for(;n.peekType()==="insert"&&n.peekLength()<=u;)u-=n.peekLength(),i.push(n.next());s.retain-u>0&&r.next(s.retain-u)}let a=new t(i);for(;n.hasNext()||r.hasNext();)if(r.peekType()==="insert")a.push(r.next());else if(n.peekType()==="delete")a.push(n.next());else{let u=Math.min(n.peekLength(),r.peekLength()),f=n.next(u),l=r.next(u);if(l.retain){let d={};if(typeof f.retain=="number")d.retain=typeof l.retain=="number"?u:l.retain;else if(typeof l.retain=="number")f.retain===null||f.retain===void 0?d.insert=f.insert:d.retain=f.retain;else{let p=f.retain===null||f.retain===void 0?"insert":"retain",[w,_,C]=cc(f[p],l.retain),U=t.getHandler(w);d[p]={[w]:U.compose(_,C,p==="retain")}}let h=yn.compose(f.attributes,l.attributes,typeof f.retain=="number");if(h&&(d.attributes=h),a.push(d),!r.hasNext()&&(0,Ti.default)(a.ops[a.ops.length-1],d)){let p=new t(n.rest());return a.concat(p).chop()}}else typeof l.delete=="number"&&(typeof f.retain=="number"||typeof f.retain=="object"&&f.retain!==null)&&a.push(l)}return a.chop()}concat(e){let n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n}diff(e){if(this.ops===e.ops)return new t;let n=this.deltasToStrings(e),r=(0,Ps.diffChars)(n[0],n[1]),i=new Le(this.ops),s=new Le(e.ops);return this.convertChangesToDelta(r,i,s).chop()}eachLine(e,n=`
`){let r=new Le(this.ops),i=new t,s=0;for(;r.hasNext();){if(r.peekType()!=="insert")return;let a=r.peek(),u=et.length(a)-r.peekLength(),f=typeof a.insert=="string"?a.insert.indexOf(n,u)-u:-1;if(f<0)i.push(r.next());else if(f>0)i.push(r.next(f));else{if(e(i,r.next(1).attributes||{},s)===!1)return;s+=1,i=new t}}i.length()>0&&e(i,{},s)}invert(e){let n=new t;return this.reduce((r,i)=>{if(i.insert)n.delete(et.length(i));else{if(typeof i.retain=="number"&&(i.attributes===null||i.attributes===void 0))return n.retain(i.retain),r+i.retain;if(i.delete||typeof i.retain=="number"){let s=i.delete||i.retain;return e.slice(r,r+s).forEach(u=>{i.delete?n.push(u):i.retain&&i.attributes&&n.retain(et.length(u),yn.invert(i.attributes,u.attributes))}),r+s}else if(typeof i.retain=="object"&&i.retain!==null){let s=e.slice(r,r+1),a=new Le(s.ops).next(),[u,f,l]=cc(i.retain,a.insert),d=t.getHandler(u);return n.retain({[u]:d.invert(f,l)},yn.invert(i.attributes,a.attributes)),r+1}}return r},0),n.chop()}transform(e,n=!1){if(n=!!n,typeof e=="number")return this.transformPosition(e,n);let r=e,i=new Le(this.ops),s=new Le(r.ops),a=new t;for(;i.hasNext()||s.hasNext();)if(i.peekType()==="insert"&&(n||s.peekType()!=="insert"))a.retain(et.length(i.next()));else if(s.peekType()==="insert")a.push(s.next());else{let u=Math.min(i.peekLength(),s.peekLength()),f=i.next(u),l=s.next(u);if(f.delete)continue;if(l.delete)a.push(l);else{let d=f.retain,h=l.retain,p=typeof h=="object"&&h!==null?h:u;if(typeof d=="object"&&d!==null&&typeof h=="object"&&h!==null){let w=Object.keys(d)[0];if(w===Object.keys(h)[0]){let _=t.getHandler(w);_&&(p={[w]:_.transform(d[w],h[w],n)})}}a.retain(p,yn.transform(f.attributes,l.attributes,n))}}return a.chop()}transformPosition(e,n=!1){n=!!n;let r=new Le(this.ops),i=0;for(;r.hasNext()&&i<=e;){let s=r.peekLength(),a=r.peekType();if(r.next(),a==="delete"){e-=Math.min(s,e-i);continue}else a==="insert"&&(i<e||!n)&&(e+=s);i+=s}return e}diffWithCursor(e,n){if(this.ops===e.ops)return new t;if(n===null)return this.diff(e);let r=this.deltasToStrings(e),i=(0,Ps.diffChars)(r[0],r[1]),s=0,a=[];for(let d=0;d<i.length;d++){let h=i[d],p=s,w=s+(h.count??0),_=n>p&&n<=w,C=!h.added&&!h.removed,U=h.removed&&!h.added,y=i[d+1],v=y&&y.added&&!y.removed;if(C&&_&&v){let E=this.tryMoveInsertionToCursor(h,y,n,p);if(E){a.push(...E),d++,s=w;continue}}if(U){let E=this.tryMoveDeletionToCursor(h,a,n,s);if(E){a.pop(),a.push(...E),s+=h.count??0;continue}}a.push(h),h.added||(s+=h.count??0)}i=a;let u=new Le(this.ops),f=new Le(e.ops);return this.convertChangesToDelta(i,u,f).chop()}tryMoveInsertionToCursor(e,n,r,i){let s=n.value,a=s.length,u=r-i-a;if(!(e.value.substring(u,u+s.length)===s))return null;let d=e.value.substring(0,u),h=e.value.substring(u),p=[];return d.length>0&&p.push({value:d,count:d.length,added:!1,removed:!1}),p.push(n),h.length>0&&p.push({value:h,count:h.length,added:!1,removed:!1}),p}tryMoveDeletionToCursor(e,n,r,i){let s=n[n.length-1];if(!s||s.added||s.removed)return null;let a=i-(s.count??0),u=i;if(r<a||r>=u)return null;let f=e.value,l=r-a;if(!(s.value.substring(l,l+f.length)===f))return null;let p=s.value.substring(0,l),w=s.value.substring(l),_=e.count??0,C=w.substring(_),U=[];return p.length>0&&U.push({value:p,count:p.length,added:!1,removed:!1}),U.push(e),C.length>0&&U.push({value:C,count:C.length,added:!1,removed:!1}),U}deltasToStrings(e){return[this,e].map(n=>n.map(r=>{if(r.insert!==null||r.insert!==void 0)return typeof r.insert=="string"?r.insert:Id;let i=n===e?"on":"with";throw new Error("diff() called "+i+" non-document")}).join(""))}convertChangesToDelta(e,n,r){let i=new t;return e.forEach(s=>{let a=s.count??0;for(;a>0;){let u=0;if(s.added)u=Math.min(r.peekLength(),a),i.push(r.next(u));else if(s.removed)u=Math.min(a,n.peekLength()),n.next(u),i.delete(u);else{u=Math.min(n.peekLength(),r.peekLength(),a);let f=n.next(u),l=r.next(u);(0,Ti.default)(f.insert,l.insert)?i.retain(u,yn.diff(f.attributes,l.attributes)):i.push(l).delete(u)}a-=u}}),i}},lc=js;var Ai="fromPersistence",Ri="document",wn="documentMeta",It="savedAt",Di="savedBy",uc="state",dc="version",Ui="gutenberg",Nr="syncManager",Mr="_crdt_document";function Ii(t={}){let e=new Map(Object.entries(t)),n=new Dt({meta:e});return n.getMap(uc).set(dc,1),n}function Hs(t){let e=t.getMap(wn);e.set(It,Date.now()),e.set(Di,t.clientID)}function hc(t){return JSON.stringify({document:In(Wn(t))})}function fc(t){try{let{document:e}=JSON.parse(t),n={[Ai]:!0},r=Ii(n),i=Vt(e);return Wt(r,i),r.clientID=Math.floor(Math.random()*1e9),r}catch{return null}}function pc(t){let e=t.meta?.[Mr];return e?fc(e):null}function gc(t){return{[Mr]:hc(t)}}var rl=vn(yc());var bn=t=>Tt((e,n)=>{t.onerror=r=>n(new Error(r.target.error)),t.onsuccess=r=>e(r.target.result)}),wc=(t,e)=>Tt((n,r)=>{let i=indexedDB.open(t);i.onupgradeneeded=s=>e(s.target.result),i.onerror=s=>r(De(s.target.error)),i.onsuccess=s=>{let a=s.target.result;a.onversionchange=()=>{a.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>a.close()),n(a)}}),bc=t=>bn(indexedDB.deleteDatabase(t)),_c=(t,e)=>e.forEach(n=>t.createObjectStore.apply(t,n)),Gn=(t,e,n="readwrite")=>{let r=t.transaction(e,n);return e.map(i=>Bd(r,i))},qs=(t,e)=>bn(t.count(e)),vc=(t,e)=>bn(t.get(e)),Ys=(t,e)=>bn(t.delete(e)),Ec=(t,e,n)=>bn(t.put(e,n));var Oi=(t,e)=>bn(t.add(e)),Sc=(t,e,n)=>bn(t.getAll(e,n));var Ld=(t,e,n)=>{let r=null;return Md(t,e,i=>(r=i,!1),n).then(()=>r)},Cc=(t,e=null)=>Ld(t,e,"prev");var Nd=(t,e)=>Tt((n,r)=>{t.onerror=r,t.onsuccess=async i=>{let s=i.target.result;if(s===null||await e(s)===!1)return n();s.continue()}});var Md=(t,e,n,r="next")=>Nd(t.openKeyCursor(e,r),i=>n(i.key)),Bd=(t,e)=>t.objectStore(e);var xc=(t,e)=>IDBKeyRange.upperBound(t,e),kc=(t,e)=>IDBKeyRange.lowerBound(t,e);var Ws="custom",Tc="updates",Ac=500,Rc=(t,e=()=>{},n=()=>{})=>{let[r]=Gn(t.db,[Tc]);return Sc(r,kc(t._dbref,!1)).then(i=>{t._destroyed||(e(r),oe(t.doc,()=>{i.forEach(s=>Or(t.doc,s))},t,!1),n(r))}).then(()=>Cc(r).then(i=>{t._dbref=i+1})).then(()=>qs(r).then(i=>{t._dbsize=i})).then(()=>r)},Fd=(t,e=!0)=>Rc(t).then(n=>{(e||t._dbsize>=Ac)&&Oi(n,zn(t.doc)).then(()=>Ys(n,xc(t._dbref,!0))).then(()=>qs(n).then(r=>{t._dbsize=r}))});var Li=class extends xe{constructor(e,n){super(),this.doc=n,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=wc(e,r=>_c(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=Tt(r=>this.on("synced",()=>r(this))),this._db.then(r=>{this.db=r,Rc(this,a=>Oi(a,zn(n)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,i)=>{if(this.db&&i!==this){let[s]=Gn(this.db,[Tc]);Oi(s,r),++this._dbsize>=Ac&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{Fd(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{bc(this.name)})}get(e){return this._db.then(n=>{let[r]=Gn(n,[Ws],"readonly");return vc(r,e)})}set(e,n){return this._db.then(r=>{let[i]=Gn(r,[Ws]);return Ec(i,n,e)})}del(e){return this._db.then(n=>{let[r]=Gn(n,[Ws]);return Ys(r,e)})}};function Dc(t,e,n){let r=e?`${t}-${e}`:t,i=new Li(r,n);return Promise.resolve({destroy:()=>i.destroy()})}var Pd=1200,jd=2500,Ni=3e4,zs=t=>{if(t.shouldConnect&&t.ws===null){let e=new WebSocket(t.url),n=t.binaryType,r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=a=>{t.lastMessageReceived=Ye();let u=a.data,f=typeof u=="string"?JSON.parse(u):u;f&&f.type==="pong"&&(clearTimeout(r),r=setTimeout(s,Ni/2)),t.emit("message",[f,t])};let i=a=>{t.ws!==null&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:a},t])):t.unsuccessfulReconnects++,setTimeout(zs,Sn(go(t.unsuccessfulReconnects+1)*Pd,jd),t)),clearTimeout(r)},s=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>i(null),e.onerror=a=>i(a),e.onopen=()=>{t.lastMessageReceived=Ye(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(s,Ni/2)}}},Mi=class extends xe{constructor(e,{binaryType:n}={}){super(),this.url=e,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Ni<Ye()-this.lastMessageReceived&&this.ws.close()},Ni/2),zs(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&zs(this)}};var Uc=new Map,Ks=class{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:Vt(n.newValue||"")}),wo(this._onChange)}postMessage(e){Gr.setItem(this.room,In(No(e)))}close(){bo(this._onChange)}},qd=typeof BroadcastChannel>"u"?Ks:BroadcastChannel,Gs=t=>de(Uc,t,()=>{let e=st(),n=new qd(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),Ic=(t,e)=>(Gs(t).subs.add(e),e),Oc=(t,e)=>{let n=Gs(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),Uc.delete(t)),r},Lc=(t,e,n=null)=>{let r=Gs(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))};var Nc=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}};var Kc=vn(Bc());var Bi=0,Vi=1,Vc=2,Js=(t,e)=>{z(t,Bi);let n=As(e);he(t,n)},Xs=(t,e,n)=>{z(t,Vi),he(t,zn(e,n))},Wd=(t,e,n)=>Xs(e,n,we(t)),Fc=(t,e,n)=>{try{Or(e,we(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Pc=(t,e)=>{z(t,Vc),he(t,e)},zd=Fc,jc=(t,e,n,r)=>{let i=J(t);switch(i){case Bi:Wd(t,e,n);break;case Vi:Fc(t,n,r);break;case Vc:zd(t,n,r);break;default:throw new Error("Unknown message type")}return i};var Zs=3e4,$n=class extends xe{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let n=Ye();this.getLocalState()!==null&&Zs/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&Zs<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&Fi(this,r,"timeout")},Re(Zs/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Ye()});let a=[],u=[],f=[],l=[];e===null?l.push(n):s==null?e!=null&&a.push(n):(u.push(n),Tn(s,e)||f.push(n)),(a.length>0||f.length>0||l.length>0)&&this.emit("change",[{added:a,updated:f,removed:l},"local"]),this.emit("update",[{added:a,updated:u,removed:l},"local"])}setLocalStateField(e,n){let r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}},Fi=(t,e,n)=>{let r=[];for(let i=0;i<e.length;i++){let s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){let a=t.meta.get(s);t.meta.set(s,{clock:a.clock+1,lastUpdated:Ye()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Br=(t,e,n=t.states)=>{let r=e.length,i=ge();z(i,r);for(let s=0;s<r;s++){let a=e[s],u=n.get(a)||null,f=t.meta.get(a).clock;z(i,a),z(i,f),Ve(i,JSON.stringify(u))}return ce(i)};var Hc=(t,e,n)=>{let r=pe(e),i=Ye(),s=[],a=[],u=[],f=[],l=J(r);for(let d=0;d<l;d++){let h=J(r),p=J(r),w=JSON.parse(qe(r)),_=t.meta.get(h),C=t.states.get(h),U=_===void 0?0:_.clock;(U<p||U===p&&w===null&&t.states.has(h))&&(w===null?h===t.clientID&&t.getLocalState()!=null?p++:t.states.delete(h):t.states.set(h,w),t.meta.set(h,{clock:p,lastUpdated:i}),_===void 0&&w!==null?s.push(h):_!==void 0&&w===null?f.push(h):w!==null&&(Tn(w,C)||u.push(h),a.push(h)))}(s.length>0||u.length>0||f.length>0)&&t.emit("change",[{added:s,updated:u,removed:f},n]),(s.length>0||a.length>0||f.length>0)&&t.emit("update",[{added:s,updated:a,removed:f},n])};var qc=(t,e)=>{let n=ir(t).buffer,r=ir(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Qs=(t,e)=>{if(!e)return mr(t);let n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then(r=>{let i=ge();return Ve(i,"AES-GCM"),he(i,n),he(i,new Uint8Array(r)),ce(i)})},Yc=(t,e)=>{let n=ge();return Ft(n,t),Qs(ce(n),e)},eo=(t,e)=>{if(!e)return mr(t);let n=pe(t);qe(n)!=="AES-GCM"&&Yo(De("Unknown encryption algorithm"));let i=we(n),s=we(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,s).then(a=>new Uint8Array(a))},Pi=(t,e)=>eo(t,e).then(n=>Mt(pe(new Uint8Array(n))));var Ee=Jo("y-webrtc"),Jn=0,Gc=3,Vr=1,io=4,Xn=new Map,lt=new Map,$c=t=>{let e=!0;t.webrtcConns.forEach(n=>{n.synced||(e=!1)}),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),Ee("synced ",Ue,t.name,at," with all peers"))},Jc=(t,e,n)=>{let r=pe(e),i=ge(),s=J(r);if(t===void 0)return null;let a=t.awareness,u=t.doc,f=!1;switch(s){case Jn:{z(i,Jn);let l=jc(r,i,u,t);l===Vi&&!t.synced&&n(),l===Bi&&(f=!0);break}case Gc:z(i,Vr),he(i,Br(a,Array.from(a.getStates().keys()))),f=!0;break;case Vr:Hc(a,we(r),t);break;case io:{let l=xt(r)===1,d=qe(r);if(d!==t.peerId&&(t.bcConns.has(d)&&!l||!t.bcConns.has(d)&&l)){let h=[],p=[];l?(t.bcConns.add(d),p.push(d)):(t.bcConns.delete(d),h.push(d)),t.provider.emit("peers",[{added:p,removed:h,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),Xc(t)}break}default:return console.error("Unable to compute message"),i}return f?i:null},$d=(t,e)=>{let n=t.room;return Ee("received message from ",Ue,t.remotePeerId,Nn," (",n.name,")",at,sn),Jc(n,e,()=>{t.synced=!0,Ee("synced ",Ue,n.name,at," with ",Ue,t.remotePeerId),$c(n)})},to=(t,e)=>{Ee("send message to ",Ue,t.remotePeerId,at,Nn," (",t.room.name,")",sn);try{t.peer.send(ce(e))}catch{}},Jd=(t,e)=>{Ee("broadcast message in ",Ue,t.name,at),t.webrtcConns.forEach(n=>{try{n.peer.send(e)}catch{}})},_n=class{constructor(e,n,r,i){Ee("establishing connection to ",Ue,r),this.room=i,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Kc.default({initiator:n,...i.provider.peerOpts}),this.peer.on("signal",s=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),Pr(e,i,{to:r,from:i.peerId,type:"signal",token:this.glareToken,signal:s})}),this.peer.on("connect",()=>{Ee("connected to ",Ue,r),this.connected=!0;let a=i.provider.doc,u=i.awareness,f=ge();z(f,Jn),Js(f,a),to(this,f);let l=u.getStates();if(l.size>0){let d=ge();z(d,Vr),he(d,Br(u,Array.from(l.keys()))),to(this,d)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),$c(i),this.peer.destroy(),Ee("closed connection to ",Ue,r),no(i)}),this.peer.on("error",s=>{Ee("Error in connection to ",Ue,r,": ",s),no(i)}),this.peer.on("data",s=>{let a=$d(this,s);a!==null&&to(this,a)})}destroy(){this.peer.destroy()}},Kt=(t,e)=>Qs(e,t.key).then(n=>t.mux(()=>Lc(t.name,n))),zc=(t,e)=>{t.bcconnected&&Kt(t,e),Jd(t,e)},no=t=>{Xn.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&Pr(e,t,{type:"announce",from:t.peerId}))})},Xc=t=>{if(t.provider.filterBcConns){let e=ge();z(e,io),kt(e,1),Ve(e,t.peerId),Kt(t,ce(e))}},ro=class{constructor(e,n,r,i){this.peerId=Qr(),this.doc=e,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Nc(),this.bcconnected=!1,this._bcSubscriber=s=>eo(new Uint8Array(s),i).then(a=>this.mux(()=>{let u=Jc(this,a,()=>{});u&&Kt(this,ce(u))})),this._docUpdateHandler=(s,a)=>{let u=ge();z(u,Jn),Pc(u,s),zc(this,ce(u))},this._awarenessUpdateHandler=({added:s,updated:a,removed:u},f)=>{let l=s.concat(a).concat(u),d=ge();z(d,Vr),he(d,Br(this.awareness,l)),zc(this,ce(d))},this._beforeUnloadHandler=()=>{Fi(this.awareness,[e.clientID],"window unload"),lt.forEach(s=>{s.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),no(this);let e=this.name;Ic(e,this._bcSubscriber),this.bcconnected=!0,Xc(this);let n=ge();z(n,Jn),Js(n,this.doc),Kt(this,ce(n));let r=ge();z(r,Jn),Xs(r,this.doc),Kt(this,ce(r));let i=ge();z(i,Gc),Kt(this,ce(i));let s=ge();z(s,Vr),he(s,Br(this.awareness,[this.doc.clientID])),Kt(this,ce(s))}disconnect(){Xn.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Fi(this.awareness,[this.doc.clientID],"disconnect");let e=ge();z(e,io),kt(e,0),Ve(e,this.peerId),Kt(this,ce(e)),Oc(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}},Xd=(t,e,n,r)=>{if(lt.has(n))throw De(`A Yjs Doc connected to room "${n}" already exists!`);let i=new ro(t,e,n,r);return lt.set(n,i),i},Pr=(t,e,n)=>{e.key?Yc(n,e.key).then(r=>{t.send({type:"publish",topic:e.name,data:In(r)})}):t.send({type:"publish",topic:e.name,data:n})},Fr=class extends Mi{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{Ee(`connected (${e})`);let n=Array.from(lt.keys());this.send({type:"subscribe",topics:n}),lt.forEach(r=>Pr(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{let r=n.topic,i=lt.get(r);if(i==null||typeof r!="string")return;let s=a=>{let u=i.webrtcConns,f=i.peerId;if(a==null||a.from===f||a.to!==void 0&&a.to!==f||i.bcConns.has(a.from))return;let l=u.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":u.size<i.provider.maxConns&&(de(u,a.from,()=>new _n(this,!0,a.from,i)),l());break;case"signal":if(a.signal.type==="offer"){let d=u.get(a.from);if(d){let h=a.token,p=d.glareToken;if(p&&p>h){Ee("offer rejected: ",a.from);return}d.glareToken=void 0}}if(a.signal.type==="answer"){Ee("offer answered by: ",a.from);let d=u.get(a.from);d.glareToken=void 0}a.to===f&&(de(u,a.from,()=>new _n(this,!1,a.from,i)).peer.signal(a.signal),l());break}};i.key?typeof n.data=="string"&&Pi(Vt(n.data),i.key).then(s):s(n.data)}}}),this.on("disconnect",()=>Ee(`disconnect (${e})`))}},ji=class extends xe{constructor(e,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:i=null,awareness:s=new $n(n),maxConns:a=20+Re(Ho()*15),filterBcConns:u=!0,peerOpts:f={}}={}){super(),this.roomName=e,this.doc=n,this.filterBcConns=u,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=a,this.peerOpts=f,this.key=i?qc(i,e):mr(null),this.room=null,this.key.then(l=>{this.room=Xd(n,this,e,l),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{let n=de(Xn,e,()=>new Fr(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),e.providers.size===0&&(e.destroy(),Xn.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),lt.delete(this.roomName)}),super.destroy()}};var tl=vn(Qc());function Zd(t,e){t.on("connect",()=>{Ee(`connected (${e})`);let n=Array.from(lt.keys());t.send({type:"subscribe",topics:n}),lt.forEach(r=>Pr(t,r,{type:"announce",from:r.peerId}))}),t.on("message",n=>{switch(n.type){case"publish":{let r=n.topic,i=lt.get(r);if(i===null||typeof r!="string"||i===void 0)return;let s=a=>{let u=i.webrtcConns,f=i.peerId;if(a===null||a.from===f||a.to!==void 0&&a.to!==f||i.bcConns.has(a.from))return;let l=u.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":u.size<i.provider.maxConns&&(de(u,a.from,()=>new _n(t,!0,a.from,i)),l());break;case"signal":if(a.signal.type==="offer"){let d=u.get(a.from);if(d){let h=a.token,p=d.glareToken;if(p&&p>h){Ee("offer rejected: ",a.from);return}d.glareToken=void 0}}if(a.signal.type==="answer"){Ee("offer answered by: ",a.from);let d=u.get(a.from);d&&(d.glareToken=void 0)}a.to===f&&(de(u,a.from,()=>new _n(t,!1,a.from,i)).peer.signal(a.signal),l());break}};i.key?typeof n.data=="string"&&Pi(Vt(n.data),i.key).then(s):s(n.data)}}}),t.on("disconnect",()=>Ee(`disconnect (${e})`))}function el(t){if(t.shouldConnect&&t.ws===null){let e=Math.floor(1e5+Math.random()*9e5),n=t.url,r=new window.EventSource((0,tl.addQueryArgs)(n,{subscriber_id:e,action:"gutenberg_signaling_server"})),i=null;r.onmessage=f=>{t.lastMessageReceived=Date.now();let l=f.data;if(l){let d=JSON.parse(l);Array.isArray(d)&&d.forEach(s)}},t.ws=r,t.connecting=!0,t.connected=!1;let s=f=>{f&&f.type==="pong"&&(clearTimeout(i),i=setTimeout(u,Hi/2)),t.emit("message",[f,t])},a=f=>{t.ws!==null&&(t.ws.close(),t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:f},t])):t.unsuccessfulReconnects++),clearTimeout(i)},u=()=>{t.ws&&t.ws.readyState===window.EventSource.OPEN&&t.send({type:"ping"})};t.ws&&(t.ws.onclose=()=>{a(null)},t.ws.send=function(l){window.fetch(n,{body:new URLSearchParams({subscriber_id:e.toString(),action:"gutenberg_signaling_server",message:l}),method:"POST"}).catch(()=>{Ee("Error sending to server with message: "+l)})}),r.onerror=()=>{},r.onopen=()=>{t.connected||r.readyState===window.EventSource.OPEN&&(t.lastMessageReceived=Date.now(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),i=setTimeout(u,Hi/2))}}}var Hi=3e4,so=class extends xe{constructor(e){super(),this.url=e,this.ws=null,this.binaryType=null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Hi<Date.now()-this.lastMessageReceived&&this.ws&&this.ws.close()},Hi/2),el(this),this.providers=new Set,Zd(this,e)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&el(this)}},qi=class extends ji{connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{let n=de(Xn,e,e.startsWith("ws://")||e.startsWith("wss://")?()=>new Fr(e):()=>new so(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}};function nl({signaling:t,password:e}){return function(n,r,i){let s=r?`${n}-${r}`:n,a=new qi(s,i,{signaling:t,password:e});return Promise.resolve({destroy:()=>a.destroy()})}}var Zn=null;function Qd(){let t=window?.wp?.ajax?.settings?.url;return t?[Dc,nl({password:window?.__experimentalCollaborativeEditingSecret,signaling:[t]})]:[]}function eh(t){return typeof t=="function"}function oo(){if(Zn)return Zn;let t=(0,rl.applyFilters)("sync.providers",Qd());return Array.isArray(t)?(Zn=t.filter(eh),Zn):(Zn=[],Zn)}var il=(t,e)=>{let n=e==="undo"?t.undoStack:t.redoStack;for(;n.length>0;){let r=n.pop(),i=e==="undo"?r.undoStack:r.redoStack,s=i.pop(),a=!1;if(e==="undo"?(r.undoStack=[s],a=r.undo()!==null,r.undoStack=i):(r.redoStack=[s],a=r.redo()!==null,r.redoStack=i),a)return s}return null},Yi=class extends xe{constructor(e=[],n={}){super(),this.docs=new Map,this.trackedOrigins=n.trackedOrigins||new Set([null]),n.trackedOrigins=this.trackedOrigins,this._defaultOpts=n,this.undoStack=[],this.redoStack=[],this.addToScope(e)}addToScope(e){e=Xt(e)?e:[e],e.forEach(n=>{let r=n.doc,i=de(this.docs,r,()=>{let s=new un([n],this._defaultOpts);return s.on("stack-cleared",({undoStackCleared:a,redoStackCleared:u})=>{this.clear(a,u)}),r.on("destroy",()=>{this.docs.delete(r),this.undoStack=this.undoStack.filter(a=>a.doc!==r),this.redoStack=this.redoStack.filter(a=>a.doc!==r)}),s.on("stack-item-added",a=>{(a.type==="undo"?this.undoStack:this.redoStack).push(s),this.emit("stack-item-added",[{...a,ydoc:r},this])}),s.on("stack-item-updated",a=>{this.emit("stack-item-updated",[{...a,ydoc:r},this])}),s.on("stack-item-popped",a=>{this.emit("stack-item-popped",[{...a,ydoc:r},this])}),s});i.scope.every(s=>s!==n)&&i.scope.push(n)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}undo(){return il(this,"undo")}redo(){return il(this,"redo")}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&(this.docs.forEach(r=>{e&&(this.undoStack=[]),n&&(this.redoStack=[]),r.clear(e,n)}),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}]))}stopCapturing(){this.docs.forEach(e=>{e.stopCapturing()})}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.docs.forEach(e=>e.destroy()),super.destroy()}};function sl(){let t=new Yi([],{captureTimeout:200,trackedOrigins:new Set([Ui])});return{addRecord(e,n=!1){},addToScope(e){t.addToScope(e)},undo(){if(t.canUndo())return t.undo(),[]},redo(){if(t.canRedo())return t.redo(),[]},hasUndo(){return t.canUndo()},hasRedo(){return t.canRedo()}}}function ol(){let t=new Map,e=new Map,n=sl();async function r(h,p,w,_,C){let U=oo();if(U.length===0)return;let y=a(p,w);if(e.has(y))return;let v=Ii({objectType:p}),E=v.getMap(Ri),A=v.getMap(wn),x=Date.now(),I=()=>{P.forEach($=>$.destroy()),E.unobserveDeep(F),A.unobserve(T),v.destroy(),e.delete(y)},F=($,X)=>{X.local&&!(X.origin instanceof un)||l(p,w)},T=($,X)=>{X.local||$.keysChanged.forEach(te=>{switch(te){case It:let fe=A.get(It);typeof fe=="number"&&fe>x&&C.refetchRecord().catch(()=>{});break}})};h.supports?.undo&&n.addToScope(E);let R={handlers:C,objectId:w,objectType:p,syncConfig:h,unload:I,ydoc:v};e.set(y,R);let P=await Promise.all(U.map($=>{let X=h.supports?.awareness?new $n(v):void 0;return $(p,w,v,X)}));if(E.observeDeep(F),A.observe(T),u(h,v,_)){v.transact(()=>{h.applyChangesToCRDTDoc(v,_)},Nr);let $=d(p,w);C.editRecord({meta:$}),C.saveRecord()}}async function i(h,p,w){let _=oo();if(_.length===0||t.has(p))return;let C=Ii({collection:!0,objectType:p}),U=C.getMap(wn),y=Date.now(),v=()=>{x.forEach(I=>I.destroy()),U.unobserve(E),C.destroy(),t.delete(p)},E=(I,F)=>{F.local||I.keysChanged.forEach(T=>{switch(T){case It:let R=U.get(It);typeof R=="number"&&R>y&&w.refetchRecords().catch(()=>{});break}})},A={handlers:w,syncConfig:h,unload:v,ydoc:C};t.set(p,A);let x=await Promise.all(_.map(I=>I(p,null,C)));U.observe(E)}function s(h,p){e.get(a(h,p))?.unload(),f(h,null,{},origin,!0)}function a(h,p){return`${h}_${p}`}function u(h,p,w){if(!h.supports?.crdtPersistence)return!0;let _=pc(w);if(!_)return!0;let C=Wn(_);p.transact(()=>{Wt(p,C)},Nr);let U=h.getChangesFromCRDTDoc(_,w);return _.destroy(),Object.keys(U).length>0}function f(h,p,w,_,C=!1){let U=a(h,p),y=e.get(U),v=t.get(h);if(y){let{syncConfig:E,ydoc:A}=y;A.transact(()=>{E.applyChangesToCRDTDoc(A,w),C&&Hs(A)},_)}v&&C&&v.ydoc.transact(()=>{Hs(v.ydoc)},_)}async function l(h,p){let w=a(h,p),_=e.get(w);if(!_)return;let{handlers:C,syncConfig:U,ydoc:y}=_,v=U.getChangesFromCRDTDoc(y,await C.getEditedRecord());Object.keys(v).length!==0&&C.editRecord(v)}function d(h,p){let w=a(h,p),_=e.get(w);return _?.syncConfig.supports?.crdtPersistence?gc(_.ydoc):{}}return{createMeta:d,load:r,loadCollection:i,undoManager:n,unload:s,update:f}}return fl(th);})();
/*! Bundled license information:

diff/dist/diff.js:
  (*!
  
   diff v4.0.1
  
  Software License Agreement (BSD License)
  
  Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
  
  All rights reserved.
  
  Redistribution and use of this software in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
  
  * Redistributions of source code must retain the above
    copyright notice, this list of conditions and the
    following disclaimer.
  
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the
    following disclaimer in the documentation and/or other
    materials provided with the distribution.
  
  * Neither the name of Kevin Decker nor the names of its
    contributors may be used to endorse or promote products
    derived from this software without specific prior
    written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
  FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  @license
  *)

simple-peer/simplepeer.min.js:
  (*!
  * The buffer module from node.js, for the browser.
  *
  * @author   Feross Aboukhadijeh <https://feross.org>
  * @license  MIT
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=index.min.js.map
