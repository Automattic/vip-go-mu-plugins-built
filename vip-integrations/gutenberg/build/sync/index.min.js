"use strict";var wp;(wp||={}).sync=(()=>{var il=Object.create;var jr=Object.defineProperty;var sl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var al=Object.getPrototypeOf,cl=Object.prototype.hasOwnProperty;var Qn=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var er=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),no=(t,e)=>{for(var n in e)jr(t,n,{get:e[n],enumerable:!0})},ro=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ol(e))!cl.call(t,i)&&i!==n&&jr(t,i,{get:()=>e[i],enumerable:!(r=sl(e,i))||r.enumerable});return t};var bn=(t,e,n)=>(n=t!=null?il(al(t)):{},ro(e||!t||!t.__esModule?jr(n,"default",{value:t,enumerable:!0}):n,t)),ll=t=>ro(jr({},"__esModule",{value:!0}),t);var ec=er((Ci,Qa)=>{(function(t,e){typeof Ci=="object"&&typeof Qa<"u"?e(Ci):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.Diff={}))})(Ci,function(t){"use strict";function e(){}e.prototype={diff:function(b,k){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=R.callback;typeof R=="function"&&(F=R,R={}),this.options=R;var N=this;function H(se){return F?(setTimeout(function(){F(void 0,se)},0),!0):se}b=this.castInput(b),k=this.castInput(k),b=this.removeEmpty(this.tokenize(b)),k=this.removeEmpty(this.tokenize(k));var W=k.length,Y=b.length,K=1,Z=W+Y,ie=[{newPos:-1,components:[]}],ne=this.extractCommon(ie[0],k,b,0);if(ie[0].newPos+1>=W&&ne+1>=Y)return H([{value:this.join(k),count:k.length}]);function ge(){for(var se=-1*K;se<=K;se+=2){var Ne=void 0,je=ie[se-1],Me=ie[se+1],He=(Me?Me.newPos:0)-se;je&&(ie[se-1]=void 0);var Ce=je&&je.newPos+1<W,_t=Me&&0<=He&&He<Y;if(!Ce&&!_t){ie[se]=void 0;continue}if(!Ce||_t&&je.newPos<Me.newPos?(Ne=r(Me),N.pushComponent(Ne.components,void 0,!0)):(Ne=je,Ne.newPos++,N.pushComponent(Ne.components,!0,void 0)),He=N.extractCommon(Ne,k,b,se),Ne.newPos+1>=W&&He+1>=Y)return H(n(N,Ne.components,k,b,N.useLongestToken));ie[se]=Ne}K++}if(F)(function se(){setTimeout(function(){if(K>Z)return F();ge()||se()},0)})();else for(;K<=Z;){var Se=ge();if(Se)return Se}},pushComponent:function(b,k,R){var F=b[b.length-1];F&&F.added===k&&F.removed===R?b[b.length-1]={count:F.count+1,added:k,removed:R}:b.push({count:1,added:k,removed:R})},extractCommon:function(b,k,R,F){for(var N=k.length,H=R.length,W=b.newPos,Y=W-F,K=0;W+1<N&&Y+1<H&&this.equals(k[W+1],R[Y+1]);)W++,Y++,K++;return K&&b.components.push({count:K}),b.newPos=W,Y},equals:function(b,k){return this.options.comparator?this.options.comparator(b,k):b===k||this.options.ignoreCase&&b.toLowerCase()===k.toLowerCase()},removeEmpty:function(b){for(var k=[],R=0;R<b.length;R++)b[R]&&k.push(b[R]);return k},castInput:function(b){return b},tokenize:function(b){return b.split("")},join:function(b){return b.join("")}};function n(m,b,k,R,F){for(var N=0,H=b.length,W=0,Y=0;N<H;N++){var K=b[N];if(K.removed){if(K.value=m.join(R.slice(Y,Y+K.count)),Y+=K.count,N&&b[N-1].added){var ie=b[N-1];b[N-1]=b[N],b[N]=ie}}else{if(!K.added&&F){var Z=k.slice(W,W+K.count);Z=Z.map(function(ge,Se){var se=R[Y+Se];return se.length>ge.length?se:ge}),K.value=m.join(Z)}else K.value=m.join(k.slice(W,W+K.count));W+=K.count,K.added||(Y+=K.count)}}var ne=b[H-1];return H>1&&typeof ne.value=="string"&&(ne.added||ne.removed)&&m.equals("",ne.value)&&(b[H-2].value+=ne.value,b.pop()),b}function r(m){return{newPos:m.newPos,components:m.components.slice(0)}}var i=new e;function s(m,b,k){return i.diff(m,b,k)}function a(m,b){if(typeof m=="function")b.callback=m;else if(m)for(var k in m)m.hasOwnProperty(k)&&(b[k]=m[k]);return b}var u=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,f=/\S/,l=new e;l.equals=function(m,b){return this.options.ignoreCase&&(m=m.toLowerCase(),b=b.toLowerCase()),m===b||this.options.ignoreWhitespace&&!f.test(m)&&!f.test(b)},l.tokenize=function(m){for(var b=m.split(/(\s+|[()[\]{}'"]|\b)/),k=0;k<b.length-1;k++)!b[k+1]&&b[k+2]&&u.test(b[k])&&u.test(b[k+2])&&(b[k]+=b[k+2],b.splice(k+1,2),k--);return b};function d(m,b,k){return k=a(k,{ignoreWhitespace:!0}),l.diff(m,b,k)}function h(m,b,k){return l.diff(m,b,k)}var p=new e;p.tokenize=function(m){var b=[],k=m.split(/(\n|\r\n)/);k[k.length-1]||k.pop();for(var R=0;R<k.length;R++){var F=k[R];R%2&&!this.options.newlineIsToken?b[b.length-1]+=F:(this.options.ignoreWhitespace&&(F=F.trim()),b.push(F))}return b};function w(m,b,k){return p.diff(m,b,k)}function _(m,b,k){var R=a(k,{ignoreWhitespace:!0});return p.diff(m,b,R)}var x=new e;x.tokenize=function(m){return m.split(/(\S.+?[.!?])(?=\s+|$)/)};function D(m,b,k){return x.diff(m,b,k)}var y=new e;y.tokenize=function(m){return m.split(/([{}:;,]|\s+)/)};function S(m,b,k){return y.diff(m,b,k)}function v(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(b){return typeof b}:v=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},v(m)}function A(m){return C(m)||L(m)||V()}function C(m){if(Array.isArray(m)){for(var b=0,k=new Array(m.length);b<m.length;b++)k[b]=m[b];return k}}function L(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}function V(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var T=Object.prototype.toString,U=new e;U.useLongestToken=!0,U.tokenize=p.tokenize,U.castInput=function(m){var b=this.options,k=b.undefinedReplacement,R=b.stringifyReplacer,F=R===void 0?function(N,H){return typeof H>"u"?k:H}:R;return typeof m=="string"?m:JSON.stringify(q(m,null,null,F),F,"  ")},U.equals=function(m,b){return e.prototype.equals.call(U,m.replace(/,([\r\n])/g,"$1"),b.replace(/,([\r\n])/g,"$1"))};function P(m,b,k){return U.diff(m,b,k)}function q(m,b,k,R,F){b=b||[],k=k||[],R&&(m=R(F,m));var N;for(N=0;N<b.length;N+=1)if(b[N]===m)return k[N];var H;if(T.call(m)==="[object Array]"){for(b.push(m),H=new Array(m.length),k.push(H),N=0;N<m.length;N+=1)H[N]=q(m[N],b,k,R,F);return b.pop(),k.pop(),H}if(m&&m.toJSON&&(m=m.toJSON()),v(m)==="object"&&m!==null){b.push(m),H={},k.push(H);var W=[],Y;for(Y in m)m.hasOwnProperty(Y)&&W.push(Y);for(W.sort(),N=0;N<W.length;N+=1)Y=W[N],H[Y]=q(m[Y],b,k,R,Y);b.pop(),k.pop()}else H=m;return H}var J=new e;J.tokenize=function(m){return m.slice()},J.join=J.removeEmpty=function(m){return m};function ee(m,b,k){return J.diff(m,b,k)}function re(m){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=m.split(/\r\n|[\n\v\f\r\x85]/),R=m.match(/\r\n|[\n\v\f\r\x85]/g)||[],F=[],N=0;function H(){var K={};for(F.push(K);N<k.length;){var Z=k[N];if(/^(\-\-\-|\+\+\+|@@)\s/.test(Z))break;var ie=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(Z);ie&&(K.index=ie[1]),N++}for(W(K),W(K),K.hunks=[];N<k.length;){var ne=k[N];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(ne))break;if(/^@@/.test(ne))K.hunks.push(Y());else{if(ne&&b.strict)throw new Error("Unknown line "+(N+1)+" "+JSON.stringify(ne));N++}}}function W(K){var Z=/^(---|\+\+\+)\s+(.*)$/.exec(k[N]);if(Z){var ie=Z[1]==="---"?"old":"new",ne=Z[2].split("	",2),ge=ne[0].replace(/\\\\/g,"\\");/^".*"$/.test(ge)&&(ge=ge.substr(1,ge.length-2)),K[ie+"FileName"]=ge,K[ie+"Header"]=(ne[1]||"").trim(),N++}}function Y(){for(var K=N,Z=k[N++],ie=Z.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),ne={oldStart:+ie[1],oldLines:+ie[2]||1,newStart:+ie[3],newLines:+ie[4]||1,lines:[],linedelimiters:[]},ge=0,Se=0;N<k.length&&!(k[N].indexOf("--- ")===0&&N+2<k.length&&k[N+1].indexOf("+++ ")===0&&k[N+2].indexOf("@@")===0);N++){var se=k[N].length==0&&N!=k.length-1?" ":k[N][0];if(se==="+"||se==="-"||se===" "||se==="\\")ne.lines.push(k[N]),ne.linedelimiters.push(R[N]||`
`),se==="+"?ge++:se==="-"?Se++:se===" "&&(ge++,Se++);else break}if(!ge&&ne.newLines===1&&(ne.newLines=0),!Se&&ne.oldLines===1&&(ne.oldLines=0),b.strict){if(ge!==ne.newLines)throw new Error("Added line count did not match for hunk at line "+(K+1));if(Se!==ne.oldLines)throw new Error("Removed line count did not match for hunk at line "+(K+1))}return ne}for(;N<k.length;)H();return F}function we(m,b,k){var R=!0,F=!1,N=!1,H=1;return function W(){if(R&&!N){if(F?H++:R=!1,m+H<=k)return H;N=!0}if(!F)return N||(R=!0),b<=m-H?-H++:(F=!0,W())}}function Te(m,b){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof b=="string"&&(b=re(b)),Array.isArray(b)){if(b.length>1)throw new Error("applyPatch only works with a single input.");b=b[0]}var R=m.split(/\r\n|[\n\v\f\r\x85]/),F=m.match(/\r\n|[\n\v\f\r\x85]/g)||[],N=b.hunks,H=k.compareLine||function(Hi,Zn,Pr,$t){return Zn===$t},W=0,Y=k.fuzzFactor||0,K=0,Z=0,ie,ne;function ge(Hi,Zn){for(var Pr=0;Pr<Hi.lines.length;Pr++){var $t=Hi.lines[Pr],qi=$t.length>0?$t[0]:" ",rl=$t.length>0?$t.substr(1):$t;if(qi===" "||qi==="-"){if(!H(Zn+1,R[Zn],qi,rl)&&(W++,W>Y))return!1;Zn++}}return!0}for(var Se=0;Se<N.length;Se++){for(var se=N[Se],Ne=R.length-se.oldLines,je=0,Me=Z+se.oldStart-1,He=we(Me,K,Ne);je!==void 0;je=He())if(ge(se,Me+je)){se.offset=Z+=je;break}if(je===void 0)return!1;K=se.offset+se.oldStart+se.oldLines}for(var Ce=0,_t=0;_t<N.length;_t++){var $e=N[_t],it=$e.oldStart+$e.offset+Ce-1;Ce+=$e.newLines-$e.oldLines,it<0&&(it=0);for(var vt=0;vt<$e.lines.length;vt++){var Et=$e.lines[vt],Ot=Et.length>0?Et[0]:" ",Vr=Et.length>0?Et.substr(1):Et,ji=$e.linedelimiters[vt];if(Ot===" ")it++;else if(Ot==="-")R.splice(it,1),F.splice(it,1);else if(Ot==="+")R.splice(it,0,Vr),F.splice(it,0,ji),it++;else if(Ot==="\\"){var Xn=$e.lines[vt-1]?$e.lines[vt-1][0]:null;Xn==="+"?ie=!0:Xn==="-"&&(ne=!0)}}}if(ie)for(;!R[R.length-1];)R.pop(),F.pop();else ne&&(R.push(""),F.push(`
`));for(var Kt=0;Kt<R.length-1;Kt++)R[Kt]=R[Kt]+F[Kt];return R.join("")}function X(m,b){typeof m=="string"&&(m=re(m));var k=0;function R(){var F=m[k++];if(!F)return b.complete();b.loadFile(F,function(N,H){if(N)return b.complete(N);var W=Te(H,F,b);b.patched(F,W,function(Y){if(Y)return b.complete(Y);R()})})}R()}function It(m,b,k,R,F,N,H){H||(H={}),typeof H.context>"u"&&(H.context=4);var W=w(k,R,H);W.push({value:"",lines:[]});function Y(je){return je.map(function(Me){return" "+Me})}for(var K=[],Z=0,ie=0,ne=[],ge=1,Se=1,se=function(Me){var He=W[Me],Ce=He.lines||He.value.replace(/\n$/,"").split(`
`);if(He.lines=Ce,He.added||He.removed){var _t;if(!Z){var $e=W[Me-1];Z=ge,ie=Se,$e&&(ne=H.context>0?Y($e.lines.slice(-H.context)):[],Z-=ne.length,ie-=ne.length)}(_t=ne).push.apply(_t,A(Ce.map(function(Kt){return(He.added?"+":"-")+Kt}))),He.added?Se+=Ce.length:ge+=Ce.length}else{if(Z)if(Ce.length<=H.context*2&&Me<W.length-2){var it;(it=ne).push.apply(it,A(Y(Ce)))}else{var vt,Et=Math.min(Ce.length,H.context);(vt=ne).push.apply(vt,A(Y(Ce.slice(0,Et))));var Ot={oldStart:Z,oldLines:ge-Z+Et,newStart:ie,newLines:Se-ie+Et,lines:ne};if(Me>=W.length-2&&Ce.length<=H.context){var Vr=/\n$/.test(k),ji=/\n$/.test(R),Xn=Ce.length==0&&ne.length>Ot.oldLines;!Vr&&Xn&&ne.splice(Ot.oldLines,0,"\\ No newline at end of file"),(!Vr&&!Xn||!ji)&&ne.push("\\ No newline at end of file")}K.push(Ot),Z=0,ie=0,ne=[]}ge+=Ce.length,Se+=Ce.length}},Ne=0;Ne<W.length;Ne++)se(Ne);return{oldFileName:m,newFileName:b,oldHeader:F,newHeader:N,hunks:K}}function tt(m,b,k,R,F,N,H){var W=It(m,b,k,R,F,N,H),Y=[];m==b&&Y.push("Index: "+m),Y.push("==================================================================="),Y.push("--- "+W.oldFileName+(typeof W.oldHeader>"u"?"":"	"+W.oldHeader)),Y.push("+++ "+W.newFileName+(typeof W.newHeader>"u"?"":"	"+W.newHeader));for(var K=0;K<W.hunks.length;K++){var Z=W.hunks[K];Y.push("@@ -"+Z.oldStart+","+Z.oldLines+" +"+Z.newStart+","+Z.newLines+" @@"),Y.push.apply(Y,Z.lines)}return Y.join(`
`)+`
`}function nt(m,b,k,R,F,N){return tt(m,m,b,k,R,F,N)}function ue(m,b){return m.length!==b.length?!1:ae(m,b)}function ae(m,b){if(b.length>m.length)return!1;for(var k=0;k<b.length;k++)if(b[k]!==m[k])return!1;return!0}function ut(m){var b=g(m.lines),k=b.oldLines,R=b.newLines;k!==void 0?m.oldLines=k:delete m.oldLines,R!==void 0?m.newLines=R:delete m.newLines}function ze(m,b,k){m=rt(m,k),b=rt(b,k);var R={};(m.index||b.index)&&(R.index=m.index||b.index),(m.newFileName||b.newFileName)&&(dt(m)?dt(b)?(R.oldFileName=ht(R,m.oldFileName,b.oldFileName),R.newFileName=ht(R,m.newFileName,b.newFileName),R.oldHeader=ht(R,m.oldHeader,b.oldHeader),R.newHeader=ht(R,m.newHeader,b.newHeader)):(R.oldFileName=m.oldFileName,R.newFileName=m.newFileName,R.oldHeader=m.oldHeader,R.newHeader=m.newHeader):(R.oldFileName=b.oldFileName||m.oldFileName,R.newFileName=b.newFileName||m.newFileName,R.oldHeader=b.oldHeader||m.oldHeader,R.newHeader=b.newHeader||m.newHeader)),R.hunks=[];for(var F=0,N=0,H=0,W=0;F<m.hunks.length||N<b.hunks.length;){var Y=m.hunks[F]||{oldStart:1/0},K=b.hunks[N]||{oldStart:1/0};if(Ke(Y,K))R.hunks.push(Lt(Y,H)),F++,W+=Y.newLines-Y.oldLines;else if(Ke(K,Y))R.hunks.push(Lt(K,W)),N++,H+=K.newLines-K.oldLines;else{var Z={oldStart:Math.min(Y.oldStart,K.oldStart),oldLines:0,newStart:Math.min(Y.newStart+H,K.oldStart+W),newLines:0,lines:[]};Gt(Z,Y.oldStart,Y.lines,K.oldStart,K.lines),N++,F++,R.hunks.push(Z)}}return R}function rt(m,b){if(typeof m=="string"){if(/^@@/m.test(m)||/^Index:/m.test(m))return re(m)[0];if(!b)throw new Error("Must provide a base reference or pass in a patch");return It(void 0,void 0,b,m)}return m}function dt(m){return m.newFileName&&m.newFileName!==m.oldFileName}function ht(m,b,k){return b===k?b:(m.conflict=!0,{mine:b,theirs:k})}function Ke(m,b){return m.oldStart<b.oldStart&&m.oldStart+m.oldLines<b.oldStart}function Lt(m,b){return{oldStart:m.oldStart,oldLines:m.oldLines,newStart:m.newStart+b,newLines:m.newLines,lines:m.lines}}function Gt(m,b,k,R,F){var N={offset:b,lines:k,index:0},H={offset:R,lines:F,index:0};for(B(m,N,H),B(m,H,N);N.index<N.lines.length&&H.index<H.lines.length;){var W=N.lines[N.index],Y=H.lines[H.index];if((W[0]==="-"||W[0]==="+")&&(Y[0]==="-"||Y[0]==="+"))Ae(m,N,H);else if(W[0]==="+"&&Y[0]===" "){var K;(K=m.lines).push.apply(K,A(G(N)))}else if(Y[0]==="+"&&W[0]===" "){var Z;(Z=m.lines).push.apply(Z,A(G(H)))}else W[0]==="-"&&Y[0]===" "?Pe(m,N,H):Y[0]==="-"&&W[0]===" "?Pe(m,H,N,!0):W===Y?(m.lines.push(W),N.index++,H.index++):I(m,G(N),G(H))}j(m,N),j(m,H),ut(m)}function Ae(m,b,k){var R=G(b),F=G(k);if(o(R)&&o(F)){if(ae(R,F)&&c(k,R,R.length-F.length)){var N;(N=m.lines).push.apply(N,A(R));return}else if(ae(F,R)&&c(b,F,F.length-R.length)){var H;(H=m.lines).push.apply(H,A(F));return}}else if(ue(R,F)){var W;(W=m.lines).push.apply(W,A(R));return}I(m,R,F)}function Pe(m,b,k,R){var F=G(b),N=te(k,F);if(N.merged){var H;(H=m.lines).push.apply(H,A(N.merged))}else I(m,R?N:F,R?F:N)}function I(m,b,k){m.conflict=!0,m.lines.push({conflict:!0,mine:b,theirs:k})}function B(m,b,k){for(;b.offset<k.offset&&b.index<b.lines.length;){var R=b.lines[b.index++];m.lines.push(R),b.offset++}}function j(m,b){for(;b.index<b.lines.length;){var k=b.lines[b.index++];m.lines.push(k)}}function G(m){for(var b=[],k=m.lines[m.index][0];m.index<m.lines.length;){var R=m.lines[m.index];if(k==="-"&&R[0]==="+"&&(k="+"),k===R[0])b.push(R),m.index++;else break}return b}function te(m,b){for(var k=[],R=[],F=0,N=!1,H=!1;F<b.length&&m.index<m.lines.length;){var W=m.lines[m.index],Y=b[F];if(Y[0]==="+")break;if(N=N||W[0]!==" ",R.push(Y),F++,W[0]==="+")for(H=!0;W[0]==="+";)k.push(W),W=m.lines[++m.index];Y.substr(1)===W.substr(1)?(k.push(W),m.index++):H=!0}if((b[F]||"")[0]==="+"&&N&&(H=!0),H)return k;for(;F<b.length;)R.push(b[F++]);return{merged:R,changes:k}}function o(m){return m.reduce(function(b,k){return b&&k[0]==="-"},!0)}function c(m,b,k){for(var R=0;R<k;R++){var F=b[b.length-k+R].substr(1);if(m.lines[m.index+R]!==" "+F)return!1}return m.index+=k,!0}function g(m){var b=0,k=0;return m.forEach(function(R){if(typeof R!="string"){var F=g(R.mine),N=g(R.theirs);b!==void 0&&(F.oldLines===N.oldLines?b+=F.oldLines:b=void 0),k!==void 0&&(F.newLines===N.newLines?k+=F.newLines:k=void 0)}else k!==void 0&&(R[0]==="+"||R[0]===" ")&&k++,b!==void 0&&(R[0]==="-"||R[0]===" ")&&b++}),{oldLines:b,newLines:k}}function E(m){for(var b=[],k,R,F=0;F<m.length;F++)k=m[F],k.added?R=1:k.removed?R=-1:R=0,b.push([R,k.value]);return b}function O(m){for(var b=[],k=0;k<m.length;k++){var R=m[k];R.added?b.push("<ins>"):R.removed&&b.push("<del>"),b.push(M(R.value)),R.added?b.push("</ins>"):R.removed&&b.push("</del>")}return b.join("")}function M(m){var b=m;return b=b.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/"/g,"&quot;"),b}t.Diff=e,t.diffChars=s,t.diffWords=d,t.diffWordsWithSpace=h,t.diffLines=w,t.diffTrimmedLines=_,t.diffSentences=D,t.diffCss=S,t.diffJson=P,t.diffArrays=ee,t.structuredPatch=It,t.createTwoFilesPatch=tt,t.createPatch=nt,t.applyPatch=Te,t.applyPatches=X,t.parsePatch=re,t.merge=ze,t.convertChangesToDMP=E,t.convertChangesToXML=O,t.canonicalize=q,Object.defineProperty(t,"__esModule",{value:!0})})});var Ls=er((Rh,tc)=>{"use strict";tc.exports=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}});var hc=er((Wh,dc)=>{dc.exports=window.wp.hooks});var Ic=er((Dc,Ys)=>{(function(t){if(typeof Dc=="object"&&typeof Ys<"u")Ys.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;e=typeof window>"u"?typeof global>"u"?typeof self>"u"?this:self:global:window,e.SimplePeer=t()}})(function(){var t=Math.floor,e=Math.abs,n=Math.pow;return(function(){function r(i,s,a){function u(d,h){if(!s[d]){if(!i[d]){var p=typeof Qn=="function"&&Qn;if(!h&&p)return p(d,!0);if(f)return f(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var _=s[d]={exports:{}};i[d][0].call(_.exports,function(x){var D=i[d][1][x];return u(D||x)},_,_.exports,r,i,s,a)}return s[d].exports}for(var f=typeof Qn=="function"&&Qn,l=0;l<a.length;l++)u(a[l]);return u}return r})()({1:[function(r,i,s){"use strict";function a(S){var v=S.length;if(0<v%4)throw new Error("Invalid string. Length must be a multiple of 4");var A=S.indexOf("=");A===-1&&(A=v);var C=A===v?0:4-A%4;return[A,C]}function u(S,v,A){return 3*(v+A)/4-A}function f(S){var v,A,C=a(S),L=C[0],V=C[1],T=new _(u(S,L,V)),U=0,P=0<V?L-4:L;for(A=0;A<P;A+=4)v=w[S.charCodeAt(A)]<<18|w[S.charCodeAt(A+1)]<<12|w[S.charCodeAt(A+2)]<<6|w[S.charCodeAt(A+3)],T[U++]=255&v>>16,T[U++]=255&v>>8,T[U++]=255&v;return V===2&&(v=w[S.charCodeAt(A)]<<2|w[S.charCodeAt(A+1)]>>4,T[U++]=255&v),V===1&&(v=w[S.charCodeAt(A)]<<10|w[S.charCodeAt(A+1)]<<4|w[S.charCodeAt(A+2)]>>2,T[U++]=255&v>>8,T[U++]=255&v),T}function l(S){return p[63&S>>18]+p[63&S>>12]+p[63&S>>6]+p[63&S]}function d(S,v,A){for(var C,L=[],V=v;V<A;V+=3)C=(16711680&S[V]<<16)+(65280&S[V+1]<<8)+(255&S[V+2]),L.push(l(C));return L.join("")}function h(S){for(var v,A=S.length,C=A%3,L=[],V=16383,T=0,U=A-C;T<U;T+=V)L.push(d(S,T,T+V>U?U:T+V));return C===1?(v=S[A-1],L.push(p[v>>2]+p[63&v<<4]+"==")):C===2&&(v=(S[A-2]<<8)+S[A-1],L.push(p[v>>10]+p[63&v>>4]+p[63&v<<2]+"=")),L.join("")}s.byteLength=function(S){var v=a(S),A=v[0],C=v[1];return 3*(A+C)/4-C},s.toByteArray=f,s.fromByteArray=h;for(var p=[],w=[],_=typeof Uint8Array>"u"?Array:Uint8Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=0,y=x.length;D<y;++D)p[D]=x[D],w[x.charCodeAt(D)]=D;w[45]=62,w[95]=63},{}],2:[function(){},{}],3:[function(r,i,s){(function(){(function(){"use strict";var a=String.fromCharCode,u=Math.min;function f(o){if(2147483647<o)throw new RangeError('The value "'+o+'" is invalid for option "size"');var c=new Uint8Array(o);return c.__proto__=l.prototype,c}function l(o,c,g){if(typeof o=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(o)}return d(o,c,g)}function d(o,c,g){if(typeof o=="string")return _(o,c);if(ArrayBuffer.isView(o))return x(o);if(o==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(I(o,ArrayBuffer)||o&&I(o.buffer,ArrayBuffer))return D(o,c,g);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var E=o.valueOf&&o.valueOf();if(E!=null&&E!==o)return l.from(E,c,g);var O=y(o);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return l.from(o[Symbol.toPrimitive]("string"),c,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}function h(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(0>o)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function p(o,c,g){return h(o),0>=o||c===void 0?f(o):typeof g=="string"?f(o).fill(c,g):f(o).fill(c)}function w(o){return h(o),f(0>o?0:0|S(o))}function _(o,c){if((typeof c!="string"||c==="")&&(c="utf8"),!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var g=0|v(o,c),E=f(g),O=E.write(o,c);return O!==g&&(E=E.slice(0,O)),E}function x(o){for(var c=0>o.length?0:0|S(o.length),g=f(c),E=0;E<c;E+=1)g[E]=255&o[E];return g}function D(o,c,g){if(0>c||o.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<c+(g||0))throw new RangeError('"length" is outside of buffer bounds');var E;return E=c===void 0&&g===void 0?new Uint8Array(o):g===void 0?new Uint8Array(o,c):new Uint8Array(o,c,g),E.__proto__=l.prototype,E}function y(o){if(l.isBuffer(o)){var c=0|S(o.length),g=f(c);return g.length===0||o.copy(g,0,0,c),g}return o.length===void 0?o.type==="Buffer"&&Array.isArray(o.data)?x(o.data):void 0:typeof o.length!="number"||B(o.length)?f(0):x(o)}function S(o){if(o>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|o}function v(o,c){if(l.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||I(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);var g=o.length,E=2<arguments.length&&arguments[2]===!0;if(!E&&g===0)return 0;for(var O=!1;;)switch(c){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Ke(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*g;case"hex":return g>>>1;case"base64":return Ae(o).length;default:if(O)return E?-1:Ke(o).length;c=(""+c).toLowerCase(),O=!0}}function A(o,c,g){var E=!1;if((c===void 0||0>c)&&(c=0),c>this.length||((g===void 0||g>this.length)&&(g=this.length),0>=g)||(g>>>=0,c>>>=0,g<=c))return"";for(o||(o="utf8");;)switch(o){case"hex":return tt(this,c,g);case"utf8":case"utf-8":return we(this,c,g);case"ascii":return X(this,c,g);case"latin1":case"binary":return It(this,c,g);case"base64":return re(this,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nt(this,c,g);default:if(E)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),E=!0}}function C(o,c,g){var E=o[c];o[c]=o[g],o[g]=E}function L(o,c,g,E,O){if(o.length===0)return-1;if(typeof g=="string"?(E=g,g=0):2147483647<g?g=2147483647:-2147483648>g&&(g=-2147483648),g=+g,B(g)&&(g=O?0:o.length-1),0>g&&(g=o.length+g),g>=o.length){if(O)return-1;g=o.length-1}else if(0>g)if(O)g=0;else return-1;if(typeof c=="string"&&(c=l.from(c,E)),l.isBuffer(c))return c.length===0?-1:V(o,c,g,E,O);if(typeof c=="number")return c&=255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(o,c,g):Uint8Array.prototype.lastIndexOf.call(o,c,g):V(o,[c],g,E,O);throw new TypeError("val must be string, number or Buffer")}function V(o,c,g,E,O){function M(W,Y){return m===1?W[Y]:W.readUInt16BE(Y*m)}var m=1,b=o.length,k=c.length;if(E!==void 0&&(E=(E+"").toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(2>o.length||2>c.length)return-1;m=2,b/=2,k/=2,g/=2}var R;if(O){var F=-1;for(R=g;R<b;R++)if(M(o,R)!==M(c,F===-1?0:R-F))F!==-1&&(R-=R-F),F=-1;else if(F===-1&&(F=R),R-F+1===k)return F*m}else for(g+k>b&&(g=b-k),R=g;0<=R;R--){for(var N=!0,H=0;H<k;H++)if(M(o,R+H)!==M(c,H)){N=!1;break}if(N)return R}return-1}function T(o,c,g,E){g=+g||0;var O=o.length-g;E?(E=+E,E>O&&(E=O)):E=O;var M=c.length;E>M/2&&(E=M/2);for(var m,b=0;b<E;++b){if(m=parseInt(c.substr(2*b,2),16),B(m))return b;o[g+b]=m}return b}function U(o,c,g,E){return Pe(Ke(c,o.length-g),o,g,E)}function P(o,c,g,E){return Pe(Lt(c),o,g,E)}function q(o,c,g,E){return P(o,c,g,E)}function J(o,c,g,E){return Pe(Ae(c),o,g,E)}function ee(o,c,g,E){return Pe(Gt(c,o.length-g),o,g,E)}function re(o,c,g){return c===0&&g===o.length?j.fromByteArray(o):j.fromByteArray(o.slice(c,g))}function we(o,c,g){g=u(o.length,g);for(var E=[],O=c;O<g;){var M=o[O],m=null,b=239<M?4:223<M?3:191<M?2:1;if(O+b<=g){var k,R,F,N;b===1?128>M&&(m=M):b===2?(k=o[O+1],(192&k)==128&&(N=(31&M)<<6|63&k,127<N&&(m=N))):b===3?(k=o[O+1],R=o[O+2],(192&k)==128&&(192&R)==128&&(N=(15&M)<<12|(63&k)<<6|63&R,2047<N&&(55296>N||57343<N)&&(m=N))):b===4&&(k=o[O+1],R=o[O+2],F=o[O+3],(192&k)==128&&(192&R)==128&&(192&F)==128&&(N=(15&M)<<18|(63&k)<<12|(63&R)<<6|63&F,65535<N&&1114112>N&&(m=N)))}m===null?(m=65533,b=1):65535<m&&(m-=65536,E.push(55296|1023&m>>>10),m=56320|1023&m),E.push(m),O+=b}return Te(E)}function Te(o){var c=o.length;if(c<=4096)return a.apply(String,o);for(var g="",E=0;E<c;)g+=a.apply(String,o.slice(E,E+=4096));return g}function X(o,c,g){var E="";g=u(o.length,g);for(var O=c;O<g;++O)E+=a(127&o[O]);return E}function It(o,c,g){var E="";g=u(o.length,g);for(var O=c;O<g;++O)E+=a(o[O]);return E}function tt(o,c,g){var E=o.length;(!c||0>c)&&(c=0),(!g||0>g||g>E)&&(g=E);for(var O="",M=c;M<g;++M)O+=ht(o[M]);return O}function nt(o,c,g){for(var E=o.slice(c,g),O="",M=0;M<E.length;M+=2)O+=a(E[M]+256*E[M+1]);return O}function ue(o,c,g){if(o%1!=0||0>o)throw new RangeError("offset is not uint");if(o+c>g)throw new RangeError("Trying to access beyond buffer length")}function ae(o,c,g,E,O,M){if(!l.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>O||c<M)throw new RangeError('"value" argument is out of bounds');if(g+E>o.length)throw new RangeError("Index out of range")}function ut(o,c,g,E){if(g+E>o.length)throw new RangeError("Index out of range");if(0>g)throw new RangeError("Index out of range")}function ze(o,c,g,E,O){return c=+c,g>>>=0,O||ut(o,c,g,4,34028234663852886e22,-34028234663852886e22),G.write(o,c,g,E,23,4),g+4}function rt(o,c,g,E,O){return c=+c,g>>>=0,O||ut(o,c,g,8,17976931348623157e292,-17976931348623157e292),G.write(o,c,g,E,52,8),g+8}function dt(o){if(o=o.split("=")[0],o=o.trim().replace(te,""),2>o.length)return"";for(;o.length%4!=0;)o+="=";return o}function ht(o){return 16>o?"0"+o.toString(16):o.toString(16)}function Ke(o,c){c=c||1/0;for(var g,E=o.length,O=null,M=[],m=0;m<E;++m){if(g=o.charCodeAt(m),55295<g&&57344>g){if(!O){if(56319<g){-1<(c-=3)&&M.push(239,191,189);continue}else if(m+1===E){-1<(c-=3)&&M.push(239,191,189);continue}O=g;continue}if(56320>g){-1<(c-=3)&&M.push(239,191,189),O=g;continue}g=(O-55296<<10|g-56320)+65536}else O&&-1<(c-=3)&&M.push(239,191,189);if(O=null,128>g){if(0>(c-=1))break;M.push(g)}else if(2048>g){if(0>(c-=2))break;M.push(192|g>>6,128|63&g)}else if(65536>g){if(0>(c-=3))break;M.push(224|g>>12,128|63&g>>6,128|63&g)}else if(1114112>g){if(0>(c-=4))break;M.push(240|g>>18,128|63&g>>12,128|63&g>>6,128|63&g)}else throw new Error("Invalid code point")}return M}function Lt(o){for(var c=[],g=0;g<o.length;++g)c.push(255&o.charCodeAt(g));return c}function Gt(o,c){for(var g,E,O,M=[],m=0;m<o.length&&!(0>(c-=2));++m)g=o.charCodeAt(m),E=g>>8,O=g%256,M.push(O),M.push(E);return M}function Ae(o){return j.toByteArray(dt(o))}function Pe(o,c,g,E){for(var O=0;O<E&&!(O+g>=c.length||O>=o.length);++O)c[O+g]=o[O];return O}function I(o,c){return o instanceof c||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===c.name}function B(o){return o!==o}var j=r("base64-js"),G=r("ieee754");s.Buffer=l,s.SlowBuffer=function(o){return+o!=o&&(o=0),l.alloc(+o)},s.INSPECT_MAX_BYTES=50,s.kMaxLength=2147483647,l.TYPED_ARRAY_SUPPORT=(function(){try{var o=new Uint8Array(1);return o.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},o.foo()===42}catch{return!1}})(),l.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){return l.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){return l.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(o,c,g){return d(o,c,g)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(o,c,g){return p(o,c,g)},l.allocUnsafe=function(o){return w(o)},l.allocUnsafeSlow=function(o){return w(o)},l.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==l.prototype},l.compare=function(o,c){if(I(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),I(c,Uint8Array)&&(c=l.from(c,c.offset,c.byteLength)),!l.isBuffer(o)||!l.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===c)return 0;for(var g=o.length,E=c.length,O=0,M=u(g,E);O<M;++O)if(o[O]!==c[O]){g=o[O],E=c[O];break}return g<E?-1:E<g?1:0},l.isEncoding=function(o){switch((o+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(o,c){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return l.alloc(0);var g;if(c===void 0)for(c=0,g=0;g<o.length;++g)c+=o[g].length;var E=l.allocUnsafe(c),O=0;for(g=0;g<o.length;++g){var M=o[g];if(I(M,Uint8Array)&&(M=l.from(M)),!l.isBuffer(M))throw new TypeError('"list" argument must be an Array of Buffers');M.copy(E,O),O+=M.length}return E},l.byteLength=v,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var o=this.length;if(o%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<o;c+=2)C(this,c,c+1);return this},l.prototype.swap32=function(){var o=this.length;if(o%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<o;c+=4)C(this,c,c+3),C(this,c+1,c+2);return this},l.prototype.swap64=function(){var o=this.length;if(o%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<o;c+=8)C(this,c,c+7),C(this,c+1,c+6),C(this,c+2,c+5),C(this,c+3,c+4);return this},l.prototype.toString=function(){var o=this.length;return o===0?"":arguments.length===0?we(this,0,o):A.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(o){if(!l.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o||l.compare(this,o)===0},l.prototype.inspect=function(){var o="",c=s.INSPECT_MAX_BYTES;return o=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(o+=" ... "),"<Buffer "+o+">"},l.prototype.compare=function(o,c,g,E,O){if(I(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),!l.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(c===void 0&&(c=0),g===void 0&&(g=o?o.length:0),E===void 0&&(E=0),O===void 0&&(O=this.length),0>c||g>o.length||0>E||O>this.length)throw new RangeError("out of range index");if(E>=O&&c>=g)return 0;if(E>=O)return-1;if(c>=g)return 1;if(c>>>=0,g>>>=0,E>>>=0,O>>>=0,this===o)return 0;for(var M=O-E,m=g-c,b=u(M,m),k=this.slice(E,O),R=o.slice(c,g),F=0;F<b;++F)if(k[F]!==R[F]){M=k[F],m=R[F];break}return M<m?-1:m<M?1:0},l.prototype.includes=function(o,c,g){return this.indexOf(o,c,g)!==-1},l.prototype.indexOf=function(o,c,g){return L(this,o,c,g,!0)},l.prototype.lastIndexOf=function(o,c,g){return L(this,o,c,g,!1)},l.prototype.write=function(o,c,g,E){if(c===void 0)E="utf8",g=this.length,c=0;else if(g===void 0&&typeof c=="string")E=c,g=this.length,c=0;else if(isFinite(c))c>>>=0,isFinite(g)?(g>>>=0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-c;if((g===void 0||g>O)&&(g=O),0<o.length&&(0>g||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var M=!1;;)switch(E){case"hex":return T(this,o,c,g);case"utf8":case"utf-8":return U(this,o,c,g);case"ascii":return P(this,o,c,g);case"latin1":case"binary":return q(this,o,c,g);case"base64":return J(this,o,c,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,o,c,g);default:if(M)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),M=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(o,c){var g=this.length;o=~~o,c=c===void 0?g:~~c,0>o?(o+=g,0>o&&(o=0)):o>g&&(o=g),0>c?(c+=g,0>c&&(c=0)):c>g&&(c=g),c<o&&(c=o);var E=this.subarray(o,c);return E.__proto__=l.prototype,E},l.prototype.readUIntLE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var E=this[o],O=1,M=0;++M<c&&(O*=256);)E+=this[o+M]*O;return E},l.prototype.readUIntBE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var E=this[o+--c],O=1;0<c&&(O*=256);)E+=this[o+--c]*O;return E},l.prototype.readUInt8=function(o,c){return o>>>=0,c||ue(o,1,this.length),this[o]},l.prototype.readUInt16LE=function(o,c){return o>>>=0,c||ue(o,2,this.length),this[o]|this[o+1]<<8},l.prototype.readUInt16BE=function(o,c){return o>>>=0,c||ue(o,2,this.length),this[o]<<8|this[o+1]},l.prototype.readUInt32LE=function(o,c){return o>>>=0,c||ue(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+16777216*this[o+3]},l.prototype.readUInt32BE=function(o,c){return o>>>=0,c||ue(o,4,this.length),16777216*this[o]+(this[o+1]<<16|this[o+2]<<8|this[o+3])},l.prototype.readIntLE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var E=this[o],O=1,M=0;++M<c&&(O*=256);)E+=this[o+M]*O;return O*=128,E>=O&&(E-=n(2,8*c)),E},l.prototype.readIntBE=function(o,c,g){o>>>=0,c>>>=0,g||ue(o,c,this.length);for(var E=c,O=1,M=this[o+--E];0<E&&(O*=256);)M+=this[o+--E]*O;return O*=128,M>=O&&(M-=n(2,8*c)),M},l.prototype.readInt8=function(o,c){return o>>>=0,c||ue(o,1,this.length),128&this[o]?-1*(255-this[o]+1):this[o]},l.prototype.readInt16LE=function(o,c){o>>>=0,c||ue(o,2,this.length);var g=this[o]|this[o+1]<<8;return 32768&g?4294901760|g:g},l.prototype.readInt16BE=function(o,c){o>>>=0,c||ue(o,2,this.length);var g=this[o+1]|this[o]<<8;return 32768&g?4294901760|g:g},l.prototype.readInt32LE=function(o,c){return o>>>=0,c||ue(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},l.prototype.readInt32BE=function(o,c){return o>>>=0,c||ue(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},l.prototype.readFloatLE=function(o,c){return o>>>=0,c||ue(o,4,this.length),G.read(this,o,!0,23,4)},l.prototype.readFloatBE=function(o,c){return o>>>=0,c||ue(o,4,this.length),G.read(this,o,!1,23,4)},l.prototype.readDoubleLE=function(o,c){return o>>>=0,c||ue(o,8,this.length),G.read(this,o,!0,52,8)},l.prototype.readDoubleBE=function(o,c){return o>>>=0,c||ue(o,8,this.length),G.read(this,o,!1,52,8)},l.prototype.writeUIntLE=function(o,c,g,E){if(o=+o,c>>>=0,g>>>=0,!E){var O=n(2,8*g)-1;ae(this,o,c,g,O,0)}var M=1,m=0;for(this[c]=255&o;++m<g&&(M*=256);)this[c+m]=255&o/M;return c+g},l.prototype.writeUIntBE=function(o,c,g,E){if(o=+o,c>>>=0,g>>>=0,!E){var O=n(2,8*g)-1;ae(this,o,c,g,O,0)}var M=g-1,m=1;for(this[c+M]=255&o;0<=--M&&(m*=256);)this[c+M]=255&o/m;return c+g},l.prototype.writeUInt8=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,1,255,0),this[c]=255&o,c+1},l.prototype.writeUInt16LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,65535,0),this[c]=255&o,this[c+1]=o>>>8,c+2},l.prototype.writeUInt16BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,65535,0),this[c]=o>>>8,this[c+1]=255&o,c+2},l.prototype.writeUInt32LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,4294967295,0),this[c+3]=o>>>24,this[c+2]=o>>>16,this[c+1]=o>>>8,this[c]=255&o,c+4},l.prototype.writeUInt32BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,4294967295,0),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=255&o,c+4},l.prototype.writeIntLE=function(o,c,g,E){if(o=+o,c>>>=0,!E){var O=n(2,8*g-1);ae(this,o,c,g,O-1,-O)}var M=0,m=1,b=0;for(this[c]=255&o;++M<g&&(m*=256);)0>o&&b===0&&this[c+M-1]!==0&&(b=1),this[c+M]=255&(o/m>>0)-b;return c+g},l.prototype.writeIntBE=function(o,c,g,E){if(o=+o,c>>>=0,!E){var O=n(2,8*g-1);ae(this,o,c,g,O-1,-O)}var M=g-1,m=1,b=0;for(this[c+M]=255&o;0<=--M&&(m*=256);)0>o&&b===0&&this[c+M+1]!==0&&(b=1),this[c+M]=255&(o/m>>0)-b;return c+g},l.prototype.writeInt8=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,1,127,-128),0>o&&(o=255+o+1),this[c]=255&o,c+1},l.prototype.writeInt16LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,32767,-32768),this[c]=255&o,this[c+1]=o>>>8,c+2},l.prototype.writeInt16BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,2,32767,-32768),this[c]=o>>>8,this[c+1]=255&o,c+2},l.prototype.writeInt32LE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,2147483647,-2147483648),this[c]=255&o,this[c+1]=o>>>8,this[c+2]=o>>>16,this[c+3]=o>>>24,c+4},l.prototype.writeInt32BE=function(o,c,g){return o=+o,c>>>=0,g||ae(this,o,c,4,2147483647,-2147483648),0>o&&(o=4294967295+o+1),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=255&o,c+4},l.prototype.writeFloatLE=function(o,c,g){return ze(this,o,c,!0,g)},l.prototype.writeFloatBE=function(o,c,g){return ze(this,o,c,!1,g)},l.prototype.writeDoubleLE=function(o,c,g){return rt(this,o,c,!0,g)},l.prototype.writeDoubleBE=function(o,c,g){return rt(this,o,c,!1,g)},l.prototype.copy=function(o,c,g,E){if(!l.isBuffer(o))throw new TypeError("argument should be a Buffer");if(g||(g=0),E||E===0||(E=this.length),c>=o.length&&(c=o.length),c||(c=0),0<E&&E<g&&(E=g),E===g||o.length===0||this.length===0)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>g||g>=this.length)throw new RangeError("Index out of range");if(0>E)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),o.length-c<E-g&&(E=o.length-c+g);var O=E-g;if(this===o&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(c,g,E);else if(this===o&&g<c&&c<E)for(var M=O-1;0<=M;--M)o[M+c]=this[M+g];else Uint8Array.prototype.set.call(o,this.subarray(g,E),c);return O},l.prototype.fill=function(o,c,g,E){if(typeof o=="string"){if(typeof c=="string"?(E=c,c=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!l.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(o.length===1){var O=o.charCodeAt(0);(E==="utf8"&&128>O||E==="latin1")&&(o=O)}}else typeof o=="number"&&(o&=255);if(0>c||this.length<c||this.length<g)throw new RangeError("Out of range index");if(g<=c)return this;c>>>=0,g=g===void 0?this.length:g>>>0,o||(o=0);var M;if(typeof o=="number")for(M=c;M<g;++M)this[M]=o;else{var m=l.isBuffer(o)?o:l.from(o,E),b=m.length;if(b===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(M=0;M<g-c;++M)this[M+c]=m[M%b]}return this};var te=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(r,i,s){(function(a){(function(){function u(){let l;try{l=s.storage.getItem("debug")}catch{}return!l&&typeof a<"u"&&"env"in a&&(l=a.env.DEBUG),l}s.formatArgs=function(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;let d="color: "+this.color;l.splice(1,0,d,"color: inherit");let h=0,p=0;l[0].replace(/%[a-zA-Z%]/g,w=>{w==="%%"||(h++,w==="%c"&&(p=h))}),l.splice(p,0,d)},s.save=function(l){try{l?s.storage.setItem("debug",l):s.storage.removeItem("debug")}catch{}},s.load=u,s.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},s.storage=(function(){try{return localStorage}catch{}})(),s.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(s);let{formatters:f}=i.exports;f.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}).call(this)}).call(this,r("_process"))},{"./common":5,_process:12}],5:[function(r,i){i.exports=function(s){function a(l){function d(...w){if(!d.enabled)return;let _=d,x=+new Date,D=x-(h||x);_.diff=D,_.prev=h,_.curr=x,h=x,w[0]=a.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let y=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(v,A)=>{if(v==="%%")return"%";y++;let C=a.formatters[A];if(typeof C=="function"){let L=w[y];v=C.call(_,L),w.splice(y,1),y--}return v}),a.formatArgs.call(_,w),(_.log||a.log).apply(_,w)}let h,p=null;return d.namespace=l,d.useColors=a.useColors(),d.color=a.selectColor(l),d.extend=u,d.destroy=a.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>p===null?a.enabled(l):p,set:w=>{p=w}}),typeof a.init=="function"&&a.init(d),d}function u(l,d){let h=a(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function f(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}return a.debug=a,a.default=a,a.coerce=function(l){return l instanceof Error?l.stack||l.message:l},a.disable=function(){let l=[...a.names.map(f),...a.skips.map(f).map(d=>"-"+d)].join(",");return a.enable(""),l},a.enable=function(l){a.save(l),a.names=[],a.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?a.skips.push(new RegExp("^"+l.substr(1)+"$")):a.names.push(new RegExp("^"+l+"$")))},a.enabled=function(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=a.skips.length;d<h;d++)if(a.skips[d].test(l))return!1;for(d=0,h=a.names.length;d<h;d++)if(a.names[d].test(l))return!0;return!1},a.humanize=r("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(s).forEach(l=>{a[l]=s[l]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return a.colors[e(d)%a.colors.length]},a.enable(a.load()),a}},{ms:11}],6:[function(r,i){"use strict";function s(a,u){for(let f in u)Object.defineProperty(a,f,{value:u[f],enumerable:!0,configurable:!0});return a}i.exports=function(a,u,f){if(!a||typeof a=="string")throw new TypeError("Please pass an Error to err-code");f||(f={}),typeof u=="object"&&(f=u,u=""),u&&(f.code=u);try{return s(a,f)}catch{f.message=a.message,f.stack=a.stack;let d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(a)),s(new d,f)}}},{}],7:[function(r,i){"use strict";function s(T){console&&console.warn&&console.warn(T)}function a(){a.init.call(this)}function u(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function f(T){return T._maxListeners===void 0?a.defaultMaxListeners:T._maxListeners}function l(T,U,P,q){var J,ee,re;if(u(P),ee=T._events,ee===void 0?(ee=T._events=Object.create(null),T._eventsCount=0):(ee.newListener!==void 0&&(T.emit("newListener",U,P.listener?P.listener:P),ee=T._events),re=ee[U]),re===void 0)re=ee[U]=P,++T._eventsCount;else if(typeof re=="function"?re=ee[U]=q?[P,re]:[re,P]:q?re.unshift(P):re.push(P),J=f(T),0<J&&re.length>J&&!re.warned){re.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+(U+" listeners added. Use emitter.setMaxListeners() to increase limit"));we.name="MaxListenersExceededWarning",we.emitter=T,we.type=U,we.count=re.length,s(we)}return T}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,U,P){var q={fired:!1,wrapFn:void 0,target:T,type:U,listener:P},J=d.bind(q);return J.listener=P,q.wrapFn=J,J}function p(T,U,P){var q=T._events;if(q===void 0)return[];var J=q[U];return J===void 0?[]:typeof J=="function"?P?[J.listener||J]:[J]:P?D(J):_(J,J.length)}function w(T){var U=this._events;if(U!==void 0){var P=U[T];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}function _(T,U){for(var P=Array(U),q=0;q<U;++q)P[q]=T[q];return P}function x(T,U){for(;U+1<T.length;U++)T[U]=T[U+1];T.pop()}function D(T){for(var U=Array(T.length),P=0;P<U.length;++P)U[P]=T[P].listener||T[P];return U}function y(T,U,P){typeof T.on=="function"&&S(T,"error",U,P)}function S(T,U,P,q){if(typeof T.on=="function")q.once?T.once(U,P):T.on(U,P);else if(typeof T.addEventListener=="function")T.addEventListener(U,function J(ee){q.once&&T.removeEventListener(U,J),P(ee)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}var v,A=typeof Reflect=="object"?Reflect:null,C=A&&typeof A.apply=="function"?A.apply:function(T,U,P){return Function.prototype.apply.call(T,U,P)};v=A&&typeof A.ownKeys=="function"?A.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var L=Number.isNaN||function(T){return T!==T};i.exports=a,i.exports.once=function(T,U){return new Promise(function(P,q){function J(re){T.removeListener(U,ee),q(re)}function ee(){typeof T.removeListener=="function"&&T.removeListener("error",J),P([].slice.call(arguments))}S(T,U,ee,{once:!0}),U!=="error"&&y(T,J,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var V=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(T){if(typeof T!="number"||0>T||L(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");V=T}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(T){if(typeof T!="number"||0>T||L(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(T){for(var U=[],P=1;P<arguments.length;P++)U.push(arguments[P]);var q=T==="error",J=this._events;if(J!==void 0)q=q&&J.error===void 0;else if(!q)return!1;if(q){var ee;if(0<U.length&&(ee=U[0]),ee instanceof Error)throw ee;var re=new Error("Unhandled error."+(ee?" ("+ee.message+")":""));throw re.context=ee,re}var we=J[T];if(we===void 0)return!1;if(typeof we=="function")C(we,this,U);else for(var Te=we.length,X=_(we,Te),P=0;P<Te;++P)C(X[P],this,U);return!0},a.prototype.addListener=function(T,U){return l(this,T,U,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(T,U){return l(this,T,U,!0)},a.prototype.once=function(T,U){return u(U),this.on(T,h(this,T,U)),this},a.prototype.prependOnceListener=function(T,U){return u(U),this.prependListener(T,h(this,T,U)),this},a.prototype.removeListener=function(T,U){var P,q,J,ee,re;if(u(U),q=this._events,q===void 0)return this;if(P=q[T],P===void 0)return this;if(P===U||P.listener===U)--this._eventsCount==0?this._events=Object.create(null):(delete q[T],q.removeListener&&this.emit("removeListener",T,P.listener||U));else if(typeof P!="function"){for(J=-1,ee=P.length-1;0<=ee;ee--)if(P[ee]===U||P[ee].listener===U){re=P[ee].listener,J=ee;break}if(0>J)return this;J===0?P.shift():x(P,J),P.length===1&&(q[T]=P[0]),q.removeListener!==void 0&&this.emit("removeListener",T,re||U)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(T){var U,P,q;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[T]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete P[T]),this;if(arguments.length===0){var J,ee=Object.keys(P);for(q=0;q<ee.length;++q)J=ee[q],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=P[T],typeof U=="function")this.removeListener(T,U);else if(U!==void 0)for(q=U.length-1;0<=q;q--)this.removeListener(T,U[q]);return this},a.prototype.listeners=function(T){return p(this,T,!0)},a.prototype.rawListeners=function(T){return p(this,T,!1)},a.listenerCount=function(T,U){return typeof T.listenerCount=="function"?T.listenerCount(U):w.call(T,U)},a.prototype.listenerCount=w,a.prototype.eventNames=function(){return 0<this._eventsCount?v(this._events):[]}},{}],8:[function(r,i){i.exports=function(){if(typeof globalThis>"u")return null;var s={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return s.RTCPeerConnection?s:null}},{}],9:[function(r,i,s){s.read=function(a,u,f,l,d){var h,p,w=8*d-l-1,_=(1<<w)-1,x=_>>1,D=-7,y=f?d-1:0,S=f?-1:1,v=a[u+y];for(y+=S,h=v&(1<<-D)-1,v>>=-D,D+=w;0<D;h=256*h+a[u+y],y+=S,D-=8);for(p=h&(1<<-D)-1,h>>=-D,D+=l;0<D;p=256*p+a[u+y],y+=S,D-=8);if(h===0)h=1-x;else{if(h===_)return p?NaN:(v?-1:1)*(1/0);p+=n(2,l),h-=x}return(v?-1:1)*p*n(2,h-l)},s.write=function(a,u,f,l,d,h){var p,w,_,x=Math.LN2,D=Math.log,y=8*h-d-1,S=(1<<y)-1,v=S>>1,A=d===23?n(2,-24)-n(2,-77):0,C=l?0:h-1,L=l?1:-1,V=0>u||u===0&&0>1/u?1:0;for(u=e(u),isNaN(u)||u===1/0?(w=isNaN(u)?1:0,p=S):(p=t(D(u)/x),1>u*(_=n(2,-p))&&(p--,_*=2),u+=1<=p+v?A/_:A*n(2,1-v),2<=u*_&&(p++,_/=2),p+v>=S?(w=0,p=S):1<=p+v?(w=(u*_-1)*n(2,d),p+=v):(w=u*n(2,v-1)*n(2,d),p=0));8<=d;a[f+C]=255&w,C+=L,w/=256,d-=8);for(p=p<<d|w,y+=d;0<y;a[f+C]=255&p,C+=L,p/=256,y-=8);a[f+C-L]|=128*V}},{}],10:[function(r,i){i.exports=typeof Object.create=="function"?function(s,a){a&&(s.super_=a,s.prototype=Object.create(a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:function(s,a){if(a){s.super_=a;var u=function(){};u.prototype=a.prototype,s.prototype=new u,s.prototype.constructor=s}}},{}],11:[function(r,i){var s=Math.round;function a(h){if(h+="",!(100<h.length)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(p){var w=parseFloat(p[1]),_=(p[2]||"ms").toLowerCase();return _==="years"||_==="year"||_==="yrs"||_==="yr"||_==="y"?315576e5*w:_==="weeks"||_==="week"||_==="w"?6048e5*w:_==="days"||_==="day"||_==="d"?864e5*w:_==="hours"||_==="hour"||_==="hrs"||_==="hr"||_==="h"?36e5*w:_==="minutes"||_==="minute"||_==="mins"||_==="min"||_==="m"?6e4*w:_==="seconds"||_==="second"||_==="secs"||_==="sec"||_==="s"?1e3*w:_==="milliseconds"||_==="millisecond"||_==="msecs"||_==="msec"||_==="ms"?w:void 0}}}function u(h){var p=e(h);return 864e5<=p?s(h/864e5)+"d":36e5<=p?s(h/36e5)+"h":6e4<=p?s(h/6e4)+"m":1e3<=p?s(h/1e3)+"s":h+"ms"}function f(h){var p=e(h);return 864e5<=p?l(h,p,864e5,"day"):36e5<=p?l(h,p,36e5,"hour"):6e4<=p?l(h,p,6e4,"minute"):1e3<=p?l(h,p,1e3,"second"):h+" ms"}function l(h,p,w,_){return s(h/w)+" "+_+(p>=1.5*w?"s":"")}var d=24*(60*6e4);i.exports=function(h,p){p=p||{};var w=typeof h;if(w=="string"&&0<h.length)return a(h);if(w==="number"&&isFinite(h))return p.long?f(h):u(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},{}],12:[function(r,i){function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(A){if(w===setTimeout)return setTimeout(A,0);if((w===s||!w)&&setTimeout)return w=setTimeout,setTimeout(A,0);try{return w(A,0)}catch{try{return w.call(null,A,0)}catch{return w.call(this,A,0)}}}function f(A){if(_===clearTimeout)return clearTimeout(A);if((_===a||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(A);try{return _(A)}catch{try{return _.call(null,A)}catch{return _.call(this,A)}}}function l(){S&&D&&(S=!1,D.length?y=D.concat(y):v=-1,y.length&&d())}function d(){if(!S){var A=u(l);S=!0;for(var C=y.length;C;){for(D=y,y=[];++v<C;)D&&D[v].run();v=-1,C=y.length}D=null,S=!1,f(A)}}function h(A,C){this.fun=A,this.array=C}function p(){}var w,_,x=i.exports={};(function(){try{w=typeof setTimeout=="function"?setTimeout:s}catch{w=s}try{_=typeof clearTimeout=="function"?clearTimeout:a}catch{_=a}})();var D,y=[],S=!1,v=-1;x.nextTick=function(A){var C=Array(arguments.length-1);if(1<arguments.length)for(var L=1;L<arguments.length;L++)C[L-1]=arguments[L];y.push(new h(A,C)),y.length!==1||S||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=p,x.addListener=p,x.once=p,x.off=p,x.removeListener=p,x.removeAllListeners=p,x.emit=p,x.prependListener=p,x.prependOnceListener=p,x.listeners=function(){return[]},x.binding=function(){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],13:[function(r,i){(function(s){(function(){let a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?s:window):u=>(a||(a=Promise.resolve())).then(u).catch(f=>setTimeout(()=>{throw f},0))}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],14:[function(r,i){(function(s,a){(function(){"use strict";var u=r("safe-buffer").Buffer,f=a.crypto||a.msCrypto;i.exports=f&&f.getRandomValues?function(l,d){if(l>4294967295)throw new RangeError("requested too many random bytes");var h=u.allocUnsafe(l);if(0<l)if(65536<l)for(var p=0;p<l;p+=65536)f.getRandomValues(h.slice(p,p+65536));else f.getRandomValues(h);return typeof d=="function"?s.nextTick(function(){d(null,h)}):h}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{_process:12,"safe-buffer":30}],15:[function(r,i){"use strict";function s(p,w){p.prototype=Object.create(w.prototype),p.prototype.constructor=p,p.__proto__=w}function a(p,w,_){function x(y,S,v){return typeof w=="string"?w:w(y,S,v)}_||(_=Error);var D=(function(y){function S(v,A,C){return y.call(this,x(v,A,C))||this}return s(S,y),S})(_);D.prototype.name=_.name,D.prototype.code=p,h[p]=D}function u(p,w){if(Array.isArray(p)){var _=p.length;return p=p.map(function(x){return x+""}),2<_?"one of ".concat(w," ").concat(p.slice(0,_-1).join(", "),", or ")+p[_-1]:_===2?"one of ".concat(w," ").concat(p[0]," or ").concat(p[1]):"of ".concat(w," ").concat(p[0])}return"of ".concat(w," ").concat(p+"")}function f(p,w,_){return p.substr(!_||0>_?0:+_,w.length)===w}function l(p,w,_){return(_===void 0||_>p.length)&&(_=p.length),p.substring(_-w.length,_)===w}function d(p,w,_){return typeof _!="number"&&(_=0),!(_+w.length>p.length)&&p.indexOf(w,_)!==-1}var h={};a("ERR_INVALID_OPT_VALUE",function(p,w){return'The value "'+w+'" is invalid for option "'+p+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(p,w,_){var x;typeof w=="string"&&f(w,"not ")?(x="must not be",w=w.replace(/^not /,"")):x="must be";var D;if(l(p," argument"))D="The ".concat(p," ").concat(x," ").concat(u(w,"type"));else{var y=d(p,".")?"property":"argument";D='The "'.concat(p,'" ').concat(y," ").concat(x," ").concat(u(w,"type"))}return D+=". Received type ".concat(typeof _),D},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=h},{}],16:[function(r,i){(function(s){(function(){"use strict";function a(x){return this instanceof a?(d.call(this,x),h.call(this,x),this.allowHalfOpen=!0,void(x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u))))):new a(x)}function u(){this._writableState.ended||s.nextTick(f,this)}function f(x){x.end()}var l=Object.keys||function(x){var D=[];for(var y in x)D.push(y);return D};i.exports=a;var d=r("./_stream_readable"),h=r("./_stream_writable");r("inherits")(a,d);for(var p,w=l(h.prototype),_=0;_<w.length;_++)p=w[_],a.prototype[p]||(a.prototype[p]=h.prototype[p]);Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,r("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(r,i){"use strict";function s(u){return this instanceof s?void a.call(this,u):new s(u)}i.exports=s;var a=r("./_stream_transform");r("inherits")(s,a),s.prototype._transform=function(u,f,l){l(null,u)}},{"./_stream_transform":19,inherits:10}],18:[function(r,i){(function(s,a){(function(){"use strict";function u(o){return ue.from(o)}function f(o){return ue.isBuffer(o)||o instanceof ae}function l(o,c,g){return typeof o.prependListener=="function"?o.prependListener(c,g):void(o._events&&o._events[c]?Array.isArray(o._events[c])?o._events[c].unshift(g):o._events[c]=[g,o._events[c]]:o.on(c,g))}function d(o,c,g){Te=Te||r("./_stream_duplex"),o=o||{},typeof g!="boolean"&&(g=c instanceof Te),this.objectMode=!!o.objectMode,g&&(this.objectMode=this.objectMode||!!o.readableObjectMode),this.highWaterMark=Gt(this,o,"readableHighWaterMark",g),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=o.emitClose!==!1,this.autoDestroy=!!o.autoDestroy,this.destroyed=!1,this.defaultEncoding=o.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,o.encoding&&(!ze&&(ze=r("string_decoder/").StringDecoder),this.decoder=new ze(o.encoding),this.encoding=o.encoding)}function h(o){if(Te=Te||r("./_stream_duplex"),!(this instanceof h))return new h(o);var c=this instanceof Te;this._readableState=new d(o,this,c),this.readable=!0,o&&(typeof o.read=="function"&&(this._read=o.read),typeof o.destroy=="function"&&(this._destroy=o.destroy)),nt.call(this)}function p(o,c,g,E,O){X("readableAddChunk",c);var M=o._readableState;if(c===null)M.reading=!1,y(o,M);else{var m;if(O||(m=_(M,c)),m)G(o,m);else if(!(M.objectMode||c&&0<c.length))E||(M.reading=!1,A(o,M));else if(typeof c=="string"||M.objectMode||Object.getPrototypeOf(c)===ue.prototype||(c=u(c)),E)M.endEmitted?G(o,new j):w(o,M,c,!0);else if(M.ended)G(o,new I);else{if(M.destroyed)return!1;M.reading=!1,M.decoder&&!g?(c=M.decoder.write(c),M.objectMode||c.length!==0?w(o,M,c,!1):A(o,M)):w(o,M,c,!1)}}return!M.ended&&(M.length<M.highWaterMark||M.length===0)}function w(o,c,g,E){c.flowing&&c.length===0&&!c.sync?(c.awaitDrain=0,o.emit("data",g)):(c.length+=c.objectMode?1:g.length,E?c.buffer.unshift(g):c.buffer.push(g),c.needReadable&&S(o)),A(o,c)}function _(o,c){var g;return f(c)||typeof c=="string"||c===void 0||o.objectMode||(g=new Pe("chunk",["string","Buffer","Uint8Array"],c)),g}function x(o){return 1073741824<=o?o=1073741824:(o--,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o++),o}function D(o,c){return 0>=o||c.length===0&&c.ended?0:c.objectMode?1:o===o?(o>c.highWaterMark&&(c.highWaterMark=x(o)),o<=c.length?o:c.ended?c.length:(c.needReadable=!0,0)):c.flowing&&c.length?c.buffer.head.data.length:c.length}function y(o,c){if(X("onEofChunk"),!c.ended){if(c.decoder){var g=c.decoder.end();g&&g.length&&(c.buffer.push(g),c.length+=c.objectMode?1:g.length)}c.ended=!0,c.sync?S(o):(c.needReadable=!1,!c.emittedReadable&&(c.emittedReadable=!0,v(o)))}}function S(o){var c=o._readableState;X("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(X("emitReadable",c.flowing),c.emittedReadable=!0,s.nextTick(v,o))}function v(o){var c=o._readableState;X("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&(c.length||c.ended)&&(o.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,q(o)}function A(o,c){c.readingMore||(c.readingMore=!0,s.nextTick(C,o,c))}function C(o,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&c.length===0);){var g=c.length;if(X("maybeReadMore read 0"),o.read(0),g===c.length)break}c.readingMore=!1}function L(o){return function(){var c=o._readableState;X("pipeOnDrain",c.awaitDrain),c.awaitDrain&&c.awaitDrain--,c.awaitDrain===0&&tt(o,"data")&&(c.flowing=!0,q(o))}}function V(o){var c=o._readableState;c.readableListening=0<o.listenerCount("readable"),c.resumeScheduled&&!c.paused?c.flowing=!0:0<o.listenerCount("data")&&o.resume()}function T(o){X("readable nexttick read 0"),o.read(0)}function U(o,c){c.resumeScheduled||(c.resumeScheduled=!0,s.nextTick(P,o,c))}function P(o,c){X("resume",c.reading),c.reading||o.read(0),c.resumeScheduled=!1,o.emit("resume"),q(o),c.flowing&&!c.reading&&o.read(0)}function q(o){var c=o._readableState;for(X("flow",c.flowing);c.flowing&&o.read()!==null;);}function J(o,c){if(c.length===0)return null;var g;return c.objectMode?g=c.buffer.shift():!o||o>=c.length?(g=c.decoder?c.buffer.join(""):c.buffer.length===1?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):g=c.buffer.consume(o,c.decoder),g}function ee(o){var c=o._readableState;X("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,s.nextTick(re,c,o))}function re(o,c){if(X("endReadableNT",o.endEmitted,o.length),!o.endEmitted&&o.length===0&&(o.endEmitted=!0,c.readable=!1,c.emit("end"),o.autoDestroy)){var g=c._writableState;(!g||g.autoDestroy&&g.finished)&&c.destroy()}}function we(o,c){for(var g=0,E=o.length;g<E;g++)if(o[g]===c)return g;return-1}i.exports=h;var Te;h.ReadableState=d;var X,It=r("events").EventEmitter,tt=function(o,c){return o.listeners(c).length},nt=r("./internal/streams/stream"),ue=r("buffer").Buffer,ae=a.Uint8Array||function(){},ut=r("util");X=ut&&ut.debuglog?ut.debuglog("stream"):function(){};var ze,rt,dt,ht=r("./internal/streams/buffer_list"),Ke=r("./internal/streams/destroy"),Lt=r("./internal/streams/state"),Gt=Lt.getHighWaterMark,Ae=r("../errors").codes,Pe=Ae.ERR_INVALID_ARG_TYPE,I=Ae.ERR_STREAM_PUSH_AFTER_EOF,B=Ae.ERR_METHOD_NOT_IMPLEMENTED,j=Ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("inherits")(h,nt);var G=Ke.errorOrDestroy,te=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(o){this._readableState&&(this._readableState.destroyed=o)}}),h.prototype.destroy=Ke.destroy,h.prototype._undestroy=Ke.undestroy,h.prototype._destroy=function(o,c){c(o)},h.prototype.push=function(o,c){var g,E=this._readableState;return E.objectMode?g=!0:typeof o=="string"&&(c=c||E.defaultEncoding,c!==E.encoding&&(o=ue.from(o,c),c=""),g=!0),p(this,o,c,!1,g)},h.prototype.unshift=function(o){return p(this,o,null,!0,!1)},h.prototype.isPaused=function(){return this._readableState.flowing===!1},h.prototype.setEncoding=function(o){ze||(ze=r("string_decoder/").StringDecoder);var c=new ze(o);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var g=this._readableState.buffer.head,E="";g!==null;)E+=c.write(g.data),g=g.next;return this._readableState.buffer.clear(),E!==""&&this._readableState.buffer.push(E),this._readableState.length=E.length,this},h.prototype.read=function(o){X("read",o),o=parseInt(o,10);var c=this._readableState,g=o;if(o!==0&&(c.emittedReadable=!1),o===0&&c.needReadable&&((c.highWaterMark===0?0<c.length:c.length>=c.highWaterMark)||c.ended))return X("read: emitReadable",c.length,c.ended),c.length===0&&c.ended?ee(this):S(this),null;if(o=D(o,c),o===0&&c.ended)return c.length===0&&ee(this),null;var E=c.needReadable;X("need readable",E),(c.length===0||c.length-o<c.highWaterMark)&&(E=!0,X("length less than watermark",E)),c.ended||c.reading?(E=!1,X("reading or ended",E)):E&&(X("do read"),c.reading=!0,c.sync=!0,c.length===0&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,!c.reading&&(o=D(g,c)));var O;return O=0<o?J(o,c):null,O===null?(c.needReadable=c.length<=c.highWaterMark,o=0):(c.length-=o,c.awaitDrain=0),c.length===0&&(!c.ended&&(c.needReadable=!0),g!==o&&c.ended&&ee(this)),O!==null&&this.emit("data",O),O},h.prototype._read=function(){G(this,new B("_read()"))},h.prototype.pipe=function(o,c){function g(Z,ie){X("onunpipe"),Z===F&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,O())}function E(){X("onend"),o.end()}function O(){X("cleanup"),o.removeListener("close",b),o.removeListener("finish",k),o.removeListener("drain",Y),o.removeListener("error",m),o.removeListener("unpipe",g),F.removeListener("end",E),F.removeListener("end",R),F.removeListener("data",M),K=!0,N.awaitDrain&&(!o._writableState||o._writableState.needDrain)&&Y()}function M(Z){X("ondata");var ie=o.write(Z);X("dest.write",ie),ie===!1&&((N.pipesCount===1&&N.pipes===o||1<N.pipesCount&&we(N.pipes,o)!==-1)&&!K&&(X("false write response, pause",N.awaitDrain),N.awaitDrain++),F.pause())}function m(Z){X("onerror",Z),R(),o.removeListener("error",m),tt(o,"error")===0&&G(o,Z)}function b(){o.removeListener("finish",k),R()}function k(){X("onfinish"),o.removeListener("close",b),R()}function R(){X("unpipe"),F.unpipe(o)}var F=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=o;break;case 1:N.pipes=[N.pipes,o];break;default:N.pipes.push(o)}N.pipesCount+=1,X("pipe count=%d opts=%j",N.pipesCount,c);var H=(!c||c.end!==!1)&&o!==s.stdout&&o!==s.stderr,W=H?E:R;N.endEmitted?s.nextTick(W):F.once("end",W),o.on("unpipe",g);var Y=L(F);o.on("drain",Y);var K=!1;return F.on("data",M),l(o,"error",m),o.once("close",b),o.once("finish",k),o.emit("pipe",F),N.flowing||(X("pipe resume"),F.resume()),o},h.prototype.unpipe=function(o){var c=this._readableState,g={hasUnpiped:!1};if(c.pipesCount===0)return this;if(c.pipesCount===1)return o&&o!==c.pipes?this:(o||(o=c.pipes),c.pipes=null,c.pipesCount=0,c.flowing=!1,o&&o.emit("unpipe",this,g),this);if(!o){var E=c.pipes,O=c.pipesCount;c.pipes=null,c.pipesCount=0,c.flowing=!1;for(var M=0;M<O;M++)E[M].emit("unpipe",this,{hasUnpiped:!1});return this}var m=we(c.pipes,o);return m===-1?this:(c.pipes.splice(m,1),c.pipesCount-=1,c.pipesCount===1&&(c.pipes=c.pipes[0]),o.emit("unpipe",this,g),this)},h.prototype.on=function(o,c){var g=nt.prototype.on.call(this,o,c),E=this._readableState;return o==="data"?(E.readableListening=0<this.listenerCount("readable"),E.flowing!==!1&&this.resume()):o=="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,X("on readable",E.length,E.reading),E.length?S(this):!E.reading&&s.nextTick(T,this)),g},h.prototype.addListener=h.prototype.on,h.prototype.removeListener=function(o,c){var g=nt.prototype.removeListener.call(this,o,c);return o==="readable"&&s.nextTick(V,this),g},h.prototype.removeAllListeners=function(o){var c=nt.prototype.removeAllListeners.apply(this,arguments);return(o==="readable"||o===void 0)&&s.nextTick(V,this),c},h.prototype.resume=function(){var o=this._readableState;return o.flowing||(X("resume"),o.flowing=!o.readableListening,U(this,o)),o.paused=!1,this},h.prototype.pause=function(){return X("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(X("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},h.prototype.wrap=function(o){var c=this,g=this._readableState,E=!1;for(var O in o.on("end",function(){if(X("wrapped end"),g.decoder&&!g.ended){var m=g.decoder.end();m&&m.length&&c.push(m)}c.push(null)}),o.on("data",function(m){if(X("wrapped data"),g.decoder&&(m=g.decoder.write(m)),!(g.objectMode&&m==null)&&(g.objectMode||m&&m.length)){var b=c.push(m);b||(E=!0,o.pause())}}),o)this[O]===void 0&&typeof o[O]=="function"&&(this[O]=(function(m){return function(){return o[m].apply(o,arguments)}})(O));for(var M=0;M<te.length;M++)o.on(te[M],this.emit.bind(this,te[M]));return this._read=function(m){X("wrapped _read",m),E&&(E=!1,o.resume())},this},typeof Symbol=="function"&&(h.prototype[Symbol.asyncIterator]=function(){return rt===void 0&&(rt=r("./internal/streams/async_iterator")),rt(this)}),Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(o){this._readableState&&(this._readableState.flowing=o)}}),h._fromList=J,Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(h.from=function(o,c){return dt===void 0&&(dt=r("./internal/streams/from")),dt(h,o,c)})}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(r,i){"use strict";function s(x,D){var y=this._transformState;y.transforming=!1;var S=y.writecb;if(S===null)return this.emit("error",new h);y.writechunk=null,y.writecb=null,D!=null&&this.push(D),S(x);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function a(x){return this instanceof a?(_.call(this,x),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),void this.on("prefinish",u)):new a(x)}function u(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?f(this,null,null):this._flush(function(D,y){f(x,D,y)})}function f(x,D,y){if(D)return x.emit("error",D);if(y!=null&&x.push(y),x._writableState.length)throw new w;if(x._transformState.transforming)throw new p;return x.push(null)}i.exports=a;var l=r("../errors").codes,d=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,w=l.ERR_TRANSFORM_WITH_LENGTH_0,_=r("./_stream_duplex");r("inherits")(a,_),a.prototype.push=function(x,D){return this._transformState.needTransform=!1,_.prototype.push.call(this,x,D)},a.prototype._transform=function(x,D,y){y(new d("_transform()"))},a.prototype._write=function(x,D,y){var S=this._transformState;if(S.writecb=y,S.writechunk=x,S.writeencoding=D,!S.transforming){var v=this._readableState;(S.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},a.prototype._read=function(){var x=this._transformState;x.writechunk===null||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},a.prototype._destroy=function(x,D){_.prototype._destroy.call(this,x,function(y){D(y)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(r,i){(function(s,a){(function(){"use strict";function u(I){var B=this;this.next=null,this.entry=null,this.finish=function(){ee(B,I)}}function f(I){return X.from(I)}function l(I){return X.isBuffer(I)||I instanceof It}function d(){}function h(I,B,j){re=re||r("./_stream_duplex"),I=I||{},typeof j!="boolean"&&(j=B instanceof re),this.objectMode=!!I.objectMode,j&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=ue(this,I,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var G=I.decodeStrings===!1;this.decodeStrings=!G,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){A(B,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function p(I){re=re||r("./_stream_duplex");var B=this instanceof re;return B||Pe.call(p,this)?(this._writableState=new h(I,this,B),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),void Te.call(this)):new p(I)}function w(I,B){var j=new Lt;Ae(I,j),s.nextTick(B,j)}function _(I,B,j,G){var te;return j===null?te=new Ke:typeof j!="string"&&!B.objectMode&&(te=new ut("chunk",["string","Buffer"],j)),!te||(Ae(I,te),s.nextTick(G,te),!1)}function x(I,B,j){return I.objectMode||I.decodeStrings===!1||typeof B!="string"||(B=X.from(B,j)),B}function D(I,B,j,G,te,o){if(!j){var c=x(B,G,te);G!==c&&(j=!0,te="buffer",G=c)}var g=B.objectMode?1:G.length;B.length+=g;var E=B.length<B.highWaterMark;if(E||(B.needDrain=!0),B.writing||B.corked){var O=B.lastBufferedRequest;B.lastBufferedRequest={chunk:G,encoding:te,isBuf:j,callback:o,next:null},O?O.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else y(I,B,!1,g,G,te,o);return E}function y(I,B,j,G,te,o,c){B.writelen=G,B.writecb=c,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new ht("write")):j?I._writev(te,B.onwrite):I._write(te,o,B.onwrite),B.sync=!1}function S(I,B,j,G,te){--B.pendingcb,j?(s.nextTick(te,G),s.nextTick(q,I,B),I._writableState.errorEmitted=!0,Ae(I,G)):(te(G),I._writableState.errorEmitted=!0,Ae(I,G),q(I,B))}function v(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}function A(I,B){var j=I._writableState,G=j.sync,te=j.writecb;if(typeof te!="function")throw new rt;if(v(j),B)S(I,j,G,B,te);else{var o=T(j)||I.destroyed;o||j.corked||j.bufferProcessing||!j.bufferedRequest||V(I,j),G?s.nextTick(C,I,j,o,te):C(I,j,o,te)}}function C(I,B,j,G){j||L(I,B),B.pendingcb--,G(),q(I,B)}function L(I,B){B.length===0&&B.needDrain&&(B.needDrain=!1,I.emit("drain"))}function V(I,B){B.bufferProcessing=!0;var j=B.bufferedRequest;if(I._writev&&j&&j.next){var G=B.bufferedRequestCount,te=Array(G),o=B.corkedRequestsFree;o.entry=j;for(var c=0,g=!0;j;)te[c]=j,j.isBuf||(g=!1),j=j.next,c+=1;te.allBuffers=g,y(I,B,!0,B.length,te,"",o.finish),B.pendingcb++,B.lastBufferedRequest=null,o.next?(B.corkedRequestsFree=o.next,o.next=null):B.corkedRequestsFree=new u(B),B.bufferedRequestCount=0}else{for(;j;){var E=j.chunk,O=j.encoding,M=j.callback,m=B.objectMode?1:E.length;if(y(I,B,!1,m,E,O,M),j=j.next,B.bufferedRequestCount--,B.writing)break}j===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=j,B.bufferProcessing=!1}function T(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function U(I,B){I._final(function(j){B.pendingcb--,j&&Ae(I,j),B.prefinished=!0,I.emit("prefinish"),q(I,B)})}function P(I,B){B.prefinished||B.finalCalled||(typeof I._final!="function"||B.destroyed?(B.prefinished=!0,I.emit("prefinish")):(B.pendingcb++,B.finalCalled=!0,s.nextTick(U,I,B)))}function q(I,B){var j=T(B);if(j&&(P(I,B),B.pendingcb===0&&(B.finished=!0,I.emit("finish"),B.autoDestroy))){var G=I._readableState;(!G||G.autoDestroy&&G.endEmitted)&&I.destroy()}return j}function J(I,B,j){B.ending=!0,q(I,B),j&&(B.finished?s.nextTick(j):I.once("finish",j)),B.ended=!0,I.writable=!1}function ee(I,B,j){var G=I.entry;for(I.entry=null;G;){var te=G.callback;B.pendingcb--,te(j),G=G.next}B.corkedRequestsFree.next=I}i.exports=p;var re;p.WritableState=h;var we={deprecate:r("util-deprecate")},Te=r("./internal/streams/stream"),X=r("buffer").Buffer,It=a.Uint8Array||function(){},tt=r("./internal/streams/destroy"),nt=r("./internal/streams/state"),ue=nt.getHighWaterMark,ae=r("../errors").codes,ut=ae.ERR_INVALID_ARG_TYPE,ze=ae.ERR_METHOD_NOT_IMPLEMENTED,rt=ae.ERR_MULTIPLE_CALLBACK,dt=ae.ERR_STREAM_CANNOT_PIPE,ht=ae.ERR_STREAM_DESTROYED,Ke=ae.ERR_STREAM_NULL_VALUES,Lt=ae.ERR_STREAM_WRITE_AFTER_END,Gt=ae.ERR_UNKNOWN_ENCODING,Ae=tt.errorOrDestroy;r("inherits")(p,Te),h.prototype.getBuffer=function(){for(var I=this.bufferedRequest,B=[];I;)B.push(I),I=I.next;return B},(function(){try{Object.defineProperty(h.prototype,"buffer",{get:we.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Pe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Pe=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(I){return!!Pe.call(this,I)||this===p&&I&&I._writableState instanceof h}})):Pe=function(I){return I instanceof this},p.prototype.pipe=function(){Ae(this,new dt)},p.prototype.write=function(I,B,j){var G=this._writableState,te=!1,o=!G.objectMode&&l(I);return o&&!X.isBuffer(I)&&(I=f(I)),typeof B=="function"&&(j=B,B=null),o?B="buffer":!B&&(B=G.defaultEncoding),typeof j!="function"&&(j=d),G.ending?w(this,j):(o||_(this,G,I,j))&&(G.pendingcb++,te=D(this,G,o,I,B,j)),te},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&V(this,I))},p.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())))throw new Gt(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(I,B,j){j(new ze("_write()"))},p.prototype._writev=null,p.prototype.end=function(I,B,j){var G=this._writableState;return typeof I=="function"?(j=I,I=null,B=null):typeof B=="function"&&(j=B,B=null),I!=null&&this.write(I,B),G.corked&&(G.corked=1,this.uncork()),G.ending||J(this,G,j),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(I){this._writableState&&(this._writableState.destroyed=I)}}),p.prototype.destroy=tt.destroy,p.prototype._undestroy=tt.undestroy,p.prototype._destroy=function(I,B){B(I)}}).call(this)}).call(this,r("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(r,i){(function(s){(function(){"use strict";function a(L,V,T){return V in L?Object.defineProperty(L,V,{value:T,enumerable:!0,configurable:!0,writable:!0}):L[V]=T,L}function u(L,V){return{value:L,done:V}}function f(L){var V=L[w];if(V!==null){var T=L[v].read();T!==null&&(L[y]=null,L[w]=null,L[_]=null,V(u(T,!1)))}}function l(L){s.nextTick(f,L)}function d(L,V){return function(T,U){L.then(function(){return V[D]?void T(u(void 0,!0)):void V[S](T,U)},U)}}var h,p=r("./end-of-stream"),w=Symbol("lastResolve"),_=Symbol("lastReject"),x=Symbol("error"),D=Symbol("ended"),y=Symbol("lastPromise"),S=Symbol("handlePromise"),v=Symbol("stream"),A=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((h={get stream(){return this[v]},next:function(){var L=this,V=this[x];if(V!==null)return Promise.reject(V);if(this[D])return Promise.resolve(u(void 0,!0));if(this[v].destroyed)return new Promise(function(q,J){s.nextTick(function(){L[x]?J(L[x]):q(u(void 0,!0))})});var T,U=this[y];if(U)T=new Promise(d(U,this));else{var P=this[v].read();if(P!==null)return Promise.resolve(u(P,!1));T=new Promise(this[S])}return this[y]=T,T}},a(h,Symbol.asyncIterator,function(){return this}),a(h,"return",function(){var L=this;return new Promise(function(V,T){L[v].destroy(null,function(U){return U?void T(U):void V(u(void 0,!0))})})}),h),A);i.exports=function(L){var V,T=Object.create(C,(V={},a(V,v,{value:L,writable:!0}),a(V,w,{value:null,writable:!0}),a(V,_,{value:null,writable:!0}),a(V,x,{value:null,writable:!0}),a(V,D,{value:L._readableState.endEmitted,writable:!0}),a(V,S,{value:function(U,P){var q=T[v].read();q?(T[y]=null,T[w]=null,T[_]=null,U(u(q,!1))):(T[w]=U,T[_]=P)},writable:!0}),V));return T[y]=null,p(L,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=T[_];return P!==null&&(T[y]=null,T[w]=null,T[_]=null,P(U)),void(T[x]=U)}var q=T[w];q!==null&&(T[y]=null,T[w]=null,T[_]=null,q(u(void 0,!0))),T[D]=!0}),L.on("readable",l.bind(null,T)),T}}).call(this)}).call(this,r("_process"))},{"./end-of-stream":24,_process:12}],22:[function(r,i){"use strict";function s(y,S){var v=Object.keys(y);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(y);S&&(A=A.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),v.push.apply(v,A)}return v}function a(y){for(var S,v=1;v<arguments.length;v++)S=arguments[v]==null?{}:arguments[v],v%2?s(Object(S),!0).forEach(function(A){u(y,A,S[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):s(Object(S)).forEach(function(A){Object.defineProperty(y,A,Object.getOwnPropertyDescriptor(S,A))});return y}function u(y,S,v){return S in y?Object.defineProperty(y,S,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[S]=v,y}function f(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}function l(y,S){for(var v,A=0;A<S.length;A++)v=S[A],v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}function d(y,S,v){return S&&l(y.prototype,S),v&&l(y,v),y}function h(y,S,v){w.prototype.copy.call(y,S,v)}var p=r("buffer"),w=p.Buffer,_=r("util"),x=_.inspect,D=x&&x.custom||"inspect";i.exports=(function(){function y(){f(this,y),this.head=null,this.tail=null,this.length=0}return d(y,[{key:"push",value:function(S){var v={data:S,next:null};0<this.length?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(S){var v={data:S,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var S=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,S}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(S){if(this.length===0)return"";for(var v=this.head,A=""+v.data;v=v.next;)A+=S+v.data;return A}},{key:"concat",value:function(S){if(this.length===0)return w.alloc(0);for(var v=w.allocUnsafe(S>>>0),A=this.head,C=0;A;)h(A.data,v,C),C+=A.data.length,A=A.next;return v}},{key:"consume",value:function(S,v){var A;return S<this.head.data.length?(A=this.head.data.slice(0,S),this.head.data=this.head.data.slice(S)):S===this.head.data.length?A=this.shift():A=v?this._getString(S):this._getBuffer(S),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(S){var v=this.head,A=1,C=v.data;for(S-=C.length;v=v.next;){var L=v.data,V=S>L.length?L.length:S;if(C+=V===L.length?L:L.slice(0,S),S-=V,S===0){V===L.length?(++A,this.head=v.next?v.next:this.tail=null):(this.head=v,v.data=L.slice(V));break}++A}return this.length-=A,C}},{key:"_getBuffer",value:function(S){var v=w.allocUnsafe(S),A=this.head,C=1;for(A.data.copy(v),S-=A.data.length;A=A.next;){var L=A.data,V=S>L.length?L.length:S;if(L.copy(v,v.length-S,0,V),S-=V,S===0){V===L.length?(++C,this.head=A.next?A.next:this.tail=null):(this.head=A,A.data=L.slice(V));break}++C}return this.length-=C,v}},{key:D,value:function(S,v){return x(this,a({},v,{depth:0,customInspect:!1}))}}]),y})()},{buffer:3,util:2}],23:[function(r,i){(function(s){(function(){"use strict";function a(l,d){f(l,d),u(l)}function u(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function f(l,d){l.emit("error",d)}i.exports={destroy:function(l,d){var h=this,p=this._readableState&&this._readableState.destroyed,w=this._writableState&&this._writableState.destroyed;return p||w?(d?d(l):l&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,s.nextTick(f,this,l)):s.nextTick(f,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(_){!d&&_?h._writableState?h._writableState.errorEmitted?s.nextTick(u,h):(h._writableState.errorEmitted=!0,s.nextTick(a,h,_)):s.nextTick(a,h,_):d?(s.nextTick(u,h),d(_)):s.nextTick(u,h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(l,d){var h=l._readableState,p=l._writableState;h&&h.autoDestroy||p&&p.autoDestroy?l.destroy(d):l.emit("error",d)}}}).call(this)}).call(this,r("_process"))},{_process:12}],24:[function(r,i){"use strict";function s(d){var h=!1;return function(){if(!h){h=!0;for(var p=arguments.length,w=Array(p),_=0;_<p;_++)w[_]=arguments[_];d.apply(this,w)}}}function a(){}function u(d){return d.setHeader&&typeof d.abort=="function"}function f(d,h,p){if(typeof h=="function")return f(d,null,h);h||(h={}),p=s(p||a);var w=h.readable||h.readable!==!1&&d.readable,_=h.writable||h.writable!==!1&&d.writable,x=function(){d.writable||y()},D=d._writableState&&d._writableState.finished,y=function(){_=!1,D=!0,w||p.call(d)},S=d._readableState&&d._readableState.endEmitted,v=function(){w=!1,S=!0,_||p.call(d)},A=function(V){p.call(d,V)},C=function(){var V;return w&&!S?(d._readableState&&d._readableState.ended||(V=new l),p.call(d,V)):_&&!D?(d._writableState&&d._writableState.ended||(V=new l),p.call(d,V)):void 0},L=function(){d.req.on("finish",y)};return u(d)?(d.on("complete",y),d.on("abort",C),d.req?L():d.on("request",L)):_&&!d._writableState&&(d.on("end",x),d.on("close",x)),d.on("end",v),d.on("finish",y),h.error!==!1&&d.on("error",A),d.on("close",C),function(){d.removeListener("complete",y),d.removeListener("abort",C),d.removeListener("request",L),d.req&&d.req.removeListener("finish",y),d.removeListener("end",x),d.removeListener("close",x),d.removeListener("finish",y),d.removeListener("end",v),d.removeListener("error",A),d.removeListener("close",C)}}var l=r("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;i.exports=f},{"../../../errors":15}],25:[function(r,i){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(r,i){"use strict";function s(D){var y=!1;return function(){y||(y=!0,D.apply(void 0,arguments))}}function a(D){if(D)throw D}function u(D){return D.setHeader&&typeof D.abort=="function"}function f(D,y,S,v){v=s(v);var A=!1;D.on("close",function(){A=!0}),p===void 0&&(p=r("./end-of-stream")),p(D,{readable:y,writable:S},function(L){return L?v(L):(A=!0,void v())});var C=!1;return function(L){if(!A)return C?void 0:(C=!0,u(D)?D.abort():typeof D.destroy=="function"?D.destroy():void v(L||new x("pipe")))}}function l(D){D()}function d(D,y){return D.pipe(y)}function h(D){return D.length&&typeof D[D.length-1]=="function"?D.pop():a}var p,w=r("../../../errors").codes,_=w.ERR_MISSING_ARGS,x=w.ERR_STREAM_DESTROYED;i.exports=function(){for(var D=arguments.length,y=Array(D),S=0;S<D;S++)y[S]=arguments[S];var v=h(y);if(Array.isArray(y[0])&&(y=y[0]),2>y.length)throw new _("streams");var A,C=y.map(function(L,V){var T=V<y.length-1;return f(L,T,0<V,function(U){A||(A=U),U&&C.forEach(l),T||(C.forEach(l),v(A))})});return y.reduce(d)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(r,i){"use strict";function s(u,f,l){return u.highWaterMark==null?f?u[l]:null:u.highWaterMark}var a=r("../../../errors").codes.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function(u,f,l,d){var h=s(f,d,l);if(h!=null){if(!(isFinite(h)&&t(h)===h)||0>h){var p=d?l:"highWaterMark";throw new a(p,h)}return t(h)}return u.objectMode?16:16384}}},{"../../../errors":15}],28:[function(r,i){i.exports=r("events").EventEmitter},{events:7}],29:[function(r,i,s){s=i.exports=r("./lib/_stream_readable.js"),s.Stream=s,s.Readable=s,s.Writable=r("./lib/_stream_writable.js"),s.Duplex=r("./lib/_stream_duplex.js"),s.Transform=r("./lib/_stream_transform.js"),s.PassThrough=r("./lib/_stream_passthrough.js"),s.finished=r("./lib/internal/streams/end-of-stream.js"),s.pipeline=r("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(r,i,s){function a(d,h){for(var p in d)h[p]=d[p]}function u(d,h,p){return l(d,h,p)}var f=r("buffer"),l=f.Buffer;l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?i.exports=f:(a(f,s),s.Buffer=u),u.prototype=Object.create(l.prototype),a(l,u),u.from=function(d,h,p){if(typeof d=="number")throw new TypeError("Argument must not be a number");return l(d,h,p)},u.alloc=function(d,h,p){if(typeof d!="number")throw new TypeError("Argument must be a number");var w=l(d);return h===void 0?w.fill(0):typeof p=="string"?w.fill(h,p):w.fill(h),w},u.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return l(d)},u.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(d)}},{buffer:3}],31:[function(r,i,s){"use strict";function a(C){if(!C)return"utf8";for(var L;;)switch(C){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return C;default:if(L)return;C=(""+C).toLowerCase(),L=!0}}function u(C){var L=a(C);if(typeof L!="string"&&(v.isEncoding===A||!A(C)))throw new Error("Unknown encoding: "+C);return L||C}function f(C){this.encoding=u(C);var L;switch(this.encoding){case"utf16le":this.text=w,this.end=_,L=4;break;case"utf8":this.fillLast=p,L=4;break;case"base64":this.text=x,this.end=D,L=3;break;default:return this.write=y,void(this.end=S)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(L)}function l(C){return 127>=C?0:C>>5==6?2:C>>4==14?3:C>>3==30?4:C>>6==2?-1:-2}function d(C,L,V){var T=L.length-1;if(T<V)return 0;var U=l(L[T]);return 0<=U?(0<U&&(C.lastNeed=U-1),U):--T<V||U===-2?0:(U=l(L[T]),0<=U?(0<U&&(C.lastNeed=U-2),U):--T<V||U===-2?0:(U=l(L[T]),0<=U?(0<U&&(U===2?U=0:C.lastNeed=U-3),U):0))}function h(C,L){if((192&L[0])!=128)return C.lastNeed=0,"\uFFFD";if(1<C.lastNeed&&1<L.length){if((192&L[1])!=128)return C.lastNeed=1,"\uFFFD";if(2<C.lastNeed&&2<L.length&&(192&L[2])!=128)return C.lastNeed=2,"\uFFFD"}}function p(C){var L=this.lastTotal-this.lastNeed,V=h(this,C,L);return V===void 0?this.lastNeed<=C.length?(C.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,L,0,C.length),void(this.lastNeed-=C.length)):V}function w(C,L){if((C.length-L)%2==0){var V=C.toString("utf16le",L);if(V){var T=V.charCodeAt(V.length-1);if(55296<=T&&56319>=T)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=C[C.length-1],C.toString("utf16le",L,C.length-1)}function _(C){var L=C&&C.length?this.write(C):"";if(this.lastNeed){var V=this.lastTotal-this.lastNeed;return L+this.lastChar.toString("utf16le",0,V)}return L}function x(C,L){var V=(C.length-L)%3;return V==0?C.toString("base64",L):(this.lastNeed=3-V,this.lastTotal=3,V==1?this.lastChar[0]=C[C.length-1]:(this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1]),C.toString("base64",L,C.length-V))}function D(C){var L=C&&C.length?this.write(C):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function y(C){return C.toString(this.encoding)}function S(C){return C&&C.length?this.write(C):""}var v=r("safe-buffer").Buffer,A=v.isEncoding||function(C){switch(C=""+C,C&&C.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};s.StringDecoder=f,f.prototype.write=function(C){if(C.length===0)return"";var L,V;if(this.lastNeed){if(L=this.fillLast(C),L===void 0)return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<C.length?L?L+this.text(C,V):this.text(C,V):L||""},f.prototype.end=function(C){var L=C&&C.length?this.write(C):"";return this.lastNeed?L+"\uFFFD":L},f.prototype.text=function(C,L){var V=d(this,C,L);if(!this.lastNeed)return C.toString("utf8",L);this.lastTotal=V;var T=C.length-(V-this.lastNeed);return C.copy(this.lastChar,0,T),C.toString("utf8",L,T)},f.prototype.fillLast=function(C){return this.lastNeed<=C.length?(C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,C.length),void(this.lastNeed-=C.length))}},{"safe-buffer":30}],32:[function(r,i){(function(s){(function(){function a(u){try{if(!s.localStorage)return!1}catch{return!1}var f=s.localStorage[u];return f!=null&&(f+"").toLowerCase()==="true"}i.exports=function(u,f){function l(){if(!d){if(a("throwDeprecation"))throw new Error(f);a("traceDeprecation")?console.trace(f):console.warn(f),d=!0}return u.apply(this,arguments)}if(a("noDeprecation"))return u;var d=!1;return l}}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],"/":[function(r,i){function s(D){return D.replace(/a=ice-options:trickle\s\n/g,"")}function a(D){console.warn(D)}let u=r("debug")("simple-peer"),f=r("get-browser-rtc"),l=r("randombytes"),d=r("readable-stream"),h=r("queue-microtask"),p=r("err-code"),{Buffer:w}=r("buffer"),_=65536;class x extends d.Duplex{constructor(y){if(y=Object.assign({allowHalfOpen:!1},y),super(y),this._id=l(4).toString("hex").slice(0,7),this._debug("new peer %o",y),this.channelName=y.initiator?y.channelName||l(20).toString("hex"):null,this.initiator=y.initiator||!1,this.channelConfig=y.channelConfig||x.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},x.config,y.config),this.offerOptions=y.offerOptions||{},this.answerOptions=y.answerOptions||{},this.sdpTransform=y.sdpTransform||(S=>S),this.streams=y.streams||(y.stream?[y.stream]:[]),this.trickle=y.trickle===void 0||y.trickle,this.allowHalfTrickle=y.allowHalfTrickle!==void 0&&y.allowHalfTrickle,this.iceCompleteTimeout=y.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=y.wrtc&&typeof y.wrtc=="object"?y.wrtc:f(),!this._wrtc)throw p(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(S){return void this.destroy(p(S,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=S=>{this._onIceCandidate(S)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(S=>{this.destroy(p(S,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=S=>{this._setupData(S)},this.streams&&this.streams.forEach(S=>{this.addStream(S)}),this._pc.ontrack=S=>{this._onTrack(S)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof y=="string")try{y=JSON.parse(y)}catch{y={}}this._debug("signal()"),y.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),y.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(y.transceiverRequest.kind,y.transceiverRequest.init)),y.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(y.candidate):this._pendingCandidates.push(y.candidate)),y.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(y)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(S=>{this._addIceCandidate(S)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(S=>{this.destroy(p(S,"ERR_SET_REMOTE_DESCRIPTION"))}),y.sdp||y.candidate||y.renegotiate||y.transceiverRequest||this.destroy(p(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(y){let S=new this._wrtc.RTCIceCandidate(y);this._pc.addIceCandidate(S).catch(v=>{!S.address||S.address.endsWith(".local")?a("Ignoring unsupported ICE candidate."):this.destroy(p(v,"ERR_ADD_ICE_CANDIDATE"))})}send(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(y)}}addTransceiver(y,S){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(y,S),this._needsNegotiation()}catch(v){this.destroy(p(v,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:y,init:S}})}}addStream(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),y.getTracks().forEach(S=>{this.addTrack(S,y)})}}addTrack(y,S){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let v=this._senderMap.get(y)||new Map,A=v.get(S);if(!A)A=this._pc.addTrack(y,S),v.set(S,A),this._senderMap.set(y,v),this._needsNegotiation();else throw A.removed?p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):p(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(y,S,v){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let A=this._senderMap.get(y),C=A?A.get(v):null;if(!C)throw p(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");S&&this._senderMap.set(S,A),C.replaceTrack==null?this.destroy(p(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):C.replaceTrack(S)}removeTrack(y,S){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let v=this._senderMap.get(y),A=v?v.get(S):null;if(!A)throw p(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{A.removed=!0,this._pc.removeTrack(A)}catch(C){C.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(A):this.destroy(p(C,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(y){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),y.getTracks().forEach(S=>{this.removeTrack(S,y)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,h(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(y){this._destroy(y,()=>{})}_destroy(y,S){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",y&&(y.message||y)),h(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",y&&(y.message||y)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,y&&this.emit("error",y),this.emit("close"),S()}))}_setupData(y){if(!y.channel)return this.destroy(p(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=y.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=_),this.channelName=this._channel.label,this._channel.onmessage=v=>{this._onChannelMessage(v)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=v=>{let A=v.error instanceof Error?v.error:new Error(`Datachannel error: ${v.message} ${v.filename}:${v.lineno}:${v.colno}`);this.destroy(p(A,"ERR_DATA_CHANNEL"))};let S=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(S&&this._onChannelClose(),S=!0):S=!1},5e3)}_read(){}_write(y,S,v){if(this.destroyed)return v(p(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(y)}catch(A){return this.destroy(p(A,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>_?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=v):v(null)}else this._debug("write before connect"),this._chunk=y,this._cb=v}_onFinish(){if(!this.destroyed){let y=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?y():this.once("connect",y)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=s(y.sdp)),y.sdp=this.sdpTransform(y.sdp);let S=()=>{if(!this.destroyed){let v=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:v.type,sdp:v.sdp})}};this._pc.setLocalDescription(y).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?S():this.once("_iceComplete",S))}).catch(v=>{this.destroy(p(v,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(p(y,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(y=>{y.mid||!y.sender.track||y.requested||(y.requested=!0,this.addTransceiver(y.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=s(y.sdp)),y.sdp=this.sdpTransform(y.sdp);let S=()=>{if(!this.destroyed){let v=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:v.type,sdp:v.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(y).then(()=>{this.destroyed||(this.trickle||this._iceComplete?S():this.once("_iceComplete",S))}).catch(v=>{this.destroy(p(v,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(p(y,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(p(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let y=this._pc.iceConnectionState,S=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",y,S),this.emit("iceStateChange",y,S),(y==="connected"||y==="completed")&&(this._pcReady=!0,this._maybeReady()),y==="failed"&&this.destroy(p(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),y==="closed"&&this.destroy(p(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(y){let S=v=>(Object.prototype.toString.call(v.values)==="[object Array]"&&v.values.forEach(A=>{Object.assign(v,A)}),v);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(v=>{let A=[];v.forEach(C=>{A.push(S(C))}),y(null,A)},v=>y(v)):0<this._pc.getStats.length?this._pc.getStats(v=>{if(this.destroyed)return;let A=[];v.result().forEach(C=>{let L={};C.names().forEach(V=>{L[V]=C.stat(V)}),L.id=C.id,L.type=C.type,L.timestamp=C.timestamp,A.push(S(L))}),y(null,A)},v=>y(v)):y(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let y=()=>{this.destroyed||this.getStats((S,v)=>{if(this.destroyed)return;S&&(v=[]);let A={},C={},L={},V=!1;v.forEach(U=>{(U.type==="remotecandidate"||U.type==="remote-candidate")&&(A[U.id]=U),(U.type==="localcandidate"||U.type==="local-candidate")&&(C[U.id]=U),(U.type==="candidatepair"||U.type==="candidate-pair")&&(L[U.id]=U)});let T=U=>{V=!0;let P=C[U.localCandidateId];P&&(P.ip||P.address)?(this.localAddress=P.ip||P.address,this.localPort=+P.port):P&&P.ipAddress?(this.localAddress=P.ipAddress,this.localPort=+P.portNumber):typeof U.googLocalAddress=="string"&&(P=U.googLocalAddress.split(":"),this.localAddress=P[0],this.localPort=+P[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let q=A[U.remoteCandidateId];q&&(q.ip||q.address)?(this.remoteAddress=q.ip||q.address,this.remotePort=+q.port):q&&q.ipAddress?(this.remoteAddress=q.ipAddress,this.remotePort=+q.portNumber):typeof U.googRemoteAddress=="string"&&(q=U.googRemoteAddress.split(":"),this.remoteAddress=q[0],this.remotePort=+q[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(v.forEach(U=>{U.type==="transport"&&U.selectedCandidatePairId&&T(L[U.selectedCandidatePairId]),(U.type==="googCandidatePair"&&U.googActiveConnection==="true"||(U.type==="candidatepair"||U.type==="candidate-pair")&&U.selected)&&T(U)}),!V&&(!Object.keys(L).length||Object.keys(C).length))return void setTimeout(y,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(P){return this.destroy(p(P,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let U=this._cb;this._cb=null,U(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};y()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>_)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(y=>{this._pc.removeTrack(y),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(y){this.destroyed||(y.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:y.candidate.candidate,sdpMLineIndex:y.candidate.sdpMLineIndex,sdpMid:y.candidate.sdpMid}}):!y.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),y.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(y){if(this.destroyed)return;let S=y.data;S instanceof ArrayBuffer&&(S=w.from(S)),this.push(S)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let y=this._cb;this._cb=null,y(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(y){this.destroyed||y.streams.forEach(S=>{this._debug("on track"),this.emit("track",y.track,S),this._remoteTracks.push({track:y.track,stream:S}),this._remoteStreams.some(v=>v.id===S.id)||(this._remoteStreams.push(S),h(()=>{this._debug("on stream"),this.emit("stream",S)}))})}_debug(){let y=[].slice.call(arguments);y[0]="["+this._id+"] "+y[0],u.apply(null,y)}}x.WEBRTC_SUPPORT=!!f(),x.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},x.channelConfig={},i.exports=x},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})});var Kc=er((nf,Gc)=>{Gc.exports=window.wp.url});var Xd={};no(Xd,{CRDT_DOC_META_PERSISTENCE_KEY:()=>ki,CRDT_RECORD_MAP_KEY:()=>Ti,Delta:()=>ic,LOCAL_EDITOR_ORIGIN:()=>Ai,LOCAL_SYNC_MANAGER_ORIGIN:()=>Lr,WORDPRESS_META_KEY_FOR_CRDT_DOC_PERSISTENCE:()=>Or,Y:()=>Yt,createSyncManager:()=>nl});var Yt={};no(Yt,{AbsolutePosition:()=>li,AbstractConnector:()=>ls,AbstractStruct:()=>Pn,AbstractType:()=>_e,Array:()=>dn,ContentAny:()=>qt,ContentBinary:()=>pn,ContentDeleted:()=>jn,ContentEmbed:()=>Dt,ContentFormat:()=>be,ContentJSON:()=>Ur,ContentString:()=>ct,ContentType:()=>Qe,Doc:()=>Ut,GC:()=>Ie,ID:()=>At,Item:()=>le,Map:()=>hn,PermanentUserData:()=>ds,RelativePosition:()=>Bn,Snapshot:()=>Sr,Text:()=>Fn,Transaction:()=>di,UndoManager:()=>ln,UpdateEncoderV1:()=>wt,XmlElement:()=>Vn,XmlFragment:()=>fn,XmlHook:()=>Rr,XmlText:()=>wi,YArrayEvent:()=>pi,YEvent:()=>un,YMapEvent:()=>gi,YTextEvent:()=>mi,YXmlEvent:()=>yi,applyUpdate:()=>Dr,applyUpdateV2:()=>Wt,cleanupYTextFormatting:()=>Ga,compareIDs:()=>on,compareRelativePositions:()=>vu,convertUpdateFormatV1ToV2:()=>Hu,convertUpdateFormatV2ToV1:()=>Da,createAbsolutePositionFromRelativePosition:()=>_u,createDeleteSet:()=>_i,createDeleteSetFromStructStore:()=>bs,createDocFromSnapshot:()=>Tu,createID:()=>Q,createRelativePositionFromJSON:()=>fu,createRelativePositionFromTypeIndex:()=>gu,createSnapshot:()=>ks,decodeRelativePosition:()=>bu,decodeSnapshot:()=>Cu,decodeSnapshotV2:()=>wa,decodeStateVector:()=>Es,decodeUpdate:()=>Nu,decodeUpdateV2:()=>xa,diffUpdate:()=>Vu,diffUpdateV2:()=>Ts,emptySnapshot:()=>xu,encodeRelativePosition:()=>yu,encodeSnapshot:()=>Su,encodeSnapshotV2:()=>ya,encodeStateAsUpdate:()=>Wn,encodeStateAsUpdateV2:()=>qn,encodeStateVector:()=>Cs,encodeStateVectorFromUpdate:()=>Mu,encodeStateVectorFromUpdateV2:()=>Ta,equalDeleteSets:()=>fa,equalSnapshots:()=>Eu,findIndexSS:()=>Ze,findRootTypeKey:()=>xs,getItem:()=>wr,getState:()=>me,getTypeChildren:()=>zu,isDeleted:()=>gn,isParentOf:()=>Er,iterateDeletedStructs:()=>an,logType:()=>du,logUpdate:()=>Ou,logUpdateV2:()=>Ca,mergeUpdates:()=>ka,mergeUpdatesV2:()=>xr,obfuscateUpdate:()=>Pu,obfuscateUpdateV2:()=>ju,parseUpdateMeta:()=>Bu,parseUpdateMetaV2:()=>Aa,readUpdate:()=>au,readUpdateV2:()=>vs,relativePositionToJSON:()=>hu,snapshot:()=>ku,snapshotContainsUpdate:()=>Ru,transact:()=>oe,tryGc:()=>Iu,typeListToArraySnapshot:()=>Gu,typeMapGetSnapshot:()=>Ju});var ve=()=>new Map,Hr=t=>{let e=ve();return t.forEach((n,r)=>{e.set(r,n)}),e},de=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},io=(t,e)=>{let n=[];for(let[r,i]of t)n.push(e(i,r));return n},so=(t,e)=>{for(let[n,r]of t)if(e(r,n))return!0;return!1};var st=()=>new Set;var Wr=t=>t[t.length-1];var oo=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},ft=Array.from;var ao=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1};var co=(t,e)=>{let n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n};var Jt=Array.isArray;var xe=class{constructor(){this._observers=ve()}on(e,n){de(this._observers,e,st).add(n)}once(e,n){let r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){let r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return ft((this._observers.get(e)||ve()).values()).forEach(r=>r(...n))}destroy(){this._observers=ve()}};var Re=Math.floor;var _n=Math.abs;var lo=Math.log10;var vn=(t,e)=>t<e?t:e,Ct=(t,e)=>t>e?t:e,eh=Number.isNaN;var Yr=t=>t!==0?t<0:1/t<0;var Wi=String.fromCharCode,th=String.fromCodePoint,nh=Wi(65535),ul=t=>t.toLowerCase(),dl=/^\s*/g,hl=t=>t.replace(dl,""),fl=/([A-Z])/g,Yi=(t,e)=>hl(t.replace(fl,n=>`${e}${ul(n)}`));var pl=t=>{let e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},Sn=typeof TextEncoder<"u"?new TextEncoder:null,gl=t=>Sn.encode(t),nr=Sn?gl:pl;var En=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});En&&En.decode(new Uint8Array).length===1&&(En=null);var uo=(t,e)=>co(e,()=>t).join("");var zi=t=>t===void 0?null:t;var Gi=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},ho=new Gi,Ki=!0;try{typeof localStorage<"u"&&(ho=localStorage,Ki=!1)}catch{}var zr=ho,fo=t=>Ki||addEventListener("storage",t),po=t=>Ki||removeEventListener("storage",t);var mo=Object.assign,yl=Object.keys,yo=(t,e)=>{for(let n in t)e(t[n],n)};var rr=t=>yl(t).length;var wo=t=>{for(let e in t)return!1;return!0},wl=(t,e)=>{for(let n in t)if(!e(t[n],n))return!1;return!0},$i=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Ji=(t,e)=>t===e||rr(t)===rr(e)&&wl(t,(n,r)=>(n!==void 0||$i(e,r))&&e[r]===n);var ir=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&ir(t,e,n+1)}},_o=()=>{};var Xi=t=>t,bl=(t,e)=>t===e;var xn=(t,e)=>{if(t==null||e==null)return bl(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(let n of t.keys())if(!e.has(n)||!xn(t.get(n),e.get(n)))return!1;break}case Object:if(rr(t)!==rr(e))return!1;for(let n in t)if(!$i(t,n)||!xn(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!xn(t[n],e[n]))return!1;break;default:return!1}return!0},vo=(t,e)=>e.includes(t);var kn=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),Kr=typeof window<"u"&&typeof document<"u"&&!kn,rh=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,pt,_l=[],vl=()=>{if(pt===void 0)if(kn){pt=ve();let t=process.argv,e=null;for(let n=0;n<t.length;n++){let r=t[n];r[0]==="-"?(e!==null&&pt.set(e,""),e=r):e!==null?(pt.set(e,r),e=null):_l.push(r)}e!==null&&pt.set(e,"")}else typeof location=="object"?(pt=ve(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,n]=t.split("=");pt.set(`--${Yi(e,"-")}`,n),pt.set(`-${Yi(e,"-")}`,n)}})):pt=ve();return pt},Zi=t=>vl().has(t);var sr=t=>kn?zi(process.env[t.toUpperCase()]):zi(zr.getItem(t));var El=t=>Zi("--"+t)||sr(t)!==null,ih=El("production"),Eo=kn&&vo(process.env.FORCE_COLOR,["true","1","2"]),So=!Zi("no-colors")&&(!kn||process.stdout.isTTY||Eo)&&(!kn||Zi("color")||Eo||sr("COLORTERM")!==null||(sr("TERM")||"").includes("color"));var es=Number.MAX_SAFE_INTEGER,sh=Number.MIN_SAFE_INTEGER,oh=1<<31;var Co=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Re(t)===t),ah=Number.isNaN,ch=Number.parseInt;var Ue=t=>new Error(t),ot=()=>{throw Ue("Method unimplemented")},Be=()=>{throw Ue("Unexpected case")};var To=Ue("Unexpected end of array"),Ao=Ue("Integer out of Range"),Tn=class{constructor(e){this.arr=e,this.pos=0}},fe=t=>new Tn(t),ts=t=>t.pos!==t.arr.length;var Sl=(t,e)=>{let n=ur(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},ye=t=>Sl(t,$(t));var xt=t=>t.arr[t.pos++];var $=t=>{let e=0,n=1,r=t.arr.length;for(;t.pos<r;){let i=t.arr[t.pos++];if(e=e+(i&127)*n,n*=128,i<128)return e;if(e>es)throw Ao}throw To},cr=t=>{let e=t.arr[t.pos++],n=e&63,r=64,i=(e&64)>0?-1:1;if((e&128)===0)return i*n;let s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&127)*r,r*=128,e<128)return i*n;if(n>es)throw Ao}throw To};var Cl=t=>{let e=$(t);if(e===0)return"";{let n=String.fromCodePoint(xt(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(xt(t));else for(;e>0;){let r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},xl=t=>En.decode(ye(t)),qe=En?xl:Cl;var ns=(t,e)=>{let n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},kl=t=>ns(t,4).getFloat32(0,!1),Tl=t=>ns(t,8).getFloat64(0,!1),Al=t=>ns(t,8).getBigInt64(0,!1);var Rl=[t=>{},t=>null,cr,kl,Tl,Al,t=>!1,t=>!0,qe,t=>{let e=$(t),n={};for(let r=0;r<e;r++){let i=qe(t);n[i]=Nt(t)}return n},t=>{let e=$(t),n=[];for(let r=0;r<e;r++)n.push(Nt(t));return n},ye],Nt=t=>Rl[127-xt(t)](t),ar=class extends Tn{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),ts(this)?this.count=$(this)+1:this.count=-1),this.count--,this.s}};var Zt=class extends Tn{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=cr(this);let e=Yr(this.s);this.count=1,e&&(this.s=-this.s,this.count=$(this)+2)}return this.count--,this.s}};var An=class extends Tn{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=cr(this),n=e&1;this.diff=Re(e/2),this.count=1,n&&(this.count=$(this)+2)}return this.s+=this.diff,this.count--,this.s}},$r=class{constructor(e){this.decoder=new Zt(e),this.str=qe(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}};var Ro=t=>new Uint8Array(t),ur=(t,e,n)=>new Uint8Array(t,e,n),Uo=t=>new Uint8Array(t),Ul=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=Wi(t[n]);return btoa(e)},Dl=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Il=t=>{let e=atob(t),n=Ro(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Ll=t=>{let e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Un=Kr?Ul:Dl,Bt=Kr?Il:Ll;var Do=t=>{let e=Ro(t.byteLength);return e.set(t),e};var en=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},pe=()=>new en;var Ol=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e};var ce=t=>{let e=new Uint8Array(Ol(t)),n=0;for(let r=0;r<t.bufs.length;r++){let i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(ur(t.cbuf.buffer,0,t.cpos),n),e},Nl=(t,e)=>{let n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(ur(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Ct(n,e)*2),t.cpos=0)},ke=(t,e)=>{let n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e};var kt=ke;var z=(t,e)=>{for(;e>127;)ke(t,128|127&e),e=Re(e/128);ke(t,127&e)},hr=(t,e)=>{let n=Yr(e);for(n&&(e=-e),ke(t,(e>63?128:0)|(n?64:0)|63&e),e=Re(e/64);e>0;)ke(t,(e>127?128:0)|127&e),e=Re(e/128)},rs=new Uint8Array(3e4),Ml=rs.length/3,Bl=(t,e)=>{if(e.length<Ml){let n=Sn.encodeInto(e,rs).written||0;z(t,n);for(let r=0;r<n;r++)ke(t,rs[r])}else he(t,nr(e))},Fl=(t,e)=>{let n=unescape(encodeURIComponent(e)),r=n.length;z(t,r);for(let i=0;i<r;i++)ke(t,n.codePointAt(i))},Fe=Sn&&Sn.encodeInto?Bl:Fl;var No=(t,e)=>In(t,ce(e)),In=(t,e)=>{let n=t.cbuf.length,r=t.cpos,i=vn(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Ct(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},he=(t,e)=>{z(t,e.byteLength),In(t,e)},is=(t,e)=>{Nl(t,e);let n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Vl=(t,e)=>is(t,4).setFloat32(0,e,!1),Pl=(t,e)=>is(t,8).setFloat64(0,e,!1),jl=(t,e)=>is(t,8).setBigInt64(0,e,!1);var Io=new DataView(new ArrayBuffer(4)),Hl=t=>(Io.setFloat32(0,t),Io.getFloat32(0)===t),Ft=(t,e)=>{switch(typeof e){case"string":ke(t,119),Fe(t,e);break;case"number":Co(e)&&_n(e)<=2147483647?(ke(t,125),hr(t,e)):Hl(e)?(ke(t,124),Vl(t,e)):(ke(t,123),Pl(t,e));break;case"bigint":ke(t,122),jl(t,e);break;case"object":if(e===null)ke(t,126);else if(Jt(e)){ke(t,117),z(t,e.length);for(let n=0;n<e.length;n++)Ft(t,e[n])}else if(e instanceof Uint8Array)ke(t,116),he(t,e);else{ke(t,118);let n=Object.keys(e);z(t,n.length);for(let r=0;r<n.length;r++){let i=n[r];Fe(t,i),Ft(t,e[i])}}break;case"boolean":ke(t,e?120:121);break;default:ke(t,127)}},dr=class extends en{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&z(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};var Lo=t=>{t.count>0&&(hr(t.encoder,t.count===1?t.s:-t.s),t.count>1&&z(t.encoder,t.count-2))},tn=class{constructor(){this.encoder=new en,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Lo(this),this.count=1,this.s=e)}toUint8Array(){return Lo(this),ce(this.encoder)}};var Oo=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);hr(t.encoder,e),t.count>1&&z(t.encoder,t.count-2)}},Dn=class{constructor(){this.encoder=new en,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Oo(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Oo(this),ce(this.encoder)}},Jr=class{constructor(){this.sarr=[],this.s="",this.lensE=new tn}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new en;return this.sarr.push(this.s),this.s="",Fe(e,this.sarr.join("")),In(e,this.lensE.toUint8Array()),ce(e)}};var dh=crypto.subtle,Mo=crypto.getRandomValues.bind(crypto);var Bo=Math.random,ss=()=>Mo(new Uint32Array(1))[0];var ql="10000000-1000-4000-8000"+-1e11,Xr=()=>ql.replace(/[018]/g,t=>(t^ss()&15>>t/4).toString(16));var We=Date.now;var Tt=t=>new Promise(t);var Wl=Promise.all.bind(Promise),Vo=t=>Promise.reject(t),pr=t=>Promise.resolve(t);var os=class{constructor(e,n){this.left=e,this.right=n}},gt=(t,e)=>new os(t,e);var nn=typeof document<"u"?document:{};var ph=typeof DOMParser<"u"?new DOMParser:null;var Po=t=>io(t,(e,n)=>`${n}:${e};`).join("");var gh=nn.ELEMENT_NODE,mh=nn.TEXT_NODE,yh=nn.CDATA_SECTION_NODE,wh=nn.COMMENT_NODE,bh=nn.DOCUMENT_NODE,_h=nn.DOCUMENT_TYPE_NODE,vh=nn.DOCUMENT_FRAGMENT_NODE;var mt=Symbol;var De=mt(),at=mt(),Qr=mt(),Ln=mt(),ei=mt(),mr=mt(),ti=mt(),On=mt(),rn=mt(),qo=t=>{let e=[],n=[],r=0;for(;r<t.length;r++){let i=t[r];i.constructor===String||i.constructor===Number?e.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},jo=[ei,ti,On,Qr],as=0,Ho=We(),Wo=(t,e)=>{let n=jo[as],r=sr("log"),i=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(e));return as=(as+1)%jo.length,e+=": ",i?(...s)=>{let a=We(),u=a-Ho;Ho=a,t(n,e,rn,...s.map(f=>typeof f=="string"||typeof f=="symbol"?f:JSON.stringify(f)),n," +"+u+"ms")}:_o};var $l={[De]:gt("font-weight","bold"),[at]:gt("font-weight","normal"),[Qr]:gt("color","blue"),[ei]:gt("color","green"),[Ln]:gt("color","grey"),[mr]:gt("color","red"),[ti]:gt("color","purple"),[On]:gt("color","orange"),[rn]:gt("color","black")},Jl=t=>{let e=[],n=[],r=ve(),i=[],s=0;for(;s<t.length;s++){let a=t[s],u=$l[a];if(u!==void 0)r.set(u.left,u.right);else if(a.constructor===String||a.constructor===Number){let f=Po(r);s>0||f.length>0?(e.push("%c"+a),n.push(f)):e.push(a)}else break}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){let a=t[s];a instanceof Symbol||i.push(a)}return i},Xl=So?Jl:qo,yr=(...t)=>{console.log(...Xl(t)),Zl.forEach(e=>e.print(t))};var Zl=st();var Yo=t=>Wo(yr,t);var Go=t=>({[Symbol.iterator](){return this},next:t}),Ko=(t,e)=>Go(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),ni=(t,e)=>Go(()=>{let{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});var ls=class extends xe{constructor(e,n){super(),this.doc=e,this.awareness=n}},_r=class{constructor(e,n){this.clock=e,this.len=n}},jt=class{constructor(){this.clients=new Map}},an=(t,e,n)=>e.clients.forEach((r,i)=>{let s=t.doc.store.clients.get(i);for(let a=0;a<r.length;a++){let u=r[a];_a(t,s,u.clock,u.len,n)}}),nu=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){let i=Re((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},gn=(t,e)=>{let n=t.clients.get(e.client);return n!==void 0&&nu(n,e.clock)!==null},ws=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){let i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=Ct(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},Nn=t=>{let e=new jt;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){let s=r.slice();for(let a=n+1;a<t.length;a++)oo(s,t[a].clients.get(i)||[]);e.clients.set(i,s)}});return ws(e),e},vr=(t,e,n,r)=>{de(t.clients,e,()=>[]).push(new _r(n,r))},_i=()=>new jt,bs=t=>{let e=_i();return t.clients.forEach((n,r)=>{let i=[];for(let s=0;s<n.length;s++){let a=n[s];if(a.deleted){let u=a.id.clock,f=a.length;if(s+1<n.length)for(let l=n[s+1];s+1<n.length&&l.deleted;l=n[++s+1])f+=l.length;i.push(new _r(u,f))}}i.length>0&&e.clients.set(r,i)}),e},yt=(t,e)=>{z(t.restEncoder,e.clients.size),ft(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),z(t.restEncoder,n);let i=r.length;z(t.restEncoder,i);for(let s=0;s<i;s++){let a=r[s];t.writeDsClock(a.clock),t.writeDsLen(a.len)}})},Rt=t=>{let e=new jt,n=$(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();let i=$(t.restDecoder),s=$(t.restDecoder);if(s>0){let a=de(e.clients,i,()=>[]);for(let u=0;u<s;u++)a.push(new _r(t.readDsClock(),t.readDsLen()))}}return e},Xo=(t,e,n)=>{let r=new jt,i=$(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();let a=$(t.restDecoder),u=$(t.restDecoder),f=n.clients.get(a)||[],l=me(n,a);for(let d=0;d<u;d++){let h=t.readDsClock(),p=h+t.readDsLen();if(h<l){l<p&&vr(r,a,l,p-l);let w=Ze(f,h),_=f[w];for(!_.deleted&&_.id.clock<h&&(f.splice(w+1,0,bi(e,_,h-_.id.clock)),w++);w<f.length&&(_=f[w++],_.id.clock<p);)_.deleted||(p<_.id.clock+_.length&&f.splice(w,0,bi(e,_,p-_.id.clock)),_.delete(e))}else vr(r,a,h,p-h)}}if(r.clients.size>0){let s=new Xe;return z(s.restEncoder,0),yt(s,r),s.toUint8Array()}return null},fa=(t,e)=>{if(t.clients.size!==e.clients.size)return!1;for(let[n,r]of t.clients.entries()){let i=e.clients.get(n);if(i===void 0||r.length!==i.length)return!1;for(let s=0;s<r.length;s++){let a=r[s],u=i[s];if(a.clock!==u.clock||a.len!==u.len)return!1}}return!0},pa=ss,Ut=class t extends xe{constructor({guid:e=Xr(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:u=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=pa(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new ui,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Tt(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})});let f=()=>Tt(l=>{let d=h=>{(h===void 0||h===!0)&&(this.off("sync",d),l())};this.on("sync",d)});this.on("sync",l=>{l===!1&&this.isSynced&&(this.whenSynced=f()),this.isSynced=l===void 0||l===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=f()}load(){let e=this._item;e!==null&&!this.shouldLoad&&oe(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ft(this.subdocs).map(e=>e.guid))}transact(e,n=null){return oe(this,e,n)}get(e,n=_e){let r=de(this.share,e,()=>{let s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==_e&&i!==n)if(i===_e){let s=new n;s._map=r._map,r._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=r._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,dn)}getText(e=""){return this.get(e,Fn)}getMap(e=""){return this.get(e,hn)}getXmlFragment(e=""){return this.get(e,fn)}toJSON(){let e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){ft(this.subdocs).forEach(n=>n.destroy());let e=this._item;if(e!==null){this._item=null;let n=e.content;n.doc=new t({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,oe(e.parent.doc,r=>{let i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,n){super.on(e,n)}off(e,n){super.off(e,n)}},cn=class{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return $(this.restDecoder)}readDsLen(){return $(this.restDecoder)}},Ge=class extends cn{readLeftID(){return Q($(this.restDecoder),$(this.restDecoder))}readRightID(){return Q($(this.restDecoder),$(this.restDecoder))}readClient(){return $(this.restDecoder)}readInfo(){return xt(this.restDecoder)}readString(){return qe(this.restDecoder)}readParentInfo(){return $(this.restDecoder)===1}readTypeRef(){return $(this.restDecoder)}readLen(){return $(this.restDecoder)}readAny(){return Nt(this.restDecoder)}readBuf(){return Do(ye(this.restDecoder))}readJSON(){return JSON.parse(qe(this.restDecoder))}readKey(){return qe(this.restDecoder)}},ci=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=$(this.restDecoder),this.dsCurrVal}readDsLen(){let e=$(this.restDecoder)+1;return this.dsCurrVal+=e,e}},Ye=class extends ci{constructor(e){super(e),this.keys=[],$(e),this.keyClockDecoder=new An(ye(e)),this.clientDecoder=new Zt(ye(e)),this.leftClockDecoder=new An(ye(e)),this.rightClockDecoder=new An(ye(e)),this.infoDecoder=new ar(ye(e),xt),this.stringDecoder=new $r(ye(e)),this.parentInfoDecoder=new ar(ye(e),xt),this.typeRefDecoder=new Zt(ye(e)),this.lenDecoder=new Zt(ye(e))}readLeftID(){return new At(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new At(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Nt(this.restDecoder)}readBuf(){return ye(this.restDecoder)}readJSON(){return Nt(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let n=this.stringDecoder.read();return this.keys.push(n),n}}},Ht=class{constructor(){this.restEncoder=pe()}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){z(this.restEncoder,e)}writeDsLen(e){z(this.restEncoder,e)}},wt=class extends Ht{writeLeftID(e){z(this.restEncoder,e.client),z(this.restEncoder,e.clock)}writeRightID(e){z(this.restEncoder,e.client),z(this.restEncoder,e.clock)}writeClient(e){z(this.restEncoder,e)}writeInfo(e){kt(this.restEncoder,e)}writeString(e){Fe(this.restEncoder,e)}writeParentInfo(e){z(this.restEncoder,e?1:0)}writeTypeRef(e){z(this.restEncoder,e)}writeLen(e){z(this.restEncoder,e)}writeAny(e){Ft(this.restEncoder,e)}writeBuf(e){he(this.restEncoder,e)}writeJSON(e){Fe(this.restEncoder,JSON.stringify(e))}writeKey(e){Fe(this.restEncoder,e)}},Mn=class{constructor(){this.restEncoder=pe(),this.dsCurrVal=0}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let n=e-this.dsCurrVal;this.dsCurrVal=e,z(this.restEncoder,n)}writeDsLen(e){e===0&&Be(),z(this.restEncoder,e-1),this.dsCurrVal+=e}},Xe=class extends Mn{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Dn,this.clientEncoder=new tn,this.leftClockEncoder=new Dn,this.rightClockEncoder=new Dn,this.infoEncoder=new dr(kt),this.stringEncoder=new Jr,this.parentInfoEncoder=new dr(kt),this.typeRefEncoder=new tn,this.lenEncoder=new tn}toUint8Array(){let e=pe();return z(e,0),he(e,this.keyClockEncoder.toUint8Array()),he(e,this.clientEncoder.toUint8Array()),he(e,this.leftClockEncoder.toUint8Array()),he(e,this.rightClockEncoder.toUint8Array()),he(e,ce(this.infoEncoder)),he(e,this.stringEncoder.toUint8Array()),he(e,ce(this.parentInfoEncoder)),he(e,this.typeRefEncoder.toUint8Array()),he(e,this.lenEncoder.toUint8Array()),In(e,ce(this.restEncoder)),ce(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ft(this.restEncoder,e)}writeBuf(e){he(this.restEncoder,e)}writeJSON(e){Ft(this.restEncoder,e)}writeKey(e){let n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}},ru=(t,e,n,r)=>{r=Ct(r,e[0].id.clock);let i=Ze(e,r);z(t.restEncoder,e.length-i),t.writeClient(n),z(t.restEncoder,r);let s=e[i];s.write(t,r-s.id.clock);for(let a=i+1;a<e.length;a++)e[a].write(t,0)},_s=(t,e,n)=>{let r=new Map;n.forEach((i,s)=>{me(e,s)>i&&r.set(s,i)}),Ir(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),z(t.restEncoder,r.size),ft(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{ru(t,e.clients.get(i),i,s)})},iu=(t,e)=>{let n=ve(),r=$(t.restDecoder);for(let i=0;i<r;i++){let s=$(t.restDecoder),a=new Array(s),u=t.readClient(),f=$(t.restDecoder);n.set(u,{i:0,refs:a});for(let l=0;l<s;l++){let d=t.readInfo();switch(31&d){case 0:{let h=t.readLen();a[l]=new Ie(Q(u,f),h),f+=h;break}case 10:{let h=$(t.restDecoder);a[l]=new Le(Q(u,f),h),f+=h;break}default:{let h=(d&192)===0,p=new le(Q(u,f),null,(d&128)===128?t.readLeftID():null,null,(d&64)===64?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(d&32)===32?t.readString():null,Ja(t,d));a[l]=p,f+=p.length}}}}return n},su=(t,e,n)=>{let r=[],i=ft(n.keys()).sort((w,_)=>w-_);if(i.length===0)return null;let s=()=>{if(i.length===0)return null;let w=n.get(i[i.length-1]);for(;w.refs.length===w.i;)if(i.pop(),i.length>0)w=n.get(i[i.length-1]);else return null;return w},a=s();if(a===null&&r.length===0)return null;let u=new ui,f=new Map,l=(w,_)=>{let x=f.get(w);(x==null||x>_)&&f.set(w,_)},d=a.refs[a.i++],h=new Map,p=()=>{for(let w of r){let _=w.id.client,x=n.get(_);x?(x.i--,u.clients.set(_,x.refs.slice(x.i)),n.delete(_),x.i=0,x.refs=[]):u.clients.set(_,[w]),i=i.filter(D=>D!==_)}r.length=0};for(;;){if(d.constructor!==Le){let _=de(h,d.id.client,()=>me(e,d.id.client))-d.id.clock;if(_<0)r.push(d),l(d.id.client,d.id.clock-1),p();else{let x=d.getMissing(t,e);if(x!==null){r.push(d);let D=n.get(x)||{refs:[],i:0};if(D.refs.length===D.i)l(x,me(e,x)),p();else{d=D.refs[D.i++];continue}}else(_===0||_<d.length)&&(d.integrate(t,_),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(a!==null&&a.i<a.refs.length)d=a.refs[a.i++];else{if(a=s(),a===null)break;d=a.refs[a.i++]}}if(u.clients.size>0){let w=new Xe;return _s(w,u,new Map),z(w.restEncoder,0),{missing:f,update:w.toUint8Array()}}return null},ou=(t,e)=>_s(t,e.doc.store,e.beforeState),vs=(t,e,n,r=new Ye(t))=>oe(e,i=>{i.local=!1;let s=!1,a=i.doc,u=a.store,f=iu(r,a),l=su(i,u,f),d=u.pendingStructs;if(d){for(let[p,w]of d.missing)if(w<me(u,p)){s=!0;break}if(l){for(let[p,w]of l.missing){let _=d.missing.get(p);(_==null||_>w)&&d.missing.set(p,w)}d.update=xr([d.update,l.update])}}else u.pendingStructs=l;let h=Xo(r,i,u);if(u.pendingDs){let p=new Ye(fe(u.pendingDs));$(p.restDecoder);let w=Xo(p,i,u);h&&w?u.pendingDs=xr([h,w]):u.pendingDs=h||w}else u.pendingDs=h;if(s){let p=u.pendingStructs.update;u.pendingStructs=null,Wt(i.doc,p)}},n,!1),au=(t,e,n)=>vs(t,e,n,new Ge(t)),Wt=(t,e,n,r=Ye)=>{let i=fe(e);vs(i,t,n,new r(i))},Dr=(t,e,n)=>Wt(t,e,n,Ge),cu=(t,e,n=new Map)=>{_s(t,e.store,n),yt(t,bs(e.store))},qn=(t,e=new Uint8Array([0]),n=new Xe)=>{let r=Es(e);cu(n,t,r);let i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Ts(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===wt)return ka(i.map((s,a)=>a===0?s:Da(s)));if(n.constructor===Xe)return xr(i)}return i[0]},Wn=(t,e)=>qn(t,e,new wt),ga=t=>{let e=new Map,n=$(t.restDecoder);for(let r=0;r<n;r++){let i=$(t.restDecoder),s=$(t.restDecoder);e.set(i,s)}return e},Es=t=>ga(new cn(fe(t))),Ss=(t,e)=>(z(t.restEncoder,e.size),ft(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{z(t.restEncoder,n),z(t.restEncoder,r)}),t),lu=(t,e)=>Ss(t,Ir(e.store)),uu=(t,e=new Mn)=>(t instanceof Map?Ss(e,t):lu(e,t),e.toUint8Array()),Cs=t=>uu(t,new Ht),us=class{constructor(){this.l=[]}},Zo=()=>new us,Qo=(t,e)=>t.l.push(e),ea=(t,e)=>{let n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ma=(t,e,n)=>ir(t.l,[e,n]),At=class{constructor(e,n){this.client=e,this.clock=n}},on=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Q=(t,e)=>new At(t,e),ta=(t,e)=>{z(t,e.client),z(t,e.clock)},na=t=>Q($(t),$(t)),xs=t=>{for(let[e,n]of t.doc.share.entries())if(n===t)return e;throw Be()},Er=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1},du=t=>{let e=[],n=t._start;for(;n;)e.push(n),n=n.right;console.log("Children: ",e),console.log("Children content: ",e.filter(r=>!r.deleted).map(r=>r.content))},ds=class{constructor(e,n=e.getMap("users")){let r=new Map;this.yusers=n,this.doc=e,this.clients=new Map,this.dss=r;let i=(s,a)=>{let u=s.get("ds"),f=s.get("ids"),l=d=>this.clients.set(d,a);u.observe(d=>{d.changes.added.forEach(h=>{h.content.getContent().forEach(p=>{p instanceof Uint8Array&&this.dss.set(a,Nn([this.dss.get(a)||_i(),Rt(new cn(fe(p)))]))})})}),this.dss.set(a,Nn(u.map(d=>Rt(new cn(fe(d)))))),f.observe(d=>d.changes.added.forEach(h=>h.content.getContent().forEach(l))),f.forEach(l)};n.observe(s=>{s.keysChanged.forEach(a=>i(n.get(a),a))}),n.forEach(i)}setUserMapping(e,n,r,{filter:i=()=>!0}={}){let s=this.yusers,a=s.get(r);a||(a=new hn,a.set("ids",new dn),a.set("ds",new dn),s.set(r,a)),a.get("ids").push([n]),s.observe(u=>{setTimeout(()=>{let f=s.get(r);if(f!==a){a=f,this.clients.forEach((h,p)=>{r===h&&a.get("ids").push([p])});let l=new Ht,d=this.dss.get(r);d&&(yt(l,d),a.get("ds").push([l.toUint8Array()]))}},0)}),e.on("afterTransaction",u=>{setTimeout(()=>{let f=a.get("ds"),l=u.deleteSet;if(u.local&&l.clients.size>0&&i(u,l)){let d=new Ht;yt(d,l),f.push([d.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[n,r]of this.dss.entries())if(gn(r,e))return n;return null}},Bn=class{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}},hu=t=>{let e={};return t.type&&(e.type=t.type),t.tname&&(e.tname=t.tname),t.item&&(e.item=t.item),t.assoc!=null&&(e.assoc=t.assoc),e},fu=t=>new Bn(t.type==null?null:Q(t.type.client,t.type.clock),t.tname||null,t.item==null?null:Q(t.item.client,t.item.clock),t.assoc==null?0:t.assoc),li=class{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}},pu=(t,e,n=0)=>new li(t,e,n),ri=(t,e,n)=>{let r=null,i=null;return t._item===null?i=xs(t):r=Q(t._item.id.client,t._item.id.clock),new Bn(r,i,e,n)},gu=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return ri(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return ri(t,Q(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return ri(t,r.lastId,n);r=r.right}return ri(t,null,n)},mu=(t,e)=>{let{type:n,tname:r,item:i,assoc:s}=e;if(i!==null)z(t,0),ta(t,i);else if(r!==null)kt(t,1),Fe(t,r);else if(n!==null)kt(t,2),ta(t,n);else throw Be();return hr(t,s),t},yu=t=>{let e=pe();return mu(e,t),ce(e)},wu=t=>{let e=null,n=null,r=null;switch($(t)){case 0:r=na(t);break;case 1:n=qe(t);break;case 2:e=na(t)}let i=ts(t)?cr(t):0;return new Bn(e,n,r,i)},bu=t=>wu(fe(t)),_u=(t,e)=>{let n=e.store,r=t.item,i=t.type,s=t.tname,a=t.assoc,u=null,f=0;if(r!==null){if(me(n,r.client)<=r.clock)return null;let l=ms(n,r),d=l.item;if(!(d instanceof le))return null;if(u=d.parent,u._item===null||!u._item.deleted){f=d.deleted||!d.countable?0:l.diff+(a>=0?0:1);let h=d.left;for(;h!==null;)!h.deleted&&h.countable&&(f+=h.length),h=h.left}}else{if(s!==null)u=e.get(s);else if(i!==null){if(me(n,i.client)<=i.clock)return null;let{item:l}=ms(n,i);if(l instanceof le&&l.content instanceof Qe)u=l.content.type;else return null}else throw Be();a>=0?f=u._length:f=0}return pu(u,f,t.assoc)},vu=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&on(t.item,e.item)&&on(t.type,e.type)&&t.assoc===e.assoc,Sr=class{constructor(e,n){this.ds=e,this.sv=n}},Eu=(t,e)=>{let n=t.ds.clients,r=e.ds.clients,i=t.sv,s=e.sv;if(i.size!==s.size||n.size!==r.size)return!1;for(let[a,u]of i.entries())if(s.get(a)!==u)return!1;for(let[a,u]of n.entries()){let f=r.get(a)||[];if(u.length!==f.length)return!1;for(let l=0;l<u.length;l++){let d=u[l],h=f[l];if(d.clock!==h.clock||d.len!==h.len)return!1}}return!0},ya=(t,e=new Mn)=>(yt(e,t.ds),Ss(e,t.sv),e.toUint8Array()),Su=t=>ya(t,new Ht),wa=(t,e=new ci(fe(t)))=>new Sr(Rt(e),ga(e)),Cu=t=>wa(t,new cn(fe(t))),ks=(t,e)=>new Sr(t,e),xu=ks(_i(),new Map),ku=t=>ks(bs(t.store),Ir(t.store)),sn=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!gn(e.ds,t.id),hs=(t,e)=>{let n=de(t.meta,hs,st),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<me(r,s)&&Ve(t,Q(s,i))}),an(t,e.ds,i=>{}),n.add(e))},Tu=(t,e,n=new Ut)=>{if(t.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");let{sv:r,ds:i}=e,s=new Xe;return t.transact(a=>{let u=0;r.forEach(f=>{f>0&&u++}),z(s.restEncoder,u);for(let[f,l]of r){if(l===0)continue;l<me(t.store,f)&&Ve(a,Q(f,l));let d=t.store.clients.get(f)||[],h=Ze(d,l-1);z(s.restEncoder,h+1),s.writeClient(f),z(s.restEncoder,0);for(let p=0;p<=h;p++)d[p].write(s,0)}yt(s,i)}),Wt(n,s.toUint8Array(),"snapshot"),n},Au=(t,e,n=Ye)=>{let r=new n(fe(e)),i=new bt(r,!1);for(let a=i.curr;a!==null;a=i.next())if((t.sv.get(a.id.client)||0)<a.id.clock+a.length)return!1;let s=Nn([t.ds,Rt(r)]);return fa(t.ds,s)},Ru=(t,e)=>Au(t,e,Ge),ui=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Ir=t=>{let e=new Map;return t.clients.forEach((n,r)=>{let i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},me=(t,e)=>{let n=t.clients.get(e);if(n===void 0)return 0;let r=n[n.length-1];return r.id.clock+r.length},ba=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{let r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Be()}n.push(e)},Ze=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=Re(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=Re((n+r)/2)}throw Be()},Uu=(t,e)=>{let n=t.clients.get(e.client);return n[Ze(n,e.clock)]},wr=Uu,fs=(t,e,n)=>{let r=Ze(e,n),i=e[r];return i.id.clock<n&&i instanceof le?(e.splice(r+1,0,bi(t,i,n-i.id.clock)),r+1):r},Ve=(t,e)=>{let n=t.doc.store.clients.get(e.client);return n[fs(t,n,e.clock)]},ra=(t,e,n)=>{let r=e.clients.get(n.client),i=Ze(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Ie&&r.splice(i+1,0,bi(t,s,n.clock-s.id.clock+1)),s},Du=(t,e,n)=>{let r=t.clients.get(e.id.client);r[Ze(r,e.id.clock)]=n},_a=(t,e,n,r,i)=>{if(r===0)return;let s=n+r,a=fs(t,e,n),u;do u=e[a++],s<u.id.clock+u.length&&fs(t,e,s),i(u);while(a<e.length&&e[a].id.clock<s)},di=class{constructor(e,n,r){this.doc=e,this.deleteSet=new jt,this.beforeState=Ir(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},ia=(t,e)=>e.deleteSet.clients.size===0&&!so(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(ws(e.deleteSet),ou(t,e),yt(t,e.deleteSet),!0),sa=(t,e,n)=>{let r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&de(t.changed,e,st).add(n)},oi=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof le&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}let s=e-i;return s&&t.splice(e+1-s,s),s},va=(t,e,n)=>{for(let[r,i]of t.clients.entries()){let s=e.clients.get(r);for(let a=i.length-1;a>=0;a--){let u=i[a],f=u.clock+u.len;for(let l=Ze(s,u.clock),d=s[l];l<s.length&&d.id.clock<f;d=s[++l]){let h=s[l];if(u.clock+u.len<=h.id.clock)break;h instanceof le&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},Ea=(t,e)=>{t.clients.forEach((n,r)=>{let i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){let a=n[s],u=vn(i.length-1,1+Ze(i,a.clock+a.len-1));for(let f=u,l=i[f];f>0&&l.id.clock>=a.clock;l=i[f])f-=1+oi(i,f)}})},Iu=(t,e,n)=>{va(t,e,n),Ea(t,e)},Sa=(t,e)=>{if(e<t.length){let n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{ws(s),n.afterState=Ir(n.doc.store),r.emit("beforeObserverCalls",[n,r]);let u=[];n.changed.forEach((f,l)=>u.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(n,f)})),u.push(()=>{n.changedParentTypes.forEach((f,l)=>{l._dEH.l.length>0&&(l._item===null||!l._item.deleted)&&(f=f.filter(d=>d.target._item===null||!d.target._item.deleted),f.forEach(d=>{d.currentTarget=l,d._path=null}),f.sort((d,h)=>d.path.length-h.path.length),ma(l._dEH,f,n))})}),u.push(()=>r.emit("afterTransaction",[n,r])),ir(u,[]),n._needFormattingCleanup&&ed(n)}finally{r.gc&&va(s,i,r.gcFilter),Ea(s,i),n.afterState.forEach((d,h)=>{let p=n.beforeState.get(h)||0;if(p!==d){let w=i.clients.get(h),_=Ct(Ze(w,p),1);for(let x=w.length-1;x>=_;)x-=1+oi(w,x)}});for(let d=a.length-1;d>=0;d--){let{client:h,clock:p}=a[d].id,w=i.clients.get(h),_=Ze(w,p);_+1<w.length&&oi(w,_+1)>1||_>0&&oi(w,_)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(yr(On,De,"[yjs] ",at,mr,"Changed the client-id because another client seems to be using it."),r.clientID=pa()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){let d=new wt;ia(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){let d=new Xe;ia(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}let{subdocsAdded:u,subdocsLoaded:f,subdocsRemoved:l}=n;(u.size>0||l.size>0||f.size>0)&&(u.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),l.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:f,added:u,removed:l},r,n]),l.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Sa(t,e+1)}}},oe=(t,e,n=null,r=!0)=>{let i=t._transactionCleanups,s=!1,a=null;t._transaction===null&&(s=!0,t._transaction=new di(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{a=e(t._transaction)}finally{if(s){let u=t._transaction===i[0];t._transaction=null,u&&Sa(i,0)}}return a},ps=class{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}},oa=(t,e,n)=>{an(t,n.deletions,r=>{r instanceof le&&e.scope.some(i=>Er(i,r))&&Is(r,!1)})},aa=(t,e,n)=>{let r=null,i=null,s=t.doc,a=t.scope;if(oe(s,u=>{for(;e.length>0&&r===null;){let f=s.store,l=e.pop(),d=new Set,h=[],p=!1;an(u,l.insertions,w=>{if(w instanceof le){if(w.redone!==null){let{item:_,diff:x}=ms(f,w.id);x>0&&(_=Ve(u,Q(_.id.client,_.id.clock+x))),w=_}!w.deleted&&a.some(_=>Er(_,w))&&h.push(w)}}),an(u,l.deletions,w=>{w instanceof le&&a.some(_=>Er(_,w))&&!gn(l.insertions,w.id)&&d.add(w)}),d.forEach(w=>{p=$a(u,w,d,l.insertions,t.ignoreRemoteMapChanges,t)!==null||p});for(let w=h.length-1;w>=0;w--){let _=h[w];t.deleteFilter(_)&&(_.delete(u),p=!0)}r=p?l:null}u.changed.forEach((f,l)=>{f.has(null)&&l._searchMarker&&(l._searchMarker.length=0)}),i=u},t),r!=null){let u=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:u},t])}return r},ln=class extends xe{constructor(e,{captureTimeout:n=500,captureTransaction:r=f=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:a=!1,doc:u=Jt(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=u,this.lastChange=0,this.ignoreRemoteMapChanges=a,this.captureTimeout=n,this.afterTransactionHandler=f=>{if(!this.captureTransaction(f)||!this.scope.some(D=>f.changedParentTypes.has(D))||!this.trackedOrigins.has(f.origin)&&(!f.origin||!this.trackedOrigins.has(f.origin.constructor)))return;let l=this.undoing,d=this.redoing,h=l?this.redoStack:this.undoStack;l?this.stopCapturing():d||this.clear(!1,!0);let p=new jt;f.afterState.forEach((D,y)=>{let S=f.beforeState.get(y)||0,v=D-S;v>0&&vr(p,y,S,v)});let w=We(),_=!1;if(this.lastChange>0&&w-this.lastChange<this.captureTimeout&&h.length>0&&!l&&!d){let D=h[h.length-1];D.deletions=Nn([D.deletions,f.deleteSet]),D.insertions=Nn([D.insertions,p])}else h.push(new ps(f.deleteSet,p)),_=!0;!l&&!d&&(this.lastChange=w),an(f,f.deleteSet,D=>{D instanceof le&&this.scope.some(y=>Er(y,D))&&Is(D,!0)});let x=[{stackItem:h[h.length-1],origin:f.origin,type:l?"redo":"undo",changedParentTypes:f.changedParentTypes},this];_?this.emit("stack-item-added",x):this.emit("stack-item-updated",x)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=Jt(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&this.scope.push(n)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>oa(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>oa(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=aa(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=aa(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}};function*Lu(t){let e=$(t.restDecoder);for(let n=0;n<e;n++){let r=$(t.restDecoder),i=t.readClient(),s=$(t.restDecoder);for(let a=0;a<r;a++){let u=t.readInfo();if(u===10){let f=$(t.restDecoder);yield new Le(Q(i,s),f),s+=f}else if((31&u)!==0){let f=(u&192)===0,l=new le(Q(i,s),null,(u&128)===128?t.readLeftID():null,null,(u&64)===64?t.readRightID():null,f?t.readParentInfo()?t.readString():t.readLeftID():null,f&&(u&32)===32?t.readString():null,Ja(t,u));yield l,s+=l.length}else{let f=t.readLen();yield new Ie(Q(i,s),f),s+=f}}}}var bt=class{constructor(e,n){this.gen=Lu(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Le);return this.curr}},Ou=t=>Ca(t,Ge),Ca=(t,e=Ye)=>{let n=[],r=new e(fe(t)),i=new bt(r,!1);for(let a=i.curr;a!==null;a=i.next())n.push(a);yr("Structs: ",n);let s=Rt(r);yr("DeleteSet: ",s)},Nu=t=>xa(t,Ge),xa=(t,e=Ye)=>{let n=[],r=new e(fe(t)),i=new bt(r,!1);for(let s=i.curr;s!==null;s=i.next())n.push(s);return{structs:n,ds:Rt(r)}},Cr=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},ka=t=>xr(t,Ge,wt),Ta=(t,e=Mn,n=Ye)=>{let r=new e,i=new bt(new n(fe(t)),!1),s=i.curr;if(s!==null){let a=0,u=s.id.client,f=s.id.clock!==0,l=f?0:s.id.clock+s.length;for(;s!==null;s=i.next())u!==s.id.client&&(l!==0&&(a++,z(r.restEncoder,u),z(r.restEncoder,l)),u=s.id.client,l=0,f=s.id.clock!==0),s.constructor===Le&&(f=!0),f||(l=s.id.clock+s.length);l!==0&&(a++,z(r.restEncoder,u),z(r.restEncoder,l));let d=pe();return z(d,a),No(d,r.restEncoder),r.restEncoder=d,r.toUint8Array()}else return z(r.restEncoder,0),r.toUint8Array()},Mu=t=>Ta(t,Ht,Ge),Aa=(t,e=Ye)=>{let n=new Map,r=new Map,i=new bt(new e(fe(t)),!1),s=i.curr;if(s!==null){let a=s.id.client,u=s.id.clock;for(n.set(a,u);s!==null;s=i.next())a!==s.id.client&&(r.set(a,u),n.set(s.id.client,s.id.clock),a=s.id.client),u=s.id.clock+s.length;r.set(a,u)}return{from:n,to:r}},Bu=t=>Aa(t,Ge),Fu=(t,e)=>{if(t.constructor===Ie){let{client:n,clock:r}=t.id;return new Ie(Q(n,r+e),t.length-e)}else if(t.constructor===Le){let{client:n,clock:r}=t.id;return new Le(Q(n,r+e),t.length-e)}else{let n=t,{client:r,clock:i}=n.id;return new le(Q(r,i+e),null,Q(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},xr=(t,e=Ye,n=Xe)=>{if(t.length===1)return t[0];let r=t.map(d=>new e(fe(d))),i=r.map(d=>new bt(d,!0)),s=null,a=new n,u=new Cr(a);for(;i=i.filter(p=>p.curr!==null),i.sort((p,w)=>{if(p.curr.id.client===w.curr.id.client){let _=p.curr.id.clock-w.curr.id.clock;return _===0?p.curr.constructor===w.curr.constructor?0:p.curr.constructor===Le?1:-1:_}else return w.curr.id.client-p.curr.id.client}),i.length!==0;){let d=i[0],h=d.curr.id.client;if(s!==null){let p=d.curr,w=!1;for(;p!==null&&p.id.clock+p.length<=s.struct.id.clock+s.struct.length&&p.id.client>=s.struct.id.client;)p=d.next(),w=!0;if(p===null||p.id.client!==h||w&&p.id.clock>s.struct.id.clock+s.struct.length)continue;if(h!==s.struct.id.client)Vt(u,s.struct,s.offset),s={struct:p,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<p.id.clock)if(s.struct.constructor===Le)s.struct.length=p.id.clock+p.length-s.struct.id.clock;else{Vt(u,s.struct,s.offset);let _=p.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Le(Q(h,s.struct.id.clock+s.struct.length),_),offset:0}}else{let _=s.struct.id.clock+s.struct.length-p.id.clock;_>0&&(s.struct.constructor===Le?s.struct.length-=_:p=Fu(p,_)),s.struct.mergeWith(p)||(Vt(u,s.struct,s.offset),s={struct:p,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let p=d.curr;p!==null&&p.id.client===h&&p.id.clock===s.struct.id.clock+s.struct.length&&p.constructor!==Le;p=d.next())Vt(u,s.struct,s.offset),s={struct:p,offset:0}}s!==null&&(Vt(u,s.struct,s.offset),s=null),As(u);let f=r.map(d=>Rt(d)),l=Nn(f);return yt(a,l),a.toUint8Array()},Ts=(t,e,n=Ye,r=Xe)=>{let i=Es(e),s=new r,a=new Cr(s),u=new n(fe(t)),f=new bt(u,!1);for(;f.curr;){let d=f.curr,h=d.id.client,p=i.get(h)||0;if(f.curr.constructor===Le){f.next();continue}if(d.id.clock+d.length>p)for(Vt(a,d,Ct(p-d.id.clock,0)),f.next();f.curr&&f.curr.id.client===h;)Vt(a,f.curr,0),f.next();else for(;f.curr&&f.curr.id.client===h&&f.curr.id.clock+f.curr.length<=p;)f.next()}As(a);let l=Rt(u);return yt(s,l),s.toUint8Array()},Vu=(t,e)=>Ts(t,e,Ge,wt),Ra=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:ce(t.encoder.restEncoder)}),t.encoder.restEncoder=pe(),t.written=0)},Vt=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Ra(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),z(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},As=t=>{Ra(t);let e=t.encoder.restEncoder;z(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){let r=t.clientStructs[n];z(e,r.written),In(e,r.restEncoder)}},vi=(t,e,n,r)=>{let i=new n(fe(t)),s=new bt(i,!1),a=new r,u=new Cr(a);for(let l=s.curr;l!==null;l=s.next())Vt(u,e(l),0);As(u);let f=Rt(i);return yt(a,f),a.toUint8Array()},Ua=({formatting:t=!0,subdocs:e=!0,yxml:n=!0}={})=>{let r=0,i=ve(),s=ve(),a=ve(),u=ve();return u.set(null,null),f=>{switch(f.constructor){case Ie:case Le:return f;case le:{let l=f,d=l.content;switch(d.constructor){case jn:break;case Qe:{if(n){let h=d.type;h instanceof Vn&&(h.nodeName=de(s,h.nodeName,()=>"node-"+r)),h instanceof Rr&&(h.hookName=de(s,h.hookName,()=>"hook-"+r))}break}case qt:{let h=d;h.arr=h.arr.map(()=>r);break}case pn:{let h=d;h.content=new Uint8Array([r]);break}case Hn:{let h=d;e&&(h.opts={},h.doc.guid=r+"");break}case Dt:{let h=d;h.embed={};break}case be:{let h=d;t&&(h.key=de(a,h.key,()=>r+""),h.value=de(u,h.value,()=>({i:r})));break}case Ur:{let h=d;h.arr=h.arr.map(()=>r);break}case ct:{let h=d;h.str=uo(r%10+"",h.str.length);break}default:Be()}return l.parentSub&&(l.parentSub=de(i,l.parentSub,()=>r+"")),r++,f}default:Be()}}},Pu=(t,e)=>vi(t,Ua(e),Ge,wt),ju=(t,e)=>vi(t,Ua(e),Ye,Xe),Hu=t=>vi(t,Xi,Ge,Xe),Da=t=>vi(t,Xi,Ye,wt),ca="You must not compute changes after the event-handler fired.",un=class{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=qu(this.currentTarget,this.target))}deletes(e){return gn(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ue(ca);let e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){let s=n._map.get(i),a,u;if(this.adds(s)){let f=s.left;for(;f!==null&&this.adds(f);)f=f.left;if(this.deletes(s))if(f!==null&&this.deletes(f))a="delete",u=Wr(f.content.getContent());else return;else f!==null&&this.deletes(f)?(a="update",u=Wr(f.content.getContent())):(a="add",u=void 0)}else if(this.deletes(s))a="delete",u=Wr(s.content.getContent());else return;e.set(i,{action:a,oldValue:u})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ue(ca);let n=this.target,r=st(),i=st(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let u=null,f=()=>{u&&s.push(u)};for(let l=n._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((u===null||u.delete===void 0)&&(f(),u={delete:0}),u.delete+=l.length,i.add(l)):this.adds(l)?((u===null||u.insert===void 0)&&(f(),u={insert:[]}),u.insert=u.insert.concat(l.content.getContent()),r.add(l)):((u===null||u.retain===void 0)&&(f(),u={retain:0}),u.retain+=l.length);u!==null&&u.retain===void 0&&f()}this._changes=e}return e}},qu=(t,e)=>{let n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)i.deleted||r++,i=i.right;n.unshift(r)}e=e._item.parent}return n},Ia=80,Rs=0,gs=class{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Rs++}},Wu=t=>{t.timestamp=Rs++},La=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Rs++},Yu=(t,e,n)=>{if(t.length>=Ia){let r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return La(r,e,n),r}else{let r=new gs(e,n);return t.push(r),r}},Ei=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;let n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,a)=>_n(e-s.index)<_n(e-a.index)?s:a),r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,Wu(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&_n(n.index-i)<r.parent.length/Ia?(La(n,r,i),n):Yu(t._searchMarker,r,i)},kr=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){let i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Ct(e,i.index+n))}},zu=t=>{let e=t._start,n=[];for(;e;)n.push(e),e=e.right;return n},Si=(t,e,n)=>{let r=t,i=e.changedParentTypes;for(;de(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;ma(r._eH,n,e)},_e=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Zo(),this._dEH=Zo(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw ot()}clone(){throw ot()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Qo(this._eH,e)}observeDeep(e){Qo(this._dEH,e)}unobserve(e){ea(this._eH,e)}unobserveDeep(e){ea(this._dEH,e)}toJSON(){}},Oa=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e,i=[],s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){let a=s.content.getContent();if(a.length<=e)e-=a.length;else{for(let u=e;u<a.length&&r>0;u++)i.push(a[u]),r--;e=0}}s=s.right}return i},Na=t=>{let e=[],n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){let r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},Gu=(t,e)=>{let n=[],r=t._start;for(;r!==null;){if(r.countable&&sn(r,e)){let i=r.content.getContent();for(let s=0;s<i.length;s++)n.push(i[s])}r=r.right}return n},Tr=(t,e)=>{let n=0,r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},Ma=(t,e)=>{let n=[];return Tr(t,(r,i)=>{n.push(e(r,i,t))}),n},Ku=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}let i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Ba=(t,e)=>{let n=Ei(t,e),r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},hi=(t,e,n,r)=>{let i=n,s=t.doc,a=s.clientID,u=s.store,f=n===null?e._start:n.right,l=[],d=()=>{l.length>0&&(i=new le(Q(a,me(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new qt(l)),i.integrate(t,0),l=[])};r.forEach(h=>{if(h===null)l.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(h);break;default:switch(d(),h.constructor){case Uint8Array:case ArrayBuffer:i=new le(Q(a,me(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new pn(new Uint8Array(h))),i.integrate(t,0);break;case Ut:i=new le(Q(a,me(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new Hn(h)),i.integrate(t,0);break;default:if(h instanceof _e)i=new le(Q(a,me(u,a)),i,i&&i.lastId,f,f&&f.id,e,null,new Qe(h)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},Fa=Ue("Length exceeded!"),Va=(t,e,n,r)=>{if(n>e._length)throw Fa;if(n===0)return e._searchMarker&&kr(e._searchMarker,n,r.length),hi(t,e,null,r);let i=n,s=Ei(e,n),a=e._start;for(s!==null&&(a=s.p,n-=s.index,n===0&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Ve(t,Q(a.id.client,a.id.clock+n));break}n-=a.length}return e._searchMarker&&kr(e._searchMarker,i,r.length),hi(t,e,a,r)},$u=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return hi(t,e,i,n)},Pa=(t,e,n,r)=>{if(r===0)return;let i=n,s=r,a=Ei(e,n),u=e._start;for(a!==null&&(u=a.p,n-=a.index);u!==null&&n>0;u=u.right)!u.deleted&&u.countable&&(n<u.length&&Ve(t,Q(u.id.client,u.id.clock+n)),n-=u.length);for(;r>0&&u!==null;)u.deleted||(r<u.length&&Ve(t,Q(u.id.client,u.id.clock+r)),u.delete(t),r-=u.length),u=u.right;if(r>0)throw Fa;e._searchMarker&&kr(e._searchMarker,i,-s+r)},fi=(t,e,n)=>{let r=e._map.get(n);r!==void 0&&r.delete(t)},Us=(t,e,n,r)=>{let i=e._map.get(n)||null,s=t.doc,a=s.clientID,u;if(r==null)u=new qt([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:u=new qt([r]);break;case Uint8Array:u=new pn(r);break;case Ut:u=new Hn(r);break;default:if(r instanceof _e)u=new Qe(r);else throw new Error("Unexpected content type")}new le(Q(a,me(s.store,a)),i,i&&i.lastId,null,null,e,n,u).integrate(t,0)},Ds=(t,e)=>{let n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},ja=t=>{let e={};return t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Ha=(t,e)=>{let n=t._map.get(e);return n!==void 0&&!n.deleted},Ju=(t,e,n)=>{let r=t._map.get(e)||null;for(;r!==null&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return r!==null&&sn(r,n)?r.content.getContent()[r.length-1]:void 0},ii=t=>Ko(t.entries(),e=>!e[1].deleted),pi=class extends un{constructor(e,n){super(e,n),this._transaction=n}},dn=class t extends _e{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let n=new t;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof _e?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),Si(this,e,new pi(this,e))}insert(e,n){this.doc!==null?oe(this.doc,r=>{Va(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?oe(this.doc,n=>{$u(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?oe(this.doc,r=>{Pa(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Ba(this,e)}toArray(){return Na(this)}slice(e=0,n=this.length){return Oa(this,e,n)}toJSON(){return this.map(e=>e instanceof _e?e.toJSON():e)}map(e){return Ma(this,e)}forEach(e){Tr(this,e)}[Symbol.iterator](){return Ku(this)}_write(e){e.writeTypeRef(md)}},Xu=t=>new dn,gi=class extends un{constructor(e,n,r){super(e,n),this.keysChanged=r}},hn=class t extends _e{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return this.forEach((n,r)=>{e.set(r,n instanceof _e?n.clone():n)}),e}_callObserver(e,n){Si(this,e,new gi(this,e,n))}toJSON(){let e={};return this._map.forEach((n,r)=>{if(!n.deleted){let i=n.content.getContent()[n.length-1];e[r]=i instanceof _e?i.toJSON():i}}),e}get size(){return[...ii(this._map)].length}keys(){return ni(ii(this._map),e=>e[0])}values(){return ni(ii(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ni(ii(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?oe(this.doc,n=>{fi(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?oe(this.doc,r=>{Us(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Ds(this,e)}has(e){return Ha(this,e)}clear(){this.doc!==null?oe(this.doc,e=>{this.forEach(function(n,r,i){fi(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(yd)}},Zu=t=>new hn,Pt=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Ji(t,e),Ar=class{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Be(),this.right.content.constructor){case be:this.right.deleted||Yn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}},la=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case be:e.right.deleted||Yn(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Ve(t,Q(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},si=(t,e,n)=>{let r=new Map,i=Ei(e,n);if(i){let s=new Ar(i.p.left,i.p,i.index,r);return la(t,s,n-i.index)}else{let s=new Ar(null,e._start,0,r);return la(t,s,n)}},qa=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===be&&Pt(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let i=t.doc,s=i.clientID;r.forEach((a,u)=>{let f=n.left,l=n.right,d=new le(Q(s,me(i.store,s)),f,f&&f.lastId,l,l&&l.id,e,null,new be(u,a));d.integrate(t,0),n.right=d,n.forward()})},Yn=(t,e)=>{let{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},Wa=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===be&&Pt(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Ya=(t,e,n,r)=>{let i=t.doc,s=i.clientID,a=new Map;for(let u in r){let f=r[u],l=n.currentAttributes.get(u)||null;if(!Pt(l,f)){a.set(u,l);let{left:d,right:h}=n;n.right=new le(Q(s,me(i.store,s)),d,d&&d.lastId,h,h&&h.id,e,null,new be(u,f)),n.right.integrate(t,0),n.forward()}}return a},cs=(t,e,n,r,i)=>{n.currentAttributes.forEach((p,w)=>{i[w]===void 0&&(i[w]=null)});let s=t.doc,a=s.clientID;Wa(n,i);let u=Ya(t,e,n,i),f=r.constructor===String?new ct(r):r instanceof _e?new Qe(r):new Dt(r),{left:l,right:d,index:h}=n;e._searchMarker&&kr(e._searchMarker,n.index,f.getLength()),d=new le(Q(a,me(s.store,a)),l,l&&l.lastId,d,d&&d.id,e,null,f),d.integrate(t,0),n.right=d,n.index=h,n.forward(),qa(t,e,n,u)},ua=(t,e,n,r,i)=>{let s=t.doc,a=s.clientID;Wa(n,i);let u=Ya(t,e,n,i);e:for(;n.right!==null&&(r>0||u.size>0&&(n.right.deleted||n.right.content.constructor===be));){if(!n.right.deleted)switch(n.right.content.constructor){case be:{let{key:f,value:l}=n.right.content,d=i[f];if(d!==void 0){if(Pt(d,l))u.delete(f);else{if(r===0)break e;u.set(f,l)}n.right.delete(t)}else n.currentAttributes.set(f,l);break}default:r<n.right.length&&Ve(t,Q(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let f="";for(;r>0;r--)f+=`
`;n.right=new le(Q(a,me(s.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new ct(f)),n.right.integrate(t,0),n.forward()}qa(t,e,n,u)},za=(t,e,n,r,i)=>{let s=e,a=ve();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===be){let l=s.content;a.set(l.key,l)}s=s.right}let u=0,f=!1;for(;e!==s;){if(n===e&&(f=!0),!e.deleted){let l=e.content;switch(l.constructor){case be:{let{key:d,value:h}=l,p=r.get(d)||null;(a.get(d)!==l||p===h)&&(e.delete(t),u++,!f&&(i.get(d)||null)===h&&p!==h&&(p===null?i.delete(d):i.set(d,p))),!f&&!e.deleted&&Yn(i,l);break}}}e=e.right}return u},Qu=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===be){let r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Ga=t=>{let e=0;return oe(t.doc,n=>{let r=t._start,i=t._start,s=ve(),a=Hr(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case be:Yn(a,i.content);break;default:e+=za(n,r,i,s,a),s=Hr(a),r=i;break}i=i.right}}),e},ed=t=>{let e=new Set,n=t.doc;for(let[r,i]of t.afterState.entries()){let s=t.beforeState.get(r)||0;i!==s&&_a(t,n.store.clients.get(r),s,i,a=>{!a.deleted&&a.content.constructor===be&&a.constructor!==Ie&&e.add(a.parent)})}oe(n,r=>{an(t,t.deleteSet,i=>{if(i instanceof Ie||!i.parent._hasFormatting||e.has(i.parent))return;let s=i.parent;i.content.constructor===be?e.add(s):Qu(r,i)});for(let i of e)Ga(i)})},da=(t,e,n)=>{let r=n,i=Hr(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Qe:case Dt:case ct:n<e.right.length&&Ve(t,Q(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&za(t,s,e.right,i,e.currentAttributes);let a=(e.left||e.right).parent;return a._searchMarker&&kr(a._searchMarker,e.index,-r+n),e},mi=class extends un{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,n=[];oe(e,r=>{let i=new Map,s=new Map,a=this.target._start,u=null,f={},l="",d=0,h=0,p=()=>{if(u!==null){let w=null;switch(u){case"delete":h>0&&(w={delete:h}),h=0;break;case"insert":(typeof l=="object"||l.length>0)&&(w={insert:l},i.size>0&&(w.attributes={},i.forEach((_,x)=>{_!==null&&(w.attributes[x]=_)}))),l="";break;case"retain":d>0&&(w={retain:d},wo(f)||(w.attributes=mo({},f))),d=0;break}w&&n.push(w),u=null}};for(;a!==null;){switch(a.content.constructor){case Qe:case Dt:this.adds(a)?this.deletes(a)||(p(),u="insert",l=a.content.getContent()[0],p()):this.deletes(a)?(u!=="delete"&&(p(),u="delete"),h+=1):a.deleted||(u!=="retain"&&(p(),u="retain"),d+=1);break;case ct:this.adds(a)?this.deletes(a)||(u!=="insert"&&(p(),u="insert"),l+=a.content.str):this.deletes(a)?(u!=="delete"&&(p(),u="delete"),h+=a.length):a.deleted||(u!=="retain"&&(p(),u="retain"),d+=a.length);break;case be:{let{key:w,value:_}=a.content;if(this.adds(a)){if(!this.deletes(a)){let x=i.get(w)||null;Pt(x,_)?_!==null&&a.delete(r):(u==="retain"&&p(),Pt(_,s.get(w)||null)?delete f[w]:f[w]=_)}}else if(this.deletes(a)){s.set(w,_);let x=i.get(w)||null;Pt(x,_)||(u==="retain"&&p(),f[w]=x)}else if(!a.deleted){s.set(w,_);let x=f[w];x!==void 0&&(Pt(x,_)?x!==null&&a.delete(r):(u==="retain"&&p(),_===null?delete f[w]:f[w]=_))}a.deleted||(u==="insert"&&p(),Yn(i,a.content));break}}a=a.right}for(p();n.length>0;){let w=n[n.length-1];if(w.retain!==void 0&&w.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}},Fn=class t extends _e{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);let r=new mi(this,e,n);Si(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ct&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?oe(this.doc,r=>{let i=new Ar(null,this._start,0,new Map);for(let s=0;s<e.length;s++){let a=e[s];if(a.insert!==void 0){let u=!n&&typeof a.insert=="string"&&s===e.length-1&&i.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof u!="string"||u.length>0)&&cs(r,this,i,u,a.attributes||{})}else a.retain!==void 0?ua(r,this,i,a.retain,a.attributes||{}):a.delete!==void 0&&da(r,i,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){let i=[],s=new Map,a=this.doc,u="",f=this._start;function l(){if(u.length>0){let h={},p=!1;s.forEach((_,x)=>{p=!0,h[x]=_});let w={insert:u};p&&(w.attributes=h),i.push(w),u=""}}let d=()=>{for(;f!==null;){if(sn(f,e)||n!==void 0&&sn(f,n))switch(f.content.constructor){case ct:{let h=s.get("ychange");e!==void 0&&!sn(f,e)?(h===void 0||h.user!==f.id.client||h.type!=="removed")&&(l(),s.set("ychange",r?r("removed",f.id):{type:"removed"})):n!==void 0&&!sn(f,n)?(h===void 0||h.user!==f.id.client||h.type!=="added")&&(l(),s.set("ychange",r?r("added",f.id):{type:"added"})):h!==void 0&&(l(),s.delete("ychange")),u+=f.content.str;break}case Qe:case Dt:{l();let h={insert:f.content.getContent()[0]};if(s.size>0){let p={};h.attributes=p,s.forEach((w,_)=>{p[_]=w})}i.push(h);break}case be:sn(f,e)&&(l(),Yn(s,f.content));break}f=f.right}l()};return e||n?oe(a,h=>{e&&hs(h,e),n&&hs(h,n),d()},"cleanup"):d(),i}insert(e,n,r){if(n.length<=0)return;let i=this.doc;i!==null?oe(i,s=>{let a=si(s,this,e);r||(r={},a.currentAttributes.forEach((u,f)=>{r[f]=u})),cs(s,this,a,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r={}){let i=this.doc;i!==null?oe(i,s=>{let a=si(s,this,e);cs(s,this,a,n,r)}):this._pending.push(()=>this.insertEmbed(e,n,r))}delete(e,n){if(n===0)return;let r=this.doc;r!==null?oe(r,i=>{da(i,si(i,this,e),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;let i=this.doc;i!==null?oe(i,s=>{let a=si(s,this,e);a.right!==null&&ua(s,this,a,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?oe(this.doc,n=>{fi(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?oe(this.doc,r=>{Us(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Ds(this,e)}getAttributes(){return ja(this)}_write(e){e.writeTypeRef(wd)}},td=t=>new Fn,br=class{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Vn||n.constructor===fn)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},fn=class t extends _e{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof _e?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new br(this,e)}querySelector(e){e=e.toUpperCase();let r=new br(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),ft(new br(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Si(this,e,new yi(this,n,e))}toString(){return Ma(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){let i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Tr(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?oe(this.doc,r=>{Va(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)oe(this.doc,r=>{let i=e&&e instanceof _e?e._item:e;hi(r,this,i,n)});else{let r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Ue("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?oe(this.doc,r=>{Pa(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Na(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ba(this,e)}slice(e=0,n=this.length){return Oa(this,e,n)}forEach(e){Tr(this,e)}_write(e){e.writeTypeRef(_d)}},nd=t=>new fn,Vn=class t extends fn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new t(this.nodeName)}clone(){let e=new t(this.nodeName),n=this.getAttributes();return yo(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof _e?r.clone():r)),e}toString(){let e=this.getAttributes(),n=[],r=[];for(let u in e)r.push(u);r.sort();let i=r.length;for(let u=0;u<i;u++){let f=r[u];n.push(f+'="'+e[f]+'"')}let s=this.nodeName.toLocaleLowerCase(),a=n.length>0?" "+n.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?oe(this.doc,n=>{fi(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?oe(this.doc,r=>{Us(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Ds(this,e)}hasAttribute(e){return Ha(this,e)}getAttributes(){return ja(this)}toDOM(e=document,n={},r){let i=e.createElement(this.nodeName),s=this.getAttributes();for(let a in s){let u=s[a];typeof u=="string"&&i.setAttribute(a,u)}return Tr(this,a=>{i.appendChild(a.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(bd),e.writeKey(this.nodeName)}},rd=t=>new Vn(t.readKey()),yi=class extends un{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},Rr=class t extends hn{constructor(e){super(),this.hookName=e}_copy(){return new t(this.hookName)}clone(){let e=new t(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){let i=n[this.hookName],s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(vd),e.writeKey(this.hookName)}},id=t=>new Rr(t.readKey()),wi=class t extends Fn{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){let i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{let n=[];for(let i in e.attributes){let s=[];for(let a in e.attributes[i])s.push({key:a,value:e.attributes[i][a]});s.sort((a,u)=>a.key<u.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){let s=n[i];r+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){let u=s.attrs[a];r+=` ${u.key}="${u.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Ed)}},sd=t=>new wi,Pn=class{constructor(e,n){this.id=e,this.length=n}get deleted(){throw ot()}mergeWith(e){return!1}write(e,n,r){throw ot()}integrate(e,n){throw ot()}},od=0,Ie=class extends Pn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),ba(e.doc.store,this)}write(e,n){e.writeInfo(od),e.writeLen(this.length-n)}getMissing(e,n){return null}},pn=class t{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t(this.content)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}},ad=t=>new pn(t.readBuf()),jn=class t{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.len)}splice(e){let n=new t(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){vr(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}},cd=t=>new jn(t.readLen()),Ka=(t,e)=>new Ut({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),Hn=class t{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new t(Ka(this.doc.guid,this.opts))}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},ld=t=>new Hn(Ka(t.readString(),t.readAny())),Dt=class t{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new t(this.embed)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}},ud=t=>new Dt(t.readJSON()),be=class t{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.key,this.value)}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){let r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},dd=t=>new be(t.readKey(),t.readJSON()),Ur=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}},hd=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++){let i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Ur(n)},qt=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let s=this.arr[i];e.writeAny(s)}}getRef(){return 8}},fd=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new qt(n)},ct=class t{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t(this.str)}splice(e){let n=new t(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}},pd=t=>new ct(t.readString()),gd=[Xu,Zu,td,rd,nd,id,sd],md=0,yd=1,wd=2,bd=3,_d=4,vd=5,Ed=6,Qe=class t{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new t(this.type._copy())}splice(e){throw ot()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}},Sd=t=>new Qe(gd[t.readTypeRef()](t)),ms=(t,e)=>{let n=e,r=0,i;do r>0&&(n=Q(n.client,n.clock+r)),i=wr(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof le);return{item:i,diff:r}},Is=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},bi=(t,e,n)=>{let{client:r,clock:i}=e.id,s=new le(Q(r,i+n),e,Q(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Q(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},ha=(t,e)=>ao(t,n=>gn(n.deletions,e)),$a=(t,e,n,r,i,s)=>{let a=t.doc,u=a.store,f=a.clientID,l=e.redone;if(l!==null)return Ve(t,l);let d=e.parent._item,h=null,p;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||$a(t,d,n,r,i,s)===null))return null;for(;d.redone!==null;)d=Ve(t,d.redone)}let w=d===null?e.parent:d.content.type;if(e.parentSub===null){for(h=e.left,p=e;h!==null;){let y=h;for(;y!==null&&y.parent._item!==d;)y=y.redone===null?null:Ve(t,y.redone);if(y!==null&&y.parent._item===d){h=y;break}h=h.left}for(;p!==null;){let y=p;for(;y!==null&&y.parent._item!==d;)y=y.redone===null?null:Ve(t,y.redone);if(y!==null&&y.parent._item===d){p=y;break}p=p.right}}else if(p=null,e.right&&!i){for(h=e;h!==null&&h.right!==null&&(h.right.redone||gn(r,h.right.id)||ha(s.undoStack,h.right.id)||ha(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Ve(t,h.redone);if(h&&h.right!==null)return null}else h=w._map.get(e.parentSub)||null;let _=me(u,f),x=Q(f,_),D=new le(x,h,h&&h.lastId,p,p&&p.id,w,e.parentSub,e.content.copy());return e.redone=x,Is(D,!0),D.integrate(t,0),D},le=class t extends Pn{constructor(e,n,r,i,s,a,u,f){super(e,f.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=a,this.parentSub=u,this.redone=null,this.content=f,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=me(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=me(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===At&&this.id.client!==this.parent.client&&this.parent.clock>=me(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ra(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ve(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Ie||this.right&&this.right.constructor===Ie)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===t&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===At){let r=wr(n,this.parent);r.constructor===Ie?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=ra(e,e.doc.store,Q(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let s=new Set,a=new Set;for(;i!==null&&i!==this.right;){if(a.add(i),s.add(i),on(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(on(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&a.has(wr(e.doc.store,i.origin)))s.has(wr(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ba(e.doc.store,this),this.content.integrate(e,this),sa(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ie(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Q(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&on(e.origin,this.lastId)&&this.right===e&&on(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),vr(e.deleteSet,this.id.client,this.id.clock,this.length),sa(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Be();this.content.gc(e),n?Du(e,this,new Ie(this.id,this.length)):this.content=new jn(this.length)}write(e,n){let r=n>0?Q(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(s===null?0:32);if(e.writeInfo(a),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){let u=this.parent;if(u._item!==void 0){let f=u._item;if(f===null){let l=xs(u);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(f.id)}else u.constructor===String?(e.writeParentInfo(!0),e.writeString(u)):u.constructor===At?(e.writeParentInfo(!1),e.writeLeftID(u)):Be();s!==null&&e.writeString(s)}this.content.write(e,n)}},Ja=(t,e)=>Cd[e&31](t),Cd=[()=>{Be()},cd,hd,ad,pd,ud,dd,Sd,fd,ld,()=>{Be()}],xd=10,Le=class extends Pn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Be()}write(e,n){e.writeInfo(xd),z(e.restEncoder,this.length-n)}getMissing(e,n){return null}},Xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Za="__ $YJS$ __";Xa[Za]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Xa[Za]=!0;var Ms=bn(ec()),xi=bn(Ls());var nc=bn(Ls());function kd(t){return JSON.parse(JSON.stringify(t))}var Os;(t=>{function e(s={},a={},u=!1){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let f=kd(a);u||(f=Object.keys(f).reduce((l,d)=>((f[d]!==null||f[d]!==void 0)&&(l[d]=f[d]),l),{}));for(let l in s)s[l]!==void 0&&a[l]===void 0&&(f[l]=s[l]);return Object.keys(f).length>0?f:void 0}t.compose=e;function n(s={},a={}){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let u=Object.keys(s).concat(Object.keys(a)).reduce((f,l)=>((0,nc.default)(s[l],a[l])||(f[l]=a[l]===void 0?null:a[l]),f),{});return Object.keys(u).length>0?u:void 0}t.diff=n;function r(s={},a={}){s=s||{};let u=Object.keys(a).reduce((f,l)=>(a[l]!==s[l]&&s[l]!==void 0&&(f[l]=a[l]),f),{});return Object.keys(s).reduce((f,l)=>(s[l]!==a[l]&&a[l]===void 0&&(f[l]=null),f),u)}t.invert=r;function i(s,a,u=!1){if(typeof s!="object")return a;if(typeof a!="object")return;if(!u)return a;let f=Object.keys(a).reduce((l,d)=>(s[d]===void 0&&(l[d]=a[d]),l),{});return Object.keys(f).length>0?f:void 0}t.transform=i})(Os||(Os={}));var mn=Os;var Ns;(t=>{function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Ns||(Ns={}));var et=Ns;var Oe=class{ops;index;offset;constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let n=this.ops[this.index];if(n){let r=this.offset,i=et.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};let s={};return n.attributes&&(s.attributes=n.attributes),typeof n.retain=="number"?s.retain=e:typeof n.retain=="object"&&n.retain!==null?s.retain=n.retain:typeof n.insert=="string"?s.insert=n.insert.substr(r,e):s.insert=n.insert,s}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?et.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index)}else return[];let e=this.offset,n=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(i)}};function Td(t){return JSON.parse(JSON.stringify(t))}var Ad="\0",rc=(t,e)=>{if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]},Bs=class t{static Op=et;static OpIterator=Oe;static AttributeMap=mn;static handlers={};static registerEmbed(e,n){this.handlers[e]=n}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let n=this.handlers[e];if(!n)throw new Error(`no handlers for embed type "${e}"`);return n}ops;constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}insert(e,n){let r={};return typeof e=="string"&&e.length===0?this:(r.insert=e,n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,n){if(typeof e=="number"&&e<=0)return this;let r={retain:e};return n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r)}push(e){let n=this.ops.length,r=this.ops[n-1];if(e=Td(e),typeof r=="object"){if(typeof e.delete=="number"&&typeof r.delete=="number")return this.ops[n-1]={delete:r.delete+e.delete},this;if(typeof r.delete=="number"&&e.insert!==null&&e.insert!==void 0&&(n-=1,r=this.ops[n-1],typeof r!="object"))return this.ops.unshift(e),this;if((0,xi.default)(e.attributes,r.attributes)){if(typeof e.insert=="string"&&typeof r.insert=="string")return this.ops[n-1]={insert:r.insert+e.insert},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof r.retain=="number")return this.ops[n-1]={retain:r.retain+e.retain},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this}}return n===this.ops.length?this.ops.push(e):this.ops.splice(n,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let n=[],r=[];return this.forEach(i=>{(e(i)?n:r).push(i)}),[n,r]}reduce(e,n){return this.ops.reduce(e,n)}changeLength(){return this.reduce((e,n)=>n.insert?e+et.length(n):n.delete?e-n.delete:e,0)}length(){return this.reduce((e,n)=>e+et.length(n),0)}slice(e=0,n=1/0){let r=[],i=new Oe(this.ops),s=0;for(;s<n&&i.hasNext();){let a;s<e?a=i.next(e-s):(a=i.next(n-s),r.push(a)),s+=et.length(a)}return new t(r)}compose(e){let n=new Oe(this.ops),r=new Oe(e.ops),i=[],s=r.peek();if(s!=null&&typeof s.retain=="number"&&(s.attributes===null||s.attributes===void 0)){let u=s.retain;for(;n.peekType()==="insert"&&n.peekLength()<=u;)u-=n.peekLength(),i.push(n.next());s.retain-u>0&&r.next(s.retain-u)}let a=new t(i);for(;n.hasNext()||r.hasNext();)if(r.peekType()==="insert")a.push(r.next());else if(n.peekType()==="delete")a.push(n.next());else{let u=Math.min(n.peekLength(),r.peekLength()),f=n.next(u),l=r.next(u);if(l.retain){let d={};if(typeof f.retain=="number")d.retain=typeof l.retain=="number"?u:l.retain;else if(typeof l.retain=="number")f.retain===null||f.retain===void 0?d.insert=f.insert:d.retain=f.retain;else{let p=f.retain===null||f.retain===void 0?"insert":"retain",[w,_,x]=rc(f[p],l.retain),D=t.getHandler(w);d[p]={[w]:D.compose(_,x,p==="retain")}}let h=mn.compose(f.attributes,l.attributes,typeof f.retain=="number");if(h&&(d.attributes=h),a.push(d),!r.hasNext()&&(0,xi.default)(a.ops[a.ops.length-1],d)){let p=new t(n.rest());return a.concat(p).chop()}}else typeof l.delete=="number"&&(typeof f.retain=="number"||typeof f.retain=="object"&&f.retain!==null)&&a.push(l)}return a.chop()}concat(e){let n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n}diff(e){if(this.ops===e.ops)return new t;let n=this.deltasToStrings(e),r=(0,Ms.diffChars)(n[0],n[1]),i=new Oe(this.ops),s=new Oe(e.ops);return this.convertChangesToDelta(r,i,s).chop()}eachLine(e,n=`
`){let r=new Oe(this.ops),i=new t,s=0;for(;r.hasNext();){if(r.peekType()!=="insert")return;let a=r.peek(),u=et.length(a)-r.peekLength(),f=typeof a.insert=="string"?a.insert.indexOf(n,u)-u:-1;if(f<0)i.push(r.next());else if(f>0)i.push(r.next(f));else{if(e(i,r.next(1).attributes||{},s)===!1)return;s+=1,i=new t}}i.length()>0&&e(i,{},s)}invert(e){let n=new t;return this.reduce((r,i)=>{if(i.insert)n.delete(et.length(i));else{if(typeof i.retain=="number"&&(i.attributes===null||i.attributes===void 0))return n.retain(i.retain),r+i.retain;if(i.delete||typeof i.retain=="number"){let s=i.delete||i.retain;return e.slice(r,r+s).forEach(u=>{i.delete?n.push(u):i.retain&&i.attributes&&n.retain(et.length(u),mn.invert(i.attributes,u.attributes))}),r+s}else if(typeof i.retain=="object"&&i.retain!==null){let s=e.slice(r,r+1),a=new Oe(s.ops).next(),[u,f,l]=rc(i.retain,a.insert),d=t.getHandler(u);return n.retain({[u]:d.invert(f,l)},mn.invert(i.attributes,a.attributes)),r+1}}return r},0),n.chop()}transform(e,n=!1){if(n=!!n,typeof e=="number")return this.transformPosition(e,n);let r=e,i=new Oe(this.ops),s=new Oe(r.ops),a=new t;for(;i.hasNext()||s.hasNext();)if(i.peekType()==="insert"&&(n||s.peekType()!=="insert"))a.retain(et.length(i.next()));else if(s.peekType()==="insert")a.push(s.next());else{let u=Math.min(i.peekLength(),s.peekLength()),f=i.next(u),l=s.next(u);if(f.delete)continue;if(l.delete)a.push(l);else{let d=f.retain,h=l.retain,p=typeof h=="object"&&h!==null?h:u;if(typeof d=="object"&&d!==null&&typeof h=="object"&&h!==null){let w=Object.keys(d)[0];if(w===Object.keys(h)[0]){let _=t.getHandler(w);_&&(p={[w]:_.transform(d[w],h[w],n)})}}a.retain(p,mn.transform(f.attributes,l.attributes,n))}}return a.chop()}transformPosition(e,n=!1){n=!!n;let r=new Oe(this.ops),i=0;for(;r.hasNext()&&i<=e;){let s=r.peekLength(),a=r.peekType();if(r.next(),a==="delete"){e-=Math.min(s,e-i);continue}else a==="insert"&&(i<e||!n)&&(e+=s);i+=s}return e}diffWithCursor(e,n){if(this.ops===e.ops)return new t;if(n===null)return this.diff(e);let r=this.deltasToStrings(e),i=(0,Ms.diffChars)(r[0],r[1]),s=0,a=[];for(let d=0;d<i.length;d++){let h=i[d],p=s,w=s+(h.count??0),_=n>p&&n<=w,x=!h.added&&!h.removed,D=h.removed&&!h.added,y=i[d+1],S=y&&y.added&&!y.removed;if(x&&_&&S){let v=this.tryMoveInsertionToCursor(h,y,n,p);if(v){a.push(...v),d++,s=w;continue}}if(D){let v=this.tryMoveDeletionToCursor(h,a,n,s);if(v){a.pop(),a.push(...v),s+=h.count??0;continue}}a.push(h),h.added||(s+=h.count??0)}i=a;let u=new Oe(this.ops),f=new Oe(e.ops);return this.convertChangesToDelta(i,u,f).chop()}tryMoveInsertionToCursor(e,n,r,i){let s=n.value,a=s.length,u=r-i-a;if(!(e.value.substring(u,u+s.length)===s))return null;let d=e.value.substring(0,u),h=e.value.substring(u),p=[];return d.length>0&&p.push({value:d,count:d.length,added:!1,removed:!1}),p.push(n),h.length>0&&p.push({value:h,count:h.length,added:!1,removed:!1}),p}tryMoveDeletionToCursor(e,n,r,i){let s=n[n.length-1];if(!s||s.added||s.removed)return null;let a=i-(s.count??0),u=i;if(r<a||r>=u)return null;let f=e.value,l=r-a;if(!(s.value.substring(l,l+f.length)===f))return null;let p=s.value.substring(0,l),w=s.value.substring(l),_=e.count??0,x=w.substring(_),D=[];return p.length>0&&D.push({value:p,count:p.length,added:!1,removed:!1}),D.push(e),x.length>0&&D.push({value:x,count:x.length,added:!1,removed:!1}),D}deltasToStrings(e){return[this,e].map(n=>n.map(r=>{if(r.insert!==null||r.insert!==void 0)return typeof r.insert=="string"?r.insert:Ad;let i=n===e?"on":"with";throw new Error("diff() called "+i+" non-document")}).join(""))}convertChangesToDelta(e,n,r){let i=new t;return e.forEach(s=>{let a=s.count??0;for(;a>0;){let u=0;if(s.added)u=Math.min(r.peekLength(),a),i.push(r.next(u));else if(s.removed)u=Math.min(a,n.peekLength()),n.next(u),i.delete(u);else{u=Math.min(n.peekLength(),r.peekLength(),a);let f=n.next(u),l=r.next(u);(0,xi.default)(f.insert,l.insert)?i.retain(u,mn.diff(f.attributes,l.attributes)):i.push(l).delete(u)}a-=u}}),i}},ic=Bs;var ki="fromPersistence",Ti="document",sc="state",oc="version",Ai="gutenberg",Lr="syncManager",Or="_crdt_document";function Fs(t){let e=new Map(Object.entries(t)),n=new Ut({meta:e});return n.getMap(sc).set(oc,1),n}function ac(t){return JSON.stringify({document:Un(qn(t))})}function cc(t){try{let{document:e}=JSON.parse(t),n=new Map;n.set(ki,!0);let r=Fs({meta:n}),i=Bt(e);return Wt(r,i),r.clientID=Math.floor(Math.random()*1e9),r}catch{return null}}function lc(t){let e=t.meta?.[Or];return e?cc(e):null}function uc(t){return{[Or]:ac(t)}}var Zc=bn(hc());var yn=t=>Tt((e,n)=>{t.onerror=r=>n(new Error(r.target.error)),t.onsuccess=r=>e(r.target.result)}),fc=(t,e)=>Tt((n,r)=>{let i=indexedDB.open(t);i.onupgradeneeded=s=>e(s.target.result),i.onerror=s=>r(Ue(s.target.error)),i.onsuccess=s=>{let a=s.target.result;a.onversionchange=()=>{a.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>a.close()),n(a)}}),pc=t=>yn(indexedDB.deleteDatabase(t)),gc=(t,e)=>e.forEach(n=>t.createObjectStore.apply(t,n)),zn=(t,e,n="readwrite")=>{let r=t.transaction(e,n);return e.map(i=>Ld(r,i))},Vs=(t,e)=>yn(t.count(e)),mc=(t,e)=>yn(t.get(e)),Ps=(t,e)=>yn(t.delete(e)),yc=(t,e,n)=>yn(t.put(e,n));var Ri=(t,e)=>yn(t.add(e)),wc=(t,e,n)=>yn(t.getAll(e,n));var Ud=(t,e,n)=>{let r=null;return Id(t,e,i=>(r=i,!1),n).then(()=>r)},bc=(t,e=null)=>Ud(t,e,"prev");var Dd=(t,e)=>Tt((n,r)=>{t.onerror=r,t.onsuccess=async i=>{let s=i.target.result;if(s===null||await e(s)===!1)return n();s.continue()}});var Id=(t,e,n,r="next")=>Dd(t.openKeyCursor(e,r),i=>n(i.key)),Ld=(t,e)=>t.objectStore(e);var _c=(t,e)=>IDBKeyRange.upperBound(t,e),vc=(t,e)=>IDBKeyRange.lowerBound(t,e);var js="custom",Ec="updates",Sc=500,Cc=(t,e=()=>{},n=()=>{})=>{let[r]=zn(t.db,[Ec]);return wc(r,vc(t._dbref,!1)).then(i=>{t._destroyed||(e(r),oe(t.doc,()=>{i.forEach(s=>Dr(t.doc,s))},t,!1),n(r))}).then(()=>bc(r).then(i=>{t._dbref=i+1})).then(()=>Vs(r).then(i=>{t._dbsize=i})).then(()=>r)},Nd=(t,e=!0)=>Cc(t).then(n=>{(e||t._dbsize>=Sc)&&Ri(n,Wn(t.doc)).then(()=>Ps(n,_c(t._dbref,!0))).then(()=>Vs(n).then(r=>{t._dbsize=r}))});var Ui=class extends xe{constructor(e,n){super(),this.doc=n,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=fc(e,r=>gc(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=Tt(r=>this.on("synced",()=>r(this))),this._db.then(r=>{this.db=r,Cc(this,a=>Ri(a,Wn(n)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,i)=>{if(this.db&&i!==this){let[s]=zn(this.db,[Ec]);Ri(s,r),++this._dbsize>=Sc&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{Nd(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{pc(this.name)})}get(e){return this._db.then(n=>{let[r]=zn(n,[js],"readonly");return mc(r,e)})}set(e,n){return this._db.then(r=>{let[i]=zn(r,[js]);return yc(i,n,e)})}del(e){return this._db.then(n=>{let[r]=zn(n,[js]);return Ps(r,e)})}};function xc(t,e,n){let r=`${t}-${e}`,i=new Ui(r,n);return Promise.resolve({destroy:()=>i.destroy()})}var Md=1200,Bd=2500,Di=3e4,Hs=t=>{if(t.shouldConnect&&t.ws===null){let e=new WebSocket(t.url),n=t.binaryType,r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=a=>{t.lastMessageReceived=We();let u=a.data,f=typeof u=="string"?JSON.parse(u):u;f&&f.type==="pong"&&(clearTimeout(r),r=setTimeout(s,Di/2)),t.emit("message",[f,t])};let i=a=>{t.ws!==null&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:a},t])):t.unsuccessfulReconnects++,setTimeout(Hs,vn(lo(t.unsuccessfulReconnects+1)*Md,Bd),t)),clearTimeout(r)},s=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>i(null),e.onerror=a=>i(a),e.onopen=()=>{t.lastMessageReceived=We(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(s,Di/2)}}},Ii=class extends xe{constructor(e,{binaryType:n}={}){super(),this.url=e,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Di<We()-this.lastMessageReceived&&this.ws.close()},Di/2),Hs(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Hs(this)}};var kc=new Map,qs=class{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:Bt(n.newValue||"")}),fo(this._onChange)}postMessage(e){zr.setItem(this.room,Un(Uo(e)))}close(){po(this._onChange)}},Vd=typeof BroadcastChannel>"u"?qs:BroadcastChannel,Ws=t=>de(kc,t,()=>{let e=st(),n=new Vd(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),Tc=(t,e)=>(Ws(t).subs.add(e),e),Ac=(t,e)=>{let n=Ws(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),kc.delete(t)),r},Rc=(t,e,n=null)=>{let r=Ws(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))};var Uc=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}};var Hc=bn(Ic());var Li=0,Oi=1,Lc=2,zs=(t,e)=>{z(t,Li);let n=Cs(e);he(t,n)},Gs=(t,e,n)=>{z(t,Oi),he(t,Wn(e,n))},jd=(t,e,n)=>Gs(e,n,ye(t)),Oc=(t,e,n)=>{try{Dr(e,ye(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Nc=(t,e)=>{z(t,Lc),he(t,e)},Hd=Oc,Mc=(t,e,n,r)=>{let i=$(t);switch(i){case Li:jd(t,e,n);break;case Oi:Oc(t,n,r);break;case Lc:Hd(t,n,r);break;default:throw new Error("Unknown message type")}return i};var Ks=3e4,Gn=class extends xe{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let n=We();this.getLocalState()!==null&&Ks/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&Ks<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&Ni(this,r,"timeout")},Re(Ks/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:We()});let a=[],u=[],f=[],l=[];e===null?l.push(n):s==null?e!=null&&a.push(n):(u.push(n),xn(s,e)||f.push(n)),(a.length>0||f.length>0||l.length>0)&&this.emit("change",[{added:a,updated:f,removed:l},"local"]),this.emit("update",[{added:a,updated:u,removed:l},"local"])}setLocalStateField(e,n){let r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}},Ni=(t,e,n)=>{let r=[];for(let i=0;i<e.length;i++){let s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){let a=t.meta.get(s);t.meta.set(s,{clock:a.clock+1,lastUpdated:We()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Nr=(t,e,n=t.states)=>{let r=e.length,i=pe();z(i,r);for(let s=0;s<r;s++){let a=e[s],u=n.get(a)||null,f=t.meta.get(a).clock;z(i,a),z(i,f),Fe(i,JSON.stringify(u))}return ce(i)};var Bc=(t,e,n)=>{let r=fe(e),i=We(),s=[],a=[],u=[],f=[],l=$(r);for(let d=0;d<l;d++){let h=$(r),p=$(r),w=JSON.parse(qe(r)),_=t.meta.get(h),x=t.states.get(h),D=_===void 0?0:_.clock;(D<p||D===p&&w===null&&t.states.has(h))&&(w===null?h===t.clientID&&t.getLocalState()!=null?p++:t.states.delete(h):t.states.set(h,w),t.meta.set(h,{clock:p,lastUpdated:i}),_===void 0&&w!==null?s.push(h):_!==void 0&&w===null?f.push(h):w!==null&&(xn(w,x)||u.push(h),a.push(h)))}(s.length>0||u.length>0||f.length>0)&&t.emit("change",[{added:s,updated:u,removed:f},n]),(s.length>0||a.length>0||f.length>0)&&t.emit("update",[{added:s,updated:a,removed:f},n])};var Fc=(t,e)=>{let n=nr(t).buffer,r=nr(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},$s=(t,e)=>{if(!e)return pr(t);let n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then(r=>{let i=pe();return Fe(i,"AES-GCM"),he(i,n),he(i,new Uint8Array(r)),ce(i)})},Vc=(t,e)=>{let n=pe();return Ft(n,t),$s(ce(n),e)},Js=(t,e)=>{if(!e)return pr(t);let n=fe(t);qe(n)!=="AES-GCM"&&Vo(Ue("Unknown encryption algorithm"));let i=ye(n),s=ye(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,s).then(a=>new Uint8Array(a))},Mi=(t,e)=>Js(t,e).then(n=>Nt(fe(new Uint8Array(n))));var Ee=Yo("y-webrtc"),Kn=0,qc=3,Mr=1,eo=4,$n=new Map,lt=new Map,Wc=t=>{let e=!0;t.webrtcConns.forEach(n=>{n.synced||(e=!1)}),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),Ee("synced ",De,t.name,at," with all peers"))},Yc=(t,e,n)=>{let r=fe(e),i=pe(),s=$(r);if(t===void 0)return null;let a=t.awareness,u=t.doc,f=!1;switch(s){case Kn:{z(i,Kn);let l=Mc(r,i,u,t);l===Oi&&!t.synced&&n(),l===Li&&(f=!0);break}case qc:z(i,Mr),he(i,Nr(a,Array.from(a.getStates().keys()))),f=!0;break;case Mr:Bc(a,ye(r),t);break;case eo:{let l=xt(r)===1,d=qe(r);if(d!==t.peerId&&(t.bcConns.has(d)&&!l||!t.bcConns.has(d)&&l)){let h=[],p=[];l?(t.bcConns.add(d),p.push(d)):(t.bcConns.delete(d),h.push(d)),t.provider.emit("peers",[{added:p,removed:h,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),zc(t)}break}default:return console.error("Unable to compute message"),i}return f?i:null},Yd=(t,e)=>{let n=t.room;return Ee("received message from ",De,t.remotePeerId,Ln," (",n.name,")",at,rn),Yc(n,e,()=>{t.synced=!0,Ee("synced ",De,n.name,at," with ",De,t.remotePeerId),Wc(n)})},Xs=(t,e)=>{Ee("send message to ",De,t.remotePeerId,at,Ln," (",t.room.name,")",rn);try{t.peer.send(ce(e))}catch{}},zd=(t,e)=>{Ee("broadcast message in ",De,t.name,at),t.webrtcConns.forEach(n=>{try{n.peer.send(e)}catch{}})},wn=class{constructor(e,n,r,i){Ee("establishing connection to ",De,r),this.room=i,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Hc.default({initiator:n,...i.provider.peerOpts}),this.peer.on("signal",s=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),Fr(e,i,{to:r,from:i.peerId,type:"signal",token:this.glareToken,signal:s})}),this.peer.on("connect",()=>{Ee("connected to ",De,r),this.connected=!0;let a=i.provider.doc,u=i.awareness,f=pe();z(f,Kn),zs(f,a),Xs(this,f);let l=u.getStates();if(l.size>0){let d=pe();z(d,Mr),he(d,Nr(u,Array.from(l.keys()))),Xs(this,d)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),Wc(i),this.peer.destroy(),Ee("closed connection to ",De,r),Zs(i)}),this.peer.on("error",s=>{Ee("Error in connection to ",De,r,": ",s),Zs(i)}),this.peer.on("data",s=>{let a=Yd(this,s);a!==null&&Xs(this,a)})}destroy(){this.peer.destroy()}},zt=(t,e)=>$s(e,t.key).then(n=>t.mux(()=>Rc(t.name,n))),jc=(t,e)=>{t.bcconnected&&zt(t,e),zd(t,e)},Zs=t=>{$n.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&Fr(e,t,{type:"announce",from:t.peerId}))})},zc=t=>{if(t.provider.filterBcConns){let e=pe();z(e,eo),kt(e,1),Fe(e,t.peerId),zt(t,ce(e))}},Qs=class{constructor(e,n,r,i){this.peerId=Xr(),this.doc=e,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Uc(),this.bcconnected=!1,this._bcSubscriber=s=>Js(new Uint8Array(s),i).then(a=>this.mux(()=>{let u=Yc(this,a,()=>{});u&&zt(this,ce(u))})),this._docUpdateHandler=(s,a)=>{let u=pe();z(u,Kn),Nc(u,s),jc(this,ce(u))},this._awarenessUpdateHandler=({added:s,updated:a,removed:u},f)=>{let l=s.concat(a).concat(u),d=pe();z(d,Mr),he(d,Nr(this.awareness,l)),jc(this,ce(d))},this._beforeUnloadHandler=()=>{Ni(this.awareness,[e.clientID],"window unload"),lt.forEach(s=>{s.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Zs(this);let e=this.name;Tc(e,this._bcSubscriber),this.bcconnected=!0,zc(this);let n=pe();z(n,Kn),zs(n,this.doc),zt(this,ce(n));let r=pe();z(r,Kn),Gs(r,this.doc),zt(this,ce(r));let i=pe();z(i,qc),zt(this,ce(i));let s=pe();z(s,Mr),he(s,Nr(this.awareness,[this.doc.clientID])),zt(this,ce(s))}disconnect(){$n.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Ni(this.awareness,[this.doc.clientID],"disconnect");let e=pe();z(e,eo),kt(e,0),Fe(e,this.peerId),zt(this,ce(e)),Ac(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}},Gd=(t,e,n,r)=>{if(lt.has(n))throw Ue(`A Yjs Doc connected to room "${n}" already exists!`);let i=new Qs(t,e,n,r);return lt.set(n,i),i},Fr=(t,e,n)=>{e.key?Vc(n,e.key).then(r=>{t.send({type:"publish",topic:e.name,data:Un(r)})}):t.send({type:"publish",topic:e.name,data:n})},Br=class extends Ii{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{Ee(`connected (${e})`);let n=Array.from(lt.keys());this.send({type:"subscribe",topics:n}),lt.forEach(r=>Fr(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{let r=n.topic,i=lt.get(r);if(i==null||typeof r!="string")return;let s=a=>{let u=i.webrtcConns,f=i.peerId;if(a==null||a.from===f||a.to!==void 0&&a.to!==f||i.bcConns.has(a.from))return;let l=u.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":u.size<i.provider.maxConns&&(de(u,a.from,()=>new wn(this,!0,a.from,i)),l());break;case"signal":if(a.signal.type==="offer"){let d=u.get(a.from);if(d){let h=a.token,p=d.glareToken;if(p&&p>h){Ee("offer rejected: ",a.from);return}d.glareToken=void 0}}if(a.signal.type==="answer"){Ee("offer answered by: ",a.from);let d=u.get(a.from);d.glareToken=void 0}a.to===f&&(de(u,a.from,()=>new wn(this,!1,a.from,i)).peer.signal(a.signal),l());break}};i.key?typeof n.data=="string"&&Mi(Bt(n.data),i.key).then(s):s(n.data)}}}),this.on("disconnect",()=>Ee(`disconnect (${e})`))}},Bi=class extends xe{constructor(e,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:i=null,awareness:s=new Gn(n),maxConns:a=20+Re(Bo()*15),filterBcConns:u=!0,peerOpts:f={}}={}){super(),this.roomName=e,this.doc=n,this.filterBcConns=u,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=a,this.peerOpts=f,this.key=i?Fc(i,e):pr(null),this.room=null,this.key.then(l=>{this.room=Gd(n,this,e,l),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{let n=de($n,e,()=>new Br(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),e.providers.size===0&&(e.destroy(),$n.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),lt.delete(this.roomName)}),super.destroy()}};var Jc=bn(Kc());function Kd(t,e){t.on("connect",()=>{Ee(`connected (${e})`);let n=Array.from(lt.keys());t.send({type:"subscribe",topics:n}),lt.forEach(r=>Fr(t,r,{type:"announce",from:r.peerId}))}),t.on("message",n=>{switch(n.type){case"publish":{let r=n.topic,i=lt.get(r);if(i===null||typeof r!="string"||i===void 0)return;let s=a=>{let u=i.webrtcConns,f=i.peerId;if(a===null||a.from===f||a.to!==void 0&&a.to!==f||i.bcConns.has(a.from))return;let l=u.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":u.size<i.provider.maxConns&&(de(u,a.from,()=>new wn(t,!0,a.from,i)),l());break;case"signal":if(a.signal.type==="offer"){let d=u.get(a.from);if(d){let h=a.token,p=d.glareToken;if(p&&p>h){Ee("offer rejected: ",a.from);return}d.glareToken=void 0}}if(a.signal.type==="answer"){Ee("offer answered by: ",a.from);let d=u.get(a.from);d&&(d.glareToken=void 0)}a.to===f&&(de(u,a.from,()=>new wn(t,!1,a.from,i)).peer.signal(a.signal),l());break}};i.key?typeof n.data=="string"&&Mi(Bt(n.data),i.key).then(s):s(n.data)}}}),t.on("disconnect",()=>Ee(`disconnect (${e})`))}function $c(t){if(t.shouldConnect&&t.ws===null){let e=Math.floor(1e5+Math.random()*9e5),n=t.url,r=new window.EventSource((0,Jc.addQueryArgs)(n,{subscriber_id:e,action:"gutenberg_signaling_server"})),i=null;r.onmessage=f=>{t.lastMessageReceived=Date.now();let l=f.data;if(l){let d=JSON.parse(l);Array.isArray(d)&&d.forEach(s)}},t.ws=r,t.connecting=!0,t.connected=!1;let s=f=>{f&&f.type==="pong"&&(clearTimeout(i),i=setTimeout(u,Fi/2)),t.emit("message",[f,t])},a=f=>{t.ws!==null&&(t.ws.close(),t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:f},t])):t.unsuccessfulReconnects++),clearTimeout(i)},u=()=>{t.ws&&t.ws.readyState===window.EventSource.OPEN&&t.send({type:"ping"})};t.ws&&(t.ws.onclose=()=>{a(null)},t.ws.send=function(l){window.fetch(n,{body:new URLSearchParams({subscriber_id:e.toString(),action:"gutenberg_signaling_server",message:l}),method:"POST"}).catch(()=>{Ee("Error sending to server with message: "+l)})}),r.onerror=()=>{},r.onopen=()=>{t.connected||r.readyState===window.EventSource.OPEN&&(t.lastMessageReceived=Date.now(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),i=setTimeout(u,Fi/2))}}}var Fi=3e4,to=class extends xe{constructor(e){super(),this.url=e,this.ws=null,this.binaryType=null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Fi<Date.now()-this.lastMessageReceived&&this.ws&&this.ws.close()},Fi/2),$c(this),this.providers=new Set,Kd(this,e)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&$c(this)}},Vi=class extends Bi{connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{let n=de($n,e,e.startsWith("ws://")||e.startsWith("wss://")?()=>new Br(e):()=>new to(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}};function Xc({signaling:t,password:e}){return function(n,r,i){let s=`${n}-${r}`,a=new Vi(s,i,{signaling:t,password:e});return Promise.resolve({destroy:()=>a.destroy()})}}var Jn=null;function $d(){let t=window?.wp?.ajax?.settings?.url;return t?[xc,Xc({password:window?.__experimentalCollaborativeEditingSecret,signaling:[t]})]:[]}function Jd(t){return typeof t=="function"}function Qc(){if(Jn)return Jn;let t=(0,Zc.applyFilters)("sync.providers",$d());return Array.isArray(t)?(Jn=t.filter(Jd),Jn):(Jn=[],Jn)}var el=(t,e)=>{let n=e==="undo"?t.undoStack:t.redoStack;for(;n.length>0;){let r=n.pop(),i=e==="undo"?r.undoStack:r.redoStack,s=i.pop(),a=!1;if(e==="undo"?(r.undoStack=[s],a=r.undo()!==null,r.undoStack=i):(r.redoStack=[s],a=r.redo()!==null,r.redoStack=i),a)return s}return null},Pi=class extends xe{constructor(e=[],n={}){super(),this.docs=new Map,this.trackedOrigins=n.trackedOrigins||new Set([null]),n.trackedOrigins=this.trackedOrigins,this._defaultOpts=n,this.undoStack=[],this.redoStack=[],this.addToScope(e)}addToScope(e){e=Jt(e)?e:[e],e.forEach(n=>{let r=n.doc,i=de(this.docs,r,()=>{let s=new ln([n],this._defaultOpts);return s.on("stack-cleared",({undoStackCleared:a,redoStackCleared:u})=>{this.clear(a,u)}),r.on("destroy",()=>{this.docs.delete(r),this.undoStack=this.undoStack.filter(a=>a.doc!==r),this.redoStack=this.redoStack.filter(a=>a.doc!==r)}),s.on("stack-item-added",a=>{(a.type==="undo"?this.undoStack:this.redoStack).push(s),this.emit("stack-item-added",[{...a,ydoc:r},this])}),s.on("stack-item-updated",a=>{this.emit("stack-item-updated",[{...a,ydoc:r},this])}),s.on("stack-item-popped",a=>{this.emit("stack-item-popped",[{...a,ydoc:r},this])}),s});i.scope.every(s=>s!==n)&&i.scope.push(n)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}undo(){return el(this,"undo")}redo(){return el(this,"redo")}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&(this.docs.forEach(r=>{e&&(this.undoStack=[]),n&&(this.redoStack=[]),r.clear(e,n)}),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}]))}stopCapturing(){this.docs.forEach(e=>{e.stopCapturing()})}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.docs.forEach(e=>e.destroy()),super.destroy()}};function tl(){let t=new Pi([],{captureTimeout:200,trackedOrigins:new Set([Ai])});return{addRecord(e,n=!1){},addToScope(e){t.addToScope(e)},undo(){if(t.canUndo())return t.undo(),[]},redo(){if(t.canRedo())return t.redo(),[]},hasUndo(){return t.canUndo()},hasRedo(){return t.canRedo()}}}function nl(){let t=new Map,e=tl();async function n(l,d,h,p,w){let _=Qc();if(_.length===0)return;let x=i(d,h);if(t.has(x))return;let D=Fs({objectType:d}),y=D.getMap(Ti),S=()=>{C.forEach(V=>V.destroy()),y.unobserveDeep(v),D.destroy(),t.delete(x)},v=(V,T)=>{T.local&&!(T.origin instanceof ln)||u(d,h)};l.supports?.undo&&e.addToScope(y);let A={handlers:w,objectId:h,objectType:d,syncConfig:l,unload:S,ydoc:D};t.set(x,A);let C=await Promise.all(_.map(V=>{let T=l.supports?.awareness?new Gn(D):void 0;return V(d,h,D,T)}));if(y.observeDeep(v),s(l,D,p)){D.transact(()=>{l.applyChangesToCRDTDoc(D,p)},Lr);let V=f(d,h);w.editRecord({meta:V}),w.saveRecord()}}function r(l,d){t.get(i(l,d))?.unload()}function i(l,d){return`${l}_${d}`}function s(l,d,h){if(!l.supports?.crdtPersistence)return!0;let p=lc(h);if(!p)return!0;let w=qn(p);d.transact(()=>{Wt(d,w)},Lr);let _=l.getChangesFromCRDTDoc(p,h);return p.destroy(),Object.keys(_).length>0}function a(l,d,h,p){let w=i(l,d),_=t.get(w);if(!_)return;let{syncConfig:x,ydoc:D}=_;D.transact(()=>{x.applyChangesToCRDTDoc(D,h)},p)}async function u(l,d){let h=i(l,d),p=t.get(h);if(!p)return;let{handlers:w,syncConfig:_,ydoc:x}=p,D=_.getChangesFromCRDTDoc(x,await w.getEditedRecord());Object.keys(D).length!==0&&w.editRecord(D)}function f(l,d){let h=i(l,d),p=t.get(h);return p?.syncConfig.supports?.crdtPersistence?uc(p.ydoc):{}}return{createMeta:f,load:n,undoManager:e,unload:r,update:a}}return ll(Xd);})();
/*! Bundled license information:

diff/dist/diff.js:
  (*!
  
   diff v4.0.1
  
  Software License Agreement (BSD License)
  
  Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
  
  All rights reserved.
  
  Redistribution and use of this software in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
  
  * Redistributions of source code must retain the above
    copyright notice, this list of conditions and the
    following disclaimer.
  
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the
    following disclaimer in the documentation and/or other
    materials provided with the distribution.
  
  * Neither the name of Kevin Decker nor the names of its
    contributors may be used to endorse or promote products
    derived from this software without specific prior
    written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
  FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  @license
  *)

simple-peer/simplepeer.min.js:
  (*!
  * The buffer module from node.js, for the browser.
  *
  * @author   Feross Aboukhadijeh <https://feross.org>
  * @license  MIT
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=index.min.js.map
