{"version":3,"file":"block-library/form/view.min.js","mappings":"AAAA,IAAIA,EACJ,IACCA,EAAeC,KAAKC,MACnBC,SAASC,eACR,6DACEC,YAEL,CAAE,MAAO,CAITF,SAASG,iBAAkB,sBAAuBC,SAAS,SAAWC,GAErE,IACGR,IACAQ,EAAKC,SACLD,EAAKC,OAAOC,WAAY,WAE1B,OAGD,MAAMC,EAAyBC,IAC9B,MAAMC,EAAY,IAAIC,gBAAiBC,OAAOC,SAASC,QACvDJ,EAAUK,OAAQ,iBAAkBN,GACpCG,OAAOC,SAASC,OAASJ,EAAUM,UAAU,EAI9CX,EAAKY,iBAAkB,UAAUC,eAAiBC,GACjDA,EAAMC,iBAEN,MAAMC,EAAWC,OAAOC,YAAa,IAAIC,SAAUnB,GAAOoB,WAC1DJ,EAASK,WAAarB,EAAKC,OAC3Be,EAASM,YAAc9B,EAAa+B,MACpCP,EAASf,OAAST,EAAaS,OAC/Be,EAASQ,iBAAmBjB,OAAOC,SAASiB,KAC5CT,EAASK,WAAarB,EAAKC,OAE3B,WACwByB,MAAOlC,EAAamC,QAAS,CACnDC,OAAQ,OACRC,QAAS,CACR,eAAgB,qCAEjBC,KAAM,IAAIxB,gBAAiBU,GAAWL,cAEzBoB,GACb5B,EAAsB,WAEtBA,EAAsB,QAExB,CAAE,MAAQ6B,GACT7B,EAAsB,QACvB,CACD,GACD","sources":["webpack://wp/./packages/block-library/build-module/form/@wordpress/block-library/src/form/view.js"],"sourcesContent":["let formSettings;\ntry {\n\tformSettings = JSON.parse(\n\t\tdocument.getElementById(\n\t\t\t'wp-script-module-data-@wordpress/block-library/form/view'\n\t\t)?.textContent\n\t);\n} catch {}\n\n// eslint-disable-next-line eslint-comments/disable-enable-pair\n/* eslint-disable no-undef */\ndocument.querySelectorAll( 'form.wp-block-form' ).forEach( function ( form ) {\n\t// Bail If the form settings not provided or the form is not using the mailto: action.\n\tif (\n\t\t! formSettings ||\n\t\t! form.action ||\n\t\t! form.action.startsWith( 'mailto:' )\n\t) {\n\t\treturn;\n\t}\n\n\tconst redirectNotification = ( status ) => {\n\t\tconst urlParams = new URLSearchParams( window.location.search );\n\t\turlParams.append( 'wp-form-result', status );\n\t\twindow.location.search = urlParams.toString();\n\t};\n\n\t// Add an event listener for the form submission.\n\tform.addEventListener( 'submit', async function ( event ) {\n\t\tevent.preventDefault();\n\t\t// Get the form data and merge it with the form action and nonce.\n\t\tconst formData = Object.fromEntries( new FormData( form ).entries() );\n\t\tformData.formAction = form.action;\n\t\tformData._ajax_nonce = formSettings.nonce;\n\t\tformData.action = formSettings.action;\n\t\tformData._wp_http_referer = window.location.href;\n\t\tformData.formAction = form.action;\n\n\t\ttry {\n\t\t\tconst response = await fetch( formSettings.ajaxUrl, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t},\n\t\t\t\tbody: new URLSearchParams( formData ).toString(),\n\t\t\t} );\n\t\t\tif ( response.ok ) {\n\t\t\t\tredirectNotification( 'success' );\n\t\t\t} else {\n\t\t\t\tredirectNotification( 'error' );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tredirectNotification( 'error' );\n\t\t}\n\t} );\n} );\n"],"names":["formSettings","JSON","parse","document","getElementById","textContent","querySelectorAll","forEach","form","action","startsWith","redirectNotification","status","urlParams","URLSearchParams","window","location","search","append","toString","addEventListener","async","event","preventDefault","formData","Object","fromEntries","FormData","entries","formAction","_ajax_nonce","nonce","_wp_http_referer","href","fetch","ajaxUrl","method","headers","body","ok","error"],"sourceRoot":""}