var q=Object.create;var v=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var c=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var C=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of K(r))!z.call(e,s)&&s!==t&&v(e,s,{get:()=>r[s],enumerable:!(n=U(r,s))||n.enumerable});return e};var p=(e,r,t)=>(t=e!=null?q(O(e)):{},C(r||!e||!e.__esModule?v(t,"default",{value:e,enumerable:!0}):t,e));var l=c((B,V)=>{V.exports=window.wp.data});var m=c((W,T)=>{T.exports=window.wp.coreData});var P=c((H,x)=>{x.exports=window.wp.element});var w=c((J,_)=>{_.exports=window.wp.preferences});var d=p(l()),g=p(m());import{notFound as E}from"@wordpress/route";function y(e,r,t){return`dataviews-${e}-${r}-${t}`}var S=p(P(),1),b=p(l(),1),M=p(w(),1);var L=p(l(),1),A=p(w(),1);async function h(e){let{kind:r,name:t,slug:n,defaultView:s,queryParams:a}=e,o=y(r,t,n),i=(0,L.select)(A.store).get("core/views",o)??s,$=a?.page??1,j=a?.search??"";return{...i,page:$,search:j}}var D=p(l()),I=p(m()),f={type:"table",sort:{field:"date",direction:"desc"},fields:["author","status","date"],titleField:"title",mediaField:"featured_media",descriptionField:"excerpt"};var N=[{slug:"all",label:"All",view:{...f}},{slug:"publish",label:"Published",view:{...f,filters:[{field:"status",operator:"is",value:"publish"}]}},{slug:"draft",label:"Draft",view:{...f,filters:[{field:"status",operator:"is",value:"draft"}]}},{slug:"pending",label:"Pending",view:{...f,filters:[{field:"status",operator:"is",value:"pending"}]}},{slug:"private",label:"Private",view:{...f,filters:[{field:"status",operator:"is",value:"private"}]}},{slug:"trash",label:"Trash",view:{...f,filters:[{field:"status",operator:"is",value:"trash"}]}}];function Q(e,r){return{...N.find(s=>s.slug===r)?.view||f,showLevels:e?.hierarchical}}async function F(e,r,t){let n=await(0,D.resolveSelect)(I.store).getPostType(e),s=Q(n,r);return h({kind:"postType",name:e,slug:r??"all",defaultView:s,queryParams:t})}function k(e,r){let t={};if(e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0){let i=e.sort.field;i==="attached_to"&&(i="parent"),t.orderby=i}e.sort?.direction!==void 0&&(t.order=e.sort.direction),e.showLevels&&(t.orderby_hierarchy=!0);let n=e.filters?.find(i=>i.field==="status");n?t.status=n.value:r==="attachment"?t.status="inherit":t.status="draft,future,pending,private,publish";let s=e.filters?.find(i=>i.field==="author");s&&s.operator==="is"?t.author=s.value:s&&s.operator==="isNot"&&(t.author_exclude=s.value);let a=e.filters?.find(i=>i.field==="comment_status");a&&a.operator==="is"?t.comment_status=a.value:a&&a.operator==="isNot"&&(t.comment_status_exclude=a.value);let o=e.filters?.find(i=>i.field==="media_type");o&&(t.media_type=o.value);let u=e.filters?.find(i=>i.field==="date");return u&&u.value&&(u.operator==="before"?t.before=u.value:u.operator==="after"&&(t.after=u.value)),r==="attachment"&&(t._embed="wp:attached-to"),t}var ce={beforeLoad:async({params:e})=>{try{if(!await(0,d.resolveSelect)(g.store).getPostType(e.type))throw E()}catch{throw E()}},title:async({params:e})=>(await(0,d.resolveSelect)(g.store).getPostType(e.type))?.labels?.name||e.type,async canvas(e){let{params:r,search:t}=e,n=await F(r.type,r.slug,{page:t.page,search:t.search});if(n.type!=="list")return;if(t.postIds&&t.postIds.length>0){let o=t.postIds[0].toString();return{postType:r.type,postId:o,isPreview:!0,editLink:`/types/${r.type}/edit/${o}`}}let s=k(n,r.type),a=await(0,d.resolveSelect)(g.store).getEntityRecords("postType",r.type,{...s,per_page:1});if(a&&a.length>0){let o=a[0].id.toString();return{postType:r.type,postId:o,isPreview:!0,editLink:`/types/${r.type}/edit/${o}`}}}};export{ce as route};
