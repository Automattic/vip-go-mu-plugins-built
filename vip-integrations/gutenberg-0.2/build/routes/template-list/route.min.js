var C=Object.create;var m=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var O=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of R(t))!z.call(e,i)&&i!==r&&m(e,i,{get:()=>t[i],enumerable:!(s=K(t,i))||s.enumerable});return e};var o=(e,t,r)=>(r=e!=null?C($(e)):{},O(t||!e||!e.__esModule?m(r,"default",{value:e,enumerable:!0}):r,e));var c=p((G,g)=>{g.exports=window.wp.data});var y=p((N,w)=>{w.exports=window.wp.coreData});var V=p((H,h)=>{h.exports=window.wp.i18n});var F=p((X,x)=>{x.exports=window.wp.element});var u=p((Z,v)=>{v.exports=window.wp.preferences});var D=o(c()),k=o(y()),E=o(V());var A=o(F(),1),T=o(c(),1),B=o(u(),1);function f(e,t,r){return`dataviews-${e}-${t}-${r}`}function l(e,t){if(!t||t.length===0)return e;let r=new Set(t.map(i=>i.field)),s=(e.filters??[]).filter(i=>!r.has(i.field));return{...e,filters:[...s,...t]}}var P=o(c(),1),_=o(u(),1);async function d(e){let{kind:t,name:r,slug:s,defaultView:i,activeFilters:a,queryParams:n}=e,U=f(t,r,s),q=(0,P.select)(_.store).get("core/views",U)??i,M=n?.page??1,j=n?.search??"";return l({...q,page:M,search:j},a)}var L={type:"grid",perPage:20,sort:{field:"title",direction:"asc"},fields:["author","active","slug"],titleField:"title",descriptionField:"description",mediaField:"preview",filters:[]},ge={...L,fields:["author"]};function Q(e){return e==="active"||e==="user"?[]:[{field:"author",operator:"isAny",value:[e]}]}async function S(e,t){return d({kind:"postType",name:"wp_template",slug:"default-new",defaultView:L,activeFilters:Q(e??"active"),queryParams:t})}function I(e){let t={};return e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0&&(t.orderby=e.sort.field),e.sort?.direction!==void 0&&(t.order=e.sort.direction),t}var he={title:()=>(0,E.__)("Templates"),async canvas(e){let{params:t,search:r}=e,s=await S(t.activeView,{page:r.page,search:r.search});if(s.type!=="list")return;if(r.postIds&&r.postIds.length>0){let n=r.postIds[0].toString();return{postType:"wp_template",postId:n,isPreview:!0,editLink:`/types/wp_template/edit/${encodeURIComponent(n)}`}}let i=I(s),a=await(0,D.resolveSelect)(k.store).getEntityRecords("postType","wp_template",{...i,per_page:1});if(a&&a.length>0){let n=a[0].id.toString();return{postType:"wp_template",postId:n,isPreview:!0,editLink:`/types/wp_template/edit/${encodeURIComponent(n)}`}}}};export{he as route};
