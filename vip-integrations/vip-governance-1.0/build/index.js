(()=>{"use strict";var e={251:(e,o,n)=>{var t=n(196),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};o.Fragment=i,o.jsx=function(e,o,n){var t,i={},a=null,d=null;for(t in void 0!==n&&(a=""+n),void 0!==o.key&&(a=""+o.key),void 0!==o.ref&&(d=o.ref),o)c.call(o,t)&&!l.hasOwnProperty(t)&&(i[t]=o[t]);if(e&&e.defaultProps)for(t in o=e.defaultProps)void 0===i[t]&&(i[t]=o[t]);return{$$typeof:r,type:e,key:a,ref:d,props:i,_owner:s.current}}},893:(e,o,n)=>{e.exports=n(251)},196:e=>{e.exports=window.React}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,n),i.exports}(()=>{const e=window.wp.blockEditor,o=window.wp.data,t=window.wp.hooks,r=window.wp.i18n,i=window.wp.notices,c=window.wp.components,s=window.wp.compose;function l(e,o={},n=!1){const t=["allowedBlocks"];for(const[i,c]of Object.entries(e))if(!t.includes(i))if(i.includes("/"))Object.entries(e).forEach((([e,n])=>{t.includes(e)||l(n,o,e)}));else if(!1!==n){var r;const e=p(c,`${i}.`);o[n]={...null!==(r=o[n])&&void 0!==r?r:{},...e}}return o}function a(e,o,n,t={depth:0,value:void 0},r=1){const[i,...c]=e,s=n[i];if(0===c.length){const e=d(s,o);return void 0!==e&&r>=t.depth&&(t.depth=r,t.value=e),t}return void 0!==s&&(t=a(c,o,s,t,r+1)),a(c,o,n,t,r)}function d(e,o,n=void 0){const t=Array.isArray(o)?o:o.replace(/(\[(\d)\])/g,".$2").replace(/^\./,"").split(".");if(!t.length||void 0===t[0])return e;const r=t[0];return"object"==typeof e&&null!==e&&r in e&&void 0!==e[r]?d(e[r],t.slice(1),n):n}function p(e,o=""){const n={};return Object.entries(e).forEach((([e,t])=>{"object"==typeof t&&Boolean(t)&&!Array.isArray(t)?(n[`${o}${e}`]=!0,Object.assign(n,p(t,`${o}${e}.`))):n[`${o}${e}`]=!0})),n}const u={"core/list":["core/list-item"],"core/columns":["core/column"],"core/page-list":["core/page-list-item"],"core/navigation":["core/navigation-link","core/navigation-submenu"],"core/navigation-link":["core/navigation-link","core/navigation-submenu","core/page-list"],"core/quote":["core/paragraph"],"core/media-text":["core/paragraph"],"core/social-links":["core/social-link"],"core/comments-pagination":["core/comments-pagination-previous","core/comments-pagination-numbers","core/comments-pagination-next"]};function g(e,o,n){const r=(0,t.applyFilters)("vip_governance__is_block_allowed_in_hierarchy",!0,e,o,n)||0===o.length?[...n.allowedBlocks]:[];if(o.length>0){if(u[o[0]]&&u[o[0]].includes(e))return!0;if(n.blockSettings){const e=a(o.reverse(),"allowedBlocks",n.blockSettings);e&&e.value&&r.push(...e.value)}}return function(e,o){return o.some((o=>function(e,o){return o.includes("*")?e.match(new RegExp(o.replace("*",".*"))):o===e}(e,o)))}(e,r)}var f=n(893);const v={};!function(){if(VIP_GOVERNANCE.error)return void(0,o.dispatch)(i.store).createErrorNotice(VIP_GOVERNANCE.error,{id:"wpcomvip-governance-error",isDismissible:!0,actions:[{label:(0,r.__)("Open governance settings"),url:VIP_GOVERNANCE.urlSettingsPage}]});const n=VIP_GOVERNANCE.governanceRules;(0,t.addFilter)("blockEditor.__unstableCanInsertBlockType","wpcomvip-governance/block-insertion",((r,i,c,{getBlock:s})=>{if(!1===r)return r;let l=[];if(c){const{getBlockParents:n,getBlockName:t}=(0,o.select)(e.store),r=s(c),i=n(c,!0);l=[r.clientId,...i].map((e=>t(e)))}const a=g(i.name,l,n);return(0,t.applyFilters)("vip_governance__is_block_allowed_for_insertion",a,i.name,l,n)}));const d=VIP_GOVERNANCE.nestedSettings,p=l(d);(0,t.addFilter)("blockEditor.useSetting.before","wpcomvip-governance/nested-block-settings",((n,t,r,i)=>{if(void 0===p[i]||!0!==p[i][t])return n;const c=[r,...(0,o.select)(e.store).getBlockParents(r,!0)].map((n=>(0,o.select)(e.store).getBlockName(n))).reverse();return({value:n}=a(c,t,d)),n&&n.theme?n.theme:n})),n?.allowedBlocks&&function(n){const r=(0,s.createHigherOrderComponent)((r=>i=>{const{name:s,clientId:l}=i,{getBlockParents:a,getBlockName:d}=(0,o.select)(e.store),p=a(l,!0),u=p.some((e=>function(e){return e in v}(e)));if(u)return(0,f.jsx)(r,{...i});const _=p.map((e=>d(e)));let m=g(s,_,n);if(m=(0,t.applyFilters)("vip_governance__is_block_allowed_for_editing",m,s,_,n),m)return(0,f.jsx)(r,{...i});if(wp?.blockEditor?.useBlockEditingMode){const{useBlockEditingMode:e}=wp.blockEditor;e("disabled")}return function(e){v[e]=!0}(l),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(c.Disabled,{children:(0,f.jsx)("div",{style:{opacity:.6,backgroundColor:"#eee",border:"2px dashed #999"},children:(0,f.jsx)(r,{...i})})})})}),"withDisabledBlocks");(0,t.addFilter)("editor.BlockEdit","wpcomvip-governance/with-disabled-blocks",r)}(n)}()})()})();