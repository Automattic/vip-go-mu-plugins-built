(()=>{"use strict";var e={122:(e,t,o)=>{o.d(t,{G:()=>d});var n=o(609),r=o(715),i=o(427),c=o(491),s=o(143),l=o(619),a=o(418);function d(e){const t=(0,c.createHigherOrderComponent)((t=>o=>{const{name:c,clientId:d}=o,{getBlockParents:u,getBlockName:g}=(0,s.select)(r.store),v=u(d,!0),m=v.some((e=>function(e){return e in p}(e)));if(m)return(0,n.createElement)(t,{...o});const f=v.map((e=>g(e)));let w=(0,a.yw)(c,f,e);if(w=(0,l.applyFilters)("vip_governance__is_block_allowed_for_editing",w,c,f,e),w)return(0,n.createElement)(t,{...o});if(wp?.blockEditor?.useBlockEditingMode){const{useBlockEditingMode:e}=wp.blockEditor;e("disabled")}return function(e){p[e]=!0}(d),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.Disabled,null,(0,n.createElement)("div",{style:{opacity:.6,backgroundColor:"#eee",border:"2px dashed #999"}},(0,n.createElement)(t,{...o}))))}),"withDisabledBlocks");(0,l.addFilter)("editor.BlockEdit","wpcomvip-governance/with-disabled-blocks",t)}const p={}},418:(e,t,o)=>{o.d(t,{aV:()=>s,yw:()=>c});var n=o(619),r=o(325);const i={"core/list":["core/list-item"],"core/columns":["core/column"],"core/page-list":["core/page-list-item"],"core/navigation":["core/navigation-link","core/navigation-submenu"],"core/navigation-link":["core/navigation-link","core/navigation-submenu","core/page-list"],"core/quote":["core/paragraph"],"core/media-text":["core/paragraph"],"core/social-links":["core/social-link"],"core/comments-pagination":["core/comments-pagination-previous","core/comments-pagination-numbers","core/comments-pagination-next"]};function c(e,t,o){const c=(0,n.applyFilters)("vip_governance__is_block_allowed_in_hierarchy",!0,e,t,o)||0===t.length?[...o.allowedBlocks]:[];if(t.length>0){if(i[t[0]]&&i[t[0]].includes(e))return!0;if(o.blockSettings){const e=(0,r.W)(t.reverse(),"allowedBlocks",o.blockSettings);e&&e.value&&c.push(...e.value)}}return function(e,t){return t.some((t=>s(e,t)))}(e,c)}function s(e,t){return t.includes("*")?e.match(new RegExp(t.replace("*",".*"))):t===e}},325:(e,t,o)=>{function n(e,t={},o=!1){const r=["allowedBlocks"];for(const[s,l]of Object.entries(e))if(!r.includes(s))if(s.includes("/")||"*"===s)Object.entries(e).forEach((([e,o])=>{r.includes(e)||n(o,t,e)}));else if(!1!==o){var i;const e=c(l,`${s}.`);t[o]={...null!==(i=t[o])&&void 0!==i?i:{},...e}}return t}function r(e,t,o,n={depth:0,value:void 0},c=1){const[s,...l]=e,a=o[s];if(0===l.length){const e=i(a,t);return void 0!==e&&c>=n.depth&&(n.depth=c,n.value=e),n}return void 0!==a&&(n=r(l,t,a,n,c+1)),r(l,t,o,n,c)}function i(e,t,o=void 0){const n=Array.isArray(t)?t:t.replace(/(\[(\d)\])/g,".$2").replace(/^\./,"").split(".");if(!n.length||void 0===n[0])return e;const r=n[0];return"object"==typeof e&&null!==e&&r in e&&void 0!==e[r]?i(e[r],n.slice(1),o):o}function c(e,t=""){const o={};return Object.entries(e).forEach((([e,n])=>{"object"==typeof n&&Boolean(n)&&!Array.isArray(n)?(o[`${t}${e}`]=!0,Object.assign(o,c(n,`${t}${e}.`))):o[`${t}${e}`]=!0})),o}o.d(t,{S:()=>n,W:()=>r})},609:e=>{e.exports=window.React},715:e=>{e.exports=window.wp.blockEditor},427:e=>{e.exports=window.wp.components},491:e=>{e.exports=window.wp.compose},143:e=>{e.exports=window.wp.data},619:e=>{e.exports=window.wp.hooks},723:e=>{e.exports=window.wp.i18n},692:e=>{e.exports=window.wp.notices}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n=o(715),r=o(143),i=o(619),c=o(723),s=o(692),l=o(122),a=o(418),d=o(325);!function(){if(VIP_GOVERNANCE.error)return void(0,r.dispatch)(s.store).createErrorNotice(VIP_GOVERNANCE.error,{id:"wpcomvip-governance-error",isDismissible:!0,actions:[{label:(0,c.__)("Open governance settings"),url:VIP_GOVERNANCE.urlSettingsPage}]});const e=VIP_GOVERNANCE.governanceRules;(0,i.addFilter)("blockEditor.__unstableCanInsertBlockType","wpcomvip-governance/block-insertion",((t,o,c,{getBlock:s})=>{if(!1===t)return t;let l=[];if(c){const{getBlockParents:e,getBlockName:t}=(0,r.select)(n.store),o=s(c),i=e(c,!0);l=[o.clientId,...i].map((e=>t(e)))}const d=(0,a.yw)(o.name,l,e);return(0,i.applyFilters)("vip_governance__is_block_allowed_for_insertion",d,o.name,l,e)}));const t=VIP_GOVERNANCE.nestedSettings,o=(0,d.S)(t),p={},u={};for(const e in o)-1===e.indexOf("*")?u[e]=o[e]:p[e]=o[e];(0,i.addFilter)("blockEditor.useSetting.before","wpcomvip-governance/nested-block-settings",((e,o,i,c)=>{if(!c)return e;if(void 0!==u[c]&&!0===u[c][o]){const c=[i,...(0,r.select)(n.store).getBlockParents(i,!0)].map((e=>(0,r.select)(n.store).getBlockName(e))).reverse();return({value:e}=(0,d.W)(c,o,t)),e&&e.theme?e.theme:e}if(0!==p.length)for(const s in p)if((0,a.aV)(c,s)&&!0===p[s][o]){const c=[i,...(0,r.select)(n.store).getBlockParents(i,!0)].map((e=>(0,r.select)(n.store).getBlockName(e))).reverse();return-1!==s.indexOf("*")&&(c[c.length-1]=s),({value:e}=(0,d.W)(c,o,t)),e&&e.theme?e.theme:e}return e})),e?.allowedBlocks&&(0,l.G)(e)}()})();
//# sourceMappingURL=index.js.map