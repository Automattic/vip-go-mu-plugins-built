(()=>{"use strict";const e=()=>{"function"==typeof window.initEmbeddedMessaging&&window.initEmbeddedMessaging()},n=()=>{if(document.getElementById("agentforce-sdk"))return;const n=window.vipAgentforceConsentData?.embedding;if(!n||!n.bootstrapSrc)return;const t=document.createElement("script");t.id="agentforce-sdk",t.src=n.bootstrapSrc,t.async=!0,t.onload=e,document.head.appendChild(t),window.AFConsentGranted=!0},t=()=>{const e=document.getElementById("agentforce-sdk");e&&e.remove(),window.embeddedservice_bootstrap&&window.embeddedservice_bootstrap.utilAPI&&window.embeddedservice_bootstrap.utilAPI.removeAllComponents(),window.AFConsentGranted=!1},o=window.vipAgentforceConsentData&&window.vipAgentforceConsentData.iubendaPurposeId||"5";document.addEventListener("iubendaPreferenceUpdate",e=>{e.detail&&(e=>{if(e?.purposes)!0===e.purposes[o]?n():t();else if(window._iub?.cs?.api?.getPreferences)try{const e=window._iub.cs.api.getPreferences();!0===e?.purposes?.[o]?n():t()}catch(e){}})(e.detail)})})();