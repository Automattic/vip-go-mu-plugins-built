/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={1074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(9307);const o=function(e){let{icon:t,size:r=24,...o}=e;return(0,n.cloneElement)(t,{width:r,height:r,...o})}},3805:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"}))},5381:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"}))},5022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(o.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"}))},9975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"}))},7659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"}))},797:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,n.createElement)(o.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"}))},5235:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},951:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(1741)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1741:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,a,s=null;function i(...e){if(!i.enabled)return;const n=i,o=Number(new Date),a=o-(r||o);n.diff=a,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const a=t.formatters[o];if("function"==typeof a){const t=e[s];r=a.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=n,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,a=t.enabled(e)),a),set:e=>{s=e}}),"function"==typeof t.init&&t.init(i),i}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(3171),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},861:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},n={floor:Math.floor,ceil:Math.ceil};function o(o){var a,s,i,c,l,u,p,d,m,f,h,g,v,b,k,y,w,_,E,R,C,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},P=[],j=0;if(isNaN(o))throw new TypeError("Invalid number");if(i=!0===S.bits,k=!0===S.unix,g=!0===S.pad,s=S.base||10,v=void 0!==S.round?S.round:k?1:2,p=void 0!==S.locale?S.locale:"",d=S.localeOptions||{},y=void 0!==S.separator?S.separator:"",w=void 0!==S.spacer?S.spacer:k?"":" ",E=S.symbols||{},_=2===s?S.standard||"iec":"jedec",h=S.output||"string",l=!0===S.fullform,u=S.fullforms instanceof Array?S.fullforms:[],a=void 0!==S.exponent?S.exponent:-1,R=n[S.roundingMethod]||Math.round,m=(f=Number(o))<0,c=s>2?1e3:1024,C=!1===isNaN(S.precision)?parseInt(S.precision,10):0,m&&(f=-f),(-1===a||isNaN(a))&&(a=Math.floor(Math.log(f)/Math.log(c)))<0&&(a=0),a>8&&(C>0&&(C+=8-a),a=8),"exponent"===h)return a;if(0===f)P[0]=0,b=P[1]=k?"":t[_][i?"bits":"bytes"][a];else{j=f/(2===s?Math.pow(2,10*a):Math.pow(1e3,a)),i&&(j*=8)>=c&&a<8&&(j/=c,a++);var x=Math.pow(10,a>0?v:0);P[0]=R(j*x)/x,P[0]===c&&a<8&&void 0===S.exponent&&(P[0]=1,a++),b=P[1]=10===s&&1===a?i?"kbit":"kB":t[_][i?"bits":"bytes"][a],k&&(P[1]=P[1].charAt(0),e.test(P[1])&&(P[0]=Math.floor(P[0]),P[1]=""))}if(m&&(P[0]=-P[0]),C>0&&(P[0]=P[0].toPrecision(C)),P[1]=E[P[1]]||P[1],!0===p?P[0]=P[0].toLocaleString():p.length>0?P[0]=P[0].toLocaleString(p,d):y.length>0&&(P[0]=P[0].toString().replace(".",y)),g&&!1===Number.isInteger(P[0])&&v>0){var U=y||".",N=P[0].toString().split(U),A=N[1]||"",T=A.length,O=v-T;P[0]="".concat(N[0]).concat(U).concat(A.padEnd(T+O,"0"))}return l&&(P[1]=u[a]?u[a]:r[_][a]+(i?"bit":"byte")+(1===P[0]?"":"s")),"array"===h?P:"object"===h?{value:P[0],symbol:P[1],exponent:a,unit:b}:P.join(w)}return o.partial=function(e){return function(t){return o(t,e)}},o}()},4097:function(e,t){var r,n;n="undefined"!=typeof self?self:"undefined"!=typeof window||"undefined"!=typeof window?window:this,e.exports=function(n){"use strict";var o,a=(n=n||{}).Base64,s="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(i),l=String.fromCharCode,u=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(p,u)},m=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),t>=2?"=":i.charAt(r>>>6&63),t>=1?"=":i.charAt(63&r)].join("")},f=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,m)},h=function(e){return f(d(String(e)))},g=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},v=function(e,t){return t?g(h(e)):h(e)},b=function(e){return v(e,!0)};n.Uint8Array&&(o=function(e,t){for(var r="",n=0,o=e.length;n<o;n+=3){var a=e[n],s=e[n+1],c=e[n+2],l=a<<16|s<<8|c;r+=i.charAt(l>>>18)+i.charAt(l>>>12&63)+(void 0!==s?i.charAt(l>>>6&63):"=")+(void 0!==c?i.charAt(63&l):"=")}return t?g(r):r});var k,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return l(55296+(t>>>10))+l(56320+(1023&t));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(y,w)},E=function(e){var t=e.length,r=t%4,n=(t>0?c[e.charAt(0)]<<18:0)|(t>1?c[e.charAt(1)]<<12:0)|(t>2?c[e.charAt(2)]<<6:0)|(t>3?c[e.charAt(3)]:0),o=[l(n>>>16),l(n>>>8&255),l(255&n)];return o.length-=[0,0,2,1][r],o.join("")},R=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,E)},C=function(e){return R(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(e){return _(R(e))},P=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},j=function(e){return S(P(e))};n.Uint8Array&&(k=function(e){return Uint8Array.from(C(P(e)),(function(e){return e.charCodeAt(0)}))});var x=function(){var e=n.Base64;return n.Base64=a,e};if(n.Base64={VERSION:s,atob:C,btoa:f,fromBase64:j,toBase64:v,utob:d,encode:v,encodeURI:b,btou:_,decode:j,noConflict:x,fromUint8Array:o,toUint8Array:k},"function"==typeof Object.defineProperty){var U=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",U((function(){return j(this)}))),Object.defineProperty(String.prototype,"toBase64",U((function(e){return v(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",U((function(){return v(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(n)},2103:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={button:"zI5tJ_qhWE6Oe6Lk75GY","is-icon-button":"tuBt2DLqimiImoqVzPqo",small:"Na39I683LAaSA99REg14",normal:"ipS7tKy9GntCS4R3vekF",icon:"paGLQwtPEaJmtArCcmyK",regular:"lZAo6_oGfclXOO9CC6Rd","full-width":"xJDOiJxTt0R_wSl8Ipz_",loading:"q_tVWqMjl39RcY6WtQA6","external-icon":"CDuBjJp_8jxzx5j6Nept"}},5214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={"help-message":"MVuHtQ6MxijxzLoKaiAD"}},4027:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={"timestamp-control__controls-wrapper":"rcGUZgpe4CGD8uYmerUD","timestamp-range-control":"iZjYt7tDXuSRYGSpgL1y","timestamp-input-wrapper":"dx9xZVwTj45XWtgjLwf2","timestamp-control-input":"Uge3H06ePl7rnHIbnUgo","is-disabled":"AmMha5bHq6c3gHoP7k28","timestamp-control-divider":"aN3nKQFl5a3qMbO8CaVg"}},4641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={container:"ianknO6MB_ng2EieMQdE","play-icon":"no33D8j7N4nzdafpETZy","video-player-wrapper":"VFzg5w6i04b05mkee2SA","video-player-spinner-wrapper":"PHuqvGT1Z0IVZgjAtUZw",spinner:"xwBn5mUH0mhSBqas1dog",video:"k5rpcKdHL3HKU39CrUhe",range:"sgykjydBL76DT5yDw_ka"}},3171:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,a=7*o,s=365.25*o;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!i)return;var c=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var a=Math.abs(e);if(a>=o)return i(e,a,o,"day");if(a>=n)return i(e,a,n,"hour");if(a>=r)return i(e,a,r,"minute");if(a>=t)return i(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=o)return Math.round(e/o)+"d";if(a>=n)return Math.round(e/n)+"h";if(a>=r)return Math.round(e/r)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},142:(e,t)=>{"use strict";var r,n=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function a(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,s,i=[];for(s in"string"!=typeof t&&(t="?"),e)if(n.call(e,s)){if((o=e[s])||null!==o&&o!==r&&!isNaN(o)||(o=""),s=a(s),o=a(o),null===s||null===o)continue;i.push(s+"="+o)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var a=o(t[1]),s=o(t[2]);null===a||null===s||a in n||(n[a]=s)}return n}},2298:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(951);const o=r.n(n)()("dops:analytics");let a,s;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const i={initialize:function(e,t,r){i.setUser(e,t),i.setSuperProps(r),i.identifyUser()},setGoogleAnalyticsEnabled:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){s={ID:e,username:t}},setSuperProps:function(e){a=e},assignSuperProps:function(e){a=Object.assign(a||{},e)},mc:{bumpStat:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);o("Bumping stats %o",e)}else r="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),o('Bumping stat "%s" in group "%s"',t,e);return r}(e,t);i.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+r+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);o("Built stats %o",e)}else r="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),o('Built stat "%s" in group "%s"',t,e);return r}(e,t);i.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+r+"&t="+Math.random())}},pageView:{record:function(e,t){i.tracks.recordPageView(e),i.ga.recordPageView(e,t)}},purchase:{record:function(e,t,r,n,o,a,s){i.ga.recordPurchase(e,t,r,n,o,a,s)}},tracks:{recordEvent:function(e,t){t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")?(a&&(o("- Super Props: %o",a),t=Object.assign(t,a)),o('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])):o('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};i.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){i.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){o("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};i.ga.initialized||(s&&(e={userId:"u-"+s.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),i.ga.initialized=!0)},recordPageView:function(e,t){i.ga.initialize(),o("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,r,n){i.ga.initialize();let a="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";void 0!==r&&(a+=" [Option Label: "+r+"]"),void 0!==n&&(a+=" [Option Value: "+n+"]"),o(a),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,r,n)},recordPurchase:function(e,t,r,n,o,a,s){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:n,currency:s}),window.ga("ecommerce:addItem",{id:e,name:t,sku:r,price:o,quantity:a}),window.ga("ecommerce:send")}},identifyUser:function(){s&&window._tkq.push(["identifyUser",s.ID,s.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},c=i},526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(2674),o=r.n(n),a=r(5609),s=r(1074),i=r(5381),c=r(5235),l=r.n(c),u=r(9196),p=r.n(u),d=r(2103);const m=(0,u.forwardRef)(((e,t)=>{const{children:r,variant:n="primary",size:c="normal",weight:u="bold",icon:m,iconSize:f,disabled:h,isDestructive:g,isLoading:v,isExternalLink:b,className:k,text:y,fullWidth:w,..._}=e,E=l()(d.Z.button,k,{[d.Z.normal]:"normal"===c,[d.Z.small]:"small"===c,[d.Z.icon]:Boolean(m),[d.Z.loading]:v,[d.Z.regular]:"regular"===u,[d.Z["full-width"]]:w,[d.Z["is-icon-button"]]:Boolean(m)&&!r});_.ref=t;const R="normal"===c?20:16,C=b&&p().createElement(s.Z,{size:R,icon:i.Z,className:d.Z["external-icon"]}),S=b?"_blank":void 0,P=r?.[0]&&null!==r[0]&&"components-tooltip"!==r?.[0]?.props?.className;return p().createElement(a.Button,o()({target:S,variant:n,className:l()(E,{"has-text":!!m&&P}),icon:b?void 0:m,iconSize:f,disabled:h,"aria-disabled":h,isDestructive:g,text:y},_),v&&p().createElement(a.Spinner,null),p().createElement("span",null,r),C)}))},6895:(e,t,r)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};let n;if("undefined"!=typeof window&&(n=window.Initial_State?.calypsoEnv),0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,r.url=encodeURIComponent(e)}else r.source=encodeURIComponent(e);Object.keys(t).map((e=>{r[e]=encodeURIComponent(t[e])})),!Object.keys(r).includes("site")&&"undefined"!=typeof jetpack_redirects&&jetpack_redirects.hasOwnProperty("currentSiteRawUrl")&&(r.site=jetpack_redirects.currentSiteRawUrl),n&&(r.calypso_env=n);return"https://jetpack.com/redirect/?"+Object.keys(r).map((e=>e+"="+r[e])).join("&")}r.d(t,{Z:()=>n})},3419:(e,t,r)=>{"use strict";r.d(t,{Wp:()=>n.Wp});var n=r(9505);r(6714),r(354),r(5404),r(1053),r(1380)},1053:(e,t,r)=>{"use strict";var n=r(6975);r(9307);const{tracks:o}=n.Z,{recordEvent:a}=o},1380:(e,t,r)=>{"use strict";r(6989),r(9307)},5404:(e,t,r)=>{"use strict";var n=r(5736);r(6483),r(2819);const __=n.__;__("Upgrade your plan to use video covers","jetpack-videopress-pkg"),__("Upgrade your plan to upload audio","jetpack-videopress-pkg")},6714:(e,t,r)=>{"use strict";r(8817)},9505:(e,t,r)=>{"use strict";function n(){return"object"==typeof window&&"string"==typeof window._currentSiteType?window._currentSiteType:null}function o(){return"simple"===n()}r.d(t,{Wp:()=>o})},354:(e,t,r)=>{"use strict";r(2674),r(4333)},6397:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5609),o=r(5736),a=r(9807);const __=o.__;function s(e){let{onConnect:t,isConnected:r,isConnecting:o}=e;if(r)return null;let s=__("Connect","jetpack-videopress-pkg");return o&&(s=__("Redirecting…","jetpack-videopress-pkg")),React.createElement(a.Z,{action:React.createElement(n.Button,{variant:"primary",onClick:t,disabled:o,isBusy:o},s)},__("Connect your account to continue using VideoPress","jetpack-videopress-pkg"))}},9807:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5609),o=r(797),a=r(1074);function s(e){let{icon:t=o.Z,action:r,children:s,isLoading:i}=e;return React.createElement("div",{className:"block-banner"},React.createElement(a.Z,{icon:t}),React.createElement("div",{className:"block-banner__content"},s),i&&React.createElement(n.Spinner,null),r&&React.createElement("div",{className:"block-banner__action"},r))}},7159:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(2175),o=r(5609),a=r(4333),s=r(9307),i=r(5736),c=r(2030),l=r(5744);const __=i.__;function u(e){let{clientId:t,attributes:r,setAttributes:i}=e;const{useAverageColor:u,seekbarColor:p,seekbarLoadingColor:d,seekbarPlayedColor:m}=r,f={seekbarPlayedColor:m,seekbarLoadingColor:d,seekbarColor:p},[h,g]=(0,s.useState)(f),v=(0,a.useDebounce)((e=>{i(e)}),2e3),b=(0,s.useCallback)((e=>{g((t=>({...t,...e}))),v(e)}),[]),k=(0,s.useCallback)((()=>{g({}),i({useAverageColor:!0,seekbarColor:"",seekbarLoadingColor:"",seekbarPlayedColor:""})}),[]);return React.createElement(o.__experimentalToolsPanelItem,{className:"videopress-playback-bar-colors-panel-item",hasValue:()=>!u,label:__("Dynamic color","jetpack-videopress-pkg"),resetAllFilter:k,isShownByDefault:!0,panelId:t,onDeselect:k},React.createElement(o.PanelRow,{className:"videopress-color-panel__title"},__("Playback bar colors","jetpack-videopress-pkg")),React.createElement(o.ToggleControl,{label:__("Dynamic color","jetpack-videopress-pkg"),help:React.createElement(React.Fragment,null,__("Playback bar colors adapt to the video as it plays.","jetpack-videopress-pkg"),React.createElement("img",{className:"videopress-dynamic-color-example",src:(0,c.Z)(l),alt:__("Dynamic colors example","jetpack-videopress-pkg")})),onChange:e=>i({useAverageColor:e}),checked:u}),!u&&React.createElement(n.PanelColorSettings,{className:"videopress-color-panel",opened:!u,showTitle:!1,colorSettings:[{label:__("Main","jetpack-videopress-pkg"),showTitle:!0,value:h.seekbarColor,onChange:e=>b({seekbarColor:e})},{label:__("Loaded","jetpack-videopress-pkg"),showTitle:!0,value:h.seekbarLoadingColor,onChange:e=>b({seekbarLoadingColor:e})},{label:__("Progress","jetpack-videopress-pkg"),showTitle:!0,value:h.seekbarPlayedColor,onChange:e=>b({seekbarPlayedColor:e})}]}))}},4706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(5609),o=r(9307),a=r(5736),s=r(6029),i=r(1875),c=r(1048);const __=a.__,l=31;function u(e){let{filename:t,chapter:r,isAutoGeneratedChapter:a,attributes:u,setAttributes:p,isRequestingVideoData:d,updateError:m}=e;const{title:f,description:h}=u,{hasIncompleteChapters:g}=(0,c.Z)(h),v=h?.length?h.split("\n").map((e=>Math.ceil(e.length/l)||1)).reduce(((e,t)=>e+t),0):4,b=Math.min(12,Math.max(v,4)),k=g?null:React.createElement(s.Z,null),y=!!r&&!a;return React.createElement(n.PanelBody,{title:__("Details","jetpack-videopress-pkg")},React.createElement(n.TextControl,{label:__("Title","jetpack-videopress-pkg"),value:f,placeholder:t?.length?`${t} video`:__("Video title","jetpack-videopress-pkg"),onChange:e=>p({title:e}),disabled:d||!!m}),React.createElement(n.TextareaControl,{label:__("Description","jetpack-videopress-pkg"),value:h,placeholder:__("Video description","jetpack-videopress-pkg"),onChange:e=>p({description:e}),rows:b,disabled:d||!!m,help:k}),!y&&g&&React.createElement(i.Z,{className:"incomplete-chapters-notice"}),y&&React.createElement(n.Notice,{status:"success",className:"learn-how-notice",isDismissible:!1},React.createElement("p",{className:"learn-how-notice__message"},(0,o.createInterpolateElement)(__("You already have chapter information on an attached VTT file, so adding chapters to the description will not change the original ones. <link>Learn more</link>","jetpack-videopress-pkg"),{link:React.createElement(n.ExternalLink,{href:"https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video"})}))),!!m&&React.createElement(n.Notice,{status:"error",className:"details-panel__error",isDismissible:!1},__("Error updating the video details.","jetpack-videopress-pkg")))}},6152:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(5609),o=r(5736);const __=o.__;function a(e){let{isOpen:t,onClose:r}=e;return t?React.createElement(n.Modal,{title:__("Chapters in VideoPress","jetpack-videopress-pkg"),isDismissible:!1,className:"learn-how-modal",onRequestClose:r},React.createElement("p",null,__("Chapters are a great way to split up longer videos and organize them into different sections.","jetpack-videopress-pkg")),React.createElement("p",null,__("They allow your visitors to see what each section is about and skip to their favorite parts.","jetpack-videopress-pkg")),React.createElement("p",{className:"learn-how-modal__heading"},__("How to add Chapters to your VideoPress videos","jetpack-videopress-pkg")),React.createElement("ol",null,React.createElement("li",null,__("In the Description, add a list of timestamps and titles.","jetpack-videopress-pkg")),React.createElement("li",null,__("Make sure that the first timestamp starts with 00:00.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add at least three chapters entries and as many as you need.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add your chapters entries in consecutive order, with at least 10-second intervals between each.","jetpack-videopress-pkg"))),React.createElement("p",{className:"learn-how-modal__heading"},__("Example","jetpack-videopress-pkg")),React.createElement("p",null,__("00:00 Intro","jetpack-videopress-pkg")),React.createElement("p",null,__("00:24 Mountains arise","jetpack-videopress-pkg")),React.createElement("p",null,__("02:38 Coming back home","jetpack-videopress-pkg")),React.createElement("p",null,__("03:04 Credits","jetpack-videopress-pkg")),React.createElement("div",{className:"learn-how-modal__buttons"},React.createElement(n.Button,{className:"learn-how-modal__button",onClick:r,variant:"primary"},__("Got it, thanks","jetpack-videopress-pkg")))):null}},520:(e,t,r)=>{"use strict";r.d(t,{l:()=>o,u:()=>a});var n=r(5609);const o=React.createElement(n.SVG,{width:"29",height:"21",viewBox:"0 0 29 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.79037 0.59375C4.0363 0.59375 5.13102 1.41658 5.47215 2.60947L8.8452 14.4044C8.8486 14.4164 8.85411 14.4273 8.86124 14.4368L12.8572 0.59375H15.0927H21.2721C25.6033 0.59375 28.5066 3.39892 28.5066 7.64565C28.5066 11.9411 25.5272 14.6196 21.0818 14.6196H18.1499H14.3719L13.6379 16.8813C12.9796 18.9095 11.0827 20.2839 8.94152 20.2839C6.80035 20.2839 4.90341 18.9095 4.24517 16.8813L0.137069 4.22276C-0.444671 2.43022 0.898038 0.59375 2.79037 0.59375ZM15.7374 10.4119H20.0156C21.8718 10.4119 22.9856 9.35018 22.9856 7.64565C22.9856 5.93137 21.8718 4.91839 20.0156 4.91839H17.5202L15.7374 10.4119Z"})),a=React.createElement(n.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M7 15.5H17V17H7V15.5Z"}),React.createElement(n.Path,{d:"M17 12.5H7V14H17V12.5Z"}),React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7 3H5.3C4 3 3 4 3 5.3V18.7C3 20 4 21 5.3 21H18.7C20 21 21 20 21 18.7V5.3C21 4 20 3 18.7 3ZM19.5 18.7C19.5 19.1 19.1 19.5 18.7 19.5H5.3C4.9 19.5 4.5 19.1 4.5 18.7V5.3C4.5 4.9 4.9 4.5 5.3 4.5H18.7C19.1 4.5 19.5 4.9 19.5 5.3V18.7Z"}))},6681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5609),o=r(9307),a=r(5736),s=r(5214);const __=a.__;function i(e){let{attributes:t,setAttributes:r}=e;const{autoplay:a,loop:i,muted:c,controls:l,playsinline:u,preload:p}=t,d=(0,o.useCallback)(((e,t)=>n=>{r({[e]:t??n})}),[r]);return React.createElement(n.PanelBody,{title:__("Playback","jetpack-videopress-pkg")},React.createElement(n.ToggleControl,{label:__("Autoplay","jetpack-videopress-pkg"),onChange:d("autoplay"),checked:a,help:React.createElement(React.Fragment,null,React.createElement("span",{className:s.Z["help-message"]},__("Start playing the video as soon as the page loads.","jetpack-videopress-pkg")),a&&React.createElement("span",{className:s.Z["help-message"]},__("Note: Autoplaying videos may cause usability issues for some visitors.","jetpack-videopress-pkg")))}),React.createElement(n.ToggleControl,{label:__("Loop","jetpack-videopress-pkg"),onChange:d("loop"),checked:i,help:__("Restarts the video when it reaches the end.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Muted","jetpack-videopress-pkg"),onChange:d("muted"),checked:c}),React.createElement(n.ToggleControl,{label:__("Show Controls","jetpack-videopress-pkg"),onChange:d("controls"),checked:l,help:__("Display the video playback controls.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Play Inline","jetpack-videopress-pkg"),onChange:d("playsinline"),checked:u,help:__("Play the video inline instead of full-screen on mobile devices.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Preload Metadata","jetpack-videopress-pkg"),onChange:d("preload","metadata"===p?"none":"metadata"),checked:"metadata"===p,help:__("Preload the video metadata when the page is loaded.","jetpack-videopress-pkg")}),(0,o.createInterpolateElement)(__("Send us your <a>VideoPress feedback</a>","jetpack-videopress-pkg"),{a:React.createElement(n.ExternalLink,{href:"https://automattic.survey.fm/videopress-feedback"})}))}},7153:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(2175),o=r(5609),a=r(9307),s=r(5736);const __=s.__,i=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});i.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function c(e){let{showCaption:t,html:r,isSelected:s,attributes:c,setAttributes:l,preview:u,isRequestingEmbedPreview:p}=e;const d=(0,a.useRef)(),m=(0,a.useRef)(),{maxWidth:f,caption:h,videoRatio:g}=c,[v,b]=(0,a.useState)(400),k=12;function y(){b(m.current.offsetWidth*g/100+k)}const[w,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>{m?.current&&(u.html?setTimeout((()=>{b("auto")}),250):g&&(y(),setTimeout((()=>{y()}),0),_(!1)))}),[m,g,u]),(0,a.useEffect)((()=>{_(!!r)}),[r]);const E=(0,a.useCallback)((e=>{const t=e?.data?.event;if(!t||"videopress_loading_state"!==t)return;const r=e?.data?.state;_("loaded"===r)}),[]),R=m?.current?.querySelector("iframe.components-sandbox");(0,a.useEffect)((()=>{if(!R?.contentWindow)return;const e=R.contentWindow;return e.addEventListener("message",E),()=>e?.removeEventListener("message",E)}),[E,R]),(0,a.useEffect)((()=>{p&&y()}),[w,p]);const C=(0,a.useCallback)(((e,t,r)=>{let n=getComputedStyle(r).width;if(null!==r.parentElement){n===getComputedStyle(r.parentElement).width&&(n="100%")}b("auto"),l({maxWidth:n})}),[l]),S={},P=(0,a.useCallback)((e=>{e&&!h&&e.focus()}),[h]);return"auto"!==v&&(S.height=v||200,S.paddingBottom=v?k:0),React.createElement("figure",{ref:d,className:"jetpack-videopress-player"},React.createElement(o.ResizableBox,{enable:{top:!1,bottom:!1,left:!1,right:!0},maxWidth:"100%",size:{width:f,height:"auto"},style:{marginRight:"auto"},onResizeStop:C,onResizeStart:()=>b("auto")},!s&&React.createElement("div",{className:"jetpack-videopress-player__overlay"}),React.createElement("div",{className:"jetpack-videopress-player__wrapper",ref:m,style:S},React.createElement(React.Fragment,null,!p&&React.createElement(o.SandBox,{html:r,scripts:i}),!w&&React.createElement("div",{className:"jetpack-videopress-player__loading"},__("Loading…","jetpack-videopress-pkg"))))),t&&(!n.RichText.isEmpty(h)||s)&&React.createElement(n.RichText,{identifier:"caption",tagName:"figcaption","aria-label":__("Video caption text","jetpack-videopress-pkg"),placeholder:__("Add caption","jetpack-videopress-pkg"),value:h,onChange:e=>l({caption:e}),inlineToolbar:!0,ref:P}))}window?.videoPressEditorState?.playerBridgeUrl&&i.push(window.videoPressEditorState.playerBridgeUrl)},723:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p,u:()=>u});var n=r(2175),o=r(5609),a=r(9307),s=r(5736),i=r(5022),c=r(9975),l=r(2917);const __=s.__;function u(e){let{poster:t,className:r}=e;const n=(0,a.createInterpolateElement)(__("No custom Poster image selected.<help>You can upload or select an image from your media library to override the default video image.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})}),o=(0,a.createInterpolateElement)(__("You are currently overriding the default Poster image.<help>Remove it if you want to use the default image generated by VideoPress.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})});return React.createElement("div",{className:r},t?o:n)}function p(e){let{attributes:t,setAttributes:r,clientId:a}=e;const{poster:p}=t;return React.createElement(o.Dropdown,{contentClassName:"dropdown-content",renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return React.createElement(o.ToolbarButton,{label:__("Poster image","jetpack-videopress-pkg"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:i.Z})},renderContent:e=>{let{onClose:t}=e;const d=`video-block__poster-image-description-${a}`;return React.createElement(React.Fragment,null,React.createElement(o.NavigableMenu,{className:"poster-image-block-control__wrapper"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:e=>{(e=>{r({poster:e.url})})(e),t()},allowedTypes:l.U,render:e=>{let{open:t}=e;return React.createElement(o.MenuItem,{icon:i.Z,onClick:t,"aria-describedby":d},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:d,hidden:!0},p?(0,s.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),p):__("There is no poster image currently selected","jetpack-videopress-pkg")))}})),React.createElement(u,{poster:p,className:"current-media"}),!!p&&React.createElement(o.MenuItem,{className:"poster-image-block-control__remove-button",variant:"tertiary",isDestructive:!0,onClick:()=>{r({poster:""}),t()},icon:c.Z},__("Remove and use default","jetpack-videopress-pkg"))))}})}},4874:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>w});var n=r(2175),o=r(5609),a=r(9307),s=r(5736),i=r(5022),c=r(9975),l=r(5235),u=r.n(l),p=r(6194),d=r(515),m=r(5417),f=r(2917),h=r(723);const __=s.__,g=()=>!!window?.Jetpack_Editor_Initial_State?.available_blocks?.["v6-video-frame-poster"],v=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});v.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function b(e){let{clientId:t,attributes:r,setAttributes:c}=e;const l=`video-block__poster-image-description-${t}`,{poster:u}=r,p=(0,a.useCallback)((e=>{c({poster:e.url,posterData:{...r.posterData,type:"media-library",id:e.id,url:e.url}})}),[r]),d=__("Select Poster Image","jetpack-videopress-pkg"),m=__("Replace Poster Image","jetpack-videopress-pkg"),h=(0,a.useRef)(null),g=Number(r?.videoRatio)/100||9/16,[v,b]=(0,a.useState)(140);return(0,a.useEffect)((()=>{if(!u||!h?.current)return;const{current:e}=h,t=e?.offsetWidth;t&&b(t*g)}),[u,h,g]),React.createElement(o.Dropdown,{contentClassName:"poster-panel__dropdown",placement:"top left",renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return React.createElement(o.Button,{ref:h,style:{backgroundImage:u?`url(${u})`:void 0,height:v,minHeight:v},className:"poster-panel__button "+(u?"has-poster":""),variant:"secondary",onClick:r,"aria-expanded":t},React.createElement("span",null,u?m:d))},renderContent:e=>{let{onClose:t}=e;return React.createElement(o.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:e=>{p(e),t()},allowedTypes:f.U,render:e=>{let{open:t}=e;return React.createElement(o.MenuItem,{icon:i.Z,onClick:t,"aria-describedby":l},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:l,hidden:!0},u?(0,s.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),u):__("There is no poster image currently selected","jetpack-videopress-pkg")))}})))}})}window?.videoPressEditorState?.playerBridgeUrl&&v.push(window.videoPressEditorState.playerBridgeUrl);const k=e=>e?.current?.querySelector(".components-sandbox")?.contentWindow;function y(e){let{guid:t,isGeneratingPoster:r,atTime:n=.1,onVideoFrameSelect:s}=e;const[i,c]=(0,a.useState)(n),[l,f]=(0,a.useState)(0),[h,g]=(0,a.useState)(!1),b=(0,a.useRef)(null),y=(0,d.pg)(t,{autoplay:!0,controls:!1,loop:!1,muted:!0}),{preview:w={html:null},isRequestingEmbedPreview:_}=(0,m.u)(y),{html:E}=w,R=(0,a.useRef)("not-rendered");function C(e){const{data:t={},source:r}=e,{event:o}=e?.data||{};"videopress_durationchange"===o&&t?.durationMs&&f(t.durationMs),"videopress_loading_state"===o&&"loaded"===t.state&&(R.current="loaded"),"videopress_playing"===o&&"loaded"===R.current&&(R.current="has-auto-played",r.postMessage({event:"videopress_action_pause"},{targetOrigin:"*"}),r.postMessage({event:"videopress_action_set_currenttime",currentTime:n/1e3},{targetOrigin:"*"}),g(!0))}return(0,a.useEffect)((()=>{if(_)return;if(!E)return;const e=k(b);return e?(e.addEventListener("message",C),()=>{e.removeEventListener("message",C)}):void 0}),[b,_,E]),React.createElement("div",{className:"poster-panel__frame-picker"},React.createElement("div",{ref:b,className:u()("poster-panel__frame-picker__sandbox-wrapper",{"is-player-ready":h,"is-generating-poster":r})},(!h||r)&&React.createElement(o.Spinner,null),React.createElement(o.SandBox,{html:E,scripts:v})),r&&React.createElement(o.Notice,{status:"info",className:"poster-panel__notice",isDismissible:!1},__("Generating video poster image. It may take a few seconds.","jetpack-videopress-pkg")),React.createElement(p.ZP,{label:__("Video frame","jetpack-videopress-pkg"),help:__("Select the frame you want to use as poster image","jetpack-videopress-pkg"),disabled:_||r,max:l,value:i,wait:250,onChange:c,onDebounceChange:e=>{k(b)?.postMessage({event:"videopress_action_set_currenttime",currentTime:e/1e3}),s(e)}}))}function w(e){let{attributes:t,setAttributes:r,isGeneratingPoster:n}=e;const{poster:s,posterData:i}=t,[l,p]=(0,a.useState)("video-frame"===t?.posterData?.type),d=()=>{r({poster:"",posterData:{...t.posterData,url:""}})},m=(0,a.useCallback)((e=>{p(e),r({posterData:{...t.posterData,type:e?"video-frame":"media-library"},poster:e?"":t.posterData.url||""})}),[t]);if(!g())return React.createElement(o.PanelBody,{title:__("Poster","jetpack-videopress-pkg"),className:"poster-panel"},React.createElement(b,{attributes:t,setAttributes:r}),React.createElement(h.u,{poster:s,className:"poster-panel-card"}),s&&React.createElement(o.MenuItem,{onClick:d,icon:c.Z,isDestructive:!0,variant:"tertiary"},__("Remove and use default","jetpack-videopress-pkg")));const f=g()?__("Poster and preview","jetpack-videopress-pkg"):__("Poster","jetpack-videopress-pkg");return React.createElement(o.PanelBody,{title:f,className:"poster-panel",initialOpen:!1},React.createElement(o.ToggleControl,{label:__("Pick from video frame","jetpack-videopress-pkg"),checked:l,onChange:m}),React.createElement("div",{className:u()("poster-panel__frame-wrapper",{"is-selected":l})},React.createElement(y,{isGeneratingPoster:n,guid:t?.guid,atTime:i?.atTime,onVideoFrameSelect:e=>{r({posterData:{...t.posterData,type:"video-frame",atTime:e},poster:""})}})),React.createElement("div",{className:u()("poster-panel__image-wrapper",{"is-selected":!l})},React.createElement(b,{attributes:t,setAttributes:r}),React.createElement(h.u,{poster:s,className:"poster-panel-card"}),s&&React.createElement(o.MenuItem,{onClick:d,icon:c.Z,isDestructive:!0,variant:"tertiary"},__("Remove and use default","jetpack-videopress-pkg"))))}},8864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(3853);function o(e){let{attributes:t,setAttributes:r,privateEnabledForSite:o}=e;return React.createElement(n.Z,{attributes:t,setAttributes:r,privateEnabledForSite:o})}},3853:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5609),o=r(9307),a=r(5736),s=r(4391);const __=a.__,_x=a._x;function i(e){let{attributes:t,setAttributes:r,privateEnabledForSite:a}=e;const{privacySetting:i,rating:c,allowDownload:l,displayEmbed:u}=t,p={private:_x("Site Default (Private)","VideoPress privacy setting","jetpack-videopress-pkg"),public:_x("Site Default (Public)","VideoPress privacy setting","jetpack-videopress-pkg")},d={value:String(s.Vz.indexOf(s.O1)),label:a?p.private:p.public},m={value:String(s.Vz.indexOf(s.$A)),label:_x("Public","VideoPress privacy setting","jetpack-videopress-pkg")},f={value:String(s.Vz.indexOf(s.UJ)),label:_x("Private","VideoPress privacy setting","jetpack-videopress-pkg")};return React.createElement(n.PanelBody,{title:o.Platform.isWeb&&__("Privacy and rating","jetpack-videopress-pkg"),initialOpen:!1},React.createElement(n.SelectControl,{label:_x("Rating","The age rating for this video.","jetpack-videopress-pkg"),value:c??"",options:[{label:_x("G",'Video rating for "General Audiences".',"jetpack-videopress-pkg"),value:s.x4},{label:_x("PG-13",'Video rating for "Parental Guidance", unsuitable for children under 13.',"jetpack-videopress-pkg"),value:s.pf},{label:_x("R",'Video rating for "Restricted", not recommended for children under 17.',"jetpack-videopress-pkg"),value:s.Gr}],onChange:e=>{r({rating:e})}}),React.createElement(n.SelectControl,{label:__("Privacy","jetpack-videopress-pkg"),onChange:e=>{const t={};t.isPrivate=e!==d.value?e===f.value:a,t.privacySetting=Number(e),r(t)},value:String(i),options:[d,m,f]}),React.createElement(n.ToggleControl,{label:__("Allow download","jetpack-videopress-pkg"),checked:l,onChange:e=>{r({allowDownload:e})}}),React.createElement(n.ToggleControl,{label:__("Show video sharing menu","jetpack-videopress-pkg"),checked:u,onChange:e=>{r({displayEmbed:e})},help:__("Gives viewers the option to share the video link and HTML embed code","jetpack-videopress-pkg")}))}},6458:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(2175),o=r(2917);const a=e=>{let{attributes:t,onUploadFileStart:r,onSelectVideoFromLibrary:a,onSelectURL:s}=e;const i=t.isPrivate?"https://video.wordpress.com/v":"https://videopress.com/v";return React.createElement(n.MediaReplaceFlow,{mediaId:t.id,handleUpload:!1,accept:"video/*",allowedTypes:o.T,onSelect:function(e){e?.[0]?.name&&e?.[0]?.size&&e?.[0]?.type?r(e[0]):a(e)},mediaURL:`${i}/${t.guid}`,onSelectURL:s})}},7898:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(5609),o=r(7798),a=r(9818),s=r(9307),i=r(5736),c=r(7659),l=r(951),u=r.n(l),p=r(515),d=r(2198),m=r(520),f=r(879);const __=i.__,h=u()("videopress:video:tracks-control");function g(e){let{track:t,guid:r,onDelete:o}=e;const[a,i]=(0,s.useState)(!1),{kind:c,label:l,srcLang:u}=t;return React.createElement("div",{className:"video-tracks-control__track-item "+(a?"is-deleting":"")},React.createElement("div",{className:"video-tracks-control__track-item-label"},React.createElement("strong",null,l),React.createElement("span",{className:"video-tracks-control__track-item-kind"},c,u?.length?` [${u}]`:"")),React.createElement(n.Button,{variant:"link",isDestructive:!0,onClick:()=>{i(!0),(0,d.qL)(t,r).then((()=>{i(!1),o?.(t)}))},disabled:a},__("Delete","jetpack-videopress-pkg")))}function v(e){let{tracks:t,guid:r,onTrackListUpdate:o}=e;if(!t?.length)return React.createElement(n.MenuGroup,null,React.createElement("div",{className:"video-tracks-control__track_list__no-tracks"},__("Tracks can be subtitles, captions, chapters, or descriptions. They help make your content more accessible to a wider range of users.","jetpack-videopress-pkg")));const a=(0,s.useCallback)((e=>{const r=[...t].filter((t=>t!==e));o(r)}),[t]);return React.createElement(n.MenuGroup,{className:"video-tracks-control__track_list",label:__("Text tracks","jetpack-videopress-pkg")},t.map(((e,t)=>React.createElement(g,{key:`${e.kind}-${t}`,track:e,guid:r,onDelete:a}))))}function b(e){let{attributes:t,setAttributes:r}=e;const{tracks:i,guid:l}=t,[u,g]=(0,s.useState)(!1),b=(0,a.useDispatch)(o.store).invalidateResolution,k=(0,p.pg)(l,t),y=(0,s.useCallback)((e=>{(0,d.nb)(e,l).then((t=>{const n={...e,src:t};delete n.tmpFile;const o=i.findIndex((e=>e.kind===n.kind&&e.srcLang===n.srcLang)),a=[...i];o>-1?(h("new track already exists, replacing it"),a[o]=n):(h("new track does not exist, adding it"),a.push(n)),r({tracks:a}),g(!1),b("getEmbedPreview",[k])})),g(!0)}),[i]),w=(0,s.useCallback)((e=>{r({tracks:e}),b("getEmbedPreview",[k])}),[i]);return React.createElement(n.ToolbarDropdownMenu,{icon:m.u,label:__("Text tracks","jetpack-videopress-pkg"),popoverProps:{variant:"toolbar"}},(()=>u?React.createElement(f.Z,{onCancel:()=>{g(!1)},onSave:y,tracks:i}):React.createElement(React.Fragment,null,React.createElement(v,{tracks:i,guid:l,onTrackListUpdate:w}),React.createElement(n.MenuGroup,{label:__("Add tracks","jetpack-videopress-pkg"),className:"video-tracks-control"},React.createElement(n.MenuItem,{icon:c.Z,onClick:()=>g(!0)},__("Upload track","jetpack-videopress-pkg"))))))}},879:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(2175),o=r(5609),a=r(9818),s=r(9307),i=r(5736);const __=i.__,c="subtitles",l=".vtt,text/vtt",u=[{label:__("Subtitles","jetpack-videopress-pkg"),value:"subtitles"},{label:__("Captions","jetpack-videopress-pkg"),value:"captions"},{label:__("Descriptions","jetpack-videopress-pkg"),value:"descriptions"},{label:__("Chapters","jetpack-videopress-pkg"),value:"chapters"},{label:__("Metadata","jetpack-videopress-pkg"),value:"metadata"}];function p(e){let{onCancel:t,onSave:r,tracks:p}=e;const[d,m]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!1),[g,v]=(0,s.useState)(""),[b,k]=(0,s.useState)(!1),[y,w]=(0,s.useState)({kind:c,srcLang:"",label:"",tmpFile:null}),_=(0,s.useCallback)(((e,t)=>{w((r=>({...r,[e]:t})))}),[y]);(0,s.useEffect)((()=>{const e=p.some((e=>e.srcLang===y.srcLang&&e.kind===y.kind));h(e)}),[y,p]);const E=y.tmpFile?.name,R=(0,a.useSelect)((e=>e(n.store).getSettings().mediaUpload),[]),C=(0,s.useCallback)((()=>{m(!0),r(y)}),[y]),S=(0,s.useCallback)((e=>{if(_("srcLang",e),e?.length>5)return v(__("Language must be five characters or less.","jetpack-videopress-pkg"));v("")}),[]);if(!R)return null;const P=(0,i.sprintf)(/* translators: %s: The allowed file types to be uploaded as a video text track." */
__("Add a new text track to the video. Allowed formats: %s","jetpack-videopress-pkg"),l);return React.createElement(o.MenuGroup,{className:"video-tracks-control__track-form",label:__("Upload track","jetpack-videopress-pkg")},React.createElement("div",{className:"video-tracks-control__track-form-container"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file-label"},React.createElement("span",null,__("File","jetpack-videopress-pkg"),":"),E&&React.createElement("strong",null,E),React.createElement(n.MediaUploadCheck,null,React.createElement(o.FormFileUpload,{onChange:e=>{const t=e.target.files;t?.length&&_("tmpFile",t[0])},accept:l,render:e=>{let{openFileDialog:t}=e;return React.createElement(o.Button,{variant:"link",onClick:()=>{t()}},__("Select track","jetpack-videopress-pkg"))}}))),React.createElement("div",{className:"video-tracks-control__track-form-upload-file-help"},P)),React.createElement("div",{className:"video-tracks-control__track-form-label-language"},React.createElement(o.TextControl,{onChange:e=>_("label",e),label:__("Label","jetpack-videopress-pkg"),value:y.label,help:__("Title of track","jetpack-videopress-pkg"),disabled:d}),React.createElement(o.TextControl,{className:"video-tracks-control__track-form-language-tag",label:__("Source language","jetpack-videopress-pkg"),value:y.srcLang,onChange:S,help:__("Language (en, fr, etc.)","jetpack-videopress-pkg"),disabled:d})),React.createElement(o.SelectControl,{options:u,value:y.kind,label:/* translators: %s: The kind of video text track e.g: "Subtitles, Captions" */
__("Kind","jetpack-videopress-pkg"),onChange:e=>_("kind",e),disabled:d}),g&&React.createElement(o.Notice,{status:"error",isDismissible:!1},g),React.createElement("div",{className:"video-tracks-control__track-form-buttons-container "+(f?" track-exists":"")},!g?.length&&f&&React.createElement(o.ToggleControl,{className:"video-tracks-control__track-form-toggle",label:__("Track exists. Replace?","jetpack-videopress-pkg"),checked:b,onChange:k}),React.createElement(o.Button,{isBusy:d,variant:"secondary",disabled:!y.tmpFile||d||f&&!b||!!g,onClick:C},__("Save","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"link",onClick:t},__("Cancel","jetpack-videopress-pkg")))))}},4744:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(6895),o=r(6989),a=r.n(o),s=r(2175),i=r(5609),c=r(9307),l=r(5736),u=r(9272),p=r(1207),d=r(515),m=r(2917),f=r(3414),h=r(1471),g=r(520),v=r(125),b=r(2374);const __=l.__,k=(0,i.withNotices)((e=>{let{attributes:t,setAttributes:r,noticeUI:o,noticeOperations:l,handleDoneUpload:k,fileToUpload:y,isReplacing:w,onReplaceCancel:_}=e;const[E,R]=(0,c.useState)(!1),[C,S]=(0,c.useState)(!1),[P,j]=(0,c.useState)(!1),[x,U]=(0,c.useState)(!1);(0,c.useEffect)((()=>{y&&z(y)}),[y]);const[N,A]=(0,c.useState)(null),[T,O]=(0,c.useState)([]),Z=(0,c.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];O(t)}),[]),[D,F]=(0,c.useState)(null),I=(0,c.useCallback)((function(e){if(e?.originalResponse)try{const t=e?.originalResponse?.getBody?.(),r=JSON.parse(t);return void F(r)}catch{}F(e)}),[]),{uploadHandler:L,resumeHandler:B,error:M}=(0,u.Z)({onError:I,onProgress:Z,onSuccess:S});function H(e,t){const{guid:r,url:n}=(0,d.Yv)(e);r?k({guid:r,src:n,id:t}):F({data:{message:__("Invalid VideoPress URL","jetpack-videopress-pkg")}})}const z=e=>{D&&I(null),A(e),Z(0,e.size),j(!0),L(e)},V=e=>{(0,p.R2)(e).then((e=>{S(e)})).catch((e=>{F(e)}))},q=()=>{if(!B)return;B[E?"start":"abort"](),R(!E)},$=function(){B.abort(),_()};if("owner_not_connected"===M?.code){const e=(0,c.createInterpolateElement)(__("<connectLink>Connect</connectLink> your site to use the <moreAboutVideoPressLink>VideoPress</moreAboutVideoPressLink> video block.","jetpack-videopress-pkg"),{connectLink:React.createElement("a",{href:M?.data?.connect_url,rel:"noreferrer noopener"}),moreAboutVideoPressLink:React.createElement(i.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return React.createElement(f.l,{errorMessage:e},React.createElement(i.Button,{key:"videopress-connect-user",variant:"primary",href:M?.data?.connect_url},__("Connect","jetpack-videopress-pkg")))}if(D){const e=()=>{z(N)},t=()=>{A(null),Z([]),I(null),j(!1)};return React.createElement(v.Z,{onRetry:e,onCancel:t,errorData:D})}if(P){const e=T[0]/T[1]*100;return React.createElement(b.Z,{attributes:t,setAttributes:r,file:N,progress:e,paused:E,uploadedVideoData:C,onPauseOrResume:q,onReplaceCancel:$,isReplacing:w,onDone:k,supportPauseOrResume:!!B})}return x?React.createElement(f.l,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(i.Spinner,null),React.createElement("span",null,__("Loading…","jetpack-videopress-pkg")))):React.createElement(s.MediaPlaceholder,{handleUpload:!1,className:"is-videopress-placeholder",icon:React.createElement(s.BlockIcon,{icon:g.l}),labels:{title:h.TN,instructions:h.WL},onSelect:function(e){if((e=e?.[0]?e[0]:e)?.name&&e?.size&&e?.type)z(e);else if(e.videopress_guid){H(Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid,e?.id)}else{if(e.id){const t=`videopress/v1/upload/${e.id}`;return U(!0),void a()({path:t,method:"GET"}).then((t=>{U(!1),"new"===t.status||"resume"===t.status?(A(e),Z(t.file_size,t.file_size),j(!0),V(e.id)):"uploaded"===t.status?H(t.uploaded_video_guid):F({data:{message:t.message?t.message:__("Error selecting video. Please try again.","jetpack-videopress-pkg")}})})).catch((e=>{U(!1),F({data:{message:e.message}})}))}F({data:{message:__("Please select a video from Library or upload a new one","jetpack-videopress-pkg")}})}},onSelectURL:H,accept:"video/*",allowedTypes:m.T,value:t,notices:o,onError:function(e){l.removeAllNotices(),l.createErrorNotice(e)}})}))},7215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(2175),o=r(5609),a=r(9307),s=r(5736),i=r(1074),c=r(5235),l=r.n(c),u=r(2346),p=r(7535);const __=s.__,d=["image"],m=e=>{let{videoPosterImageUrl:t}=e;return React.createElement("div",{className:"uploading-editor__poster-image"},t?React.createElement("img",{src:t,alt:"Poster"}):React.createElement("span",null,"No Poster Selected"))},f=e=>{let{file:t,videoPosterImageData:r,onVideoFrameSelected:n}=e;const o=Boolean(r?.url),s=(0,a.useRef)(t?.url??URL.createObjectURL(t));return React.createElement("div",{className:l()("uploading-editor__poster-container")},React.createElement(p.Z,{src:s?.current,onVideoFrameSelected:n,className:l()({"uploading-editor__hide":o})}),o&&React.createElement(React.Fragment,null,React.createElement(m,{videoPosterImageUrl:r?.url}),React.createElement(i.Z,{className:"uploading-editor__play-icon",icon:u.Z})))},h=e=>{let{hasPoster:t,onSelectPoster:r,onRemovePoster:a}=e;return t?React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r,allowedTypes:d,render:e=>{let{open:t}=e;return React.createElement("div",{className:"uploading-editor__poster-buttons"},React.createElement(o.Button,{onClick:a,variant:"secondary",isDestructive:!0},__("Remove Poster Image","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"secondary",onClick:t},__("Select Poster Image","jetpack-videopress-pkg")))}}):React.createElement("span",{className:"uploading-editor__scrubber-help"},__("This is how the video will look. Use the slider to choose a poster image.","jetpack-videopress-pkg"))},g=e=>{const{file:t,onSelectPoster:r,onRemovePoster:n,videoPosterImageData:a,onVideoFrameSelected:s}=e;return React.createElement("div",{className:"uploading-editor"},React.createElement(o.BaseControl,{label:__("Video poster (optional)","jetpack-videopress-pkg")},React.createElement(f,{file:t,videoPosterImageData:a,onVideoFrameSelected:s}),React.createElement(h,{hasPoster:Boolean(a),onSelectPoster:r,onRemovePoster:n})))}},125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5609),o=r(5736),a=r(3414);const __=o.__,s=e=>{let{errorData:t,onRetry:r,onCancel:o}=e;const s=(e=>{if(!e)return"";let t=e?.data?.message||__("Failed to upload your video. Please try again.","jetpack-videopress-pkg");return"Invalid Mime"===t&&(t=React.createElement(React.Fragment,null,__("The format of the video you uploaded is not supported.","jetpack-videopress-pkg")," ",React.createElement(n.ExternalLink,{href:"https://wordpress.com/support/videopress/recommended-video-settings/",target:"_blank",rel:"noreferrer"},__("Check the recommended video settings.","jetpack-videopress-pkg")))),t})(t);return React.createElement(a.l,{errorMessage:s,onNoticeRemove:o},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(n.Button,{variant:"primary",onClick:r},__("Try again","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"secondary",onClick:o},__("Cancel","jetpack-videopress-pkg"))))}},2374:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(6989),o=r.n(n),a=r(5609),s=r(4333),i=r(9307),c=r(1975),l=r(5736),u=r(951),p=r.n(u),d=r(861),m=r.n(d),f=r(5134),h=r(6650),g=r(3897),v=r(515),b=r(3414),k=r(7215);const __=l.__,y=p()("videopress:block:uploader"),w=e=>{let{setAttributes:t,videoData:r,onDone:n}=e;const[a,c]=(0,i.useState)(!1),[l,u]=(0,i.useState)(null),[p,d]=(0,i.useState)(null),{title:m}=r,v=r?.guid,b=(0,g.Z)(v),k=(0,h.Z)(v),y=(0,f.Z)(r?.id),w=e=>{let{data:r}=e;r?.generating?setTimeout((()=>{new Promise(((e,t)=>{k(v).then((t=>e(t))).catch((()=>{o()({path:`/videos/${v}/poster`,apiNamespace:"rest/v1.1",global:!0,method:"GET"}).then((t=>e(t))).catch((e=>t(e)))}))})).then((e=>w(e)))}),2e3):r?.poster&&t({poster:r?.poster})},_=(0,s.useDebounce)((e=>{var t;t=e,new Promise(((e,r)=>{b(t).then((t=>{w(t),e()})).catch((()=>{o()({path:`/videos/${v}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:t}).then((()=>{e()})).catch((e=>{r(e)}))}))}))}),1e3);return(0,i.useEffect)((()=>{if(v)return p?_({poster_attachment_id:p?.id}):void(null!=l&&_({at_time:l,is_millisec:!0}))}),[p,l,v]),[e=>{u(e),d(null)},e=>{d(e)},()=>{d(null)},()=>{c(!0);const e=[];m&&e.push(y({title:m})),Promise.allSettled(e).then((()=>{c(!1),n(r)}))},p,a]},_=e=>{let{attributes:t,setAttributes:r,progress:n,file:o,paused:s,uploadedVideoData:u,onPauseOrResume:p,onDone:d,supportPauseOrResume:f,isReplacing:h,onReplaceCancel:g}=e;const[_,E,R,C,S,P]=w({setAttributes:r,videoData:{...u,title:t.title},onDone:d}),[j,x]=(0,i.useState)(!0);(0,i.useEffect)((()=>{u&&!P&&j&&(y("Waiting for some time before enabling the DONE button..."),setTimeout((()=>{y("Done, enabling the DONE button now..."),x(!1)}),2500))}),[u,P]);const U=Math.round(n),N={width:`${U}%`},A=__("Resume","jetpack-videopress-pkg"),T=__("Pause","jetpack-videopress-pkg"),O=o?.filesizeHumanReadable??m()(o?.size),{title:Z}=t,D=(0,v.K8)((0,c.escapeHTML)(o?.name));return React.createElement(b.l,{disableInstructions:!0},React.createElement(a.TextControl,{label:__("Video title","jetpack-videopress-pkg"),className:"uploading-editor__title",onChange:e=>r({title:e}),value:Z,placeholder:D}),React.createElement(k.Z,{file:o,onSelectPoster:E,onRemovePoster:R,onVideoFrameSelected:_,videoPosterImageData:S}),React.createElement("div",{className:"videopress-uploader-progress"},U<100?React.createElement(React.Fragment,null,React.createElement("div",{className:"videopress-uploader-progress__file-info"},React.createElement("div",{className:"videopress-uploader-progress__progress"},React.createElement("div",{className:"videopress-uploader-progress__progress-loaded",style:N})),React.createElement("div",{className:"videopress-upload__percent-complete"},(0,l.sprintf)(/* translators: Placeholder is an upload progress percenatage number, from 0-100. */
__("Uploading (%1$s%%)","jetpack-videopress-pkg"),U)),React.createElement("div",{className:"videopress-uploader-progress__file-size"},O)),h&&React.createElement("div",{className:"videopress-uploader-progress__actions"},React.createElement(a.Button,{onClick:g,variant:"tertiary",isDestructive:!0},__("Cancel","jetpack-videopress-pkg"))),React.createElement("div",{className:"videopress-uploader-progress__actions"},U<100&&React.createElement(a.Button,{variant:"tertiary",onClick:p,disabled:!f},s?A:T))):React.createElement(React.Fragment,null,j?React.createElement("span",null,__("Finishing up …","jetpack-videopress-pkg")," 🎬"):React.createElement("span",null,__("Upload Complete!","jetpack-videopress-pkg")," 🎉"),React.createElement(a.Button,{variant:"primary",onClick:C,disabled:j,isBusy:j},__("Done","jetpack-videopress-pkg")))))}},2917:(e,t,r)=>{"use strict";r.d(t,{T:()=>n,U:()=>o});const n=["video"],o=["image"]},3414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M,l:()=>B});var n=r(2674),o=r.n(n),a=r(2175),s=r(4981),i=r(5609),c=r(7798),l=r(9818),u=r(9307),p=r(5736),d=r(3805),m=r(5235),f=r.n(m),h=r(951),g=r.n(h),v=r(8232),b=r(515),k=r(5417),y=r(8382),w=r(6397),_=r(7159),E=r(4706),R=r(520),C=r(6681),S=r(7153),P=r(723),j=r(4874),x=r(8864),U=r(6458),N=r(7898),A=r(4744),T=r(1471);const __=p.__,O=g()("videopress:video:edit"),{myJetpackConnectUrl:Z,jetpackVideoPressSettingUrl:D}=window?.videoPressEditorState||{},F=(0,v.Hn)(),I=(0,v.$U)(),L=10,B=(0,i.withNotices)((function(e){let{children:t,errorMessage:r,noticeUI:n,noticeOperations:o,instructions:s=T.WL,disableInstructions:c}=e;return(0,u.useEffect)((()=>{r&&(o.removeAllNotices(),o.createErrorNotice(r))}),[r,o]),React.createElement(i.Placeholder,{icon:React.createElement(a.BlockIcon,{icon:R.l}),label:T.TN,instructions:c?null:s,notices:n},t)}));function M(e){let{attributes:t,setAttributes:r,isSelected:n,clientId:p}=e;const{autoplay:m,loop:h,muted:g,controls:v,playsinline:R,preload:T,useAverageColor:M,seekbarColor:H,seekbarLoadingColor:z,seekbarPlayedColor:V,guid:q,cacheHtml:$,poster:G,align:W,videoRatio:J,tracks:K,src:Y,caption:X,isExample:Q}=t,ee=(0,b.pg)(q,{autoplay:m,controls:v,loop:h,muted:g,playsinline:R,preload:T,seekbarColor:H,seekbarLoadingColor:z,seekbarPlayedColor:V,useAverageColor:M,poster:G}),[te,re]=(0,u.useState)(!1),ne=K?.filter((e=>"chapters"===e.kind))?.[0],[oe,ae]=(0,u.useState)(!!X),{videoData:se,isRequestingVideoData:ie,error:ce,isOverwriteChapterAllowed:le,isGeneratingPoster:ue}=(0,y.v)(t,r),{filename:pe,private_enabled_for_site:de}=se,{preview:me,isRequestingEmbedPreview:fe}=(0,k.u)(ee),{html:he,width:ge,height:ve}=me;(0,u.useEffect)((()=>{he&&he!==$&&r({cacheHtml:he})}),[he,$,r]);const be=he||$;(0,u.useEffect)((()=>{if(!ge||!ve)return;const e=ve/ge*100;e!==J&&r({videoRatio:e})}),[J,ge,ve,r]);const ke=(0,l.useDispatch)(c.store).invalidateResolution,ye=(0,u.useCallback)((()=>{ke("getEmbedPreview",[ee])}),[ee,ke]),[we,_e]=(0,u.useState)(0),Ee=(0,u.useRef)();function Re(){Ee?.current&&(Ee.current=clearInterval(Ee.current))}(0,u.useEffect)((()=>we>=L?(O("Generating preview ➡ attempts number reached out 😪",we),Re()):ee?fe?(O("Generating preview ➡ Requesting… ⌛"),Re()):me.html?(O("Generating preview ➡ Preview achieved 🎉 %o",me),Re()):Ee?.current?void O("Generating preview ➡ Process already requested ⌛"):(Ee.current=setTimeout((()=>{if(me.html)return O("Generating preview ➡ Preview already achieved 🎉 %o",me),void _e(0);_e((e=>e+1)),O("Generating preview ➡ Not achieved so far. Start attempt %o 🔥",we+1),ye()}),2e3),Re):(O("Generating preview ➡ No URL Provided 👋🏻"),Re())),[we,Ee,ye,me,ee,fe]);const{className:Ce,...Se}=(0,a.useBlockProps)({className:"wp-block-jetpack-videopress"}),[Pe,je]=(0,u.useState)(!q),[xe,Ue]=(0,u.useState)(null),{replaceBlock:Ne}=(0,l.useDispatch)(a.store),[Ae,Te]=(0,u.useState)({isReplacing:!1,prevAttrs:{}}),Oe=()=>{r(Ae.prevAttrs),Te({isReplacing:!1,prevAttrs:{}}),je(!1)};if(Q)return React.createElement("img",{style:{width:"100%",height:"auto",backgroundSize:"cover"},className:"wp-block-jetpack-videopress__example",src:Y,alt:X});if(Pe){const e=e=>{if(je(!1),Ae.isReplacing){const r={...t,...e};return delete r.poster,Te({isReplacing:!1,prevAttrs:{}}),void Ne(p,(0,s.createBlock)("videopress/video",r))}r({id:e.id,guid:e.guid,title:e.title})};return React.createElement("div",o()({},Se,{className:Ce}),React.createElement(React.Fragment,null,React.createElement(w.Z,{isConnected:I,isConnecting:te,onConnect:()=>{if(re(!0),!F)return window.location.href=D;window.location.href=Z}}),React.createElement(A.Z,{setAttributes:r,attributes:t,handleDoneUpload:e,fileToUpload:xe,isReplacing:Ae?.isReplacing,onReplaceCancel:Oe})))}if((fe||!me.html)&&we>0&&we<L)return React.createElement("div",o()({},Se,{className:Ce}),React.createElement(B,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(i.Spinner,null),__("Generating preview…","jetpack-videopress-pkg"),React.createElement("strong",null," ",we))));if(we>=L&&!me.html)return React.createElement("div",o()({},Se,{className:Ce}),React.createElement(B,{errorMessage:__("Impossible to get a video preview after ten attempts.","jetpack-videopress-pkg"),onNoticeRemove:ke},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(i.Button,{variant:"primary",onClick:ke},__("Try again","jetpack-videopress-pkg")),React.createElement(i.Button,{variant:"secondary",onClick:()=>{r({src:void 0,id:void 0,guid:void 0})}},__("Cancel","jetpack-videopress-pkg")))));const Ze=__("Remove caption","jetpack-videopress-pkg"),De=__("Add caption","jetpack-videopress-pkg");return React.createElement("div",o()({},Se,{className:f()(Ce,{[`align${W}`]:W,"is-updating-preview":!he})}),React.createElement(a.BlockControls,{group:"block"},React.createElement(i.ToolbarButton,{onClick:()=>{ae(!oe),oe&&X&&r({caption:void 0})},icon:d.Z,isPressed:oe,label:oe?Ze:De}),React.createElement(P.Z,{attributes:t,setAttributes:r,clientId:p}),React.createElement(N.Z,{attributes:t,setAttributes:r})),React.createElement(a.BlockControls,{group:"other"},React.createElement(U.Z,{setAttributes:r,attributes:t,onUploadFileStart:e=>{Te({isReplacing:!0,prevAttrs:t}),je(!0),r({id:null,guid:null,cacheHtml:"",videoRatio:null}),Ue(e)},onSelectVideoFromLibrary:e=>{const t=Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid;t?r({guid:t,id:e.id,src:e.url,title:e.title,description:e.description}):O("No media guid provided")},onSelectURL:e=>{const{guid:t,url:n}=(0,b.Yv)(e);t?r({guid:t,src:n}):O("Invalid URL. No video GUID  provided")}})),React.createElement(a.InspectorControls,null,React.createElement(E.Z,{filename:pe,chapter:ne,isAutoGeneratedChapter:le,updateError:ce,isRequestingVideoData:ie,attributes:t,setAttributes:r}),React.createElement(C.Z,{attributes:t,setAttributes:r,isRequestingVideoData:ie}),React.createElement(j.ZP,{clientId:p,attributes:t,setAttributes:r,isGeneratingPoster:ue}),React.createElement(x.Z,{attributes:t,setAttributes:r,isRequestingVideoData:ie,privateEnabledForSite:de})),React.createElement(a.InspectorControls,{__experimentalGroup:"color"},React.createElement(_.Z,{clientId:p,attributes:t,setAttributes:r,isRequestingVideoData:ie})),React.createElement(w.Z,{isConnected:I,isConnecting:te,onConnect:()=>{if(re(!0),!F)return window.location.href=D;window.location.href=Z}}),React.createElement(S.Z,{showCaption:oe,html:be,isRequestingEmbedPreview:fe,attributes:t,setAttributes:r,isSelected:n,preview:me}))}},1471:(e,t,r)=>{"use strict";r.d(t,{TN:()=>d,WL:()=>m});var n=r(4981),o=r(2030),a=r(4205),s=r(520),i=r(3414),c=r(844),l=r(9892),u=r(5147);const{name:p,title:d,description:m,attributes:f}=a;(0,n.registerBlockType)(p,{edit:i.Z,title:d,save:c.Z,icon:s.l,attributes:f,example:{attributes:{src:(0,o.Z)(u),isExample:!0}},transforms:l.Z})},844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(2674),o=r.n(n),a=r(2175),s=r(5235),i=r.n(s),c=r(515);function l(e){let{attributes:t}=e;const{align:r,autoplay:n,caption:s,loop:l,muted:u,controls:p,playsinline:d,preload:m,useAverageColor:f,seekbarColor:h,seekbarLoadingColor:g,seekbarPlayedColor:v,guid:b,maxWidth:k,poster:y}=t,w=a.useBlockProps.save({className:i()("wp-block-jetpack-videopress","jetpack-videopress-player",{[`align${r}`]:r})}),_=(0,c.pg)(b,{autoplay:n,controls:p,loop:l,muted:u,playsinline:d,preload:m,seekbarColor:h,seekbarLoadingColor:g,seekbarPlayedColor:v,useAverageColor:f,poster:y}),E={};return k&&k.length>0&&"100%"!==k&&(E.maxWidth=k,E.margin="auto"),React.createElement("figure",o()({},w,{style:E}),_&&React.createElement("div",{className:"jetpack-videopress-player__wrapper"},`\n${_}\n`),!a.RichText.isEmpty(s)&&React.createElement(a.RichText.Content,{tagName:"figcaption",value:s}))}},9892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(2175),o=r(4981),a=r(9818),s=r(5235),i=r.n(s),c=r(515);const l={from:[{type:"block",blocks:["core/embed"],isMatch:e=>"videopress"===e.providerNameSlug&&(0,c.Zx)(e?.url),transform:e=>{const{url:t,providerNameSlug:r}=e,n=(0,c.Zx)(t);if(!("videopress"===r&&!!n))return(0,o.createBlock)("core/embed",e);return e.className=e.className?.replace(/(wp-embed-aspect-\d+-\d+)|(wp-has-aspect-ratio)/g,"").trim(),(0,o.createBlock)("videopress/video",{guid:n,src:t})}}],to:[{type:"block",blocks:["core/embed"],isMatch:e=>e?.src||e?.guid,transform:e=>{const{updateBlockAttributes:t}=(0,a.dispatch)(n.store),{getBlockAttributes:r}=(0,a.select)(n.store),{guid:s,src:l,className:u}=e,{url:p}=(0,c.Yv)(s);if(!(l||p))return(0,o.createBlock)("core/embed");const d=(0,o.createBlock)("core/embed",{allowResponsive:!0,providerNameSlug:"videopress",responsive:!0,type:"video",url:p}),{clientId:m}=d;return setTimeout((()=>{const{className:e}=r(m)||{},n=i()(u,e);t(m,{className:n})}),100),d}}]}},5417:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(7798),o=r(9818);const a={html:null,width:null,height:null,thumbnail_height:null,thumbnail_width:null,title:null,version:"1.0",type:"video",provider_name:"VideoPress",provider_url:"https://videopress.com"},s=e=>(0,o.useSelect)((t=>e?{preview:t(n.store).getEmbedPreview(e)||a,isRequestingEmbedPreview:t(n.store).isRequestingEmbedPreview(e)||!1}:{preview:a,isRequestingEmbedPreview:!1}),[e])},8382:(e,t,r)=>{"use strict";r.d(t,{v:()=>C});var n=r(6989),o=r.n(n),a=r(4333),s=r(7798),i=r(9818),c=r(2238),l=r(9307),u=r(5736),p=r(951),d=r.n(p),m=r(6279),f=r(515),h=r(2198),g=r(5178),v=r(172),b=r(2677),k=r(5304),y=r(5452);const __=u.__,w=d()("videopress:video:use-sync-media");const _=["post_id","title","description","privacy_setting","rating","allow_download","display_embed","is_private"],E={privacy_setting:"privacySetting",allow_download:"allowDownload",display_embed:"displayEmbed",is_private:"isPrivate",post_id:"id"},R=["title","privacy_setting","is_private","allow_download","display_embed"];function C(e,t){const{id:r,guid:n,isPrivate:u}=e,{videoData:p,isRequestingVideoData:d}=(0,y.Z)({id:r,guid:n,skipRatingControl:!0,maybeIsPrivate:u}),[C,S]=(0,l.useState)(!1),P=(0,i.useSelect)((e=>e(c.store).isSavingPost()),[]),j=(0,a.usePrevious)(P),x=(0,i.useDispatch)(s.store).invalidateResolution,[U,N]=(0,l.useState)({}),[A,T]=(0,l.useState)(null),O=(0,l.useCallback)((e=>{N((t=>({...t,...e})))}),[]);(0,l.useEffect)((()=>{if(d)return;if(!p||0===Object.keys(p).filter((e=>_.includes(e))).length)return;const r={},n=_.reduce(((t,n)=>{if(void 0===p[n])return t;let o=p[n];"privacy_setting"===n&&(o=Number(o)),t[n]=o;const a=E[n]||(0,g.T)(n);return o!==e[a]&&(w("%o is out of sync. Updating %o attr from %o to %o ",n,a,e[a],o),r[a]=o),t}),{});if(O(n),w("Initial state: ",n),!Object.keys(n).length)return;const[o,a]=function(e,t){if(!e?.tracks)return[[],!1];const r=[];let n=!1;return Object.keys(e.tracks).forEach((o=>{for(const a in e.tracks[o]){const s=e.tracks[o][a];t.tracks.find((e=>e.kind===o&&e.srcLang===a&&e.src===s.src&&e.label===s.label))||(w("Track %o is out of sync. Set tracks attr",s.src),n=!0),r.push({src:s.src,kind:o,srcLang:a,label:s.label})}})),t.tracks.forEach((t=>{const r=e.tracks[t.kind]?.[t.srcLang];r&&r.src===t.src&&r.label===t.label||(w("Block track %o is out of sync and will be removed",t.src),n=!0)})),[r,n]}(p,e);a&&(r.tracks=o),Object.keys(r).length&&(w("Updating attributes: ",r),t(r))}),[p,d]);const Z=e.tracks.filter((e=>"chapters"===e.kind&&"en"===e.srcLang))[0]?.src;(0,l.useEffect)((()=>{(async()=>{if(Z){const e="https://videos.files.wordpress.com/"+n+"/"+Z,t=await(0,h.ss)(e,{guid:n,isPrivate:u});w("Chapter %o detected. Overwritable: %o",Z,t?"yes":"no"),S(t)}else w("Allow overwrite chapter: File does not exist"),S(!0)})()}),[Z]);const D=function(e){return t=>new Promise(((r,n)=>{o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:{id:e,...t}}).then((e=>{if(200!==e?.data)return n(e);r(e)})).catch(n)}))}(r),F=!(!j||P),I=(0,l.useRef)(),[L,B]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{F&&I.current?"video-frame"===e?.posterData?.type&&e?.posterData?.atTime!==I.current?.posterData?.atTime&&(w("(*) %o Poster image needs to be generated %s => %s",e?.guid,I.current?.posterData?.atTime,e?.posterData?.atTime),I.current=e,(0,m.Td)(e?.guid,e.posterData.atTime),w("(*) %o Requesting poster image generation",e?.guid),B(!0)):I.current||(I.current=e)}),[F]),(0,l.useEffect)((()=>{L&&(async()=>{if(await(0,m.t2)(e?.guid)){w("(*) %o Poster image has been generated",e?.guid),B(!1);const t=(0,f.pg)(e.guid,e);x("getEmbedPreview",[t])}})()}),[L]),(0,l.useEffect)((()=>{if(!F)return;if(w("%o Post has been just save. Syncing...",e?.guid),!e?.id)return void w("%o No media ID found. Impossible to sync. Bail early",e?.guid);const r=_.reduce(((t,r)=>{const n=E[r]||r,o=U[r],a=e[n];return U[r]!==e[n]&&(w("Field to sync %o: %o => %o: %o",r,o,n,a),t[r]=e[n]),t}),{});if(!Object.keys(r).length)return w("No data to sync. Bail early");w("Syncing data: ",r),D(r).then((()=>{if(O(r),r.privacy_setting){const e=2!==r.privacy_setting?1===r.privacy_setting:p.private_enabled_for_site;w("Updating isPrivate attribute: %o",e),t({isPrivate:e})}const n=(0,v.ZP)(r?.description);if(C&&e?.guid&&r?.description?.length&&(0,k.Z)(n)){w("Autogenerated chapter detected. Processing...");const n={label:__("English (auto-generated)","jetpack-videopress-pkg"),srcLang:"en",kind:"chapters",tmpFile:(0,b.ZP)(r.description)};w("Autogenerated track: %o",n),(0,h.nb)(n,e.guid).then((r=>{const o=e.tracks.findIndex((e=>"chapters"===e.kind&&"en"===e.srcLang)),a={...n,src:r},s=[...e.tracks];o>-1?(w("Updating %o auto-generated track",a.src),s[o]=a):(w("Adding auto-generated %o track",a.src),s.push(a)),t({tracks:s});const i=(0,f.pg)(e.guid,e);x("getEmbedPreview",[i])}))}else{const t=Object.keys(r).filter((e=>R.includes(e)));if(t?.length){w("Invalidate resolution because of %o",t.join(", "));const r=(0,f.pg)(e.guid,e);x("getEmbedPreview",[r])}}})).catch((t=>{w("%o Error while syncing data: %o",e?.guid,t),T(t)}))}),[F,D,O,e,U,x,_]),{forceInitialState:O,videoData:p,isRequestingVideoData:d,error:A,isOverwriteChapterAllowed:C,isGeneratingPoster:L}}},5452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(9307),o=r(2629),a=r(951),s=r.n(a),i=r(8232),c=r(5955);const l=s()("videopress:video:use-video-data"),u=(0,i.b$)();function p(e){let{id:t,guid:r,skipRatingControl:a=!1,maybeIsPrivate:s=!1}=e;const[i,p]=(0,n.useState)({}),[d,m]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{u?r&&(m(!0),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await(0,c.B)({guid:r,isPrivate:s,token:e,skipRatingControl:a});m(!1);const n=t.original?.split("/")?.at(-1);p({allow_download:t.allow_download,post_id:t.post_id,guid:t.guid,title:(0,o.decodeEntities)(t.title),description:(0,o.decodeEntities)(t.description),display_embed:t.display_embed,privacy_setting:t.privacy_setting,rating:t.rating,filename:n,tracks:t.tracks,is_private:t.is_private,private_enabled_for_site:t.private_enabled_for_site})}catch(e){throw m(!1),new Error(e?.message??e)}}()):l("User is not connected")}),[t,r]),{videoData:i,isRequestingVideoData:d}}},2030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6483);const{imagesURLBase:o=""}=window?.videoPressEditorState||{};function a(e){const t=(0,n.getFilename)(e);return o?`${o}${t}`:e}},6029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(526),o=r(9307),a=r(5736),s=r(9196),i=r(6152);const __=a.__,c=()=>{const[e,t]=(0,s.useState)(!1);return React.createElement(React.Fragment,null,(0,o.createInterpolateElement)(__("Did you know you can now add Chapters to your videos? <link>Learn how</link>","jetpack-videopress-pkg"),{link:React.createElement(n.Z,{variant:"link",size:"small",onClick:()=>t(!0)})}),React.createElement(i.Z,{onClose:()=>t(!1),isOpen:e}))}},2346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5609);const o=React.createElement(n.SVG,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M4.75725 2.075C4.60279 1.97745 4.41041 1.97489 4.25365 2.06832C4.09689 2.16174 4 2.3367 4 2.52632V21.4737C4 21.6633 4.09689 21.8383 4.25365 21.9317C4.41041 22.0251 4.60279 22.0226 4.75725 21.925L19.7573 12.4513C19.9079 12.3562 20 12.1849 20 12C20 11.8151 19.9079 11.6438 19.7573 11.5487L4.75725 2.075Z",fill:"white"}))},1875:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(526),o=r(5609),a=r(9307),s=r(5736),i=r(9196),c=r(6152);const __=s.__,l=e=>{let{className:t}=e;const[r,s]=(0,i.useState)(!1);return React.createElement(React.Fragment,null,React.createElement(o.Notice,{status:"warning",className:t,isDismissible:!1},(0,a.createInterpolateElement)(__("It seems there are some chapters, but they are incomplete. Check out the <link>format</link> and try again.","jetpack-videopress-pkg"),{link:React.createElement(n.Z,{variant:"link",size:"small",onClick:()=>s(!0)})})),React.createElement(c.Z,{onClose:()=>s(!1),isOpen:r}))}},6194:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>d});var n=r(5609),o=r(9307),a=r(5235),s=r.n(a),i=r(4027);const c=e=>{let{char:t=":"}=e;return React.createElement("span",{className:i.Z["timestamp-control-divider"]},t)},l=e=>(t,r)=>{const n={...t};return"COMMIT"!==r.type&&"PRESS_UP"!==r.type&&"PRESS_DOWN"!==r.type&&"CHANGE"!==r.type||void 0!==n.value&&(n.value=n.value.toString().padStart(e,"0")),n};function u(e,t){const r=Number.isNaN(e),n=r||void 0===t?0:Math.floor(e%1e3/Number("1e"+(3-t)));return{hh:r?0:Math.floor(e/36e5%24),mm:r?0:Math.floor(e/6e4%60),ss:r?0:Math.floor(e/1e3%60),decimal:n}}const p=e=>{let{onChange:t,disabled:r,value:o,max:a,autoHideTimeInput:p=!0,decimalPlaces:d}=e;const m={value:u(o,d)},f=a>36e5,h=a>6e4,g=e=>r=>{if("string"!=typeof r||isNaN(parseInt(r,10))||(r=parseInt(r,10)),"hh"===e&&r>99||("mm"===e||"ss"===e)&&r>59||"decimal"===e&&r>Number(`1e${d}`)-1)return;if("string"==typeof r)return;m.value={...u(o,d),[e]:r};const n=m.value.decimal?m.value.decimal*Number("1e"+(3-d)):0;t?.(1e3*(3600*m.value.hh+60*m.value.mm+m.value.ss)+n)};return React.createElement("div",{className:s()(i.Z["timestamp-input-wrapper"],{[i.Z["is-disabled"]]:r})},(f||!p)&&React.createElement(React.Fragment,null,React.createElement(n.__experimentalNumberControl,{className:i.Z["timestamp-control-input"],disabled:r,min:0,max:99,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:l(2),value:String(m.value.hh).padStart(2,"0"),onChange:g("hh")}),React.createElement(c,null)),(h||!p)&&React.createElement(React.Fragment,null,React.createElement(n.__experimentalNumberControl,{className:i.Z["timestamp-control-input"],disabled:r,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:l(2),value:String(m.value.mm).padStart(2,"0"),onChange:g("mm")}),React.createElement(c,null)),React.createElement(n.__experimentalNumberControl,{className:i.Z["timestamp-control-input"],disabled:r,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:l(2),value:String(m.value.ss).padStart(2,"0"),onChange:g("ss")}),d&&React.createElement(React.Fragment,null,React.createElement(c,{char:"."}),React.createElement(n.__experimentalNumberControl,{className:i.Z["timestamp-control-input"],style:{"--input-width":12*d+"px"},disabled:r,min:0,max:Number("9".repeat(d)),step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"0".repeat(d),isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:l(d),value:String(m.value.decimal).padStart(d,"0"),onChange:g("decimal")})))},d=e=>{const{disabled:t=!1,max:r,value:a,onChange:s,onDebounceChange:c,wait:l=1e3,fineAdjustment:u=50,autoHideTimeInput:d=!0,decimalPlaces:m}=e,f=(0,o.useRef)(),{baseControlProps:h}=(0,n.useBaseControlProps)?.(e)||{},g=(0,o.useCallback)((e=>{clearTimeout(f?.current),s?.(e),f.current=setTimeout(c?.bind(null,e),l)}),[s]);return React.createElement(n.BaseControl,h,React.createElement("div",{className:i.Z["timestamp-control__controls-wrapper"]},n.__experimentalNumberControl&&React.createElement(p,{disabled:t,max:r,value:a,onChange:g,autoHideTimeInput:d,decimalPlaces:m}),React.createElement(n.RangeControl,{disabled:t,className:i.Z["timestamp-range-control"],min:0,step:u,initialPosition:a,value:a,max:r,showTooltip:!1,withInputField:!1,onChange:g})))}},7535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(5609),o=r(9307),a=r(1074),s=r(5235),i=r.n(s),c=r(2346),l=r(4641);const u=e=>{let{src:t,setMaxDuration:r=null,currentTime:a}=e;const s=(0,o.useRef)(null),[i,c]=(0,o.useState)(!0);(0,o.useEffect)((()=>{s.current.src=t}),[t]),(0,o.useEffect)((()=>{s.current&&Number.isFinite(a)&&(s.current.currentTime=a)}),[a]);return React.createElement("div",{className:l.Z["video-player-wrapper"]},i&&React.createElement("div",{className:l.Z["video-player-spinner-wrapper"]},React.createElement(n.Spinner,{className:l.Z.spinner})),React.createElement("video",{onLoadedData:()=>c(!1),ref:s,muted:!0,className:l.Z.video,onDurationChange:e=>{const t=e.target.duration;if(r?.(t),s.current){const e=Number.isFinite(a)?a:t/2;s.current.currentTime=e}}}))},p=e=>{let{src:t="",onVideoFrameSelected:r,className:s="",initialCurrentTime:p=null}=e;const[d,m]=(0,o.useState)(0),[f,h]=(0,o.useState)(Number.isFinite(p)?p:null);return React.createElement("div",{className:i()(l.Z.container,s)},React.createElement(a.Z,{className:l.Z["play-icon"],icon:c.Z}),React.createElement(u,{src:t,setMaxDuration:m,currentTime:f}),React.createElement(n.RangeControl,{className:l.Z.range,min:0,step:.1,initialPosition:f,max:d,showTooltip:!1,withInputField:!1,onChange:e=>{h(e),r?.(1e3*e)}}))}},1048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(4333),o=r(9196),a=r(172),s=r(5304);const i=e=>{const[t,r]=(0,o.useState)(!1),i=(0,o.useCallback)((()=>{const t=(0,a.ZP)(e);0===t.length?r(!1):r(!(0,s.Z)(t))}),[e]),c=(0,n.useDebounce)(i,3e3);return(0,o.useEffect)((()=>{c()}),[e]),(0,o.useEffect)(i,[]),{hasIncompleteChapters:t}}},5134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>{const t={allowDownload:"allow_download",displayEmbed:"display_embed"};return r=>new Promise(((n,a)=>{const s=(i=Object.assign({id:e},r),Object.keys(i).reduce(((e,r)=>(e[t[r]||r]=i[r],e)),{}));var i;o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:s}).then((e=>{"success"===e?.code||a()})).catch((e=>a(e))).finally((()=>{n()}))}))}},6650:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>()=>new Promise((function(t,r){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},3897:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>function(t){return new Promise((function(r,n){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:t}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}},9272:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(9307),o=r(951),a=r.n(o),s=r(6998),i=r(5042);const c=a()("videopress:use-resumable-uploader"),l=e=>{let{onProgress:t,onSuccess:r,onError:o}=e;const[a,l]=(0,n.useState)({bytesSent:0,bytesTotal:0,percent:0,status:"idle"}),[u,p]=(0,n.useState)(),[d,m]=(0,n.useState)(null),[f,h]=(0,n.useState)();async function g(e){const n=await(0,s.Z)("upload-jwt");if(!n.token)return o("No token provided");"idle"===a.status&&l((e=>({...e,status:"uploading"})));let c=!1;const u=(0,i.Z)({file:e,tokenData:n,onProgress:(e,r)=>{if(c)return;const n=Math.round(e/r*100);l({bytesSent:e,bytesTotal:r,percent:n,status:"uploading"}),t(e,r)},onSuccess:e=>{c=!0,l((e=>({...e,status:"done"}))),p(e),r(e)},onError:e=>{l((e=>({...e,status:"error"}))),m(e),o(e)}});h({start:()=>{l((e=>({...e,status:"uploading"}))),u.start()},abort:()=>{l((e=>({...e,status:"aborted"}))),u.abort()}})}return{onUploadHandler:function(e){const t=e.target.files[0];t?g(t):c("No file selected. Bail early")},uploadHandler:g,resumeHandler:f,uploadingData:a,media:u,error:d}}},1207:(e,t,r)=>{"use strict";r.d(t,{R2:()=>s});var n=r(6989),o=r.n(n),a=(r(9307),r(5736));r(9537);const __=a.__,s=e=>{const t=`videopress/v1/upload/${e}`;return new Promise(((r,n)=>{o()({path:t,method:"POST"}).then((t=>{"uploading"===t.status||"new"===t.status||"resume"===t.status?s(e).then(r).catch(n):"complete"===t.status?r({guid:t.uploaded_details.guid,id:t.uploaded_details.media_id,src:t.uploaded_details.upload_src}):"error"===t.status?n({data:{message:t.error}}):n({data:{message:__("Unexpected error uploading video.","jetpack-videopress-pkg")}})})).catch((e=>{n({data:{message:e?.message}})}))}))}},8232:(e,t,r)=>{"use strict";r.d(t,{$U:()=>l,Hn:()=>u,b$:()=>c});var n=r(951),o=r.n(n);const a=window?.JP_CONNECTION_INITIAL_STATE,{siteType:s=""}=window?.videoPressEditorState||{},i=o()("videopress:connection");function c(){return"simple"===s?(i("Simple site connected ✅"),!0):a?.connectionStatus?.isUserConnected?(i("Jetpack user is connected ✅"),!0):(i("User is not connected ❌"),!1)}function l(){return!!c()&&("1"===window?.videoPressEditorState?.isVideoPressModuleActive||u())}function u(){return"1"===window?.videoPressEditorState?.isStandaloneActive}},5955:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n=r(6989),o=r.n(n),a=r(951),s=r.n(a),i=r(6998);const c=s()("videopress:lib:fetch-video-item");async function l(e){let{guid:t,isPrivate:r,token:n=null,skipRatingControl:a=!1,retries:s=0}=e;try{const e=a?{}:{birth_day:"1",birth_month:"1",birth_year:"2000"};let s;r&&!n&&(s=await(0,i.Z)("playback",{guid:t})),(n||s?.token)&&(e.metadata_token=n||s.token);const c=Object.keys(e).length?`?${new URLSearchParams(e).toString()}`:"";return await o()({url:`https://public-api.wordpress.com/rest/v1.1/videos/${t}${c}`,credentials:"omit",global:!0})}catch(e){c("updating retry from",s,"to",s+1);const r=s+1;if(r>2)throw c("Too many attempts to get video. Aborting."),new Error(e?.message??e);if("auth"===e?.error)return c("Authentication error. Reattempt %o",r+"/3"),l({guid:t,isPrivate:!0,token:null,skipRatingControl:a,retries:r});if("Please supply the birthdate parameters."===e?.message)return c("Rating error. Reattempt %o",r+"/3"),l({guid:t,isPrivate:!0,token:null,skipRatingControl:!1,retries:r});throw new Error(e?.message??e)}}},6998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(951),o=r.n(n),a=r(5368);const s=o()("videopress:get-media-token"),i=864e5,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r=0,guid:n,adminAjaxAPI:o,filename:s}=t;return new Promise((function(t,i){const c=o||window.videopressAjax?.ajaxUrl||window?.ajaxurl||"/wp-admin/admin-ajax.php";if(!a.M.includes(e))return i("Invalid scope");const l={action:"videopress-get-playback-jwt"};switch(e){case"upload":l.action="videopress-get-upload-token",s&&(l.filename=s);break;case"upload-jwt":l.action="videopress-get-upload-jwt";break;case"playback":l.action="videopress-get-playback-jwt",l.guid=n,l.post_id=String(r)}fetch(c,{method:"POST",credentials:"same-origin",body:new URLSearchParams(l)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((r=>{if(!r.success)throw new Error("Token is not achievable");switch(e){case"upload":case"upload-jwt":t({token:r.data.upload_token,blogId:r.data.upload_blog_id,url:r.data.upload_action_url});break;case"playback":t({token:r.data.jwt})}})).catch((()=>{console.warn("Token is not achievable"),t({token:null})}))}))};const l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r=0,guid:n=0,flushToken:o}=t,a=`vpc-${e}-${r}-${n}`,l=window?.videopressAjax?.context||"main";let u;const p=localStorage.getItem(a);if(o)s("(%s) Flushing %o token",l,a),localStorage.removeItem(a);else try{if(p){if(u=await JSON.parse(p),u&&u.expire>Date.now())return s("(%s) Providing %o token from the store",l,a),u.data;s("(%s) Token %o expired. Clean.",l,a),localStorage.removeItem(a)}}catch(e){s("Invalid token in the localStore")}const d=await c(e,t);return"playback"===e&&d?.token&&(s("(%s) Storing %o token",l,a),localStorage.setItem(a,JSON.stringify({data:d,expire:Date.now()+i}))),s("(%s) Providing %o token from request/response",l,a),d}},5368:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});const n=["upload","playback","upload-jwt"]},6279:(e,t,r)=>{"use strict";r.d(t,{Td:()=>s,t2:()=>c});var n=r(3419),o=r(6989),a=r.n(o);const s=function(e,t){const r={at_time:t,is_millisec:!0};return(0,n.Wp)()?a()({path:`/videos/${e}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:r}):a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:r})},i=async function(e){const t=await function(e){return a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"})}(e);return!t.data?.generating};async function c(e){let{wait:t=3e3,attemps:r=10,initialWait:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(n&&await new Promise((e=>setTimeout(e,t)));!await i(e);){if(0==r--)throw new Error("Poster generation timed out");await new Promise((e=>setTimeout(e,t)))}return!0}},5042:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9537),o=r(6998);const a={},s=e=>{let{file:t,tokenData:r,onProgress:s,onSuccess:i,onError:c}=e;const l=new n.gq(t,{onError:c,onProgress:s,endpoint:r.url,removeFingerprintOnSuccess:!0,withCredentials:!1,autoRetry:!0,overridePatchMethod:!1,chunkSize:1e7,metadata:{filename:t.name,filetype:t.type},retryDelays:[0,1e3,3e3,5e3,1e4],onBeforeRequest:function(e){const t=e._method;if(["HEAD","OPTIONS"].indexOf(t)>=0&&(e._method="GET",e.setHeader("X-HTTP-Method-Override",t)),["DELETE","PUT","PATCH"].indexOf(t)>=0&&(e._method="POST",e.setHeader("X-HTTP-Method-Override",t)),e._xhr.open(e._method,e._url,!0),Object.keys(e._headers).map((function(t){e.setHeader(t,e._headers[t])})),"POST"===t){if(!!!r.token)throw"should never happen";e.setHeader("x-videopress-upload-token",r.token)}if(["OPTIONS","GET","HEAD","DELETE","PUT","PATCH"].indexOf(t)>=0){const r=new URL(e._url).pathname.split("/"),n=r[r.length-1];if(a[n])e.setHeader("x-videopress-upload-token",a[n]);else if("HEAD"===t)return(0,o.Z)("upload-jwt").then((t=>(a[n]=t.token,e.setHeader("x-videopress-upload-token",t.token),e)))}return Promise.resolve(e)},onAfterResponse:function(e,r){if(r.getStatus()>=400)return;const n=r.getHeader("x-videopress-upload-guid"),o=r.getHeader("x-videopress-upload-media-id"),s=r.getHeader("x-videopress-upload-src-url");if(n&&o&&s)return void(i&&i({id:Number(o),guid:n,src:s},t));const c={"x-videopress-upload-key-token":"token","x-videopress-upload-key":"key"},l={};Object.keys(c).forEach((function(e){const t=r.getHeader(e);t&&(l[c[e]]=t)})),l.key&&l.token&&(a[l.key]=l.token)}});return l.findPreviousUploads().then((function(e){e.length&&l.resumeFromPreviousUpload(e[0]),l.start()})),l}},515:(e,t,r)=>{"use strict";r.d(t,{K8:()=>i,Yv:()=>s,Zx:()=>a,pg:()=>o});var n=r(6483);const o=(e,t)=>{let{autoplay:r,controls:o,loop:a,muted:s,playsinline:i,poster:c,preload:l,seekbarColor:u,seekbarPlayedColor:p,seekbarLoadingColor:d,useAverageColor:m}=t;if(!e)return null;const f={resizeToParent:!0,cover:!0,...r&&{autoPlay:!0},...!o&&{controls:!1},...a&&{loop:!0},...s&&{muted:!0,persistVolume:!1},...i&&{playsinline:!0},...c&&{posterUrl:c},...""!==l&&{preloadContent:l},...""!==u&&{sbc:u},...""!==p&&{sbpc:p},...""!==d&&{sblc:d},...m&&{useAverageColor:!0}};return(0,n.addQueryArgs)(`https://videopress.com/v/${e}`,f)},a=e=>{if(!e||"string"!=typeof e)return null;const t=e.match(/^https?:\/\/(?<host>video(?:\.word|s\.files\.word)?press\.com)(?:\/v|\/embed)?\/(?<guid>[a-zA-Z\d]{8})/);return t?.groups?.guid?t.groups.guid:null};function s(e,t){const r=function(e){const t=e.match(/^[a-zA-Z\d]{8}$/);return!!t&&t[0]}(e);if(r)return t?{url:o(e,t),guid:e}:{url:`https://videopress.com/v/${e}`,guid:e};const n=a(e);return n?{url:e,guid:n}:{}}const i=e=>e.replace(/\.[^/.]+$/,"")},2198:(e,t,r)=>{"use strict";r.d(t,{nb:()=>l,qL:()=>u,ss:()=>c});var n=r(6989),o=r.n(n),a=r(6998);const{siteType:s=""}=window?.videoPressEditorState||{},i="simple"!==s;async function c(e,t){if(!e)return!1;let r,n="";t.isPrivate&&(r=await(0,a.Z)("playback",{guid:t.guid}),n="?"+new URLSearchParams({metadata_token:r?.token}).toString());let o=await fetch(e+n);if(!o.ok&&403===o.status&&t.guid&&(r=await(0,a.Z)("playback",{guid:t.guid}),n="?"+new URLSearchParams({metadata_token:r?.token}).toString(),o=await fetch(e+n)),!o.ok)return!1;const s=await o.text();return/videopress-chapters-auto-generated/.test(s)}const l=(e,t)=>{const{kind:r,srcLang:n,label:s,tmpFile:c}=e;return i?function(e,t){return new Promise((function(r,n){const{kind:o,srcLang:s,label:i,tmpFile:c}=e;(0,a.Z)("upload",{filename:c.name}).then((e=>{let{token:a,blogId:l}=e;const u=new FormData;u.append("kind",o),u.append("srclang",s),u.append("label",i),u.append("vtt",c),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${a}" blog_id="${l}"`},method:"POST",body:u}).then((e=>{try{return r(e.json())}catch(e){return n(e)}})).catch(n)}))}))}({kind:r,srcLang:n,label:s,tmpFile:c},t):new Promise((function(e,a){return o()({method:"POST",path:`/videos/${t}/tracks`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n],["label",s],["vtt",c]]}).then((t=>{try{return e(t.json())}catch(e){return a(e)}})).catch(a)}))},u=(e,t)=>{const{kind:r,srcLang:n}=e;if(i)return function(e,t){let{kind:r,srcLang:n}=e;return new Promise((function(e,o){(0,a.Z)("upload").then((a=>{let{token:s,blogId:i}=a;const c=new FormData;c.append("kind",r),c.append("srclang",n),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks/delete`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${s}" blog_id="${i}"`},method:"POST",body:c}).then((t=>{try{return e(t.json())}catch(e){return o(e)}})).catch(o)}))}))}({kind:r,srcLang:n},t);const s={method:"POST",path:`/videos/${t}/tracks/delete`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n]]};return o()(s)}},4391:(e,t,r)=>{"use strict";r.d(t,{$A:()=>n,Gr:()=>l,O1:()=>a,UJ:()=>o,Vz:()=>s,pf:()=>c,x4:()=>i});const n="public",o="private",a="site-default",s=[n,o,a],i="G",c="PG-13",l="R-17"},5178:(e,t,r)=>{"use strict";function n(e){return e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("_","")))}r.d(t,{T:()=>n})},172:(e,t,r)=>{"use strict";function n(e){if(!e)return[];return e.split("\n").map((e=>function(e){const t=/(?<timeBlock>\(?(?<time>\d{1,2}:\d{2}:\d{2}|\d{1,2}:\d{2})\)?)/.exec(e);if(null==t||null==t.groups)return null;const{groups:{timeBlock:r,time:n}}=t,o=e.indexOf(r),a=(o<(e.length-r.length)/2?e.substring(o+r.length,e.length):e.substring(0,o)).trim().replace(/(\s-$)|(^-\s)/,""),s=n.split(":");return 1===s[0].length&&(s[0]=`0${s[0]}`),2===s.length&&s.unshift("00"),{startAt:s.join(":"),title:a}}(e))).filter((e=>null!==e)).sort(((e,t)=>e.startAt.localeCompare(t.startAt)))}r.d(t,{Tn:()=>n,ZP:()=>n})},2677:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s});var n=r(172);function o(e){const t=Math.floor(e/36e5);let r=e-36e5*t;const n=Math.floor(r/6e4);r-=6e4*n;return[t,n,Math.floor(r/1e3)].map((e=>e<10?`0${e}`:e)).join(":")}const a="videopress-chapters-auto-generated";function s(e,t){const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3599999e3;const r=(0,n.Tn)(e);if(0===r.length)return null;let s="WEBVTT\n";s+="\n",s+="NOTE\n",s+=`${a}\n`,s+="This file was auto-generated based on Video description.\n",s+="For more information, see https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video\n";let i=1;for(const[e,n]of r.entries()){const a=0===e?"000":"001",c=e<r.length-1?r[e+1].startAt:o(t);s+=`\n${i++}\n${n.startAt}.${a} --\x3e ${c}.000\n${n.title}\n`}return s}(e,t);return r?new File([r],"chapters.vtt",{type:"text/vtt"}):null}},5304:(e,t,r)=>{"use strict";function n(e){const t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2])}function o(e){if(!e||0===e.length)return!1;if("00:00:00"!==e[0].startAt)return!1;if(e.length<3)return!1;if(e.some((e=>!e.title)))return!1;for(let t=0;t<e.length-1;t++){const r=e[t];if(n(e[t+1].startAt)-n(r.startAt)<10)return!1}return!0}r.d(t,{Z:()=>o})},3427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(5908),o=r(9106),a=r(5016),s=r(1662);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var u=function(){function e(t){i(this,e),this._file=t,this.size=t.size}return l(e,[{key:"slice",value:function(e,t){if((0,a.Z)())return(0,s.Z)(this._file.slice(e,t));var r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}]),e}(),p=function(){function e(t,r){i(this,e),this._chunkSize=r,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return l(e,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+d(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(e,t),a=null==o&&this._done;return Promise.resolve({value:o,done:a})}return this._reader.read().then((function(n){var o=n.value;return n.done?r._done=!0:void 0===r._buffer?r._buffer=o:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===d(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function d(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var m=function(){function e(){i(this,e)}return l(e,[{key:"openFile",value:function(e,t){return(0,n.Z)()&&e&&void 0!==e.uri?(0,o.Z)(e.uri).then((function(e){return new u(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new u(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new p(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}()},1264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5908);function o(e,t){return(0,n.Z)()?Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}},6940:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}r.d(t,{Z:()=>s});var s=function(){function e(){n(this,e)}return a(e,[{key:"createRequest",value:function(e,t){return new i(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),i=function(){function e(t,r){n(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return a(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,n){e._xhr.onload=function(){r(new c(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),c=function(){function e(t){n(this,e),this._xhr=t}return a(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}()},9537:(e,t,r)=>{"use strict";r.d(t,{gq:()=>b});var n=r(3620),o=r(5799),a=r(5866),s=r(6940),i=r(3427),c=r(1264);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){return function(){var t,r=m(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var n=m(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,t)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=h({},n.Z.defaultOptions,{httpStack:new s.Z,fileReader:new i.Z,urlStorage:a.H?new a.n:new o.Z,fingerprint:c.Z}),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,r,o,a=d(s);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=h({},v,{},t),a.call(this,e,t)}return t=s,o=[{key:"terminate",value:function(e,t,r){return t=h({},v,{},t),n.Z.terminate(e,t,r)}}],(r=null)&&u(t.prototype,r),o&&u(t,o),s}(n.Z),k=window,y=k.XMLHttpRequest,w=k.Blob;y&&w&&w.prototype.slice},5016:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},5908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},1662:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(e){r(e)},n.readAsArrayBuffer(e)}))}r.d(t,{Z:()=>n})},9106:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(e)},n.onerror=function(e){r(e)},n.open("GET",e),n.send()}))}r.d(t,{Z:()=>n})},5866:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{H:()=>s,n:()=>i});var o=!1;try{o="localStorage"in window;var a="tusSupport";localStorage.setItem(a,localStorage.getItem(a))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;o=!1}var s=o,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,r=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(e){}}return t}}],r&&n(t.prototype,r),o&&n(t,o),e}()},6971:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(){var t,r=l(e);if(i()){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,t)}}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},a(e)}function s(e,t,r){return s=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o},s.apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}r.d(t,{Z:()=>u});const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=o(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this,e)).originalRequest=a,n.originalResponse=s,n.causingError=o,null!=o&&(e+=", caused by ".concat(o.toString())),null!=a){var i=a.getHeader("X-Request-ID")||"n/a",c=a.getMethod(),l=a.getURL(),u=s?s.getStatus():"n/a",p=s?s.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(l,", response code: ").concat(u,", response text: ").concat(p,", request id: ").concat(i,")")}return n.message=e,n}return r}(a(Error))},1336:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=!1;function o(e){n&&console.log(e)}},5799:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{Z:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&n(t.prototype,r),o&&n(t,o),e}()},3620:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(4097),o=r(1294),a=r.n(o),s=r(6971),i=r(1336),c=r(8184);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},f=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,r,n;return t=e,r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var r=this.options.retryDelays;null==r||"[object Array]"===Object.prototype.toString.call(r)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(r){return null==r?(0,i.c)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,i.c)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,r=this._size=this._source.size,n=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=function(e,t,r){for(var n=Math.floor(e/t),o=[],a=0;a<t;a++)o.push({start:n*a,end:n*(a+1)});return o[t-1].end=e,r&&o.forEach((function(e,t){e.uploadUrl=r[t]||null})),o}(this._source.size,o,this._parallelUploadUrls);this._parallelUploadUrls=new Array(a.length);var s,c=a.map((function(o,s){var i=0;return t._source.slice(o.start,o.end).then((function(c){var l=c.value;return new Promise((function(c,p){var d=u({},t.options,{uploadUrl:o.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:u({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:c,onError:p,onProgress:function(e){n=n-i+e,i=e,t._emitProgress(n,r)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[s]=m.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===a.length&&t._saveUploadInUrlStorage()}}),m=new e(l,d);m.start(),t._parallelUploads.push(m)}))}))}));Promise.all(c).then((function(){(s=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=h(t.options.metadata);return""!==e&&s.setHeader("Upload-Metadata",e),t._sendRequest(s,null)})).then((function(e){if(g(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=y(t.options.endpoint,r),(0,i.c)("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(s,e,"tus: invalid or missing Location header")}else t._emitHttpError(s,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?((0,i.c)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,i.c)("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,i.c)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var r=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new s.Z(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),k(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=h(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then((function(r){if(g(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=y(e.options.endpoint,n),(0,i.c)("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var n=r.getStatus();if(!g(n,200))return g(n,400)&&e._removeFromUrlStorage(),423===n?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(r.getHeader("Upload-Offset"),10);if(isNaN(o))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var a=parseInt(r.getHeader("Upload-Length"),10);if(!isNaN(a)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),o===a)return e._emitProgress(a,a),void e._emitSuccess();e._offset=o,e._performUpload()}else e._emitHttpError(t,r,"tus: invalid or missing length value")}})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(r){g(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")})).catch((function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then((function(r){var n=r.value,o=r.done;return t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(n&&n.size?n.size:0),e.setHeader("Upload-Length",t._size)),null===n?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,n))}))}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=v(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){return b(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],n=[{key:"terminate",value:function(t,r){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===r&&(r={});var n=v("DELETE",t,r);return b(n,null,r).then((function(e){if(204!==e.getStatus())throw new s.Z("tus: unexpected response while terminating upload",null,n,e)})).catch((function(o){if(o instanceof s.Z||(o=new s.Z("tus: failed to terminate upload",o,n,null)),!k(o,0,r))throw o;var a=r.retryDelays[0],i=r.retryDelays.slice(1),c=u({},r,{retryDelays:i});return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e.terminate(t,c)}))}))}}],r&&d(t.prototype,r),n&&d(t,n),e}();function h(e){var t=[];for(var r in e)t.push("".concat(r," ").concat(n.Base64.encode(e[r])));return t.join(",")}function g(e,t){return e>=t&&e<t+100}function v(e,t,r){var n=r.httpStack.createRequest(e,t);n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};for(var a in o)n.setHeader(a,o[a]);if(r.addRequestId){var s=(0,c.Z)();n.setHeader("X-Request-ID",s)}return n}function b(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function k(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var n,o=e.originalResponse?e.originalResponse.getStatus():0;return(!g(o,400)||409===o||423===o)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function y(e,t){return new(a())(t,e).toString()}f.defaultOptions=m;const w=f},8184:(e,t,r)=>{"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}r.d(t,{Z:()=>n})},1294:(e,t,r)=>{"use strict";var n=r(2298),o=r(142),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(a,"")}var d=[["#","hash"],["?","query"],function(e,t){return h(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(e=e||r);if("blob:"===e.protocol)n=new v(unescape(e.pathname),{});else if("string"===o)for(t in n=new v(e,{}),m)delete n[t];else if("object"===o){for(t in e)t in m||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=i.test(e.href))}return n}function h(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=p(e)).replace(s,""),t=t||{};var r,n=l.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],i=!!n[3],c=0;return a?i?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):i?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):h(o)?r=n[4]:o?a&&(r=r.slice(2)):c>=2&&h(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||h(o),slashesCount:c,rest:r}}function v(e,t,r){if(e=(e=p(e)).replace(s,""),!(this instanceof v))return new v(e,t,r);var a,i,c,l,m,b,k=d.slice(),y=typeof t,w=this,_=0;for("object"!==y&&"string"!==y&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(i=g(e||"",t=f(t))).protocol&&!i.slashes,w.slashes=i.slashes||a&&t.slashes,w.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||u.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!h(w.protocol)))&&(k[3]=[/(.*)/,"pathname"]);_<k.length;_++)"function"!=typeof(l=k[_])?(c=l[0],b=l[1],c!=c?w[b]=e:"string"==typeof c?~(m="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(w[b]=e.slice(0,m),e=e.slice(m+l[2])):(w[b]=e.slice(m),e=e.slice(0,m))):(m=c.exec(e))&&(w[b]=m[1],e=e.slice(0,m.index)),w[b]=w[b]||a&&l[3]&&t[b]||"",l[4]&&(w[b]=w[b].toLowerCase())):e=l(e,w);r&&(w.query=r(w.query)),a&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(a=!0),r.splice(n,1),s--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&h(w.protocol)&&(w.pathname="/"+w.pathname),n(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(m=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,m),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(m+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&h(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}v.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";a[e]=t.charAt(0)!==s?s+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(a.username=t.slice(0,i),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(i+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<d.length;l++){var u=d[l];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&h(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var s=a+(r.protocol&&r.slashes||h(r.protocol)?"//":"");return r.username?(s+=r.username,r.password&&(s+=":"+r.password),s+="@"):r.password?(s+=":"+r.password,s+="@"):"file:"!==r.protocol&&h(r.protocol)&&!n&&"/"!==r.pathname&&(s+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),s+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(s+=r.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=p,v.qs=o,e.exports=v},5744:(e,t,r)=>{"use strict";e.exports=r.p+"images/dynamic-colors-b7ff131e82a4032d9a08.png"},5147:(e,t,r)=>{"use strict";e.exports=r.p+"images/videopress-block-example-image-da9ef73787adca8896f2.jpg"},9196:e=>{"use strict";e.exports=window.React},2819:e=>{"use strict";e.exports=window.lodash},6989:e=>{"use strict";e.exports=window.wp.apiFetch},2175:e=>{"use strict";e.exports=window.wp.blockEditor},4981:e=>{"use strict";e.exports=window.wp.blocks},5609:e=>{"use strict";e.exports=window.wp.components},4333:e=>{"use strict";e.exports=window.wp.compose},7798:e=>{"use strict";e.exports=window.wp.coreData},9818:e=>{"use strict";e.exports=window.wp.data},2238:e=>{"use strict";e.exports=window.wp.editor},9307:e=>{"use strict";e.exports=window.wp.element},1975:e=>{"use strict";e.exports=window.wp.escapeHtml},2629:e=>{"use strict";e.exports=window.wp.htmlEntities},5736:e=>{"use strict";e.exports=window.wp.i18n},8817:e=>{"use strict";e.exports=window.wp.plugins},444:e=>{"use strict";e.exports=window.wp.primitives},6483:e=>{"use strict";e.exports=window.wp.url},2674:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4205:e=>{"use strict";e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"videopress/video","version":"0.1.0","title":"VideoPress","category":"media","icon":"smiley","description":"Embed a video from your media library or upload a new one with VideoPress.","supports":{"align":true,"anchor":true,"spacing":{"margin":true,"padding":true}},"attributes":{"autoplay":{"type":"boolean"},"title":{"type":"string"},"description":{"type":"string"},"caption":{"type":"string","source":"html","selector":"figcaption"},"controls":{"type":"boolean","default":true},"loop":{"type":"boolean"},"maxWidth":{"type":"string","default":"100%"},"muted":{"type":"boolean"},"playsinline":{"type":"boolean"},"preload":{"type":"string","default":"metadata"},"seekbarPlayedColor":{"type":"string","default":""},"seekbarLoadingColor":{"type":"string","default":""},"seekbarColor":{"type":"string","default":""},"useAverageColor":{"type":"boolean","default":true},"id":{"type":"number"},"guid":{"type":"string"},"src":{"type":"string"},"cacheHtml":{"type":"string","default":""},"poster":{"type":"string"},"posterData":{"type":"object","default":{}},"videoRatio":{"type":"number"},"tracks":{"type":"array","items":{"type":"object"},"default":[]},"privacySetting":{"type":"number","default":1},"allowDownload":{"type":"boolean","default":true},"displayEmbed":{"type":"boolean","default":true},"rating":{"type":"string"},"isPrivate":{"type":"boolean"},"isExample":{"type":"boolean","default":false}},"textdomain":"jetpack-videopress","editorScript":"jetpack-videopress-video-block","editorStyle":"jetpack-videopress-video-block","style":"file:style-index.css","viewScript":"jetpack-videopress-video-block-view"}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../../../"})();r(1471)})();