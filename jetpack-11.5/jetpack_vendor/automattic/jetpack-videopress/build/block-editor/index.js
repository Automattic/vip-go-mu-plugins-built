/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={1074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(9307);const o=function(e){let{icon:t,size:r=24,...o}=e;return(0,n.cloneElement)(t,{width:r,height:r,...o})}},5022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9307),o=r(444);const s=(0,n.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(o.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"}))},9975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9307),o=r(444);const s=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"}))},5235:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===s)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},951:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(1741)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1741:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,s,a=null;function i(...e){if(!i.enabled)return;const n=i,o=Number(new Date),s=o-(r||o);n.diff=s,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";a++;const s=t.formatters[o];if("function"==typeof s){const t=e[a];r=s.call(n,t),e.splice(a,1),a--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=n,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,s=t.enabled(e)),s),set:e=>{a=e}}),"function"==typeof t.init&&t.init(i),i}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(3171),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},861:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},n={floor:Math.floor,ceil:Math.ceil};function o(o){var s,a,i,l,c,u,p,d,f,h,v,m,g,y,b,k,w,_,C,E,R,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=[],x=0;if(isNaN(o))throw new TypeError("Invalid number");if(i=!0===P.bits,b=!0===P.unix,m=!0===P.pad,a=P.base||10,g=void 0!==P.round?P.round:b?1:2,p=void 0!==P.locale?P.locale:"",d=P.localeOptions||{},k=void 0!==P.separator?P.separator:"",w=void 0!==P.spacer?P.spacer:b?"":" ",C=P.symbols||{},_=2===a?P.standard||"iec":"jedec",v=P.output||"string",c=!0===P.fullform,u=P.fullforms instanceof Array?P.fullforms:[],s=void 0!==P.exponent?P.exponent:-1,E=n[P.roundingMethod]||Math.round,f=(h=Number(o))<0,l=a>2?1e3:1024,R=!1===isNaN(P.precision)?parseInt(P.precision,10):0,f&&(h=-h),(-1===s||isNaN(s))&&(s=Math.floor(Math.log(h)/Math.log(l)))<0&&(s=0),s>8&&(R>0&&(R+=8-s),s=8),"exponent"===v)return s;if(0===h)S[0]=0,y=S[1]=b?"":t[_][i?"bits":"bytes"][s];else{x=h/(2===a?Math.pow(2,10*s):Math.pow(1e3,s)),i&&(x*=8)>=l&&s<8&&(x/=l,s++);var j=Math.pow(10,s>0?g:0);S[0]=E(x*j)/j,S[0]===l&&s<8&&void 0===P.exponent&&(S[0]=1,s++),y=S[1]=10===a&&1===s?i?"kbit":"kB":t[_][i?"bits":"bytes"][s],b&&(S[1]=S[1].charAt(0),e.test(S[1])&&(S[0]=Math.floor(S[0]),S[1]=""))}if(f&&(S[0]=-S[0]),R>0&&(S[0]=S[0].toPrecision(R)),S[1]=C[S[1]]||S[1],!0===p?S[0]=S[0].toLocaleString():p.length>0?S[0]=S[0].toLocaleString(p,d):k.length>0&&(S[0]=S[0].toString().replace(".",k)),m&&!1===Number.isInteger(S[0])&&g>0){var U=k||".",O=S[0].toString().split(U),A=O[1]||"",F=A.length,B=g-F;S[0]="".concat(O[0]).concat(U).concat(A.padEnd(F+B,"0"))}return c&&(S[1]=u[s]?u[s]:r[_][s]+(i?"bit":"byte")+(1===S[0]?"":"s")),"array"===v?S:"object"===v?{value:S[0],symbol:S[1],exponent:s,unit:y}:S.join(w)}return o.partial=function(e){return function(t){return o(t,e)}},o}()},4097:function(e,t){var r,n;n="undefined"!=typeof self?self:"undefined"!=typeof window||"undefined"!=typeof window?window:this,e.exports=function(n){"use strict";var o,s=(n=n||{}).Base64,a="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(i),c=String.fromCharCode,u=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(p,u)},f=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),t>=2?"=":i.charAt(r>>>6&63),t>=1?"=":i.charAt(63&r)].join("")},h=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},v=function(e){return h(d(String(e)))},m=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?m(v(e)):v(e)},y=function(e){return g(e,!0)};n.Uint8Array&&(o=function(e,t){for(var r="",n=0,o=e.length;n<o;n+=3){var s=e[n],a=e[n+1],l=e[n+2],c=s<<16|a<<8|l;r+=i.charAt(c>>>18)+i.charAt(c>>>12&63)+(void 0!==a?i.charAt(c>>>6&63):"=")+(void 0!==l?i.charAt(63&c):"=")}return t?m(r):r});var b,k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(k,w)},C=function(e){var t=e.length,r=t%4,n=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),o=[c(n>>>16),c(n>>>8&255),c(255&n)];return o.length-=[0,0,2,1][r],o.join("")},E=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,C)},R=function(e){return E(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},P=function(e){return _(E(e))},S=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},x=function(e){return P(S(e))};n.Uint8Array&&(b=function(e){return Uint8Array.from(R(S(e)),(function(e){return e.charCodeAt(0)}))});var j=function(){var e=n.Base64;return n.Base64=s,e};if(n.Base64={VERSION:a,atob:R,btoa:h,fromBase64:x,toBase64:g,utob:d,encode:g,encodeURI:y,btou:_,decode:x,noConflict:j,fromUint8Array:o,toUint8Array:b},"function"==typeof Object.defineProperty){var U=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",U((function(){return x(this)}))),Object.defineProperty(String.prototype,"toBase64",U((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",U((function(){return g(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(n)},9895:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={dropdown_content:"OBdFcFUcIeHeC04uL0Zf",current_media:"Z1wxtOMWZxmH5rJbzGfb"}},4641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={container:"ianknO6MB_ng2EieMQdE","play-icon":"no33D8j7N4nzdafpETZy","video-player-wrapper":"VFzg5w6i04b05mkee2SA","video-player-spinner-wrapper":"PHuqvGT1Z0IVZgjAtUZw",spinner:"xwBn5mUH0mhSBqas1dog",video:"k5rpcKdHL3HKU39CrUhe",range:"sgykjydBL76DT5yDw_ka"}},3171:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,s=7*o,a=365.25*o;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!i)return;var l=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=o)return i(e,s,o,"day");if(s>=n)return i(e,s,n,"hour");if(s>=r)return i(e,s,r,"minute");if(s>=t)return i(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=o)return Math.round(e/o)+"d";if(s>=n)return Math.round(e/n)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},142:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,s,a=[];for(s in"string"!=typeof t&&(t="?"),e)if(r.call(e,s)){if((n=e[s])||null!=n&&!isNaN(n)||(n=""),s=o(s),n=o(n),null===s||null===n)continue;a.push(s+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var s=n(t[1]),a=n(t[2]);null===s||null===a||s in o||(o[s]=a)}return o}},2298:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6895:(e,t,r)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};let n;var o;"undefined"!=typeof window&&(n=null===(o=window.Initial_State)||void 0===o?void 0:o.calypsoEnv);if(0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,r.url=encodeURIComponent(e)}else r.source=encodeURIComponent(e);Object.keys(t).map((e=>{r[e]=encodeURIComponent(t[e])})),!Object.keys(r).includes("site")&&"undefined"!=typeof jetpack_redirects&&jetpack_redirects.hasOwnProperty("currentSiteRawUrl")&&(r.site=jetpack_redirects.currentSiteRawUrl),n&&(r.calypso_env=n);const s=Object.keys(r).map((e=>e+"="+r[e])).join("&");return"https://jetpack.com/redirect/?"+s}r.d(t,{Z:()=>n})},520:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var n=r(5609);const o=React.createElement(n.SVG,{width:"29",height:"21",viewBox:"0 0 29 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.79037 0.59375C4.0363 0.59375 5.13102 1.41658 5.47215 2.60947L8.8452 14.4044C8.8486 14.4164 8.85411 14.4273 8.86124 14.4368L12.8572 0.59375H15.0927H21.2721C25.6033 0.59375 28.5066 3.39892 28.5066 7.64565C28.5066 11.9411 25.5272 14.6196 21.0818 14.6196H18.1499H14.3719L13.6379 16.8813C12.9796 18.9095 11.0827 20.2839 8.94152 20.2839C6.80035 20.2839 4.90341 18.9095 4.24517 16.8813L0.137069 4.22276C-0.444671 2.43022 0.898038 0.59375 2.79037 0.59375ZM15.7374 10.4119H20.0156C21.8718 10.4119 22.9856 9.35018 22.9856 7.64565C22.9856 5.93137 21.8718 4.91839 20.0156 4.91839H17.5202L15.7374 10.4119Z",fill:"#000000"}))},2016:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(2175),o=r(5609),s=r(5736),a=r(9196),i=r(1187);const __=s.__,_x=s._x;function l(e){let{attributes:t,setAttributes:r}=e;const{autoplay:s,loop:l,muted:c,controls:u,playsinline:p,preload:d,useAverageColor:f}=t,h=(e,t)=>React.createElement(o.Tooltip,{text:t,position:"top"},React.createElement("span",null,e)),v=(0,a.useCallback)((e=>t=>{r({[e]:t})}),[r]);return React.createElement(n.InspectorControls,null,React.createElement(o.PanelBody,{title:__("Video Settings","jetpack-videopress-pkg")},React.createElement(o.ToggleControl,{label:h(__("Autoplay","jetpack-videopress-pkg"),/* translators: Tooltip describing the "autoplay" option for the VideoPress player */
__("Start playing the video as soon as the page loads","jetpack-videopress-pkg")),onChange:v("autoplay"),checked:s,help:s?__("Note: Autoplaying videos may cause usability issues for some visitors.","jetpack-videopress-pkg"):null}),React.createElement(o.ToggleControl,{label:h(__("Loop","jetpack-videopress-pkg"),/* translators: Tooltip describing the "loop" option for the VideoPress player */
__("Restarts the video when it reaches the end","jetpack-videopress-pkg")),onChange:v("loop"),checked:l}),React.createElement(o.ToggleControl,{label:__("Muted","jetpack-videopress-pkg"),onChange:v("muted"),checked:c}),React.createElement(o.ToggleControl,{label:h(__("Playback Controls","jetpack-videopress-pkg"),/* translators: Tooltip describing the "controls" option for the VideoPress player */
__("Display the video playback controls","jetpack-videopress-pkg")),onChange:v("controls"),checked:u}),React.createElement(o.ToggleControl,{label:h(__("Play Inline","jetpack-videopress-pkg"),/* translators: Tooltip describing the "playsinline" option for the VideoPress player */
__("Play the video inline instead of full-screen on mobile devices","jetpack-videopress-pkg")),onChange:v("playsinline"),checked:p}),React.createElement(o.SelectControl,{label:h(__("Preload","jetpack-videopress-pkg"),/* translators: Tooltip describing the "preload" option for the VideoPress player */
__("Content to dowload before the video is played","jetpack-videopress-pkg")),value:d,onChange:e=>r({preload:e}),options:[{value:"auto",label:_x("Auto","VideoPress preload setting","jetpack-videopress-pkg")},{value:"metadata",label:_x("Metadata","VideoPress preload setting","jetpack-videopress-pkg")},{value:"none",label:_x("None","VideoPress preload setting","jetpack-videopress-pkg")}],help:"auto"===d?__("Note: Automatically downloading videos may cause issues if there are many videos displayed on the same page.","jetpack-videopress-pkg"):null})),React.createElement(i.Z,{attributes:t,setAttributes:r,useAverageColor:f,toggleAttribute:v}))}},9158:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(2175),o=r(5609),s=r(5736),a=r(5022),i=r(9975),l=r(9895);const __=s.__,c=["image"];function u(e){let{attributes:t,setAttributes:r,clientId:u}=e;const{poster:p}=t;return React.createElement(n.BlockControls,{group:"block"},React.createElement(o.Dropdown,{contentClassName:l.Z.dropdown_content,renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return React.createElement(o.ToolbarButton,{label:__("Poster image","jetpack-videopress-pkg"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:a.Z})},renderContent:e=>{let{onClose:t}=e;const d=`video-block__poster-image-description-${u}`;return React.createElement(React.Fragment,null,React.createElement(o.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:e=>{(e=>{r({poster:e.url})})(e),t()},allowedTypes:c,render:e=>{let{open:t}=e;return React.createElement(o.MenuItem,{icon:a.Z,onClick:t,"aria-describedby":d},p?__("Replace Poster image","jetpack-videopress-pkg",0):__("Select Poster Image","jetpack-videopress-pkg"),React.createElement("p",{id:d,hidden:!0},p?(0,s.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),p):__("There is no poster image currently selected","jetpack-videopress-pkg")))}})),!!p&&React.createElement(o.MenuItem,{onClick:()=>{r({poster:""}),t()},icon:i.Z},__("Remove and use default","jetpack-videopress-pkg"))),React.createElement("div",{className:l.Z.current_media},p?React.createElement(React.Fragment,null,React.createElement("span",null,__("You are currently overriding the default Poster image. Remove it if you want to use the default image generated by VideoPress.","jetpack-videopress-pkg"))):React.createElement(React.Fragment,null,__("No custom Poster image selected. You can upload or select an image from your media library to override the default video image","jetpack-videopress-pkg"))))}}))}},1187:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(17),o=r.n(n),s=r(2175),a=r(5609),i=r(9307),l=r(5736),c=r(9196),u=r.n(c);const __=l.__;class p extends i.Component{constructor(){super(...arguments),o()(this,"handleChangeSeekbarColor",(e=>{this.setState({seekbarColor:e})})),o()(this,"handleChangeSeekbarLoadingColor",(e=>{this.setState({seekbarLoadingColor:e})})),o()(this,"handleChangeSeekbarPlayedColor",(e=>{this.setState({seekbarPlayedColor:e})})),o()(this,"saveColors",(()=>{const{seekbarColor:e,seekbarLoadingColor:t,seekbarPlayedColor:r}=this.state,{setAttributes:n}=this.props;n({seekbarColor:e,seekbarLoadingColor:t,seekbarPlayedColor:r})}));const{seekbarColor:e,seekbarPlayedColor:t,seekbarLoadingColor:r}=this.props.attributes;this.state={seekbarColor:e,seekbarPlayedColor:t,seekbarLoadingColor:r}}render(){const{seekbarColor:e,seekbarPlayedColor:t,seekbarLoadingColor:r}=this.state,{toggleAttribute:n,useAverageColor:o}=this.props,i=!0;return u().createElement(a.PanelBody,{className:"seekbar-color-settings__panel",title:__("Progress Bar Colors","jetpack-videopress-pkg"),initialOpen:!1},u().createElement(a.ToggleControl,{label:__("Match video","jetpack-videopress-pkg"),help:__("Colors adapt to the video as it plays","jetpack-videopress-pkg"),onChange:n("useAverageColor"),checked:o}),u().createElement(s.PanelColorSettings,{opened:!o,showTitle:!1,colorSettings:[{value:e,onChange:this.handleChangeSeekbarColor,label:__("Main","jetpack-videopress-pkg"),showTitle:i},{value:r,onChange:this.handleChangeSeekbarLoadingColor,label:__("Loaded","jetpack-videopress-pkg"),showTitle:i},{value:t,onChange:this.handleChangeSeekbarPlayedColor,label:__("Progress","jetpack-videopress-pkg"),showTitle:i}]},u().createElement(a.Button,{variant:"secondary",onClick:this.saveColors},__("Save colors","jetpack-videopress-pkg"))))}}const d=p},3578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(2175),o=r(5609),s=r(9307),a=r(5736),i=r(951),l=r.n(i),c=r(6270);const __=a.__,u=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify(window.videopressAjax)};`],{type:"text/javascript"});u.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function p(e){var t;let{html:r,isSelected:a,attributes:i,setAttributes:l,scripts:c=[],preview:p}=e;const d=(0,s.useRef)(),{maxWidth:f,caption:h,videoRatio:v}=i,m=null==d||null===(t=d.current)||void 0===t?void 0:t.querySelector("iframe"),g=null==m?void 0:m.contentWindow,[y,b]=(0,s.useState)(),[k,w]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(null!=d&&d.current)return p?b("auto"):void(v&&(b(d.current.offsetWidth*v/100),setTimeout((()=>{b(d.current.offsetWidth*v/100)}),0),w(!1)))}),[d,v,p]);const _=(0,s.useCallback)((e=>{let{detail:t}=e;w("loaded"===(null==t?void 0:t.state))}),[]);(0,s.useEffect)((()=>{r||w(!1)}),[r]),(0,s.useEffect)((()=>{if(g)return g.addEventListener("onVideoPressLoadingState",_),()=>null==g?void 0:g.removeEventListener("onVideoPressLoadingState",_)}),[_,g,r]);const C=(0,s.useCallback)(((e,t,r)=>{let n=getComputedStyle(r).width;if(null!==r.parentElement){n===getComputedStyle(r.parentElement).width&&(n="100%")}l({maxWidth:n})}),[l]),E={};return"auto"!==y&&(E.height=y||200,E.paddingBottom=y?12:0),React.createElement("figure",{className:"jetpack-videopress-player"},React.createElement(o.ResizableBox,{enable:{top:!1,bottom:!1,left:!0,right:!0},maxWidth:"100%",size:{width:f},style:{margin:"auto"},onResizeStop:C},!a&&React.createElement("div",{className:"jetpack-videopress-player__overlay"}),React.createElement("div",{className:"jetpack-videopress-player__wrapper",ref:d,style:E},React.createElement(o.SandBox,{html:r,scripts:[...u,...c]}),!k&&React.createElement("div",{className:"jetpack-videopress-player__loading"},__("Loadingâ€¦","jetpack-videopress-pkg")))),(!n.RichText.isEmpty(h)||a)&&React.createElement(n.RichText,{tagName:"figcaption",placeholder:__("Write captionâ€¦","jetpack-videopress-pkg"),value:h,onChange:e=>l({caption:e}),inlineToolbar:!0}))}window.debugBridgeInstance=l()("jetpack:vp-block:bridge"),u.push(c.Z)},4744:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(6895),o=r(6989),s=r.n(o),a=r(2175),i=r(5609),l=r(9307),c=r(5736),u=r(9196),p=r(1207),d=r(1618),f=r(4470),h=r(520),v=r(125),m=r(2374);const __=c.__,g=["video"],y=(0,i.withNotices)((e=>{let{attributes:t,setAttributes:r,noticeUI:o,noticeOperations:c,handleDoneUpload:y}=e;const[b,k]=(0,l.useState)(!1),[w,_]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[R,P]=(0,l.useState)(!1),S=(0,u.useRef)(null),[x,j]=(0,l.useState)(null),[U,O]=(0,l.useState)([]),A=(0,l.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];O(t)}),[]),[F,B]=(0,l.useState)(null),T=(0,l.useCallback)((function(e){if(null!=e&&e.originalResponse)try{var t,r;const n=null==e||null===(t=e.originalResponse)||void 0===t||null===(r=t.getBody)||void 0===r?void 0:r.call(t),o=JSON.parse(n);return void B(o)}catch{}B(e)}),[]),N=e=>{r(e),_(!0)},[L,Z,I]=(0,p.hr)({onError:T,onProgress:A,onSuccess:N});function D(e){const t=(e=>{try{const t=new URL(e);if((e=>"https:"===e.protocol&&["videopress.com","video.wordpress.com"].includes(e.host))(t)){const e=t.pathname.match(/^\/v\/([a-zA-Z0-9]+)$/);return 2===e.length&&e[1]}}catch(e){return!1}})(e);t?(r({guid:t,src:e}),y()):B({data:{message:__("Invalid VideoPress URL","jetpack-videopress-pkg")}})}const H=e=>{F&&T(null),j(e),A(0,e.size),E(!0),S.current=L(e)},M=()=>{const e=null==S?void 0:S.current;if(e){e[b?"start":"abort"](),k(!b)}};if("owner_not_connected"===(null==I?void 0:I.code)){var z,V;const e=(0,l.createInterpolateElement)(__("<connectLink>Connect</connectLink> your site to use the <moreAboutVideoPressLink>VideoPress</moreAboutVideoPressLink> video block.","jetpack-videopress-pkg"),{connectLink:React.createElement("a",{href:null==I||null===(z=I.data)||void 0===z?void 0:z.connect_url,rel:"noreferrer noopener"}),moreAboutVideoPressLink:React.createElement(i.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return React.createElement(d.l,{errorMessage:e},React.createElement(i.Button,{key:"videopress-connect-user",variant:"primary",href:null==I||null===(V=I.data)||void 0===V?void 0:V.connect_url},__("Connect","jetpack-videopress-pkg")))}if(F){const e=()=>{H(x)},t=()=>{j(null),A([]),T(null),E(!1)};return React.createElement(v.Z,{onRetry:e,onCancel:t,errorData:F})}if(C){const e=U[0]/U[1]*100;return React.createElement(m.Z,{attributes:t,setAttributes:r,file:x,progress:e,paused:b,completed:w,onPauseOrResume:M,onDone:y,supportPauseOrResume:Boolean(null==S?void 0:S.current)})}return R?React.createElement(d.l,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(i.Spinner,null),React.createElement("span",null,__("Loadingâ€¦","jetpack-videopress-pkg")))):React.createElement(a.MediaPlaceholder,{handleUpload:!1,className:"is-videopress-placeholder",icon:React.createElement(a.BlockIcon,{icon:h.l}),labels:{title:f.TN,instructions:f.WL},onSelect:function(e){var t;if((e=null!==(t=e)&&void 0!==t&&t[0]?e[0]:e)instanceof File)H(e);else if(e.videopress_guid){D(`https://videopress.com/v/${e.videopress_guid[0]}`)}else{if(e.id){const t=`videopress/v1/upload/${e.id}`;return P(!0),void s()({path:t,method:"GET"}).then((t=>{if(P(!1),"new"===t.status||"resume"===t.status)j(e),A(t.file_size,t.file_size),E(!0),r=e.id,(0,p.R2)(r).then((e=>{N(e)})).catch((e=>{B(e)}));else if("uploaded"===t.status){D(`https://videopress.com/v/${t.uploaded_video_guid}`)}else B({data:{message:t.message?t.message:__("Error selecting video. Please try again.","jetpack-videopress-pkg")}});var r})).catch((e=>{P(!1),B({data:{message:e.message}})}))}B({data:{message:__("Please select a video from Library or upload a new one","jetpack-videopress-pkg")}})}},onSelectURL:D,accept:"video/*",allowedTypes:g,value:t,notices:o,onError:function(e){c.removeAllNotices(),c.createErrorNotice(e)}})}))},7215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(2175),o=r(5609),s=r(9307),a=r(1975),i=r(5736),l=r(1074),c=r(5235),u=r.n(c),p=r(2346),d=r(7535);const __=i.__,f=["image"],h=e=>{let{videoPosterImageUrl:t}=e;return React.createElement("div",{className:"uploading-editor__poster-image"},t?React.createElement("img",{src:t,alt:"Poster"}):React.createElement("span",null,"No Poster Selected"))},v=e=>{let{file:t,videoPosterImageData:r,onVideoFrameSelected:n}=e;const o=Boolean(null==r?void 0:r.url),a=(0,s.useRef)((null==t?void 0:t.url)??URL.createObjectURL(t));return React.createElement("div",{className:u()("uploading-editor__poster-container")},React.createElement(d.Z,{src:null==a?void 0:a.current,onVideoFrameSelected:n,className:u()({"uploading-editor__hide":o})}),o&&React.createElement(React.Fragment,null,React.createElement(h,{videoPosterImageUrl:null==r?void 0:r.url}),React.createElement(l.Z,{className:"uploading-editor__play-icon",icon:p.Z})))},m=e=>{let{hasPoster:t,onSelectPoster:r,onRemovePoster:a}=e;return t?React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r,allowedTypes:f,render:e=>{let{open:t}=e;return React.createElement("div",{className:"uploading-editor__poster-buttons"},React.createElement(o.Button,{onClick:a,variant:"secondary",isDestructive:!0},__("Remove Poster Image","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"secondary",onClick:t},__("Select Poster Image","jetpack-videopress-pkg")))}}):React.createElement("span",{className:"uploading-editor__scrubber-help"},(0,s.createInterpolateElement)(__("This is how the video will look. Use the slider to choose a poster or <a>select a custom one</a>.","jetpack-videopress-pkg"),{a:React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r,allowedTypes:f,render:e=>{let{open:t}=e;return React.createElement("a",{className:"uploading-editor__upload-link",onClick:t,onKeyDown:t,role:"button",tabIndex:0},__("select a custom one","jetpack-videopress-pkg"))}})}))},g=e=>{const{file:t,onSelectPoster:r,onRemovePoster:n,videoPosterImageData:i,onChangeTitle:l,onVideoFrameSelected:c}=e,u=(0,a.escapeHTML)(null==t?void 0:t.name).replace(/\.[^/.]+$/,"");const[p,d]=(0,s.useState)(u);return React.createElement("div",{className:"uploading-editor"},React.createElement(o.TextControl,{label:__("Video title","jetpack-videopress-pkg"),className:"uploading-editor__title",onChange:e=>{l(e),d(e)},value:p}),React.createElement(o.BaseControl,{label:__("Video poster (optional)","jetpack-videopress-pkg")},React.createElement(v,{file:t,videoPosterImageData:i,onVideoFrameSelected:c}),React.createElement(m,{hasPoster:Boolean(i),onSelectPoster:r,onRemovePoster:n})))}},125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(5609),o=r(5736),s=r(1618);const __=o.__,a=e=>{let{errorData:t,onRetry:r,onCancel:o}=e;const a=(e=>{var t;if(!e)return"";let r=(null==e||null===(t=e.data)||void 0===t?void 0:t.message)||__("Failed to upload your video. Please try again.","jetpack-videopress-pkg");return"Invalid Mime"===r&&(r=React.createElement(React.Fragment,null,__("The format of the video you uploaded is not supported.","jetpack-videopress-pkg"),"Â ",React.createElement(n.ExternalLink,{href:"https://wordpress.com/support/videopress/recommended-video-settings/",target:"_blank",rel:"noreferrer"},__("Check the recommended video settings.","jetpack-videopress-pkg")))),r})(t);return React.createElement(s.l,{errorMessage:a,onNoticeRemove:o},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(n.Button,{variant:"primary",onClick:r},__("Try again","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"secondary",onClick:o},__("Cancel","jetpack-videopress-pkg"))))}},2374:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(6989),o=r.n(n),s=r(5609),a=r(9307),i=r(5736),l=r(861),c=r.n(l),u=r(5134),p=r(6650),d=r(3897),f=r(1618),h=r(7215);const __=i.__,v=e=>{let{setAttributes:t,attributes:r,onDone:n}=e;const[s,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[f,h]=(0,a.useState)(null),[v,m]=(0,a.useState)(null),g=null==r?void 0:r.guid,y=(0,d.Z)(g),b=(0,p.Z)(g),k=(0,u.Z)(null==r?void 0:r.id),w=e=>{let{data:r}=e;null!=r&&r.generating?setTimeout((()=>{new Promise(((e,t)=>{b(g).then((t=>e(t))).catch((()=>{o()({path:`/videos/${g}/poster`,apiNamespace:"rest/v1.1",global:!0,method:"GET"}).then((t=>e(t))).catch((e=>t(e)))}))})).then((e=>w(e)))}),2e3):null!=r&&r.poster&&t({poster:null==r?void 0:r.poster})},_=e=>new Promise(((t,r)=>{y(e).then((e=>{w(e),t()})).catch((()=>{o()({path:`/videos/${g}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:e}).then((()=>{t()})).catch((e=>{r(e)}))}))}));return[e=>{c(e),h(null)},e=>{h(e)},()=>{h(null)},m,()=>{i(!0);const e=[];v&&e.push(k({title:v})),f?e.push(_({poster_attachment_id:null==f?void 0:f.id})):null!=l&&e.push(_({at_time:l,is_millisec:!0})),Promise.allSettled(e).then((()=>{i(!1),n()}))},f,s]},m=e=>{let{attributes:t,setAttributes:r,progress:n,file:o,paused:a,completed:l,onPauseOrResume:u,onDone:p,supportPauseOrResume:d}=e;const[m,g,y,b,k,w,_]=v({setAttributes:r,attributes:t,onDone:p}),C=Math.round(n),E={width:`${C}%`},R=__("Resume","jetpack-videopress-pkg"),P=__("Pause","jetpack-videopress-pkg"),S=(null==o?void 0:o.filesizeHumanReadable)??c()(null==o?void 0:o.size);return React.createElement(f.l,{disableInstructions:!0},React.createElement(h.Z,{file:o,onSelectPoster:g,onRemovePoster:y,onChangeTitle:b,onVideoFrameSelected:m,videoPosterImageData:w}),React.createElement("div",{className:"videopress-uploader-progress"},l?React.createElement(React.Fragment,null,React.createElement("span",null,__("Upload Complete!","jetpack-videopress-pkg")," ðŸŽ‰"),React.createElement(s.Button,{variant:"primary",onClick:k,disabled:_,isBusy:_},__("Done","jetpack-videopress-pkg"))):React.createElement(React.Fragment,null,C<100?React.createElement(React.Fragment,null,React.createElement("div",{className:"videopress-uploader-progress__file-info"},React.createElement("div",{className:"videopress-uploader-progress__progress"},React.createElement("div",{className:"videopress-uploader-progress__progress-loaded",style:E})),React.createElement("div",{className:"videopress-upload__percent-complete"},(0,i.sprintf)(/* translators: Placeholder is an upload progress percenatage number, from 0-100. */
__("Uploading (%1$s%%)","jetpack-videopress-pkg"),C)),React.createElement("div",{className:"videopress-uploader-progress__file-size"},S)),d&&React.createElement("div",{className:"videopress-uploader-progress__actions"},C<100&&React.createElement(s.Button,{variant:"link",onClick:u},a?R:P))):React.createElement(React.Fragment,null,React.createElement("span",null,__("Finishing up â€¦","jetpack-videopress-pkg")," ðŸŽ¬"),React.createElement(s.Spinner,null)))))}},1618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w,l:()=>k});var n=r(2674),o=r.n(n),s=r(2175),a=r(5609),i=r(7798),l=r(9818),c=r(9307),u=r(5736),p=r(5235),d=r.n(p),f=r(3028),h=r(520),v=r(2016),m=r(9158),g=r(3578),y=r(4744),b=r(4470);const __=u.__,k=(0,a.withNotices)((function(e){let{children:t,errorMessage:r,noticeUI:n,noticeOperations:o,instructions:i=b.WL,disableInstructions:l}=e;return(0,c.useEffect)((()=>{r&&(o.removeAllNotices(),o.createErrorNotice(r))}),[r,o]),React.createElement(a.Placeholder,{icon:React.createElement(s.BlockIcon,{icon:h.l}),label:b.TN,instructions:l?null:i,notices:n},t)}));function w(e){let{attributes:t,setAttributes:r,isSelected:n,clientId:u}=e;const{autoplay:p,loop:h,muted:b,controls:w,playsinline:_,preload:C,useAverageColor:E,seekbarColor:R,seekbarLoadingColor:P,seekbarPlayedColor:S,guid:x,cacheHtml:j,poster:U,align:O,videoRatio:A}=t,F=(0,f.p)(x,{autoplay:p,controls:w,loop:h,muted:b,playsinline:_,preload:C,seekbarColor:R,seekbarLoadingColor:P,seekbarPlayedColor:S,useAverageColor:E,poster:U}),{preview:B,isRequestingEmbedPreview:T}=(0,l.useSelect)((e=>({preview:e(i.store).getEmbedPreview(F)||!1,isRequestingEmbedPreview:e(i.store).isRequestingEmbedPreview(F)||!1})),[F]),{html:N,scripts:L,width:Z,height:I}=B||{html:null,scripts:[]};(0,c.useEffect)((()=>{N&&N!==j&&r({cacheHtml:N})}),[N,j,r]);const D=N||j;(0,c.useEffect)((()=>{if(!Z||!I)return;const e=I/Z*100;e!==A&&r({videoRatio:e})}),[A,Z,I,r]);const H=(0,l.useDispatch)(i.store).invalidateResolution,M=(0,c.useCallback)((()=>{H("getEmbedPreview",[F])}),[F,H]),[z,V]=(0,c.useState)(0),q=(0,c.useRef)();function $(){null!=q&&q.current&&(q.current=clearInterval(q.current))}(0,c.useEffect)((()=>z>=10?$():F?T?$():B?(V(0),$()):null!=q&&q.current?void 0:(q.current=setTimeout((()=>{B?V(0):(V((e=>e+1)),M())}),2e3),$):$()),[z,q,M,B,F,T]);const{className:W,...G}=(0,s.useBlockProps)({className:"wp-block-jetpack-videopress"}),[K,J]=(0,c.useState)(!(null!=t&&t.guid));if(K){const e=()=>{J(!1)};return React.createElement("div",o()({},G,{className:W}),React.createElement(y.Z,{setAttributes:r,attributes:t,handleDoneUpload:e}))}return(T||!B)&&z>0&&z<10?React.createElement("div",o()({},G,{className:W}),React.createElement(k,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(a.Spinner,null),__("Generating previewâ€¦","jetpack-videopress-pkg"),React.createElement("strong",null," ",z)))):z>=10&&!B?React.createElement("div",o()({},G,{className:W}),React.createElement(k,{errorMessage:__("Impossible to get a video preview after ten attempts.","jetpack-videopress-pkg"),onNoticeRemove:H},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(a.Button,{variant:"primary",onClick:H},__("Try again","jetpack-videopress-pkg")),React.createElement(a.Button,{variant:"secondary",onClick:()=>{r({src:void 0,id:void 0,guid:void 0})}},__("Cancel","jetpack-videopress-pkg"))))):React.createElement("div",o()({},G,{className:d()(W,{[`align${O}`]:O,"is-updating-preview":!N})}),React.createElement(v.Z,{attributes:t,setAttributes:r}),React.createElement(m.Z,{attributes:t,setAttributes:r,clientId:u}),React.createElement(g.Z,{html:D,isUpdatingPreview:!N,scripts:L,attributes:t,setAttributes:r,isSelected:n,className:"wp-block-jetpack-videopress",preview:B}))}},4470:(e,t,r)=>{"use strict";r.d(t,{TN:()=>c,WL:()=>u});var n=r(4981),o=r(4205),s=r(520),a=r(1618),i=r(5126);const{name:l,title:c,description:u}=o;(0,n.registerBlockType)(l,{edit:a.Z,save:i.Z,icon:s.l})},5126:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(2674),o=r.n(n),s=r(2175),a=r(5235),i=r.n(a),l=r(3028);function c(e){let{attributes:t}=e;const{align:r,autoplay:n,caption:a,loop:c,muted:u,controls:p,playsinline:d,preload:f,useAverageColor:h,seekbarColor:v,seekbarLoadingColor:m,seekbarPlayedColor:g,guid:y,maxWidth:b,poster:k}=t,w=s.useBlockProps.save({className:i()("wp-block-jetpack-videopress","jetpack-videopress-player",{[`align${r}`]:r})}),_=(0,l.p)(y,{autoplay:n,controls:p,loop:c,muted:u,playsinline:d,preload:f,seekbarColor:v,seekbarLoadingColor:m,seekbarPlayedColor:g,useAverageColor:h,poster:k}),C={};return b&&b.length>0&&"100%"!==b&&(C.maxWidth=b,C.margin="auto"),React.createElement("figure",o()({},w,{style:C}),_&&React.createElement("div",{className:"jetpack-videopress-player__wrapper"},`\n${_}\n`),!s.RichText.isEmpty(a)&&React.createElement(s.RichText.Content,{tagName:"figcaption",value:a}))}},6270:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=URL.createObjectURL(new Blob(["\n\tif ( ! window?.debug ) {\n\t\twindow.debug = window.parent?.debugBridgeInstance ?? ( () => {} );\n\t}\n\n\tfunction initWPBlockBridge() {\n\t\tdebug( 'ðŸŒ‰ ðŸ›  building the bridge' );\n\n\t\tconst videoPressIFrame = document.querySelector('iframe');\n\t\tif ( ! videoPressIFrame?.contentWindow ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst videoPressWindow = videoPressIFrame.contentWindow;\n\n\t\t// Allowed events emitted by the videopress API.\n\t\tconst videoPressEventsMap = {\n\t\t\t'videopress_playing': {\n\t\t\t\tname: 'onVideoPressPlaying',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_pause': {\n\t\t\t\tname: 'onVideoPressPause',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_seeking': {\n\t\t\t\tname: 'onVideoPressSeeking',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_resize': {\n\t\t\t\tname: 'onVideoPressResize',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_volumechange': {\n\t\t\t\tname: 'onVideoPressVolumeChange',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_ended': {\n\t\t\t\tname: 'onVideoPressEnded',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_timeupdate': {\n\t\t\t\tname: 'onVideoPressTimeUpdate',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_durationchange': {\n\t\t\t\tname: 'onVideoPressDurationChange',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_progress': {\n\t\t\t\tname: 'onVideoPressProgress',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_loading_state': {\n\t\t\t\tname: 'onVideoPressLoadingState',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\tvideopress_toggle_fullscreen: {\n\t\t\t\tname: 'onVideoPressToggleFullscreen',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'vpBlockActionPlay': {\n\t\t\t\tname: 'vpBlockActionPlay',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_play',\n\t\t\t},\n\t\t\t'vpBlockActionPause': {\n\t\t\t\tname: 'vpBlockActionPause',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_pause',\n\t\t\t},\n\t\t\t'vpBlockActionSetCurrentTime': {\n\t\t\t\tname: 'vpBlockActionPause',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_set_currenttime',\n\t\t\t},\n\t\t};\n\n\t\tconst allowedVideoPressEvents = Object.keys( videoPressEventsMap );\n\n\t\twindow.addEventListener( 'message', ( ev ) => {\n\t\t\tconst { data } = ev;\n\t\t\tconst eventName = data.event;\n\t\t\tif ( ! allowedVideoPressEvents.includes( eventName ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Rename event with the 'onVideoPress' prefix.\n\t\t\tconst vpEvent = videoPressEventsMap[ eventName ];\n\t\t\tconst { name: vpEventName, type: vpEventType, videoPressAction } = vpEvent;\n\n\t\t\t// Dispatch event to top when it's an event\n\t\t\tif ( vpEventType === 'event' ) {\n\t\t\t\t// It preferrs to use the guid instead of the id.\n\t\t\t\tconst guid = data.id;\n\t\t\t\tconst originalEventName = data.event;\n\t\n\t\t\t\t// clean event data object\n\t\t\t\tdelete data.event;\n\t\t\t\tdelete data.id;\n\t\n\t\t\t\t// Emite custom event with the event data.\n\t\t\t\tconst videoPressBlockEvent = new CustomEvent( vpEventName, {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\toriginalEventName,\n\t\t\t\t\t\tguid,\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t\tdebug( 'ðŸŒ‰ %o [%s] âžœ %o', originalEventName, guid, vpEventName );\n\n\t\t\t\t// Dispatch custom event in iFrame window...\n\t\t\t\twindow.dispatchEvent( videoPressBlockEvent );\n\n\t\t\t\t// ...and also dipatch to the parent window,\n\t\t\t\t// in case it exists.\n\t\t\t\tif ( window?.parent && window.parent !== window ) {\n\t\t\t\t\twindow.parent.dispatchEvent( videoPressBlockEvent );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( vpEventType === 'action' ) {\n\t\t\t\t// Overwrite event from -> to\n\t\t\t\tdata.event = videoPressAction;\n\n\t\t\t\tdebug( 'ðŸŒ‰ recieve %o -> dispatching %o [%o]', eventName, videoPressAction, data );\n\t\t\t\tvideoPressWindow.postMessage( data, '*' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitWPBlockBridge();\n"],{type:"text/javascript"}))},8545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(6895),o=r(2175),s=r(4981),a=r(5609),i=r(4333),l=r(9818),c=r(9307),u=r(5736),p=r(3028);const __=u.__,d=(0,i.createHigherOrderComponent)((e=>t=>{const{clientId:r}=t,{attributes:i,setAttributes:u}=t,{url:d,keepUsingOEmbedVariation:f}=i,{replaceBlock:h}=(0,l.useDispatch)(o.store),v=(0,p.Z)(d);if((0,c.useEffect)((()=>{!1===f&&h(r,(0,s.createBlock)("videopress/video",{...i,guid:v}))}),[f,v]),"core/embed"!==t.name)return React.createElement(e,t);if(null==i||!i.providerNameSlug||"videopress"!==i.providerNameSlug)return React.createElement(e,t);if(!v)return React.createElement(e,t);if(!0===f)return React.createElement(e,t);const m=(0,c.createInterpolateElement)(__("Convert this embed to a VideoPress video block to unlock advanced video player options. <moreAboutVideoPressLink>More about the VideoPress block</moreAboutVideoPressLink>","jetpack-videopress-pkg"),{moreAboutVideoPressLink:React.createElement(a.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return React.createElement("div",null,React.createElement(o.Warning,{className:"extended-block-warning",actions:[React.createElement(a.Button,{key:"convert",variant:"primary",onClick:()=>u({keepUsingOEmbedVariation:!1})},__("Use VideoPress Video block","jetpack-videopress-pkg")),React.createElement(a.Button,{key:"convert",variant:"tertiary",onClick:()=>u({keepUsingOEmbedVariation:!0})},__("Keep using the Embed block","jetpack-videopress-pkg"))]},m),React.createElement("div",{className:"wp-extended-block-wrapper is-disabled"},React.createElement("div",{className:"extended-block-player__overlay"}),React.createElement(e,t)))}),"withCoreEmbedVideoPressBlock")},8921:(e,t,r)=>{"use strict";var n=r(4981),o=r(7701),s=r.n(o),a=r(2694),i=r(8545);(0,a.addFilter)("blocks.registerBlockType","videopress/core-embed/handle-representation",((e,t)=>"core/embed"!==t?e:{...e,attributes:{...e.attributes,keepUsingOEmbedVariation:{type:"boolean"}},edit:(0,i.Z)(e.edit)})),s()((function(){setTimeout((()=>{(0,n.unregisterBlockVariation)("core/embed","videopress")}),0)}))},3998:(e,t,r)=>{"use strict";var n=r(6895),o=r(2175),s=r(4981),a=r(5609),i=r(4333),l=r(9818),c=r(9307),u=r(2694),p=r(5736);const __=p.__;(0,u.addFilter)("blocks.registerBlockType","videopress/core-video/handle-block-conversion",((e,t)=>"core/video"!==t?e:{...e,attributes:{...e.attributes,guid:{type:"string"},poster:{type:"string"},videoPressTracks:{type:"array",items:{type:"object"},default:[]},keepUsingCoreVideoVideoPressBlock:{type:"boolean"}}}));const d=(0,i.createHigherOrderComponent)((e=>t=>{const{block:r,isValid:i}=t,{name:u,attributes:p,clientId:d}=r,{guid:f,videoPressTracks:h,poster:v}=p,{replaceBlock:m}=(0,l.useDispatch)(o.store),[g,y]=(0,c.useState)(),b=!("core/video"!==u||i||!(f&&h));if((0,c.useEffect)((()=>{!1===g&&b&&m(d,(0,s.createBlock)("videopress/video",p))}),[d,b,g,p]),!b)return React.createElement(e,t);const k=(0,c.createInterpolateElement)(__("This block contains unexpected or invalid content, and it seems to be a <moreAboutVideoPressLink>VideoPress video block</moreAboutVideoPressLink> instance.","jetpack-videopress-pkg"),{moreAboutVideoPressLink:React.createElement(a.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return g?React.createElement(e,t):React.createElement(React.Fragment,null,React.createElement(o.Warning,{className:"extended-block-warning",actions:[React.createElement(a.Button,{key:"convert",variant:"primary",onClick:()=>y(!1)},__("Attempt VideoPress Block Recovery","jetpack-videopress-pkg")),React.createElement(a.Button,{key:"ignore",variant:"tertiary",onClick:()=>y(!0)},__("Skip","jetpack-videopress-pkg"))]},k,v&&React.createElement("p",{className:"wp-extended-block-wrapper is-disabled"},React.createElement("p",{className:"extended-block-player__overlay"}),React.createElement("span",{class:"videoplayer-play","aria-hidden":"true"}),React.createElement("img",{src:v,alt:__("VideoPress Video Block","jetpack-videopress-pkg")}))))}),"handleJetpackCoreVideoDeprecation");(0,u.addFilter)("editor.BlockListBlock","videopress/jetpack-videopress-deprecation",d)},9437:(e,t,r)=>{"use strict";r(8921),r(3998)},2346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5609);const o=React.createElement(n.SVG,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M4.75725 2.075C4.60279 1.97745 4.41041 1.97489 4.25365 2.06832C4.09689 2.16174 4 2.3367 4 2.52632V21.4737C4 21.6633 4.09689 21.8383 4.25365 21.9317C4.41041 22.0251 4.60279 22.0226 4.75725 21.925L19.7573 12.4513C19.9079 12.3562 20 12.1849 20 12C20 11.8151 19.9079 11.6438 19.7573 11.5487L4.75725 2.075Z",fill:"white"}))},7535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(5609),o=r(9307),s=r(1074),a=r(5235),i=r.n(a),l=r(2346),c=r(4641);const u=e=>{let{src:t,setMaxDuration:r=null,currentTime:s}=e;const a=(0,o.useRef)(null),[i,l]=(0,o.useState)(!0);(0,o.useEffect)((()=>{a.current.src=t}),[t]),(0,o.useEffect)((()=>{a.current&&Number.isFinite(s)&&(a.current.currentTime=s)}),[s]);return React.createElement("div",{className:c.Z["video-player-wrapper"]},i&&React.createElement("div",{className:c.Z["video-player-spinner-wrapper"]},React.createElement(n.Spinner,{className:c.Z.spinner})),React.createElement("video",{onLoadedData:()=>l(!1),ref:a,muted:!0,className:c.Z.video,onDurationChange:e=>{const t=e.target.duration;if(null==r||r(t),a.current){const e=Number.isFinite(s)?s:t/2;a.current.currentTime=e}}}))},p=e=>{let{src:t="",onVideoFrameSelected:r,className:a="",initialCurrentTime:p=null}=e;const[d,f]=(0,o.useState)(0),[h,v]=(0,o.useState)(Number.isFinite(p)?p:null);return React.createElement("div",{className:i()(c.Z.container,a)},React.createElement(s.Z,{className:c.Z["play-icon"],icon:l.Z}),React.createElement(u,{src:t,setMaxDuration:f,currentTime:h}),React.createElement(n.RangeControl,{className:c.Z.range,min:0,step:.1,initialPosition:h,max:d,showTooltip:!1,withInputField:!1,onChange:e=>{v(e),null==r||r(1e3*e)}}))}},5134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6989),o=r.n(n);const s=e=>t=>new Promise(((r,n)=>{const s=Object.assign({id:e},t);o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:s}).then((e=>{"success"===(null==e?void 0:e.code)||n()})).catch((e=>n(e))).finally((()=>{r()}))}))},6650:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6989),o=r.n(n);const s=e=>()=>new Promise((function(t,r){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},3897:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6989),o=r.n(n);const s=e=>function(t){return new Promise((function(r,n){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:t}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}},1207:(e,t,r)=>{"use strict";r.d(t,{R2:()=>u,hr:()=>p});var n=r(6989),o=r.n(n),s=r(9307),a=r(5736),i=r(9537);const __=a.__,l={},c=function(){return new Promise((function(e,t){o()({path:"/wpcom/v2/videopress/upload-jwt",method:"POST"}).then((t=>{e({token:t.upload_token,blogId:t.upload_blog_id,url:t.upload_url})})).catch((e=>{t(e)}))}))},u=e=>{const t=`videopress/v1/upload/${e}`;return new Promise(((r,n)=>{o()({path:t,method:"POST"}).then((t=>{"uploading"===t.status||"new"===t.status||"resume"===t.status?u(e).then(r).catch(n):"complete"===t.status?r({guid:t.uploaded_details.guid,id:t.uploaded_details.media_id,src:t.uploaded_details.upload_src}):"error"===t.status?n({data:{message:t.error}}):n({data:{message:__("Unexpected error uploading video.","jetpack-videopress-pkg")}})})).catch((e=>{n({data:{message:null==e?void 0:e.message}})}))}))},p=e=>{let{onError:t,onProgress:r,onSuccess:n}=e;const[o,a]=(0,s.useState)({}),[u,p]=(0,s.useState)(null);(0,s.useEffect)((()=>{c().then(a).catch((e=>{p(e),null==t||t(e)}))}),[]);return[e=>(e=>{let{file:t,onProgress:r,onSuccess:n,onError:o,data:s}=e;const a=new i.gq(t,{onError:o,onProgress:r,endpoint:s.url,removeFingerprintOnSuccess:!0,withCredentials:!1,autoRetry:!0,overridePatchMethod:!1,chunkSize:1e7,metadata:{filename:t.name,filetype:t.type},retryDelays:[0,1e3,3e3,5e3,1e4],onAfterResponse:function(e,r){if(r.getStatus()>=400)return;const o=r.getHeader("x-videopress-upload-guid"),s=r.getHeader("x-videopress-upload-media-id"),a=r.getHeader("x-videopress-upload-src-url");if(o&&s&&a)return void(n&&n({id:Number(s),guid:o,src:a},t));const i={"x-videopress-upload-key-token":"token","x-videopress-upload-key":"key"},c={};Object.keys(i).forEach((function(e){const t=r.getHeader(e);t&&(c[i[e]]=t)})),c.key&&c.token&&(l[c.key]=c.token)},onBeforeRequest:function(e){const t=e._method;if(["HEAD","OPTIONS"].indexOf(t)>=0&&(e._method="GET",e.setHeader("X-HTTP-Method-Override",t)),["DELETE","PUT","PATCH"].indexOf(t)>=0&&(e._method="POST",e.setHeader("X-HTTP-Method-Override",t)),e._xhr.open(e._method,e._url,!0),Object.keys(e._headers).map((function(t){e.setHeader(t,e._headers[t])})),"POST"===t){if(!s.token)throw"should never happen";e.setHeader("x-videopress-upload-token",s.token)}if(["OPTIONS","GET","HEAD","DELETE","PUT","PATCH"].indexOf(t)>=0){const r=new URL(e._url).pathname.split("/"),n=r[r.length-1];if(l[n])e.setHeader("x-videopress-upload-token",l[n]);else if("HEAD"===t)return c().then((t=>(l[n]=t.token,e.setHeader("x-videopress-upload-token",t.token),e)))}return Promise.resolve(e)}});return a.findPreviousUploads().then((function(e){e.length&&a.resumeFromPreviousUpload(e[0]),a.start()})),a})({file:e,onProgress:r,onSuccess:n,onError:t,data:o}),o,u]}},3028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s,p:()=>o});var n=r(6483);const o=(e,t)=>{let{autoplay:r,controls:o,loop:s,muted:a,playsinline:i,poster:l,preload:c,seekbarColor:u,seekbarPlayedColor:p,seekbarLoadingColor:d,useAverageColor:f}=t;if(!e)return null;const h={resizeToParent:!0,cover:!0,...r&&{autoPlay:!0},...!o&&{controls:!1},...s&&{loop:!0},...a&&{muted:!0,persistVolume:!1},...i&&{playsinline:!0},...l&&{posterUrl:l},..."none"!==c&&{preloadContent:c},...""!==u&&{sbc:u},...""!==p&&{sbpc:p},...""!==d&&{sblc:d},...f&&{useAverageColor:!0}};return(0,n.addQueryArgs)(`https://videopress.com/v/${e}`,h)},s=e=>{var t;if(!e)return null;const r=e.match(/^https?:\/\/(?<host>video(?:\.word)?press\.com)\/(?:v|embed)\/(?<guid>[a-zA-Z\d]{8})/);return null!=r&&null!==(t=r.groups)&&void 0!==t&&t.guid?r.groups.guid:null}},3427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(5908),o=r(9106),s=r(5016),a=r(1662);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}var u=function(){function e(t){i(this,e),this._file=t,this.size=t.size}return c(e,[{key:"slice",value:function(e,t){if((0,s.Z)())return(0,a.Z)(this._file.slice(e,t));var r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}]),e}(),p=function(){function e(t,r){i(this,e),this._chunkSize=r,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return c(e,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+d(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(e,t),s=null==o&&this._done;return Promise.resolve({value:o,done:s})}return this._reader.read().then((function(n){var o=n.value;return n.done?r._done=!0:void 0===r._buffer?r._buffer=o:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===d(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function d(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var f=function(){function e(){i(this,e)}return c(e,[{key:"openFile",value:function(e,t){return(0,n.Z)()&&e&&void 0!==e.uri?(0,o.Z)(e.uri).then((function(e){return new u(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new u(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new p(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}()},1264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5908);function o(e,t){return(0,n.Z)()?Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}},6940:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}r.d(t,{Z:()=>a});var a=function(){function e(){n(this,e)}return s(e,[{key:"createRequest",value:function(e,t){return new i(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),i=function(){function e(t,r){n(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return s(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,n){e._xhr.onload=function(){r(new l(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),l=function(){function e(t){n(this,e),this._xhr=t}return s(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}()},9537:(e,t,r)=>{"use strict";r.d(t,{gq:()=>k});var n=r(3620),o=r(5799),s=r(5866),a=r(6940),i=r(3427),l=r(1264);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=g({},n.Z.defaultOptions,{httpStack:new a.Z,fileReader:new i.Z,urlStorage:s.H?new s.n:new o.Z,fingerprint:l.Z}),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,r,o,s,a=(t=i,function(){var e,r=v(t);if(h()){var n=v(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,i),t=g({},b,{},t),a.call(this,e,t)}return r=i,s=[{key:"terminate",value:function(e,t,r){return t=g({},b,{},t),n.Z.terminate(e,t,r)}}],(o=null)&&p(r.prototype,o),s&&p(r,s),i}(n.Z),w=window,_=w.XMLHttpRequest,C=w.Blob;_&&C&&C.prototype.slice},5016:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},5908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},1662:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(e){r(e)},n.readAsArrayBuffer(e)}))}r.d(t,{Z:()=>n})},9106:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(e)},n.onerror=function(e){r(e)},n.open("GET",e),n.send()}))}r.d(t,{Z:()=>n})},5866:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{H:()=>a,n:()=>i});var o=!1;try{o="localStorage"in window;var s="tusSupport";localStorage.setItem(s,localStorage.getItem(s))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;o=!1}var a=o,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,r=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(e){}}return t}}],r&&n(t.prototype,r),o&&n(t,o),e}()},6971:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},a(e)}function i(e,t,r){return i=l()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o},i.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}r.d(t,{Z:()=>p});const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,e);var t,r=(t=n,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function n(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(o(this,n),(t=r.call(this,e)).originalRequest=a,t.originalResponse=i,t.causingError=s,null!=s&&(e+=", caused by ".concat(s.toString())),null!=a){var l=a.getHeader("X-Request-ID")||"n/a",c=a.getMethod(),u=a.getURL(),p=i?i.getStatus():"n/a",d=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(u,", response code: ").concat(p,", response text: ").concat(d,", request id: ").concat(l,")")}return t.message=e,t}return n}(a(Error))},1336:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=!1;function o(e){n&&console.log(e)}},5799:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{Z:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&n(t.prototype,r),o&&n(t,o),e}()},3620:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(4097),o=r(1294),s=r.n(o),a=r(6971),i=r(1336),l=r(8184);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},h=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,r,n;return t=e,r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var r=this.options.retryDelays;null==r||"[object Array]"===Object.prototype.toString.call(r)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(r){return null==r?(0,i.c)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,i.c)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,r=this._size=this._source.size,n=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=function(e,t,r){for(var n=Math.floor(e/t),o=[],s=0;s<t;s++)o.push({start:n*s,end:n*(s+1)});return o[t-1].end=e,r&&o.forEach((function(e,t){e.uploadUrl=r[t]||null})),o}(this._source.size,o,this._parallelUploadUrls);this._parallelUploadUrls=new Array(s.length);var a,l=s.map((function(o,a){var i=0;return t._source.slice(o.start,o.end).then((function(l){var c=l.value;return new Promise((function(l,p){var d=u({},t.options,{uploadUrl:o.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:u({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:l,onError:p,onProgress:function(e){n=n-i+e,i=e,t._emitProgress(n,r)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[a]=f.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===s.length&&t._saveUploadInUrlStorage()}}),f=new e(c,d);f.start(),t._parallelUploads.push(f)}))}))}));Promise.all(l).then((function(){(a=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=v(t.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),t._sendRequest(a,null)})).then((function(e){if(m(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=k(t.options.endpoint,r),(0,i.c)("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(a,e,"tus: invalid or missing Location header")}else t._emitHttpError(a,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?((0,i.c)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,i.c)("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,i.c)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var r=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new a.Z(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),b(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=v(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then((function(r){if(m(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=k(e.options.endpoint,n),(0,i.c)("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var n=r.getStatus();if(!m(n,200))return m(n,400)&&e._removeFromUrlStorage(),423===n?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(r.getHeader("Upload-Offset"),10);if(isNaN(o))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var s=parseInt(r.getHeader("Upload-Length"),10);if(!isNaN(s)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),o===s)return e._emitProgress(s,s),void e._emitSuccess();e._offset=o,e._performUpload()}else e._emitHttpError(t,r,"tus: invalid or missing length value")}})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(r){m(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")})).catch((function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then((function(r){var n=r.value,o=r.done;return t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(n&&n.size?n.size:0),e.setHeader("Upload-Length",t._size)),null===n?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,n))}))}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=g(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y(e,t,this.options)}}],n=[{key:"terminate",value:function(t,r){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===r&&(r={});var n=g("DELETE",t,r);return y(n,null,r).then((function(e){if(204!==e.getStatus())throw new a.Z("tus: unexpected response while terminating upload",null,n,e)})).catch((function(o){if(o instanceof a.Z||(o=new a.Z("tus: failed to terminate upload",o,n,null)),!b(o,0,r))throw o;var s=r.retryDelays[0],i=r.retryDelays.slice(1),l=u({},r,{retryDelays:i});return new Promise((function(e){return setTimeout(e,s)})).then((function(){return e.terminate(t,l)}))}))}}],r&&d(t.prototype,r),n&&d(t,n),e}();function v(e){var t=[];for(var r in e)t.push("".concat(r," ").concat(n.Base64.encode(e[r])));return t.join(",")}function m(e,t){return e>=t&&e<t+100}function g(e,t,r){var n=r.httpStack.createRequest(e,t);n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};for(var s in o)n.setHeader(s,o[s]);if(r.addRequestId){var a=(0,l.Z)();n.setHeader("X-Request-ID",a)}return n}function y(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function b(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var n,o=e.originalResponse?e.originalResponse.getStatus():0;return(!m(o,400)||409===o||423===o)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function k(e,t){return new(s())(t,e).toString()}h.defaultOptions=f;const w=h},8184:(e,t,r)=>{"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}r.d(t,{Z:()=>n})},1294:(e,t,r)=>{"use strict";var n=r(2298),o=r(142),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(s,"")}var d=[["#","hash"],["?","query"],function(e,t){return v(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,r=("undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(e=e||r);if("blob:"===e.protocol)n=new g(unescape(e.pathname),{});else if("string"===o)for(t in n=new g(e,{}),f)delete n[t];else if("object"===o){for(t in e)t in f||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=i.test(e.href))}return n}function v(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=p(e)).replace(a,""),t=t||{};var r,n=c.exec(e),o=n[1]?n[1].toLowerCase():"",s=!!n[2],i=!!n[3],l=0;return s?i?(r=n[2]+n[3]+n[4],l=n[2].length+n[3].length):(r=n[2]+n[4],l=n[2].length):i?(r=n[3]+n[4],l=n[3].length):r=n[4],"file:"===o?l>=2&&(r=r.slice(2)):v(o)?r=n[4]:o?s&&(r=r.slice(2)):l>=2&&v(t.protocol)&&(r=n[4]),{protocol:o,slashes:s||v(o),slashesCount:l,rest:r}}function g(e,t,r){if(e=(e=p(e)).replace(a,""),!(this instanceof g))return new g(e,t,r);var s,i,l,c,f,y,b=d.slice(),k=typeof t,w=this,_=0;for("object"!==k&&"string"!==k&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),s=!(i=m(e||"",t=h(t))).protocol&&!i.slashes,w.slashes=i.slashes||s&&t.slashes,w.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||u.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!v(w.protocol)))&&(b[3]=[/(.*)/,"pathname"]);_<b.length;_++)"function"!=typeof(c=b[_])?(l=c[0],y=c[1],l!=l?w[y]=e:"string"==typeof l?~(f="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof c[2]?(w[y]=e.slice(0,f),e=e.slice(f+c[2])):(w[y]=e.slice(f),e=e.slice(0,f))):(f=l.exec(e))&&(w[y]=f[1],e=e.slice(0,f.index)),w[y]=w[y]||s&&c[3]&&t[y]||"",c[4]&&(w[y]=w[y].toLowerCase())):e=c(e,w);r&&(w.query=r(w.query)),s&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],s=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(s=!0),r.splice(n,1),a--);return s&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&v(w.protocol)&&(w.pathname="/"+w.pathname),n(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&v(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,r){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),s[e]=t;break;case"port":s[e]=t,n(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,l.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";s[e]=t.charAt(0)!==a?a+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(s.username=t.slice(0,i),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(i+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<d.length;c++){var u=d[c];u[4]&&(s[u[1]]=s[u[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&v(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var a=s+(r.protocol&&r.slashes||v(r.protocol)?"//":"");return r.username?(a+=r.username,r.password&&(a+=":"+r.password),a+="@"):r.password?(a+=":"+r.password,a+="@"):"file:"!==r.protocol&&v(r.protocol)&&!n&&"/"!==r.pathname&&(a+="@"),(":"===n[n.length-1]||l.test(r.hostname)&&!r.port)&&(n+=":"),a+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(a+=r.hash),a}},g.extractProtocol=m,g.location=h,g.trimLeft=p,g.qs=o,e.exports=g},9196:e=>{"use strict";e.exports=window.React},6989:e=>{"use strict";e.exports=window.wp.apiFetch},2175:e=>{"use strict";e.exports=window.wp.blockEditor},4981:e=>{"use strict";e.exports=window.wp.blocks},5609:e=>{"use strict";e.exports=window.wp.components},4333:e=>{"use strict";e.exports=window.wp.compose},7798:e=>{"use strict";e.exports=window.wp.coreData},9818:e=>{"use strict";e.exports=window.wp.data},7701:e=>{"use strict";e.exports=window.wp.domReady},9307:e=>{"use strict";e.exports=window.wp.element},1975:e=>{"use strict";e.exports=window.wp.escapeHtml},2694:e=>{"use strict";e.exports=window.wp.hooks},5736:e=>{"use strict";e.exports=window.wp.i18n},444:e=>{"use strict";e.exports=window.wp.primitives},6483:e=>{"use strict";e.exports=window.wp.url},17:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},2674:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4205:e=>{"use strict";e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"videopress/video","version":"0.1.0","title":"VideoPress","category":"media","icon":"smiley","description":"Embed a video from your media library or upload a new one with VideoPress.","supports":{"align":true},"attributes":{"autoplay":{"type":"boolean"},"caption":{"type":"string","source":"html","selector":"figcaption"},"controls":{"type":"boolean","default":true},"loop":{"type":"boolean"},"maxWidth":{"type":"string","default":"100%"},"muted":{"type":"boolean"},"playsinline":{"type":"boolean"},"preload":{"type":"string","default":"metadata"},"seekbarPlayedColor":{"type":"string","default":""},"seekbarLoadingColor":{"type":"string","default":""},"seekbarColor":{"type":"string","default":""},"useAverageColor":{"type":"boolean","default":true},"id":{"type":"number"},"guid":{"type":"string"},"src":{"type":"string"},"cacheHtml":{"type":"string","default":""},"poster":{"type":"string"},"videoRatio":{"type":"number"}},"textdomain":"jetpack-videopress","editorScript":"file:../../../../../build/block-editor/index.js","editorStyle":"file:../../../../../build/block-editor/index.css","style":"file:../../../../../build/block-editor/style-index.css","viewScript":"file:../../../../../build/block-editor/view.js"}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(4470),r(9437)})()})();